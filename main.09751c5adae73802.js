"use strict";var xW=Object.defineProperty,RW=Object.defineProperties,MW=Object.getOwnPropertyDescriptors,JF=Object.getOwnPropertySymbols,NW=Object.prototype.hasOwnProperty,PW=Object.prototype.propertyIsEnumerable,XF=(Qe,ve,L)=>ve in Qe?xW(Qe,ve,{enumerable:!0,configurable:!0,writable:!0,value:L}):Qe[ve]=L,eL=(Qe,ve)=>{for(var L in ve||(ve={}))NW.call(ve,L)&&XF(Qe,L,ve[L]);if(JF)for(var L of JF(ve))PW.call(ve,L)&&XF(Qe,L,ve[L]);return Qe},tL=(Qe,ve)=>RW(Qe,MW(ve));(self.webpackChunkScadenzarioAngular=self.webpackChunkScadenzarioAngular||[]).push([[179],{2011:(Qe,ve,L)=>{L.d(ve,{Dh:()=>ue,GT:()=>me,cc:()=>Re,hO:()=>$e,on:()=>W,pX:()=>ie,xv:()=>pe});var m=L(5e3),ee=L(127),V=L(5813);Qe=L.hmd(Qe);const ce=["ngOnDestroy"],ie=(De,qe,Ze,Se={})=>new Proxy(De,{get:(Ee,Ie)=>Ze.runOutsideAngular(()=>{var Ue;if(De[Ie])return(null===(Ue=null==Se?void 0:Se.spy)||void 0===Ue?void 0:Ue.get)&&Se.spy.get(Ie,De[Ie]),De[Ie];if(ce.indexOf(Ie)>-1)return()=>{};const Be=qe.toPromise().then(K=>{const we=K&&K[Ie];return"function"==typeof we?we.bind(K):we&&we.then?we.then(J=>Ze.run(()=>J)):Ze.run(()=>we)});return new Proxy(()=>{},{get:(K,we)=>Be[we],apply:(K,we,J)=>Be.then(se=>{var te;const _e=se&&se(...J);return(null===(te=null==Se?void 0:Se.spy)||void 0===te?void 0:te.apply)&&Se.spy.apply(Ie,J,_e),_e})})})}),me=(De,qe)=>{qe.forEach(Ze=>{Object.getOwnPropertyNames(Ze.prototype||Ze).forEach(Se=>{Object.defineProperty(De.prototype,Se,Object.getOwnPropertyDescriptor(Ze.prototype||Ze,Se))})})};class de{constructor(qe){return qe}}const ue=new m.OlP("angularfire2.app.options"),pe=new m.OlP("angularfire2.app.name");function W(De,qe,Ze){const Ee="object"==typeof Ze&&Ze||{};Ee.name=Ee.name||"string"==typeof Ze&&Ze||"[DEFAULT]";const Ue=ee.Z.apps.filter(Be=>Be&&Be.name===Ee.name)[0]||qe.runOutsideAngular(()=>ee.Z.initializeApp(De,Ee));try{JSON.stringify(De)!==JSON.stringify(Ue.options)&&z("error",`${Ue.name} Firebase App already initialized with different options${Qe.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Be){}return new de(Ue)}const z=(De,...qe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[De](...qe)},re={provide:de,useFactory:W,deps:[ue,m.R0b,[new m.FiY,pe]]};let $e=(()=>{class De{constructor(Ze){ee.Z.registerVersion("angularfire",V.q4.full,"core"),ee.Z.registerVersion("angularfire",V.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,Ze.toString())}static initializeApp(Ze,Se){return{ngModule:De,providers:[{provide:ue,useValue:Ze},{provide:pe,useValue:Se}]}}}return De.\u0275fac=function(Ze){return new(Ze||De)(m.LFG(m.Lbi))},De.\u0275mod=m.oAB({type:De}),De.\u0275inj=m.cJS({providers:[re]}),De})();function Re(De,qe,Ze,Se,Ee){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===De)||[];if(Ie)return function Ne(De,qe){try{return De.toString()===qe.toString()}catch(Ze){return De===qe}}(Ee,Ue)||(ge("error",`${qe} was already initialized on the ${Ze} Firebase App with different settings.${Ve?" You may need to reload as Firebase is not HMR aware.":""}`),ge("warn",{is:Ee,was:Ue})),Ie;{const Be=Se();return globalThis.\u0275AngularfireInstanceCache.push([De,Be,Ee]),Be}}const Ve=!!Qe.hot,ge=(De,...qe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[De](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Qe,ve,L)=>{L.d(ve,{q4:()=>hf,iC:()=>gc,fc:()=>ff,HU:()=>uu,vb:()=>au,JM:()=>Ut});var m=L(5e3),ee=L(5867),V=L(5861),ce=L(9681),ie=L(2090),me=L(4859),de=L(1877),ue=L(8766);const pe="@firebase/installations",W="0.5.12",re=`w:${W}`,$e="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ze(b){return b instanceof ie.ZR&&b.code.includes("request-failed")}function Se({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ee(b){return{token:b.token,requestStatus:2,expiresIn:se(b.expiresIn),creationTime:Date.now()}}function Ie(b,T){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,V.Z)(function*(b,T){const B=(yield T.json()).error;return qe.create("request-failed",{requestName:b,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Be({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function K(b,{refreshToken:T}){const N=Be(b);return N.append("Authorization",function te(b){return`${$e} ${b}`}(T)),N}function we(b){return J.apply(this,arguments)}function J(){return(J=(0,V.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function se(b){return Number(b.replace("s","000"))}function _e(b,T){return le.apply(this,arguments)}function le(){return(le=(0,V.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:N}){const B=Se(b),k=Be(b),ne=T.getImmediate({optional:!0});if(ne){const yt=yield ne.getHeartbeatsHeader();yt&&k.append("x-firebase-client",yt)}const R={method:"POST",headers:k,body:JSON.stringify({fid:N,authVersion:$e,appId:b.appId,sdkVersion:re})},Xe=yield we(()=>fetch(B,R));if(Xe.ok){const yt=yield Xe.json();return{fid:yt.fid||N,registrationStatus:2,refreshToken:yt.refreshToken,authToken:Ee(yt.authToken)}}throw yield Ie("Create Installation",Xe)})).apply(this,arguments)}function Oe(b){return new Promise(T=>{setTimeout(T,b)})}const Ht=/^[cdef][\w-]{21}$/;function Ye(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const N=function nn(b){return function lt(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Ht.test(N)?N:""}catch(b){return""}}function xn(b){return`${b.appName}!${b.appId}`}const rn=new Map;function Qt(b,T){const N=xn(b);Lt(N,T),function Ai(b,T){const N=function wr(){return!ii&&"BroadcastChannel"in self&&(ii=new BroadcastChannel("[Firebase] FID Change"),ii.onmessage=b=>{Lt(b.data.key,b.data.fid)}),ii}();N&&N.postMessage({key:b,fid:T}),function $r(){0===rn.size&&ii&&(ii.close(),ii=null)}()}(N,T)}function Lt(b,T){const N=rn.get(b);if(N)for(const B of N)B(T)}let ii=null;const Gr="firebase-installations-store";let _i=null;function _t(){return _i||(_i=(0,ue.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Gr)}})),_i}function Wr(b,T){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,V.Z)(function*(b,T){const N=xn(b),k=(yield _t()).transaction(Gr,"readwrite"),ne=k.objectStore(Gr),be=yield ne.get(N);return yield ne.put(T,N),yield k.done,(!be||be.fid!==T.fid)&&Qt(b,T.fid),T})).apply(this,arguments)}function Kn(b){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,V.Z)(function*(b){const T=xn(b),B=(yield _t()).transaction(Gr,"readwrite");yield B.objectStore(Gr).delete(T),yield B.done})).apply(this,arguments)}function Mi(b,T){return bn.apply(this,arguments)}function bn(){return(bn=(0,V.Z)(function*(b,T){const N=xn(b),k=(yield _t()).transaction(Gr,"readwrite"),ne=k.objectStore(Gr),be=yield ne.get(N),R=T(be);return void 0===R?yield ne.delete(N):yield ne.put(R,N),yield k.done,R&&(!be||be.fid!==R.fid)&&Qt(b,R.fid),R})).apply(this,arguments)}function Un(b){return si.apply(this,arguments)}function si(){return(si=(0,V.Z)(function*(b){let T;const N=yield Mi(b.appConfig,B=>{const k=uo(B),ne=$t(b,k);return T=ne.registrationPromise,ne.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function uo(b){return Fs(b||{fid:Ye(),registrationStatus:0})}function $t(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(qe.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},B=function it(b,T){return wt.apply(this,arguments)}(b,N);return{installationEntry:N,registrationPromise:B}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Er(b)}:{installationEntry:T}}function wt(){return(wt=(0,V.Z)(function*(b,T){try{const N=yield _e(b,T);return Wr(b.appConfig,N)}catch(N){throw Ze(N)&&409===N.customData.serverCode?yield Kn(b.appConfig):yield Wr(b.appConfig,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Er(b){return oi.apply(this,arguments)}function oi(){return(oi=(0,V.Z)(function*(b){let T=yield Vt(b.appConfig);for(;1===T.registrationStatus;)yield Oe(100),T=yield Vt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield Un(b);return B||N}return T})).apply(this,arguments)}function Vt(b){return Mi(b,T=>{if(!T)throw qe.create("installation-not-found");return Fs(T)})}function Fs(b){return function Cr(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Mr(b,T){return ct.apply(this,arguments)}function ct(){return(ct=(0,V.Z)(function*({appConfig:b,heartbeatServiceProvider:T},N){const B=Ls(b,N),k=K(b,N),ne=T.getImmediate({optional:!0});if(ne){const yt=yield ne.getHeartbeatsHeader();yt&&k.append("x-firebase-client",yt)}const R={method:"POST",headers:k,body:JSON.stringify({installation:{sdkVersion:re,appId:b.appId}})},Xe=yield we(()=>fetch(B,R));if(Xe.ok)return Ee(yield Xe.json());throw yield Ie("Generate Auth Token",Xe)})).apply(this,arguments)}function Ls(b,{fid:T}){return`${Se(b)}/${T}/authTokens:generate`}function $(b){return Y.apply(this,arguments)}function Y(){return(Y=(0,V.Z)(function*(b,T=!1){let N;const B=yield Mi(b.appConfig,ne=>{if(!ot(ne))throw qe.create("not-registered");const be=ne.authToken;if(!T&&sn(be))return ne;if(1===be.requestStatus)return N=H(b,T),ne;{if(!navigator.onLine)throw qe.create("app-offline");const R=sr(ne);return N=xe(b,R),R}});return N?yield N:B.authToken})).apply(this,arguments)}function H(b,T){return q.apply(this,arguments)}function q(){return(q=(0,V.Z)(function*(b,T){let N=yield Z(b.appConfig);for(;1===N.authToken.requestStatus;)yield Oe(100),N=yield Z(b.appConfig);const B=N.authToken;return 0===B.requestStatus?$(b,T):B})).apply(this,arguments)}function Z(b){return Mi(b,T=>{if(!ot(T))throw qe.create("not-registered");return function Nt(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function xe(b,T){return Le.apply(this,arguments)}function Le(){return(Le=(0,V.Z)(function*(b,T){try{const N=yield Mr(b,T),B=Object.assign(Object.assign({},T),{authToken:N});return yield Wr(b.appConfig,B),N}catch(N){if(!Ze(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Wr(b.appConfig,B)}else yield Kn(b.appConfig);throw N}})).apply(this,arguments)}function ot(b){return void 0!==b&&2===b.registrationStatus}function sn(b){return 2===b.requestStatus&&!function Kt(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function sr(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function Ni(){return(Ni=(0,V.Z)(function*(b){const T=b,{installationEntry:N,registrationPromise:B}=yield Un(T);return B?B.catch(console.error):$(T).catch(console.error),N.fid})).apply(this,arguments)}function ka(){return(ka=(0,V.Z)(function*(b,T=!1){const N=b;return yield Zn(N),(yield $(N,T)).token})).apply(this,arguments)}function Zn(b){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,V.Z)(function*(b){const{registrationPromise:T}=yield Un(b);T&&(yield T)})).apply(this,arguments)}function Ho(b){return qe.create("missing-app-config-values",{valueName:b})}const zr="installations",at=b=>{const T=b.getProvider("app").getImmediate(),N=function fr(b){if(!b||!b.options)throw Ho("App Configuration");if(!b.name)throw Ho("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!b.options[N])throw Ho(N);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:N,heartbeatServiceProvider:(0,ce._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},on=b=>{const T=b.getProvider("app").getImmediate(),N=(0,ce._getProvider)(T,zr).getImmediate();return{getId:()=>function ai(b){return Ni.apply(this,arguments)}(N),getToken:k=>function jo(b){return ka.apply(this,arguments)}(N,k)}};(function Kr(){(0,ce._registerComponent)(new me.wA(zr,at,"PUBLIC")),(0,ce._registerComponent)(new me.wA("installations-internal",on,"PRIVATE"))})(),(0,ce.registerVersion)(pe,W),(0,ce.registerVersion)(pe,W,"esm2017");const Pi="@firebase/remote-config",Mn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Pg{constructor(T,N,B,k){this.client=T,this.storage=N,this.storageCache=B,this.logger=k}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,k=B<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${k}.`),k}fetch(T){var N=this;return(0,V.Z)(function*(){const[B,k]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(k&&N.isCachedDataFresh(T.cacheMaxAgeMillis,B))return k;T.eTag=k&&k.eTag;const ne=yield N.client.fetch(T),be=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ne.status&&be.push(N.storage.setLastSuccessfulFetchResponse(ne)),yield Promise.all(be),ne})()}}function cd(b=navigator){return b.languages&&b.languages[0]||b.language}class br{constructor(T,N,B,k,ne,be){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=B,this.projectId=k,this.apiKey=ne,this.appId=be}fetch(T){var N=this;return(0,V.Z)(function*(){var B,k,ne;const[be,R]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,It={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},ft={sdk_version:N.sdkVersion,app_instance_id:be,app_instance_id_token:R,app_id:N.appId,language_code:cd()},Rt={method:"POST",headers:It,body:JSON.stringify(ft)},yn=fetch(yt,Rt),bs=new Promise((di,Qi)=>{T.signal.addEventListener(()=>{const Nd=new Error("The operation was aborted.");Nd.name="AbortError",Qi(Nd)})});let Zi;try{yield Promise.race([yn,bs]),Zi=yield yn}catch(di){let Qi="fetch-client-network";throw"AbortError"===(null===(B=di)||void 0===B?void 0:B.name)&&(Qi="fetch-timeout"),Mn.create(Qi,{originalErrorMessage:null===(k=di)||void 0===k?void 0:k.message})}let Yi=Zi.status;const Md=Zi.headers.get("ETag")||void 0;let nl,Qs;if(200===Zi.status){let di;try{di=yield Zi.json()}catch(Qi){throw Mn.create("fetch-client-parse",{originalErrorMessage:null===(ne=Qi)||void 0===ne?void 0:ne.message})}nl=di.entries,Qs=di.state}if("INSTANCE_STATE_UNSPECIFIED"===Qs?Yi=500:"NO_CHANGE"===Qs?Yi=304:("NO_TEMPLATE"===Qs||"EMPTY_CONFIG"===Qs)&&(nl={}),304!==Yi&&200!==Yi)throw Mn.create("fetch-status",{httpStatus:Yi});return{status:Yi,eTag:Md,config:nl}})()}}class Og{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,V.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,B)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:B}){var k=this;return(0,V.Z)(function*(){yield function js(b,T){return new Promise((N,B)=>{const k=Math.max(T-Date.now(),0),ne=setTimeout(N,k);b.addEventListener(()=>{clearTimeout(ne),B(Mn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const ne=yield k.client.fetch(T);return yield k.storage.deleteThrottleMetadata(),ne}catch(ne){if(!function dd(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(ne))throw ne;const be={throttleEndTimeMillis:Date.now()+(0,ie.$s)(B),backoffCount:B+1};return yield k.storage.setThrottleMetadata(be),k.attemptFetch(T,be)}})()}}class hd{constructor(T,N,B,k,ne){this.app=T,this._client=N,this._storageCache=B,this._storage=k,this._logger=ne,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Zl(b,T){var N;const B=b.target.error||void 0;return Mn.create(T,{originalErrorMessage:B&&(null===(N=B)||void 0===N?void 0:N.message)})}const Hs="app_namespace_store";class Vg{constructor(T,N,B,k=function Lg(){return new Promise((b,T)=>{var N;try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=k=>{T(Zl(k,"storage-open"))},B.onsuccess=k=>{b(k.target.result)},B.onupgradeneeded=k=>{0===k.oldVersion&&k.target.result.createObjectStore(Hs,{keyPath:"compositeKey"})}}catch(B){T(Mn.create("storage-open",{originalErrorMessage:null===(N=B)||void 0===N?void 0:N.message}))}})}()){this.appId=T,this.appName=N,this.namespace=B,this.openDbPromise=k}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,V.Z)(function*(){const B=yield N.openDbPromise;return new Promise((k,ne)=>{var be;const Xe=B.transaction([Hs],"readonly").objectStore(Hs),yt=N.createCompositeKey(T);try{const It=Xe.get(yt);It.onerror=ft=>{ne(Zl(ft,"storage-get"))},It.onsuccess=ft=>{const Rt=ft.target.result;k(Rt?Rt.value:void 0)}}catch(It){ne(Mn.create("storage-get",{originalErrorMessage:null===(be=It)||void 0===be?void 0:be.message}))}})})()}set(T,N){var B=this;return(0,V.Z)(function*(){const k=yield B.openDbPromise;return new Promise((ne,be)=>{var R;const yt=k.transaction([Hs],"readwrite").objectStore(Hs),It=B.createCompositeKey(T);try{const ft=yt.put({compositeKey:It,value:N});ft.onerror=Rt=>{be(Zl(Rt,"storage-set"))},ft.onsuccess=()=>{ne()}}catch(ft){be(Mn.create("storage-set",{originalErrorMessage:null===(R=ft)||void 0===R?void 0:R.message}))}})})()}delete(T){var N=this;return(0,V.Z)(function*(){const B=yield N.openDbPromise;return new Promise((k,ne)=>{var be;const Xe=B.transaction([Hs],"readwrite").objectStore(Hs),yt=N.createCompositeKey(T);try{const It=Xe.delete(yt);It.onerror=ft=>{ne(Zl(ft,"storage-delete"))},It.onsuccess=()=>{k()}}catch(It){ne(Mn.create("storage-delete",{originalErrorMessage:null===(be=It)||void 0===be?void 0:be.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class pd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,V.Z)(function*(){const N=T.storage.getLastFetchStatus(),B=T.storage.getLastSuccessfulFetchTimestampMillis(),k=T.storage.getActiveConfig(),ne=yield N;ne&&(T.lastFetchStatus=ne);const be=yield B;be&&(T.lastSuccessfulFetchTimestampMillis=be);const R=yield k;R&&(T.activeConfig=R)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Vu(){return gd.apply(this,arguments)}function gd(){return(gd=(0,V.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Go(){(0,ce._registerComponent)(new me.wA("remote-config",function b(T,{instanceIdentifier:N}){const B=T.getProvider("app").getImmediate(),k=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Mn.create("registration-window");if(!(0,ie.hl)())throw Mn.create("indexed-db-unavailable");const{projectId:ne,apiKey:be,appId:R}=B.options;if(!ne)throw Mn.create("registration-project-id");if(!be)throw Mn.create("registration-api-key");if(!R)throw Mn.create("registration-app-id");const Xe=new Vg(R,B.name,N=N||"firebase"),yt=new pd(Xe),It=new de.Yd(Pi);It.logLevel=de.in.ERROR;const ft=new br(k,ce.SDK_VERSION,N,ne,be,R),Rt=new Og(ft,Xe),yn=new Pg(Rt,Xe,yt,It),bs=new hd(B,yn,yt,Xe,It);return function ln(b){const T=(0,ie.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(bs),bs},"PUBLIC").setMultipleInstances(!0)),(0,ce.registerVersion)(Pi,"0.3.11"),(0,ce.registerVersion)(Pi,"0.3.11","esm2017")}();const md="/firebase-messaging-sw.js",Dr="/firebase-cloud-messaging-push-scope",ho="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wo="google.c.a.c_id",_d="google.c.a.c_l",ef="google.c.a.ts",yd="google.c.a.e";var qo=(()=>{return(b=qo||(qo={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",qo;var b})();function Pr(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function vd(b){const N=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),k=new Uint8Array(B.length);for(let ne=0;ne<B.length;++ne)k[ne]=B.charCodeAt(ne);return k}const Or="fcm_token_details_db",ui="fcm_token_object_Store";function Yl(b){return wd.apply(this,arguments)}function wd(){return wd=(0,V.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ne=>ne.name).includes(Or))return null;let T=null;return(yield(0,ue.X3)(Or,5,{upgrade:(B=(0,V.Z)(function*(k,ne,be,R){var Xe;if(ne<2||!k.objectStoreNames.contains(ui))return;const yt=R.objectStore(ui),It=yield yt.index("fcmSenderId").get(b);if(yield yt.clear(),It)if(2===ne){const ft=It;if(!ft.auth||!ft.p256dh||!ft.endpoint)return;T={token:ft.fcmToken,createTime:null!==(Xe=ft.createTime)&&void 0!==Xe?Xe:Date.now(),subscriptionOptions:{auth:ft.auth,p256dh:ft.p256dh,endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:"string"==typeof ft.vapidKey?ft.vapidKey:Pr(ft.vapidKey)}}}else if(3===ne){const ft=It;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Pr(ft.auth),p256dh:Pr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Pr(ft.vapidKey)}}}else if(4===ne){const ft=It;T={token:ft.fcmToken,createTime:ft.createTime,subscriptionOptions:{auth:Pr(ft.auth),p256dh:Pr(ft.p256dh),endpoint:ft.endpoint,swScope:ft.swScope,vapidKey:Pr(ft.vapidKey)}}}}),function(ne,be,R,Xe){return B.apply(this,arguments)})})).close(),yield(0,ue.Lj)(Or),yield(0,ue.Lj)("fcm_vapid_details_db"),yield(0,ue.Lj)("undefined"),Ql(T)?T:null;var B}),wd.apply(this,arguments)}function Ql(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const Ui="firebase-messaging-store";let tf=null;function an(){return tf||(tf=(0,ue.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Ui)}})),tf}function Ua(b){return po.apply(this,arguments)}function po(){return(po=(0,V.Z)(function*(b){const T=pr(b),B=yield(yield an()).transaction(Ui).objectStore(Ui).get(T);if(B)return B;{const k=yield Yl(b.appConfig.senderId);if(k)return yield en(b,k),k}})).apply(this,arguments)}function en(b,T){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,V.Z)(function*(b,T){const N=pr(b),k=(yield an()).transaction(Ui,"readwrite");return yield k.objectStore(Ui).put(T,N),yield k.done,T})).apply(this,arguments)}function Uu(b){return $s.apply(this,arguments)}function $s(){return($s=(0,V.Z)(function*(b){const T=pr(b),B=(yield an()).transaction(Ui,"readwrite");yield B.objectStore(Ui).delete(T),yield B.done})).apply(this,arguments)}function pr({appConfig:b}){return b.appId}const wn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Bi(b,T){return gr.apply(this,arguments)}function gr(){return(gr=(0,V.Z)(function*(b,T){var N;const B=yield Zo(b),k=Yo(T),ne={method:"POST",headers:B,body:JSON.stringify(k)};let be;try{be=yield(yield fetch(ji(b.appConfig),ne)).json()}catch(R){throw wn.create("token-subscribe-failed",{errorInfo:null===(N=R)||void 0===N?void 0:N.toString()})}if(be.error)throw wn.create("token-subscribe-failed",{errorInfo:be.error.message});if(!be.token)throw wn.create("token-subscribe-no-token");return be.token})).apply(this,arguments)}function go(b,T){return ms.apply(this,arguments)}function ms(){return(ms=(0,V.Z)(function*(b,T){var N;const B=yield Zo(b),k=Yo(T.subscriptionOptions),ne={method:"PATCH",headers:B,body:JSON.stringify(k)};let be;try{be=yield(yield fetch(`${ji(b.appConfig)}/${T.token}`,ne)).json()}catch(R){throw wn.create("token-update-failed",{errorInfo:null===(N=R)||void 0===N?void 0:N.toString()})}if(be.error)throw wn.create("token-update-failed",{errorInfo:be.error.message});if(!be.token)throw wn.create("token-update-no-token");return be.token})).apply(this,arguments)}function ja(b,T){return vi.apply(this,arguments)}function vi(){return(vi=(0,V.Z)(function*(b,T){var N;const k={method:"DELETE",headers:yield Zo(b)};try{const be=yield(yield fetch(`${ji(b.appConfig)}/${T}`,k)).json();if(be.error)throw wn.create("token-unsubscribe-failed",{errorInfo:be.error.message})}catch(ne){throw wn.create("token-unsubscribe-failed",{errorInfo:null===(N=ne)||void 0===N?void 0:N.toString()})}})).apply(this,arguments)}function ji({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Zo(b){return pt.apply(this,arguments)}function pt(){return(pt=(0,V.Z)(function*({appConfig:b,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Yo({p256dh:b,auth:T,endpoint:N,vapidKey:B}){const k={web:{endpoint:N,auth:T,p256dh:b}};return B!==ho&&(k.web.applicationPubKey=B),k}const Bu=6048e5;function Ha(b){return ec.apply(this,arguments)}function ec(){return(ec=(0,V.Z)(function*(b){const T=yield _n(b.swRegistration,b.vapidKey),N={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Pr(T.getKey("auth")),p256dh:Pr(T.getKey("p256dh"))},B=yield Ua(b.firebaseDependencies);if(B){if(mo(B.subscriptionOptions,N))return Date.now()>=B.createTime+Bu?nc(b,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield ja(b.firebaseDependencies,B.token)}catch(k){console.warn(k)}return Pt(b.firebaseDependencies,N)}return Pt(b.firebaseDependencies,N)})).apply(this,arguments)}function $a(b){return tc.apply(this,arguments)}function tc(){return(tc=(0,V.Z)(function*(b){const T=yield Ua(b.firebaseDependencies);T&&(yield ja(b.firebaseDependencies,T.token),yield Uu(b.firebaseDependencies));const N=yield b.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function nc(b,T){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,V.Z)(function*(b,T){try{const N=yield go(b.firebaseDependencies,T),B=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield en(b.firebaseDependencies,B),N}catch(N){throw yield $a(b),N}})).apply(this,arguments)}function Pt(b,T){return ju.apply(this,arguments)}function ju(){return(ju=(0,V.Z)(function*(b,T){const B={token:yield Bi(b,T),createTime:Date.now(),subscriptionOptions:T};return yield en(b,B),B.token})).apply(this,arguments)}function _n(b,T){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,V.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:vd(T)})})).apply(this,arguments)}function mo(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function li(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function Ga(b,T){if(!T.notification)return;b.notification={};const N=T.notification.title;N&&(b.notification.title=N);const B=T.notification.body;B&&(b.notification.body=B);const k=T.notification.image;k&&(b.notification.image=k)}(T,b),function rc(b,T){!T.data||(b.data=T.data)}(T,b),function Ug(b,T){var N,B,k,ne,be;if(!T.fcmOptions&&!(null===(N=T.notification)||void 0===N?void 0:N.click_action))return;b.fcmOptions={};const R=null!==(k=null===(B=T.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==k?k:null===(ne=T.notification)||void 0===ne?void 0:ne.click_action;R&&(b.fcmOptions.link=R);const Xe=null===(be=T.fcmOptions)||void 0===be?void 0:be.analytics_label;Xe&&(b.fcmOptions.analyticsLabel=Xe)}(T,b),T}function Hu(b){return"object"==typeof b&&!!b&&Wo in b}function Wa(b,T){const N=[];for(let B=0;B<b.length;B++)N.push(b.charAt(B)),B<T.length&&N.push(T.charAt(B));return N.join("")}function Nn(b){return wn.create("missing-app-config-values",{valueName:b})}Wa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Wa("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _s{constructor(T,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const k=function $u(b){if(!b||!b.options)throw Nn("App Configuration Object");if(!b.name)throw Nn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=b;for(const B of T)if(!N[B])throw Nn(B);return{appName:b.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:k,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function qa(b){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,V.Z)(function*(b){var T;try{b.swRegistration=yield navigator.serviceWorker.register(md,{scope:Dr}),b.swRegistration.update().catch(()=>{})}catch(N){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null===(T=N)||void 0===T?void 0:T.message})}})).apply(this,arguments)}function wi(b,T){return ic.apply(this,arguments)}function ic(){return(ic=(0,V.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield qa(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function Gu(b,T){return sc.apply(this,arguments)}function sc(){return(sc=(0,V.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=ho)})).apply(this,arguments)}function za(){return(za=(0,V.Z)(function*(b,T){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw wn.create("permission-blocked");return yield Gu(b,null==T?void 0:T.vapidKey),yield wi(b,null==T?void 0:T.serviceWorkerRegistration),Ha(b)})).apply(this,arguments)}function Ka(b,T,N){return oc.apply(this,arguments)}function oc(){return(oc=(0,V.Z)(function*(b,T,N){const B=Za(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Wo],message_name:N[_d],message_time:N[ef],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Za(b){switch(b){case qo.NOTIFICATION_CLICKED:return"notification_open";case qo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ac(){return(ac=(0,V.Z)(function*(b,T){const N=T.data;if(!N.isFirebaseMessaging)return;b.onMessageHandler&&N.messageType===qo.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(li(N)):b.onMessageHandler.next(li(N)));const B=N.data;Hu(B)&&"1"===B[yd]&&(yield Ka(b,N.messageType,B))})).apply(this,arguments)}const Jo="@firebase/messaging",Ed=b=>{const T=new _s(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Bg(b,T){return ac.apply(this,arguments)}(T,N)),T},Xo=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:B=>function Wu(b,T){return za.apply(this,arguments)}(T,B)}};function ea(){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,V.Z)(function*(){try{yield(0,ie.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Cd(){(0,ce._registerComponent)(new me.wA("messaging",Ed,"PUBLIC")),(0,ce._registerComponent)(new me.wA("messaging-internal",Xo,"PRIVATE")),(0,ce.registerVersion)(Jo,"0.9.16"),(0,ce.registerVersion)(Jo,"0.9.16","esm2017")}();const Id="analytics",jg="firebase_id",ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ta="https://www.googletagmanager.com/gtag/js",ur=new de.Yd("@firebase/analytics");function sf(b){return Promise.all(b.map(T=>T.catch(N=>N)))}function _o(b,T){const N=document.createElement("script");N.src=`${ta}?l=${b}&id=${T}`,N.async=!0,document.head.appendChild(N)}function Dd(b,T,N,B,k,ne){return zu.apply(this,arguments)}function zu(){return(zu=(0,V.Z)(function*(b,T,N,B,k,ne){const be=B[k];try{if(be)yield T[be];else{const Xe=(yield sf(N)).find(yt=>yt.measurementId===k);Xe&&(yield T[Xe.appId])}}catch(R){ur.error(R)}b("config",k,ne)})).apply(this,arguments)}function Ku(b,T,N,B,k){return yo.apply(this,arguments)}function yo(){return(yo=(0,V.Z)(function*(b,T,N,B,k){try{let ne=[];if(k&&k.send_to){let be=k.send_to;Array.isArray(be)||(be=[be]);const R=yield sf(N);for(const Xe of be){const yt=R.find(ft=>ft.measurementId===Xe),It=yt&&T[yt.appId];if(!It){ne=[];break}ne.push(It)}}0===ne.length&&(ne=Object.values(T)),yield Promise.all(ne),b("event",B,k||{})}catch(ne){ur.error(ne)}})).apply(this,arguments)}function Qn(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(ta))return T;return null}const xt=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ja=new class cn{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function vo(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function fn(b){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,V.Z)(function*(b){var T;const{appId:N,apiKey:B}=b,k={method:"GET",headers:vo(B)},ne=ys.replace("{app-id}",N),be=yield fetch(ne,k);if(200!==be.status&&304!==be.status){let R="";try{const Xe=yield be.json();(null===(T=Xe.error)||void 0===T?void 0:T.message)&&(R=Xe.error.message)}catch(Xe){}throw xt.create("config-fetch-failed",{httpStatus:be.status,responseMessage:R})}return be.json()})).apply(this,arguments)}function Gt(b){return ht.apply(this,arguments)}function ht(){return(ht=(0,V.Z)(function*(b,T=Ja,N){const{appId:B,apiKey:k,measurementId:ne}=b.options;if(!B)throw xt.create("no-app-id");if(!k){if(ne)return{measurementId:ne,appId:B};throw xt.create("no-api-key")}const be=T.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},R=new af;return setTimeout((0,V.Z)(function*(){R.abort()}),void 0!==N?N:6e4),Ws({appId:B,apiKey:k,measurementId:ne},be,R,T)})).apply(this,arguments)}function Ws(b,T,N){return uc.apply(this,arguments)}function uc(){return(uc=(0,V.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:N},B,k=Ja){var ne,be;const{appId:R,measurementId:Xe}=b;try{yield ci(B,T)}catch(yt){if(Xe)return ur.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null===(ne=yt)||void 0===ne?void 0:ne.message}]`),{appId:R,measurementId:Xe};throw yt}try{const yt=yield fn(b);return k.deleteThrottleMetadata(R),yt}catch(yt){const It=yt;if(!Sd(It)){if(k.deleteThrottleMetadata(R),Xe)return ur.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Xe} provided in the "measurementId" field in the local Firebase config. [${null==It?void 0:It.message}]`),{appId:R,measurementId:Xe};throw yt}const ft=503===Number(null===(be=null==It?void 0:It.customData)||void 0===be?void 0:be.httpStatus)?(0,ie.$s)(N,k.intervalMillis,30):(0,ie.$s)(N,k.intervalMillis),Rt={throttleEndTimeMillis:Date.now()+ft,backoffCount:N+1};return k.setThrottleMetadata(R,Rt),ur.debug(`Calling attemptFetch again in ${ft} millis`),Ws(b,Rt,B,k)}})).apply(this,arguments)}function ci(b,T){return new Promise((N,B)=>{const k=Math.max(T-Date.now(),0),ne=setTimeout(N,k);b.addEventListener(()=>{clearTimeout(ne),B(xt.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Sd(b){if(!(b instanceof ie.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class af{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}let Zu,ru;function vs(){return(vs=(0,V.Z)(function*(b,T,N,B,k){if(k&&k.global)b("event",N,B);else{const ne=yield T;b("event",N,Object.assign(Object.assign({},B),{send_to:ne}))}})).apply(this,arguments)}function wo(b){ru=b}function gn(b){Zu=b}function Eo(){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,V.Z)(function*(){var b;if(!(0,ie.hl)())return ur.warn(xt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(T){return ur.warn(xt.create("indexeddb-unavailable",{errorInfo:null===(b=T)||void 0===b?void 0:b.toString()}).message),!1}return!0})).apply(this,arguments)}function iu(){return(iu=(0,V.Z)(function*(b,T,N,B,k,ne,be){var R;const Xe=Gt(b);Xe.then(yn=>{N[yn.measurementId]=yn.appId,b.options.measurementId&&yn.measurementId!==b.options.measurementId&&ur.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${yn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(yn=>ur.error(yn)),T.push(Xe);const yt=Eo().then(yn=>{if(yn)return B.getId()}),[It,ft]=yield Promise.all([Xe,yt]);Qn()||_o(ne,It.measurementId),ru&&(k("consent","default",ru),wo(void 0)),k("js",new Date);const Rt=null!==(R=null==be?void 0:be.config)&&void 0!==R?R:{};return Rt.origin="firebase",Rt.update=!0,null!=ft&&(Rt[jg]=ft),k("config",It.measurementId,Rt),Zu&&(k("set",Zu),gn(void 0)),It.measurementId})).apply(this,arguments)}class qs{constructor(T){this.app=T}_delete(){return delete Wi[this.app.options.appId],Promise.resolve()}}let Wi={},Co=[];const su={};let sa,ws,qi="dataLayer",bo=!1;function $g(b,T,N){!function $y(){const b=[];if((0,ie.ru)()&&b.push("This is a browser extension environment."),(0,ie.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((B,k)=>`(${k+1}) ${B}`).join(" "),N=xt.create("invalid-analytics-context",{errorInfo:T});ur.warn(N.message)}}();const B=b.options.appId;if(!B)throw xt.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw xt.create("no-api-key");ur.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Wi[B])throw xt.create("already-exists",{id:B});if(!bo){!function qu(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(qi);const{wrappedGtag:ne,gtagCore:be}=function Hg(b,T,N,B,k){let ne=function(...be){window[B].push(arguments)};return window[k]&&"function"==typeof window[k]&&(ne=window[k]),window[k]=function Td(b,T,N,B){function ne(){return(ne=(0,V.Z)(function*(be,R,Xe){try{"event"===be?yield Ku(b,T,N,R,Xe):"config"===be?yield Dd(b,T,N,B,R,Xe):"consent"===be?b("consent","update",Xe):b("set",R)}catch(yt){ur.error(yt)}})).apply(this,arguments)}return function k(be,R,Xe){return ne.apply(this,arguments)}}(ne,b,T,N),{gtagCore:ne,wrappedGtag:window[k]}}(Wi,Co,su,qi,"gtag");ws=ne,sa=be,bo=!0}return Wi[B]=function Gi(b,T,N,B,k,ne,be){return iu.apply(this,arguments)}(b,Co,su,T,sa,qi,N),new qs(b)}function Gg(){return cc.apply(this,arguments)}function cc(){return(cc=(0,V.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch(b){return!1}})).apply(this,arguments)}const dc="@firebase/analytics";!function qg(){(0,ce._registerComponent)(new me.wA(Id,(T,{options:N})=>$g(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ce._registerComponent)(new me.wA("analytics-internal",function b(T){try{const N=T.getProvider(Id).getImmediate();return{logEvent:(B,k,ne)=>function Wg(b,T,N,B){b=(0,ie.m9)(b),function Xa(b,T,N,B,k){return vs.apply(this,arguments)}(ws,Wi[b.app.options.appId],T,N,B).catch(k=>ur.error(k))}(N,B,k,ne)}}catch(N){throw xt.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ce.registerVersion)(dc,"0.8.0"),(0,ce.registerVersion)(dc,"0.8.0","esm2017")}();var Ad=L(4408),Hn=L(7565);const Es=new class Do extends Hn.v{}(class Ei extends Ad.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(T,N,B):T.flush(this)}});var Tn=L(4986),ou=L(8505),Zs=L(5363),hc=L(9468);const hf=new m.GfV("7.4.1"),Xu="__angularfire_symbol__analyticsIsSupportedValue",Jn="__angularfire_symbol__analyticsIsSupported",Cs="__angularfire_symbol__remoteConfigIsSupportedValue",zi="__angularfire_symbol__remoteConfigIsSupported",fc="__angularfire_symbol__messagingIsSupportedValue",el="__angularfire_symbol__messagingIsSupported";function Ut(b,T,N){if(T){if(1===T.length)return T[0];const ne=T.filter(be=>be.app===N);if(1===ne.length)return ne[0]}return N.container.getProvider(b).getImmediate({optional:!0})}globalThis[Jn]||(globalThis[Jn]=Gg().then(b=>globalThis[Xu]=b).catch(()=>globalThis[Xu]=!1)),globalThis[el]||(globalThis[el]=ea().then(b=>globalThis[fc]=b).catch(()=>globalThis[fc]=!1)),globalThis[zi]||(globalThis[zi]=Vu().then(b=>globalThis[Cs]=b).catch(()=>globalThis[Cs]=!1));const au=(b,T)=>{const N=T?[T]:(0,ee.C6)(),B=[];return N.forEach(k=>{k.container.getProvider(b).instances.forEach(be=>{B.includes(be)||B.push(be)})}),B};function Ci(){}class Is{constructor(T,N=Es){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,B){const k=this.zone;return this.delegate.schedule(function(be){k.runGuarded(()=>{T.apply(this,[be])})},N,B)}}class Wy{constructor(T){this.zone=T,this.task=null}call(T,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ci,{},Ci,Ci)),N.pipe((0,ou.b)({next:B,complete:B,error:B})).subscribe(T).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let uu=(()=>{class b{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Is(Zone.current)),this.insideAngular=N.run(()=>new Is(Zone.current,Tn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(N){return new(N||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function Qr(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function ff(b){return b.pipe((0,Zs.Q)(Qr().outsideAngular))}function gc(b){return Qr(),function pf(b){return function(N){return(N=N.lift(new Wy(b.ngZone))).pipe((0,hc.R)(b.outsideAngular),(0,Zs.Q)(b.insideAngular))}}(Qr())(b)}},2090:(Qe,ve,L)=>{L.d(ve,{$s:()=>Cr,BH:()=>$e,DV:()=>zt,Dv:()=>Mi,G6:()=>Be,GJ:()=>Qt,L:()=>ue,LL:()=>le,Pz:()=>Ft,Sg:()=>Re,UG:()=>ge,UI:()=>Ai,US:()=>me,Wj:()=>si,Yr:()=>Ue,ZB:()=>z,ZR:()=>_e,b$:()=>Ze,cI:()=>Ht,dS:()=>$t,eu:()=>we,g5:()=>V,gK:()=>bn,gQ:()=>_i,h$:()=>de,hl:()=>K,hu:()=>ee,jU:()=>De,lb:()=>uo,m9:()=>Ls,ne:()=>_t,p$:()=>W,pd:()=>Gr,r3:()=>Rr,ru:()=>qe,tV:()=>pe,uI:()=>Ve,ug:()=>it,vZ:()=>ii,w1:()=>Ee,w9:()=>rn,xO:()=>xi,xb:()=>Lt,z$:()=>Ne,zI:()=>J,zd:()=>ks});const ee=function($,Y){if(!$)throw V(Y)},V=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},ce=function($){const Y=[];let H=0;for(let q=0;q<$.length;q++){let Z=$.charCodeAt(q);Z<128?Y[H++]=Z:Z<2048?(Y[H++]=Z>>6|192,Y[H++]=63&Z|128):55296==(64512&Z)&&q+1<$.length&&56320==(64512&$.charCodeAt(q+1))?(Z=65536+((1023&Z)<<10)+(1023&$.charCodeAt(++q)),Y[H++]=Z>>18|240,Y[H++]=Z>>12&63|128,Y[H++]=Z>>6&63|128,Y[H++]=63&Z|128):(Y[H++]=Z>>12|224,Y[H++]=Z>>6&63|128,Y[H++]=63&Z|128)}return Y},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,Y){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const H=Y?this.byteToCharMapWebSafe_:this.byteToCharMap_,q=[];for(let Z=0;Z<$.length;Z+=3){const xe=$[Z],Le=Z+1<$.length,ot=Le?$[Z+1]:0,sn=Z+2<$.length,Kt=sn?$[Z+2]:0;let ai=(15&ot)<<2|Kt>>6,Ni=63&Kt;sn||(Ni=64,Le||(ai=64)),q.push(H[xe>>2],H[(3&xe)<<4|ot>>4],H[ai],H[Ni])}return q.join("")},encodeString($,Y){return this.HAS_NATIVE_SUPPORT&&!Y?btoa($):this.encodeByteArray(ce($),Y)},decodeString($,Y){return this.HAS_NATIVE_SUPPORT&&!Y?atob($):function($){const Y=[];let H=0,q=0;for(;H<$.length;){const Z=$[H++];if(Z<128)Y[q++]=String.fromCharCode(Z);else if(Z>191&&Z<224){const xe=$[H++];Y[q++]=String.fromCharCode((31&Z)<<6|63&xe)}else if(Z>239&&Z<365){const sn=((7&Z)<<18|(63&$[H++])<<12|(63&$[H++])<<6|63&$[H++])-65536;Y[q++]=String.fromCharCode(55296+(sn>>10)),Y[q++]=String.fromCharCode(56320+(1023&sn))}else{const xe=$[H++],Le=$[H++];Y[q++]=String.fromCharCode((15&Z)<<12|(63&xe)<<6|63&Le)}}return Y.join("")}(this.decodeStringToByteArray($,Y))},decodeStringToByteArray($,Y){this.init_();const H=Y?this.charToByteMapWebSafe_:this.charToByteMap_,q=[];for(let Z=0;Z<$.length;){const xe=H[$.charAt(Z++)],ot=Z<$.length?H[$.charAt(Z)]:0;++Z;const Kt=Z<$.length?H[$.charAt(Z)]:64;++Z;const Nt=Z<$.length?H[$.charAt(Z)]:64;if(++Z,null==xe||null==ot||null==Kt||null==Nt)throw Error();q.push(xe<<2|ot>>4),64!==Kt&&(q.push(ot<<4&240|Kt>>2),64!==Nt&&q.push(Kt<<6&192|Nt))}return q},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},de=function($){const Y=ce($);return me.encodeByteArray(Y,!0)},ue=function($){return de($).replace(/\./g,"")},pe=function($){try{return me.decodeString($,!0)}catch(Y){console.error("base64Decode failed: ",Y)}return null};function W($){return z(void 0,$)}function z($,Y){if(!(Y instanceof Object))return Y;switch(Y.constructor){case Date:return new Date(Y.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return Y}for(const H in Y)!Y.hasOwnProperty(H)||!re(H)||($[H]=z($[H],Y[H]));return $}function re($){return"__proto__"!==$}class $e{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Y,H)=>{this.resolve=Y,this.reject=H})}wrapCallback(Y){return(H,q)=>{H?this.reject(H):this.resolve(q),"function"==typeof Y&&(this.promise.catch(()=>{}),1===Y.length?Y(H):Y(H,q))}}}function Re($,Y){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const q=Y||"demo-project",Z=$.iat||0,xe=$.sub||$.user_id;if(!xe)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Le=Object.assign({iss:`https://securetoken.google.com/${q}`,aud:q,iat:Z,exp:Z+3600,auth_time:Z,sub:xe,user_id:xe,firebase:{sign_in_provider:"custom",identities:{}}},$);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(Le)),""].join(".")}function Ne(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ve(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ne())}function ge(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch($){return!1}}function De(){return"object"==typeof self&&self.self===self}function qe(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function Ze(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Ee(){const $=Ne();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function Ue(){return!1}function Be(){return!ge()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function K(){return"object"==typeof indexedDB}function we(){return new Promise(($,Y)=>{try{let H=!0;const q="validate-browser-context-for-indexeddb-analytics-module",Z=self.indexedDB.open(q);Z.onsuccess=()=>{Z.result.close(),H||self.indexedDB.deleteDatabase(q),$(!0)},Z.onupgradeneeded=()=>{H=!1},Z.onerror=()=>{var xe;Y((null===(xe=Z.error)||void 0===xe?void 0:xe.message)||"")}}catch(H){Y(H)}})}function J(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class _e extends Error{constructor(Y,H,q){super(H),this.code=Y,this.customData=q,this.name="FirebaseError",Object.setPrototypeOf(this,_e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,le.prototype.create)}}class le{constructor(Y,H,q){this.service=Y,this.serviceName=H,this.errors=q}create(Y,...H){const q=H[0]||{},Z=`${this.service}/${Y}`,xe=this.errors[Y],Le=xe?function Oe($,Y){return $.replace(lt,(H,q)=>{const Z=Y[q];return null!=Z?String(Z):`<${q}?>`})}(xe,q):"Error";return new _e(Z,`${this.serviceName}: ${Le} (${Z}).`,q)}}const lt=/\{\$([^}]+)}/g;function Ht($){return JSON.parse($)}function Ft($){return JSON.stringify($)}const Ye=function($){let Y={},H={},q={},Z="";try{const xe=$.split(".");Y=Ht(pe(xe[0])||""),H=Ht(pe(xe[1])||""),Z=xe[2],q=H.d||{},delete H.d}catch(xe){}return{header:Y,claims:H,data:q,signature:Z}},rn=function($){const H=Ye($).claims;return!!H&&"object"==typeof H&&H.hasOwnProperty("iat")},Qt=function($){const Y=Ye($).claims;return"object"==typeof Y&&!0===Y.admin};function Rr($,Y){return Object.prototype.hasOwnProperty.call($,Y)}function zt($,Y){if(Object.prototype.hasOwnProperty.call($,Y))return $[Y]}function Lt($){for(const Y in $)if(Object.prototype.hasOwnProperty.call($,Y))return!1;return!0}function Ai($,Y,H){const q={};for(const Z in $)Object.prototype.hasOwnProperty.call($,Z)&&(q[Z]=Y.call(H,$[Z],Z,$));return q}function ii($,Y){if($===Y)return!0;const H=Object.keys($),q=Object.keys(Y);for(const Z of H){if(!q.includes(Z))return!1;const xe=$[Z],Le=Y[Z];if(wr(xe)&&wr(Le)){if(!ii(xe,Le))return!1}else if(xe!==Le)return!1}for(const Z of q)if(!H.includes(Z))return!1;return!0}function wr($){return null!==$&&"object"==typeof $}function xi($){const Y=[];for(const[H,q]of Object.entries($))Array.isArray(q)?q.forEach(Z=>{Y.push(encodeURIComponent(H)+"="+encodeURIComponent(Z))}):Y.push(encodeURIComponent(H)+"="+encodeURIComponent(q));return Y.length?"&"+Y.join("&"):""}function ks($){const Y={};return $.replace(/^\?/,"").split("&").forEach(q=>{if(q){const[Z,xe]=q.split("=");Y[decodeURIComponent(Z)]=decodeURIComponent(xe)}}),Y}function Gr($){const Y=$.indexOf("?");if(!Y)return"";const H=$.indexOf("#",Y);return $.substring(Y,H>0?H:void 0)}class _i{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Y=1;Y<this.blockSize;++Y)this.pad_[Y]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Y,H){H||(H=0);const q=this.W_;if("string"==typeof Y)for(let Nt=0;Nt<16;Nt++)q[Nt]=Y.charCodeAt(H)<<24|Y.charCodeAt(H+1)<<16|Y.charCodeAt(H+2)<<8|Y.charCodeAt(H+3),H+=4;else for(let Nt=0;Nt<16;Nt++)q[Nt]=Y[H]<<24|Y[H+1]<<16|Y[H+2]<<8|Y[H+3],H+=4;for(let Nt=16;Nt<80;Nt++){const ai=q[Nt-3]^q[Nt-8]^q[Nt-14]^q[Nt-16];q[Nt]=4294967295&(ai<<1|ai>>>31)}let Kt,sr,Z=this.chain_[0],xe=this.chain_[1],Le=this.chain_[2],ot=this.chain_[3],sn=this.chain_[4];for(let Nt=0;Nt<80;Nt++){Nt<40?Nt<20?(Kt=ot^xe&(Le^ot),sr=1518500249):(Kt=xe^Le^ot,sr=1859775393):Nt<60?(Kt=xe&Le|ot&(xe|Le),sr=2400959708):(Kt=xe^Le^ot,sr=3395469782);const ai=(Z<<5|Z>>>27)+Kt+sn+sr+q[Nt]&4294967295;sn=ot,ot=Le,Le=4294967295&(xe<<30|xe>>>2),xe=Z,Z=ai}this.chain_[0]=this.chain_[0]+Z&4294967295,this.chain_[1]=this.chain_[1]+xe&4294967295,this.chain_[2]=this.chain_[2]+Le&4294967295,this.chain_[3]=this.chain_[3]+ot&4294967295,this.chain_[4]=this.chain_[4]+sn&4294967295}update(Y,H){if(null==Y)return;void 0===H&&(H=Y.length);const q=H-this.blockSize;let Z=0;const xe=this.buf_;let Le=this.inbuf_;for(;Z<H;){if(0===Le)for(;Z<=q;)this.compress_(Y,Z),Z+=this.blockSize;if("string"==typeof Y){for(;Z<H;)if(xe[Le]=Y.charCodeAt(Z),++Le,++Z,Le===this.blockSize){this.compress_(xe),Le=0;break}}else for(;Z<H;)if(xe[Le]=Y[Z],++Le,++Z,Le===this.blockSize){this.compress_(xe),Le=0;break}}this.inbuf_=Le,this.total_+=H}digest(){const Y=[];let H=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let Z=this.blockSize-1;Z>=56;Z--)this.buf_[Z]=255&H,H/=256;this.compress_(this.buf_);let q=0;for(let Z=0;Z<5;Z++)for(let xe=24;xe>=0;xe-=8)Y[q]=this.chain_[Z]>>xe&255,++q;return Y}}function _t($,Y){const H=new Wr($,Y);return H.subscribe.bind(H)}class Wr{constructor(Y,H){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=H,this.task.then(()=>{Y(this)}).catch(q=>{this.error(q)})}next(Y){this.forEachObserver(H=>{H.next(Y)})}error(Y){this.forEachObserver(H=>{H.error(Y)}),this.close(Y)}complete(){this.forEachObserver(Y=>{Y.complete()}),this.close()}subscribe(Y,H,q){let Z;if(void 0===Y&&void 0===H&&void 0===q)throw new Error("Missing Observer.");Z=function Kn($,Y){if("object"!=typeof $||null===$)return!1;for(const H of Y)if(H in $&&"function"==typeof $[H])return!0;return!1}(Y,["next","error","complete"])?Y:{next:Y,error:H,complete:q},void 0===Z.next&&(Z.next=Ri),void 0===Z.error&&(Z.error=Ri),void 0===Z.complete&&(Z.complete=Ri);const xe=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?Z.error(this.finalError):Z.complete()}catch(Le){}}),this.observers.push(Z),xe}unsubscribeOne(Y){void 0===this.observers||void 0===this.observers[Y]||(delete this.observers[Y],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Y){if(!this.finalized)for(let H=0;H<this.observers.length;H++)this.sendOne(H,Y)}sendOne(Y,H){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Y])try{H(this.observers[Y])}catch(q){"undefined"!=typeof console&&console.error&&console.error(q)}})}close(Y){this.finalized||(this.finalized=!0,void 0!==Y&&(this.finalError=Y),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ri(){}const Mi=function($,Y,H,q){let Z;if(q<Y?Z="at least "+Y:q>H&&(Z=0===H?"none":"no more than "+H),Z)throw new Error($+" failed: Was called with "+q+(1===q?" argument.":" arguments.")+" Expects "+Z+".")};function bn($,Y){return`${$} failed: ${Y} argument `}function si($,Y,H,q){if((!q||H)&&"function"!=typeof H)throw new Error(bn($,Y)+"must be a valid function.")}function uo($,Y,H,q){if((!q||H)&&("object"!=typeof H||null===H))throw new Error(bn($,Y)+"must be a valid context object.")}const $t=function($){const Y=[];let H=0;for(let q=0;q<$.length;q++){let Z=$.charCodeAt(q);if(Z>=55296&&Z<=56319){const xe=Z-55296;q++,ee(q<$.length,"Surrogate pair missing trail surrogate."),Z=65536+(xe<<10)+($.charCodeAt(q)-56320)}Z<128?Y[H++]=Z:Z<2048?(Y[H++]=Z>>6|192,Y[H++]=63&Z|128):Z<65536?(Y[H++]=Z>>12|224,Y[H++]=Z>>6&63|128,Y[H++]=63&Z|128):(Y[H++]=Z>>18|240,Y[H++]=Z>>12&63|128,Y[H++]=Z>>6&63|128,Y[H++]=63&Z|128)}return Y},it=function($){let Y=0;for(let H=0;H<$.length;H++){const q=$.charCodeAt(H);q<128?Y++:q<2048?Y+=2:q>=55296&&q<=56319?(Y+=4,H++):Y+=3}return Y};function Cr($,Y=1e3,H=2){const q=Y*Math.pow(H,$),Z=Math.round(.5*q*(Math.random()-.5)*2);return Math.min(144e5,q+Z)}function Ls($){return $&&$._delegate?$._delegate:$}},1559:(Qe,ve,L)=>{var m=L(5e3);let ee=null;function V(){return ee}const de=new m.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function pe(){return(0,m.LFG)(z)}()},providedIn:"platform"}),n})();const W=new m.OlP("Location Initialized");let z=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return V().getBaseHref(this._doc)}onPopState(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=V().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){re()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){re()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function $e(){return new z((0,m.LFG)(de))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ne(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ve(n){return n&&"?"!==n[0]?"?"+n:n}let ge=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function De(n){const e=(0,m.LFG)(de).location;return new Ze((0,m.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new m.OlP("appBaseHref");let Ze=(()=>{class n extends ge{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ve(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ve(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ue),m.LFG(qe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Se=(()=>{class n extends ge{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Re(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ve(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ue),m.LFG(qe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ee=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Ne(Be(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ve(r))}normalize(t){return n.stripTrailingSlash(function Ue(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Be(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ve(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ve,n.joinWithSlash=Re,n.stripTrailingSlash=Ne,n.\u0275fac=function(t){return new(t||n)(m.LFG(ge),m.LFG(ue))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ie(){return new Ee((0,m.LFG)(ge),(0,m.LFG)(ue))}()},providedIn:"root"}),n})();function Be(n){return n.replace(/\/index.html$/,"")}function $o(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}let ps=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class Us{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let or=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new Us(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),co(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{co(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function co(n,e){n.context.$implicit=e.item}let yd=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function zo(n){return"server"===n}let Ql=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Ko((0,m.LFG)(de),window)}),n})();class Ko{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Ui(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jl(this.window.history)||Jl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Jl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class an{}class po extends class Ua extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){ee||(ee=n)}(new po)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ba(){return en=en||document.querySelector("base"),en?en.getAttribute("href"):null}();return null==t?null:function $s(n){Uu=Uu||document.createElement("a"),Uu.setAttribute("href",n);const e=Uu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){en=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $o(document.cookie,e)}}let Uu,en=null;const pr=new m.OlP("TRANSITION_ID"),wn=[{provide:m.ip1,useFactory:function Xl(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=V(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[pr,de,m.zs3],multi:!0}];class Bi{static init(){(0,m.VLi)(new Bi)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?V().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let gr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const go=new m.OlP("EventManagerPlugins");let ms=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(go),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class ja{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=V().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let vi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ji=(()=>{class n extends vi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Zo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Zo))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Zo(n){V().remove(n)}const pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Yo=/%COMP%/g;function Ae(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Ae(n,i,t):(i=i.replace(Yo,n),t.push(i))}return t}function Pt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new Qo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Ga(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new rc(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Ae(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ms),m.LFG(ji),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Qo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(pt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=pt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=pt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pt(r)):this.eventManager.addEventListener(e,t,Pt(r))}}class Ga extends Qo{constructor(e,t,r,i){super(e),this.component=r;const a=Ae(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function tc(n){return"_ngcontent-%COMP%".replace(Yo,n)}(i+"-"+r.id),this.hostAttr=function nc(n){return"_nghost-%COMP%".replace(Yo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class rc extends Qo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Ae(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Ug=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Hu=["alt","control","meta","shift"],$u={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Nn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_s={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qa=(()=>{class n extends ja{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>V().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(Hu.forEach(_=>{const w=r.indexOf(_);w>-1&&(r.splice(w,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Gs(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Nn.hasOwnProperty(e)&&(e=Nn[e]))}return $u[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Hu.forEach(a=>{a!=i&&_s[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Wu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function wi(){po.makeCurrent(),Bi.init()},multi:!0},{provide:de,useFactory:function Gu(){return(0,m.RDi)(document),document},deps:[]}]),za=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function ic(){return new m.qLn},deps:[]},{provide:go,useClass:Ug,multi:!0,deps:[de,m.R0b,m.Lbi]},{provide:go,useClass:qa,multi:!0,deps:[de]},{provide:_n,useClass:_n,deps:[ms,ji,m.AFp]},{provide:m.FYo,useExisting:_n},{provide:vi,useExisting:ji},{provide:ji,useClass:ji,deps:[de]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ms,useClass:ms,deps:[go,m.R0b]},{provide:an,useClass:gr,deps:[]}];let Ka=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:pr,useExisting:m.AFp},wn]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:za,imports:[yd,m.hGG]}),n})();"undefined"!=typeof window&&window;var Qn=L(2011),na=L(7669),xt=L(8996);function ut(...n){const e=(0,na.yG)(n);return(0,xt.D)(n,e)}var Yr=L(8306),cn=L(5577),Ja=L(576);function vo(n,e){return(0,Ja.m)(e)?(0,cn.z)(n,e,1):(0,cn.z)(n,1)}var fn=L(4482),Pn=L(5403);function Gt(n,e){return(0,fn.e)((t,r)=>{let i=0;t.subscribe((0,Pn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var ht=L(4004);class Ws{}class uc{}class ci{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ci?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ci;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ci?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Sd{encodeKey(e){return vs(e)}encodeValue(e){return vs(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const Zu=/%(\d[a-f0-9])/gi,Xa={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function vs(n){return encodeURIComponent(n).replace(Zu,(e,t)=>{var r;return null!==(r=Xa[t])&&void 0!==r?r:e})}function eu(n){return`${n}`}class lr{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Sd,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function af(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],_=t.get(l)||[];_.push(h),t.set(l,_)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new lr({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(eu(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(eu(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class lc{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function ia(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function tu(n){return"undefined"!=typeof Blob&&n instanceof Blob}function nu(n){return"undefined"!=typeof FormData&&n instanceof FormData}class wo{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Yu(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new ci),this.context||(this.context=new lc),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new lr,this.urlWithParams=t}serializeBody(){return null===this.body?null:ia(this.body)||tu(this.body)||nu(this.body)||function ru(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof lr?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||nu(this.body)?null:tu(this.body)?this.body.type||null:ia(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof lr?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,_=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((P,F)=>P.set(F,e.setHeaders[F]),w)),e.setParams&&(D=Object.keys(e.setParams).reduce((P,F)=>P.set(F,e.setParams[F]),D)),new wo(r,i,l,{params:D,headers:w,context:S,reportProgress:_,responseType:a,withCredentials:h})}}var gn=(()=>((gn=gn||{})[gn.Sent=0]="Sent",gn[gn.UploadProgress=1]="UploadProgress",gn[gn.ResponseHeader=2]="ResponseHeader",gn[gn.DownloadProgress=3]="DownloadProgress",gn[gn.Response=4]="Response",gn[gn.User=5]="User",gn))();class Eo{constructor(e,t=200,r="OK"){this.headers=e.headers||new ci,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Qu extends Eo{constructor(e={}){super(e),this.type=gn.ResponseHeader}clone(e={}){return new Qu({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gi extends Eo{constructor(e={}){super(e),this.type=gn.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gi({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class iu extends Eo{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function qs(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Wi=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof wo)a=t;else{let _,w;_=i.headers instanceof ci?i.headers:new ci(i.headers),i.params&&(w=i.params instanceof lr?i.params:new lr({fromObject:i.params})),a=new wo(t,r,void 0!==i.body?i.body:null,{headers:_,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=ut(a).pipe(vo(_=>this.handler.handle(_)));if(t instanceof wo||"events"===i.observe)return l;const h=l.pipe(Gt(_=>_ instanceof Gi));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&!(_.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return _.body}));case"blob":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&!(_.body instanceof Blob))throw new Error("Response is not a Blob.");return _.body}));case"text":return h.pipe((0,ht.U)(_=>{if(null!==_.body&&"string"!=typeof _.body)throw new Error("Response is not a string.");return _.body}));default:return h.pipe((0,ht.U)(_=>_.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new lr).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,qs(i,r))}post(t,r,i={}){return this.request("POST",t,qs(i,r))}put(t,r,i={}){return this.request("PUT",t,qs(i,r))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Ws))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Co{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const su=new m.OlP("HTTP_INTERCEPTORS");let qi=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const uf=/^\)\]\}',?\n/;let cc=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Yr.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((F,j)=>i.setRequestHeader(F,j.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const F=t.detectContentTypeHeader();null!==F&&i.setRequestHeader("Content-Type",F)}if(t.responseType){const F=t.responseType.toLowerCase();i.responseType="json"!==F?F:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const F=i.statusText||"OK",j=new ci(i.getAllResponseHeaders()),ae=function Gg(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new Qu({headers:j,status:i.status,statusText:F,url:ae}),l},_=()=>{let{headers:F,status:j,statusText:ae,url:Ce}=h(),je=null;204!==j&&(je=void 0===i.response?i.responseText:i.response),0===j&&(j=je?200:0);let et=j>=200&&j<300;if("json"===t.responseType&&"string"==typeof je){const rt=je;je=je.replace(uf,"");try{je=""!==je?JSON.parse(je):null}catch(tt){je=rt,et&&(et=!1,je={error:tt,text:je})}}et?(r.next(new Gi({body:je,headers:F,status:j,statusText:ae,url:Ce||void 0})),r.complete()):r.error(new iu({error:je,headers:F,status:j,statusText:ae,url:Ce||void 0}))},w=F=>{const{url:j}=h(),ae=new iu({error:F,status:i.status||0,statusText:i.statusText||"Unknown Error",url:j||void 0});r.error(ae)};let D=!1;const S=F=>{D||(r.next(h()),D=!0);let j={type:gn.DownloadProgress,loaded:F.loaded};F.lengthComputable&&(j.total=F.total),"text"===t.responseType&&!!i.responseText&&(j.partialText=i.responseText),r.next(j)},P=F=>{let j={type:gn.UploadProgress,loaded:F.loaded};F.lengthComputable&&(j.total=F.total),r.next(j)};return i.addEventListener("load",_),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:gn.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",_),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(an))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const lf=new m.OlP("XSRF_COOKIE_NAME"),cf=new m.OlP("XSRF_HEADER_NAME");class df{}let Gy=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$o(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(de),m.LFG(m.Lbi),m.LFG(lf))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),oa=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(df),m.LFG(cf))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Wg=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(su,[]);this.chain=r.reduceRight((i,a)=>new Co(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(uc),m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),zs=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:oa,useClass:qi}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:lf,useValue:t.cookieName}:[],t.headerName?{provide:cf,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[oa,{provide:su,useExisting:oa,multi:!0},{provide:df,useClass:Gy},{provide:lf,useValue:"XSRF-TOKEN"},{provide:cf,useValue:"X-XSRF-TOKEN"}]}),n})(),qg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Wi,{provide:Ws,useClass:Wg},cc,{provide:uc,useExisting:cc}],imports:[[zs.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();var Hn=L(7579),Do=L(6451),Es=L(5363),Ks=L(8421);function Tn(n,e){return(0,fn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,Pn.x)(r,_=>{null==i||i.unsubscribe();let w=0;const D=a++;(0,Ks.Xf)(n(_,D)).subscribe(i=(0,Pn.x)(r,S=>r.next(e?e(_,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var ou=L(6063);class Zs extends Hn.x{constructor(e=1/0,t=1/0,r=ou.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var hc=L(3099);function hf(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,hc.B)({connector:()=>new Zs(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Jn=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Cs=L(5698);function zi(n){return(0,fn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function fc(n=el){return(0,fn.e)((e,t)=>{let r=!1;e.subscribe((0,Pn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function el(){return new Jn}var Ki=L(4671);function aa(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gt((i,a)=>n(i,a,r)):Ki.y,(0,Cs.q)(1),t?zi(e):fc(()=>new Jn))}function pc(n,e){return(0,Ja.m)(e)?Tn(()=>n,e):Tn(()=>n)}var xd=L(9468),Ut=L(5813);L(5867);var k=L(5861),ne=L(9681),be=L(4859),R=L(2090),Xe=L(1877);const yt=new Map,It={activated:!1,tokenObservers:[]},ft={initialized:!1,enabled:!1};function Rt(n){return yt.get(n)||It}function yn(n,e){yt.set(n,e)}function bs(){return ft}class Qi{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,k.Z)(function*(){t.stop();try{t.pending=new R.BH,yield function Nd(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new R.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const kr=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Zg(n){if(!Rt(n).activated)throw kr.create("use-before-activation",{appName:n.name})}function mf(n,e){return rl.apply(this,arguments)}function rl(){return(rl=(0,k.Z)(function*({url:n,body:e},t){var r,i;const a={"Content-Type":"application/json"},l=t.getImmediate({optional:!0});if(l){const F=yield l.getHeartbeatsHeader();F&&(a["X-Firebase-Client"]=F)}const h={method:"POST",body:JSON.stringify(e),headers:a};let _,w;try{_=yield fetch(n,h)}catch(F){throw kr.create("fetch-network-error",{originalErrorMessage:null===(r=F)||void 0===r?void 0:r.message})}if(200!==_.status)throw kr.create("fetch-status-error",{httpStatus:_.status});try{w=yield _.json()}catch(F){throw kr.create("fetch-parse-error",{originalErrorMessage:null===(i=F)||void 0===i?void 0:i.message})}const D=w.ttl.match(/^([\d.]+)(s)$/);if(!D||!D[2]||isNaN(Number(D[1])))throw kr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${w.ttl}`});const S=1e3*Number(D[1]),P=Date.now();return{token:w.token,expireTimeMillis:P+S,issuedAtTimeMillis:P}})).apply(this,arguments)}function qy(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ua="firebase-app-check-store";let mc=null;function yf(){return mc||(mc=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var a;e(kr.create("storage-open",{originalErrorMessage:null===(a=i.target.error)||void 0===a?void 0:a.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ua,{keyPath:"compositeKey"})}}catch(r){e(kr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),mc)}function vf(){return(vf=(0,k.Z)(function*(n,e){const r=(yield yf()).transaction(ua,"readwrite"),a=r.objectStore(ua).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;h(kr.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const _c=new Xe.Yd("@firebase/app-check");function rm(n,e){return(0,R.hl)()?function Qg(n,e){return function Xg(n,e){return vf.apply(this,arguments)}(function la(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_c.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wf(){return bs().enabled}function Ef(){return kd.apply(this,arguments)}function kd(){return(kd=(0,k.Z)(function*(){const n=bs();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Yy={error:"UNKNOWN_ERROR"};function qE(n){return R.US.encodeString(JSON.stringify(n),!1)}function Cf(n){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,k.Z)(function*(n,e=!1){const t=n.app;Zg(t);const r=Rt(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&vc(_)&&(i=_)}if(!e&&i&&vc(i))return{token:i.token};let h,l=!1;if(wf()){r.exchangeTokenPromise||(r.exchangeTokenPromise=mf(qy(t,yield Ef()),n.heartbeatServiceProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const _=yield r.exchangeTokenPromise;return yield rm(t,_),yn(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?_c.warn(_.message):_c.error(_),a=_}return i?(h={token:i.token},yn(t,Object.assign(Object.assign({},r),{token:i})),yield rm(t,i)):h=zE(a),l&&yc(t,h),h})).apply(this,arguments)}function Xi(n,e){const t=Rt(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),yn(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function ca(n){const{app:e}=n,t=Rt(e);let r=t.tokenRefresher;r||(r=function im(n){const{app:e}=n;return new Qi((0,k.Z)(function*(){let r;if(r=Rt(e).token?yield Cf(n,!0):yield Cf(n),r.error)throw r.error}),()=>!0,()=>{const t=Rt(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),yn(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function yc(n,e){const t=Rt(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function vc(n){return n.expireTimeMillis-Date.now()>0}function zE(n){return{token:qE(Yy),error:n}}class sm{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=Rt(this.app);for(const t of e)Xi(this.app,t.next);return Promise.resolve()}}const hm="app-check-internal";!function Cc(){(0,ne._registerComponent)(new be.wA("app-check",n=>function KE(n,e){return new sm(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hm).initialize()})),(0,ne._registerComponent)(new be.wA(hm,n=>function If(n){return{getToken:e=>Cf(n,e),addTokenListener:e=>function Fd(n,e,t,r){const{app:i}=n,a=Rt(i),l={next:t,error:r,type:e};if(yn(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&vc(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),ca(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>ca(n))}(n,"INTERNAL",e),removeTokenListener:e=>Xi(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)("@firebase/app-check","0.5.12")}();class al{constructor(){return(0,Ut.vb)("app-check")}}"undefined"!=typeof window&&window;var Hd=L(127);const $d=new m.OlP("angularfire2.auth.use-emulator"),xf=new m.OlP("angularfire2.auth.settings"),ll=new m.OlP("angularfire2.auth.tenant-id"),Rf=new m.OlP("angularfire2.auth.langugage-code"),Gd=new m.OlP("angularfire2.auth.use-device-language"),Lr=new m.OlP("angularfire.auth.persistence"),Dc=(n,e,t,r,i,a,l,h)=>(0,Qn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))_.settings[w]=D;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let du=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,P,F){const j=new Hn.x,ae=ut(void 0).pipe((0,Es.Q)(l.outsideAngular),Tn(()=>a.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2476)))),(0,ht.U)(()=>(0,Qn.on)(t,a,r)),(0,ht.U)(Ce=>Dc(Ce,a,h,w,D,S,_,P)),hf({bufferSize:1,refCount:!1}));if(zo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ut(null);else{ae.pipe(aa()).subscribe();const je=ae.pipe(Tn(tt=>tt.getRedirectResult().then(Ct=>Ct,()=>null)),Ut.iC,hf({bufferSize:1,refCount:!1})),et=ae.pipe(Tn(tt=>new Yr.y(Ct=>({unsubscribe:a.runOutsideAngular(()=>tt.onAuthStateChanged(Mt=>Ct.next(Mt),Mt=>Ct.error(Mt),()=>Ct.complete()))})))),rt=ae.pipe(Tn(tt=>new Yr.y(Ct=>({unsubscribe:a.runOutsideAngular(()=>tt.onIdTokenChanged(Mt=>Ct.next(Mt),Mt=>Ct.error(Mt),()=>Ct.complete()))}))));this.authState=je.pipe(pc(et),(0,xd.R)(l.outsideAngular),(0,Es.Q)(l.insideAngular)),this.user=je.pipe(pc(rt),(0,xd.R)(l.outsideAngular),(0,Es.Q)(l.insideAngular)),this.idToken=this.user.pipe(Tn(tt=>tt?(0,xt.D)(tt.getIdToken()):ut(null))),this.idTokenResult=this.user.pipe(Tn(tt=>tt?(0,xt.D)(tt.getIdTokenResult()):ut(null))),this.credential=(0,Do.T)(je,j,this.authState.pipe(Gt(tt=>!tt))).pipe((0,ht.U)(tt=>(null==tt?void 0:tt.user)?tt:null),(0,xd.R)(l.outsideAngular),(0,Es.Q)(l.insideAngular))}return(0,Qn.pX)(this,ae,a,{spy:{apply:(Ce,je,et)=>{(Ce.startsWith("signIn")||Ce.startsWith("createUser"))&&et.then(rt=>j.next(rt))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qn.Dh),m.LFG(Qn.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG($d,8),m.LFG(xf,8),m.LFG(ll,8),m.LFG(Rf,8),m.LFG(Gd,8),m.LFG(Lr,8),m.LFG(al,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),vm=(()=>{class n{constructor(){Hd.Z.registerVersion("angularfire",Ut.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[du]}),n})();var Ds=L(4986),Wd=L(3942);const Mf="firebasestorage.googleapis.com",wm="storageBucket";class On extends R.ZR{constructor(e,t){super(da(e),`Firebase Storage: ${t} (${da(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}_codeEquals(e){return da(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function da(n){return"storage/"+n}function ts(){return new On("unknown","An unknown error occurred, please check the error payload for server response.")}function Q(){return new On("canceled","User canceled the upload/download.")}function gt(){return new On("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function mr(n){return new On("invalid-argument",n)}function cl(){return new On("app-deleted","The Firebase app was deleted.")}function Em(n){return new On("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ns(n,e){return new On("invalid-format","String does not match format '"+n+"': "+e)}function ha(n){throw new On("internal-error","Internal error: "+n)}class _r{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=_r.makeFromUrl(e,t)}catch(i){return new _r(e,"")}if(""===r.path)return r;throw function ke(n){return new On("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(tt){tt.path_=decodeURIComponent(tt.path)}const S=t.replace(/[.]/g,"\\."),rt=[{regex:h,indices:{bucket:1,path:3},postModify:function a(tt){"/"===tt.path.charAt(tt.path.length-1)&&(tt.path_=tt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===Mf?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let tt=0;tt<rt.length;tt++){const Ct=rt[tt],Mt=Ct.regex.exec(e);if(Mt){let Ou=Mt[Ct.indices.path];Ou||(Ou=""),r=new _r(Mt[Ct.indices.bucket],Ou),Ct.postModify(r);break}}if(null==r)throw function he(n){return new On("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Pf{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function dl(n){return"string"==typeof n||n instanceof String}function bm(n){return Dm()&&n instanceof Blob}function Dm(){return"undefined"!=typeof Blob}function kf(n,e,t,r){if(r<e)throw mr(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw mr(`Invalid value for '${n}'. Expected ${t} or less.`)}function fa(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Tm(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hl=(()=>{return(n=hl||(hl={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",hl;var n})();class vT{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,F)=>{this.resolve_=P,this.reject_=F,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function Of(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=ts();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?cl():Q():function O(){return new On("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Ff(!1,null,!0)):this.backoffId_=function qd(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let w=!1;function D(...Ce){w||(w=!0,e.apply(null,Ce))}function S(Ce){i=setTimeout(()=>{i=null,n(F,_())},Ce)}function P(){a&&clearTimeout(a)}function F(Ce,...je){if(w)return void P();if(Ce)return P(),void D.call(null,Ce,...je);if(_()||l)return P(),void D.call(null,Ce,...je);let rt;r<64&&(r*=2),1===h?(h=2,rt=0):rt=1e3*(r+Math.random()),S(rt)}let j=!1;function ae(Ce){j||(j=!0,P(),!w&&(null!==i?(Ce||(h=2),clearTimeout(i),S(0)):Ce||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ae(!0)},t),ae}((r,i)=>{if(i)return void r(!1,new Ff(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===hl.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===hl.ABORT;return void r(!1,new Ff(!1,null,D))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new Ff(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Cm(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Ff{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function ET(...n){const e=function Sm(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Dm())return new Blob(n);throw new On("unsupported-environment","This browser doesn't seem to support creating Blobs")}const rs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Lf{constructor(e,t){this.data=e,this.contentType=t||null}}function Am(n,e){switch(n){case rs.RAW:return new Lf(Vf(e));case rs.BASE64:case rs.BASE64URL:return new Lf(rv(n,e));case rs.DATA_URL:return new Lf(function oC(n){const e=new Rm(n);return e.base64?rv(rs.BASE64,e.rest):function xm(n){let e;try{e=decodeURIComponent(n)}catch(t){throw ns(rs.DATA_URL,"Malformed data URL.")}return Vf(e)}(e.rest)}(e),function iv(n){return new Rm(n).contentType}(e))}throw ts()}function Vf(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function rv(n,e){switch(n){case rs.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw ns(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rs.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw ns(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function sC(n){return atob(n)}(e)}catch(i){throw ns(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Rm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ns(rs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function Uf(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class pa{constructor(e,t){let r=0,i="";bm(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(bm(this.data_)){const i=function iC(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new pa(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new pa(r,!0)}}static getBlob(...e){if(Dm()){const t=e.map(r=>r instanceof pa?r.data_:r);return new pa(ET.apply(null,t))}{const t=e.map(l=>dl(l)?Am(rs.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new pa(i,!0)}}uploadData(){return this.data_}}function Mm(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function nv(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function sv(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function ov(n,e){return e}class hi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||ov}}let av=null;function Bf(){if(av)return av;const n=[];n.push(new hi("bucket")),n.push(new hi("generation")),n.push(new hi("metageneration")),n.push(new hi("name","fullPath",!0));const t=new hi("name");t.xform=function e(a,l){return function aC(n){return!dl(n)||n.length<2?n:sv(n)}(l)},n.push(t);const i=new hi("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new hi("timeCreated")),n.push(new hi("updated")),n.push(new hi("md5Hash",null,!0)),n.push(new hi("cacheControl",null,!0)),n.push(new hi("contentDisposition",null,!0)),n.push(new hi("contentEncoding",null,!0)),n.push(new hi("contentLanguage",null,!0)),n.push(new hi("contentType",null,!0)),n.push(new hi("metadata","customMetadata",!0)),av=n,av}function lC(n,e,t){const r=Mm(e);return null===r?null:function bT(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function uC(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new _r(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function uv(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const lv="prefixes";class ga{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function So(n){if(!n)throw ts()}function Nm(n,e){return function t(r,i){const a=lC(n,i,e);return So(null!==a),a}}function bt(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function E(){return new On("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function p(){return new On("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function f(n){return new On("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function A(n){return new On("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function zd(n){const e=bt(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function y(n){return new On("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function cv(n,e,t){const i=fa(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ga(i,"GET",Nm(n,t),l);return h.errorHandler=zd(e),h}function dC(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=fa(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new ga(h,"GET",function ST(n,e){return function t(r,i){const a=function TT(n,e,t){const r=Mm(t);return null===r?null:function DT(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[lv])for(const i of t[lv]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new _r(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new _r(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return So(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=bt(e),D}function ma(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function dv(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Hf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function $f(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){So(!1)}return So(!!t&&-1!==(e||["active"]).indexOf(t)),t}const km={STATE_CHANGED:"state_changed"},Jr={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Gf(n){switch(n){case"running":case"pausing":case"canceling":return Jr.RUNNING;case"paused":return Jr.PAUSED;case"success":return Jr.SUCCESS;case"canceled":return Jr.CANCELED;default:return Jr.ERROR}}class hv{constructor(e,t,r){if(function Im(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Wf(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class NT extends class MT{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hl.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hl.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hl.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw ha("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ha("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ha("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw ha("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ha("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function xo(){return new NT}class fv{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Bf(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function SM(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=ma(e,r,i),h={name:l.fullPath},_=fa(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=uv(l,t),j=new ga(_,"POST",function F(ae){let Ce;$f(ae);try{Ce=ae.getResponseHeader("X-Goog-Upload-URL")}catch(je){So(!1)}return So(dl(Ce)),Ce},n.maxUploadRetryTime);return j.urlParams=h,j.headers=D,j.body=S,j.errorHandler=bt(e),j}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function fC(n,e,t,r){const _=new ga(t,"POST",function a(w){const D=$f(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(F){So(!1)}S||So(!1);const P=Number(S);return So(!isNaN(P)),new Hf(P,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=bt(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,xo,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Hf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function Om(n,e,t,r,i,a,l,h){const _=new Hf(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function dt(){return new On("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let D=w;i>0&&(D=Math.min(D,i));const S=_.current,j={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ae=r.slice(S,S+D);if(null===ae)throw gt();const rt=new ga(t,"POST",function Ce(tt,Ct){const Mt=$f(tt,["active","final"]),hr=_.current+D,Ou=r.size();let TM;return TM="final"===Mt?Nm(e,a)(tt,Ct):null,new Hf(hr,Ou,"final"===Mt,TM)},e.maxUploadRetryTime);return rt.headers=j,rt.body=ae.uploadData(),rt.progressCallback=h||null,rt.errorHandler=bt(n),rt}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,xo,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=cv(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Pm(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let rt="";for(let tt=0;tt<2;tt++)rt+=Math.random().toString().slice(2);return rt}();l["Content-Type"]="multipart/related; boundary="+_;const w=ma(e,r,i),D=uv(w,t),F=pa.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===F)throw gt();const j={name:w.fullPath},ae=fa(a,n.host,n._protocol),je=n.maxUploadRetryTime,et=new ga(ae,"POST",Nm(n,t),je);return et.urlParams=j,et.headers=l,et.body=F.uploadData(),et.errorHandler=bt(e),et}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Q(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Gf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new hv(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Gf(this._state)){case Jr.SUCCESS:Wf(this._resolve.bind(null,this.snapshot))();break;case Jr.CANCELED:case Jr.ERROR:Wf(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Gf(this._state)){case Jr.RUNNING:case Jr.PAUSED:e.next&&Wf(e.next.bind(e,this.snapshot))();break;case Jr.SUCCESS:e.complete&&Wf(e.complete.bind(e))();break;default:e.error&&Wf(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class fl{constructor(e,t){this._service=e,this._location=t instanceof _r?t:_r.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new fl(e,t)}get root(){const e=new _r(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return sv(this._location.path)}get storage(){return this._service}get parent(){const e=function CT(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new _r(this._location.bucket,e);return new fl(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Em(e)}}function FT(n,e,t){return mC.apply(this,arguments)}function mC(){return(mC=(0,k.Z)(function*(n,e,t){const i=yield LT(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield FT(n,e,i.nextPageToken))})).apply(this,arguments)}function LT(n,e){null!=e&&"number"==typeof e.maxResults&&kf("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=dC(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,xo)}function kM(n){n._throwIfRoot("getDownloadURL");const e=function Ao(n,e,t){const i=fa(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new ga(i,"GET",function AT(n,e){return function t(r,i){const a=lC(n,i,e);return So(null!==a),function To(n,e,t,r){const i=Mm(e);if(null===i||!dl(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return fa("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+Tm({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=zd(e),h}(n.storage,n._location,Bf());return n.storage.makeRequestWithTokens(e,xo).then(t=>{if(null===t)throw function $n(){return new On("no-download-url","The given file does not have any download URLs.")}();return t})}function Fm(n,e){const t=function IT(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new _r(n._location.bucket,t);return new fl(n.storage,r)}function Lm(n,e){if(n instanceof _a){const t=n;if(null==t._bucket)throw function Ke(){return new On("no-default-bucket","No default bucket found. Did you set the '"+wm+"' property when initializing the app?")}();const r=new fl(t,t._bucket);return null!=e?Lm(r,e):r}return void 0!==e?Fm(n,e):n}function yC(n,e){if(e&&function VT(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof _a)return function _C(n,e){return new fl(n,e)}(n,e);throw mr("To use ref(service, url), the first argument must be a Storage instance.")}return Lm(n,e)}function Vm(n,e){const t=null==e?void 0:e[wm];return null==t?null:_r.makeFromBucketSpec(t,n)}class _a{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Mf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_r.makeFromBucketSpec(i,this._host):Vm(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?_r.makeFromBucketSpec(this._url,e):Vm(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){kf("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){kf("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,k.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,k.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fl(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Pf(cl());{const a=function wT(n,e,t,r,i,a){const l=Tm(n.urlParams),h=n.url+l,_=Object.assign({},n.headers);return function nC(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function tC(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function Sc(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function rC(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new vT(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,k.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const gv="@firebase/storage";function wC(n,e){return yC(n=(0,R.m9)(n),e)}function Bm(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new _a(t,r,i,e,ne.SDK_VERSION)}!function GT(){(0,ne._registerComponent)(new be.wA("storage",Bm,"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(gv,"0.9.9",""),(0,ne.registerVersion)(gv,"0.9.9","esm2017")}();class Kf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class WT{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Kf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new Kf(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new Kf(l,this,this._ref)):{next:t.next?l=>t.next(new Kf(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class yv{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ya(e,this._service))}get items(){return this._delegate.items.map(e=>new ya(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ya{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function EC(n,e){return Fm(n,e)}(this._delegate,e);return new ya(t,this.storage)}get root(){return new ya(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ya(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new WT(function jT(n,e,t){return function RM(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new fv(n,new pa(e),t)}(n=(0,R.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=rs.RAW,r){this._throwIfRoot("putString");const i=Am(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new WT(new fv(this._delegate,new pa(i.data,!0),a),this)}listAll(){return function Zd(n){return function NM(n){const e={prefixes:[],items:[]};return FT(n,e).then(()=>e)}(n=(0,R.m9)(n))}(this._delegate).then(e=>new yv(e,this.storage))}list(e){return function mv(n,e){return LT(n=(0,R.m9)(n),e)}(this._delegate,e||void 0).then(t=>new yv(t,this.storage))}getMetadata(){return function qf(n){return function PM(n){n._throwIfRoot("getMetadata");const e=cv(n.storage,n._location,Bf());return n.storage.makeRequestWithTokens(e,xo)}(n=(0,R.m9)(n))}(this._delegate)}updateMetadata(e){return function Kd(n,e){return function OM(n,e){n._throwIfRoot("updateMetadata");const t=function hC(n,e,t,r){const a=fa(e.fullServerUrl(),n.host,n._protocol),h=uv(t,r),w=n.maxOperationRetryTime,D=new ga(a,"PATCH",Nm(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=zd(e),D}(n.storage,n._location,e,Bf());return n.storage.makeRequestWithTokens(t,xo)}(n=(0,R.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zf(n){return kM(n=(0,R.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Yd(n){return function pl(n){n._throwIfRoot("deleteObject");const e=function xT(n,e){const r=fa(e.fullServerUrl(),n.host,n._protocol),h=new ga(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=zd(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,xo)}(n=(0,R.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Em(e)}}class IC{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(vv(e))throw mr("ref() expected a child path but got a URL, use refFromURL instead.");return new ya(wC(this._delegate,e),this)}refFromURL(e){if(!vv(e))throw mr("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_r.makeFromUrl(e,this._delegate.host)}catch(t){throw mr("refFromUrl() expected a valid full URL but got an invalid one.")}return new ya(wC(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function _v(n,e,t,r={}){!function UT(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,R.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function vv(n){return/^[A-Za-z]+:\/\//.test(n)}function KT(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new IC(t,r)}function YT(n){const e=function VM(n){return new Yr.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function Tc(n,e=Ds.z){return(0,fn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,Pn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ht.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Zf(n){return{getDownloadURL:()=>ut(void 0).pipe(Ut.fc,Tn(()=>n.getDownloadURL()),Ut.iC),getMetadata:()=>ut(void 0).pipe(Ut.fc,Tn(()=>n.getMetadata()),Ut.iC),delete:()=>(0,xt.D)(n.delete()),child:e=>Zf(n.child(e)),updateMetadata:e=>(0,xt.D)(n.updateMetadata(e)),put:(e,t)=>YT(n.put(e,t)),putString:(e,t,r)=>YT(n.putString(e,t,r)),list:e=>(0,xt.D)(n.list(e)),listAll:()=>(0,xt.D)(n.listAll())}}!function ZT(n){const e={TaskState:Jr,TaskEvent:km,StringFormat:rs,Storage:IC,Reference:ya};n.INTERNAL.registerComponent(new be.wA("storage-compat",KT,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.17")}(Wd.Z);const UM=new m.OlP("angularfire2.storageBucket"),QT=new m.OlP("angularfire2.storage.maxUploadRetryTime"),wv=new m.OlP("angularfire2.storage.maxOperationRetryTime"),bC=new m.OlP("angularfire2.storage.use-emulator");let JT=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S){const P=(0,Qn.on)(t,l,r);this.storage=(0,Qn.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const F=l.runOutsideAngular(()=>P.storage(i||void 0)),j=D;return j&&F.useEmulator(...j),_&&F.setMaxUploadRetryTime(_),w&&F.setMaxOperationRetryTime(w),F},[_,w])}ref(t){return Zf(this.storage.ref(t))}refFromURL(t){return Zf(this.storage.refFromURL(t))}upload(t,r,i){return Zf(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qn.Dh),m.LFG(Qn.xv,8),m.LFG(UM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(QT,8),m.LFG(wv,8),m.LFG(bC,8),m.LFG(al,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),XT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),DC=(()=>{class n{constructor(){Hd.Z.registerVersion("angularfire",Ut.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[JT],imports:[XT]}),n})();var jm=L(8189);function Ev(...n){return function TC(){return(0,jm.J)(1)}()((0,xt.D)(n,(0,na.yG)(n)))}function Hm(...n){const e=(0,na.yG)(n);return(0,fn.e)((t,r)=>{(e?Ev(n,t,e):Ev(n,t)).subscribe(r)})}function $m(){return(0,fn.e)((n,e)=>{let t,r=!1;n.subscribe((0,Pn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function SC(n,e,t,r,i){return(a,l)=>{let h=t,_=e,w=0;a.subscribe((0,Pn.x)(l,D=>{const S=w++;_=h?n(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function Ac(n,e){return(0,fn.e)(SC(n,e,arguments.length>=2,!0))}function Ro(n,e=Ki.y){return n=null!=n?n:Cv,(0,fn.e)((t,r)=>{let i,a=!0;t.subscribe((0,Pn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function Cv(n,e){return n===e}L(2476);var st,eS="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},gl={},Iv=Iv||{},St=eS||self;function Gm(){}function Qd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Yf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Jd="closure_uid_"+(1e9*Math.random()>>>0),bv=0;function nS(n,e,t){return n.call.apply(n.bind,arguments)}function Dv(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Vr(n,e,t){return(Vr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?nS:Dv).apply(null,arguments)}function Qf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Xr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function ml(){this.s=this.s,this.o=this.o}var HM={};ml.prototype.s=!1,ml.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function tS(n){return Object.prototype.hasOwnProperty.call(n,Jd)&&n[Jd]||(n[Jd]=++bv)}(this);delete HM[n]}},ml.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const AC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Wm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Sv(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Qd(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function ei(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}ei.prototype.h=function(){this.defaultPrevented=!0};var xC=function(){if(!St.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{St.addEventListener("test",Gm,e),St.removeEventListener("test",Gm,e)}catch(t){}return n}();function Jf(n){return/^[\s\xa0]*$/.test(n)}var va=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Xd(n,e){return n<e?-1:n>e?1:0}function qm(){var n=St.navigator;return n&&(n=n.userAgent)?n:""}function wa(n){return-1!=qm().indexOf(n)}function RC(n){return RC[" "](n),n}RC[" "]=Gm;var Xf,n,MC=wa("Opera"),_l=wa("Trident")||wa("MSIE"),eh=wa("Edge"),xv=eh||_l,zm=wa("Gecko")&&!(-1!=qm().toLowerCase().indexOf("webkit")&&!wa("Edge"))&&!(wa("Trident")||wa("MSIE"))&&!wa("Edge"),NC=-1!=qm().toLowerCase().indexOf("webkit")&&!wa("Edge");function Rv(){var n=St.document;return n?n.documentMode:void 0}e:{var Mv="",ep=(n=qm(),zm?/rv:([^\);]+)(\)|;)/.exec(n):eh?/Edge\/([\d\.]+)/.exec(n):_l?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):NC?/WebKit\/(\S+)/.exec(n):MC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(ep&&(Mv=ep?ep[1]:""),_l){var Nv=Rv();if(null!=Nv&&Nv>parseFloat(Mv)){Xf=String(Nv);break e}}Xf=Mv}var rS={};var iS=St.document&&_l&&(Rv()||parseInt(Xf,10))||void 0;function tp(n,e){if(ei.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zm){e:{try{RC(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:th[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&tp.X.h.call(this)}}Xr(tp,ei);var th={2:"touch",3:"pen",4:"mouse"};tp.prototype.h=function(){tp.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var np="closure_listenable_"+(1e6*Math.random()|0),sS=0;function oS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++sS,this.ba=this.ea=!1}function Km(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function eo(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Zm(n){const e={};for(const t in n)e[t]=n[t];return e}const Ov="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function kv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<Ov.length;a++)t=Ov[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function rp(n){this.src=n,this.g={},this.h=0}function Ym(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=AC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(Km(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Fv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ba&&a.listener==e&&a.capture==!!t&&a.ha==r)return i}return-1}rp.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=Fv(n,e,r,i);return-1<l?(e=n[l],t||(e.ea=!1)):((e=new oS(e,this.src,a,!!r,i)).ea=t,n.push(e)),e};var Lv="closure_lm_"+(1e6*Math.random()|0),Vv={};function OC(n,e,t,r,i){if(r&&r.once)return Bv(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)OC(n,e[a],t,r,i);return null}return t=Qm(t),n&&n[np]?n.N(e,t,Yf(r)?!!r.capture:!!r,i):Uv(n,e,t,!1,r,i)}function Uv(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=Yf(i)?!!i.capture:!!i,h=ip(n);if(h||(n[Lv]=h=new rp(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function $M(){const e=GM;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)xC||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(aS(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Bv(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)Bv(n,e[a],t,r,i);return null}return t=Qm(t),n&&n[np]?n.O(e,t,Yf(r)?!!r.capture:!!r,i):Uv(n,e,t,!0,r,i)}function kC(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)kC(n,e[a],t,r,i);else r=Yf(r)?!!r.capture:!!r,t=Qm(t),n&&n[np]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Fv(a=n.g[e],t,r,i))&&(Km(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ip(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Fv(e,t,r,i)),(t=-1<n?e[n]:null)&&jv(t))}function jv(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[np])Ym(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(aS(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ip(e))?(Ym(t,n),0==t.h&&(t.src=null,e[Lv]=null)):Km(n)}}}function aS(n){return n in Vv?Vv[n]:Vv[n]="on"+n}function GM(n,e){if(n.ba)n=!0;else{e=new tp(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&jv(n),n=t.call(r,e)}return n}function ip(n){return(n=n[Lv])instanceof rp?n:null}var Hv="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qm(n){return"function"==typeof n?n:(n[Hv]||(n[Hv]=function(e){return n.handleEvent(e)}),n[Hv])}function Tr(){ml.call(this),this.i=new rp(this),this.P=this,this.I=null}function fi(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new ei(e,n);else if(e instanceof ei)e.target=e.target||n;else{var i=e;kv(e=new ei(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=is(l,r,!0,e)&&i}if(i=is(l=e.g=n,r,!0,e)&&i,i=is(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=is(l=e.g=t[a],r,!1,e)&&i}function is(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ba&&l.capture==t){var h=l.listener,_=l.ha||l.src;l.ea&&Ym(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Xr(Tr,ml),Tr.prototype[np]=!0,Tr.prototype.removeEventListener=function(n,e,t,r){kC(this,n,e,t,r)},Tr.prototype.M=function(){if(Tr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)Km(t[r]);delete n.g[e],n.h--}}this.I=null},Tr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Tr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var FC=St.JSON.stringify;function WM(){var n=Xm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jm,$v=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new VC,n=>n.reset());class VC{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function uS(n){St.setTimeout(()=>{throw n},0)}function lS(n,e){Jm||function Gv(){var n=St.Promise.resolve(void 0);Jm=function(){n.then(cS)}}(),Wv||(Jm(),Wv=!0),Xm.add(n,e)}var Wv=!1,Xm=new class LC{constructor(){this.h=this.g=null}add(e,t){const r=$v.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function cS(){for(var n;n=WM();){try{n.h.call(n.g)}catch(t){uS(t)}var e=$v;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Wv=!1}function e_(n,e){Tr.call(this),this.h=n||1,this.g=e||St,this.j=Vr(this.kb,this),this.l=Date.now()}function qv(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function zv(n,e,t){if("function"==typeof n)t&&(n=Vr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Vr(n.handleEvent,n)}return 2147483647<Number(e)?-1:St.setTimeout(n,e||0)}function UC(n){n.g=zv(()=>{n.g=null,n.i&&(n.i=!1,UC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Xr(e_,Tr),(st=e_.prototype).ca=!1,st.R=null,st.kb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),fi(this,"tick"),this.ca&&(qv(this),this.start()))}},st.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},st.M=function(){e_.X.M.call(this),qv(this),delete this.g};class dS extends ml{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:UC(this)}M(){super.M(),this.g&&(St.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vl(n){ml.call(this),this.h=n,this.g={}}Xr(vl,ml);var xc=[];function BC(n,e,t,r){Array.isArray(t)||(t&&(xc[0]=t.toString()),t=xc);for(var i=0;i<t.length;i++){var a=OC(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function nh(n){eo(n.g,function(e,t){this.g.hasOwnProperty(t)&&jv(e)},n),n.g={}}function t_(){this.g=!0}function Ii(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function pi(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return FC(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}vl.prototype.M=function(){vl.X.M.call(this),nh(this)},vl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},t_.prototype.Aa=function(){this.g=!1},t_.prototype.info=function(){};var Ss={},op=null;function bi(){return op=op||new Tr}function n_(n){ei.call(this,Ss.Oa,n)}function Ea(n){const e=bi();fi(e,new n_(e,n))}function Rc(n,e){ei.call(this,Ss.STAT_EVENT,n),this.stat=e}function yr(n){const e=bi();fi(e,new Rc(e,n))}function Mc(n,e){ei.call(this,Ss.Pa,n),this.size=e}function Ca(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return St.setTimeout(function(){n()},e)}Ss.Oa="serverreachability",Xr(n_,ei),Ss.STAT_EVENT="statevent",Xr(Rc,ei),Ss.Pa="timingevent",Xr(Mc,ei);var hu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,La:7,TIMEOUT:8,Cb:9},Nc={qb:"complete",Mb:"success",Ma:"error",La:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wl(){}function Zv(){}wl.prototype.h=null;var s_,rh={OPEN:"a",pb:"b",Ma:"c",Bb:"d"};function r_(){ei.call(this,"d")}function i_(){ei.call(this,"c")}function ap(){}function ih(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new vl(this),this.O=jC,this.T=new e_(n=xv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Yv}function Yv(){this.i=null,this.g="",this.h=!1}Xr(r_,ei),Xr(i_,ei),Xr(ap,wl),ap.prototype.g=function(){return new XMLHttpRequest},ap.prototype.i=function(){return{}},s_=new ap;var jC=45e3,Qv={},up={};function Jv(n,e,t){n.K=1,n.v=fu(El(e)),n.s=t,n.P=!0,Xv(n,null)}function Xv(n,e){n.F=Date.now(),sh(n),n.A=El(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),rw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new Yv,n.g=mw(n.l,t?e:null,!n.s),0<n.N&&(n.L=new dS(Vr(n.Ka,n,n.g),n.N)),BC(n.S,n.g,"readystatechange",n.hb),e=n.H?Zm(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ea(1),function hS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var w=h[_].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.U,n.s)}function ew(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function HC(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=fS(n,t),i==up){4==e&&(n.o=4,yr(14),r=!1),Ii(n.j,n.m,null,"[Incomplete Response]");break}if(i==Qv){n.o=4,yr(15),Ii(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Ii(n.j,n.m,i,null),GC(n,i)}ew(n)&&i!=up&&i!=Qv&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,yr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),pw(e),e.K=!0,yr(11))):(Ii(n.j,n.m,t,"[Invalid Chunked Response]"),Oc(n),cp(n))}function fS(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?up:(t=Number(e.substring(t,r)),isNaN(t)?Qv:(r+=1)+t>e.length?up:(e=e.substr(r,t),n.C=r+t,e))}function sh(n){n.V=Date.now()+n.O,$C(n,n.O)}function $C(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ca(Vr(n.fb,n),e)}function lp(n){n.B&&(St.clearTimeout(n.B),n.B=null)}function cp(n){0==n.l.G||n.I||sI(n.l,n)}function Oc(n){lp(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,qv(n.T),nh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function GC(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||JC(t.h,n)))if(!n.J&&JC(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ca(Vr(t.bb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;wp(t),yp(t)}w_(t),yr(18)}if(1>=QC(t.h)&&t.ja){try{t.ja()}catch(w){}t.ja=void 0}}else Il(t,11)}else if((n.J||t.g==n)&&wp(t),!Jf(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.T=w[0],w=w[1],2==t.G)if("c"==w[0]){t.I=w[1],t.ka=w[2];const D=w[3];null!=D&&(t.ma=D,t.j.info("VER="+t.ma));const S=w[4];null!=S&&(t.Ca=S,t.j.info("SVER="+t.Ca));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.J=r=1.5*P,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const F=n.g;if(F){const j=F.g?F.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(j){var a=r.h;a.g||-1==j.indexOf("spdy")&&-1==j.indexOf("quic")&&-1==j.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(kc(a,a.h),a.h=null))}if(r.D){const ae=F.g?F.g.getResponseHeader("X-HTTP-Session-Id"):null;ae&&(r.za=ae,kn(r.F,r.D,ae))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var l=n;if((r=t).sa=gw(r,r.H?r.ka:null,r.V),l.J){iw(r.h,l);var h=l,_=r.J;_&&h.setTimeout(_),h.B&&(lp(h),sh(h)),r.g=l}else iI(r);0<t.i.length&&vp(t)}else"stop"!=w[0]&&"close"!=w[0]||Il(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Il(t,7):y_(t):"noop"!=w[0]&&t.l&&t.l.wa(w),t.A=0)}Ea(4)}catch(w){}}function o_(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Qd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function tw(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(Qd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function pS(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Qd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(st=ih.prototype).setTimeout=function(n){this.O=n},st.hb=function(n){n=n.target;const e=this.L;e&&3==pu(n)?e.l():this.Ka(n)},st.Ka=function(n){try{if(n==this.g)e:{const D=pu(this.g);var e=this.g.Ea();const S=this.g.aa();if(!(3>D)&&(3!=D||xv||this.g&&(this.h.h||this.g.fa()||tI(this.g)))){this.I||4!=D||7==e||Ea(8==e||0>=S?3:2),lp(this);var t=this.g.aa();this.Y=t;t:if(ew(this)){var r=tI(this.g);n="";var i=r.length,a=4==pu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Oc(this),cp(this);var l="";break t}this.h.i=new St.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.fa();if(this.i=200==t,function Kv(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.U,D,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Jf(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,yr(12),Oc(this),cp(this);break e}Ii(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,GC(this,t)}this.P?(HC(this,D,l),xv&&this.i&&3==D&&(BC(this.S,this.T,"tick",this.gb),this.T.start())):(Ii(this.j,this.m,l,null),GC(this,l)),4==D&&Oc(this),this.i&&!this.I&&(4==D?sI(this.l,this):(this.i=!1,sh(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,yr(12)):(this.o=0,yr(13)),Oc(this),cp(this)}}}catch(D){}},st.gb=function(){if(this.g){var n=pu(this.g),e=this.g.fa();this.C<e.length&&(lp(this),HC(this,n,e),this.i&&4!=n&&sh(this))}},st.cancel=function(){this.I=!0,Oc(this)},st.fb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function sp(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ea(3),yr(17)),Oc(this),this.o=2,cp(this)):$C(this,this.V-n)};var WC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oh(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof oh){this.h=void 0!==e?e:n.h,a_(this,n.j),this.s=n.s,this.g=n.g,dp(this,n.m),this.l=n.l,e=n.i;var t=new fp;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),gS(this,t),this.o=n.o}else n&&(t=String(n).match(WC))?(this.h=!!e,a_(this,t[1]||"",!0),this.s=hp(t[2]||""),this.g=hp(t[3]||"",!0),dp(this,t[4]),this.l=hp(t[5]||"",!0),gS(this,t[6]||"",!0),this.o=hp(t[7]||"")):(this.h=!!e,this.i=new fp(null,this.h))}function El(n){return new oh(n)}function a_(n,e,t){n.j=t?hp(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dp(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function gS(n,e,t){e instanceof fp?(n.i=e,function ZC(n,e){e&&!n.j&&(Cl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(zC(this,r),rw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=ah(e,qC)),n.i=new fp(e,n.h))}function kn(n,e,t){n.i.set(e,t)}function fu(n){return kn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function hp(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function ah(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,mS),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function mS(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}oh.prototype.toString=function(){var n=[],e=this.j;e&&n.push(ah(e,nw,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(ah(e,nw,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(ah(t,"/"==t.charAt(0)?_S:u_,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",ah(t,yS)),n.join("")};var nw=/[#\/\?@]/g,u_=/[#\?:]/g,_S=/[#\?]/g,qC=/[#\?@]/g,yS=/#/g;function fp(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Cl(n){n.g||(n.g=new Map,n.h=0,n.i&&function qM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function zC(n,e){Cl(n),e=uh(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function KC(n,e){return Cl(n),e=uh(n,e),n.g.has(e)}function rw(n,e,t){zC(n,e),0<t.length&&(n.i=null,n.g.set(uh(n,e),Wm(t)),n.h+=t.length)}function uh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function l_(n){this.l=n||zM,n=St.PerformanceNavigationTiming?0<(n=St.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(St.g&&St.g.Ga&&St.g.Ga()&&St.g.Ga().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(st=fp.prototype).add=function(n,e){Cl(this),this.i=null,n=uh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},st.forEach=function(n,e){Cl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},st.oa=function(){Cl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},st.W=function(n){Cl(this);let e=[];if("string"==typeof n)KC(this,n)&&(e=e.concat(this.g.get(uh(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},st.set=function(n,e){return Cl(this),this.i=null,KC(this,n=uh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},st.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},st.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.W(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var zM=10;function c_(n){return!!n.h||!!n.g&&n.g.size>=n.j}function QC(n){return n.h?1:n.g?n.g.size:0}function JC(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function kc(n,e){n.g?n.g.add(e):n.h=e}function iw(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function d_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Wm(n.i)}function pp(){}function vS(){this.g=new pp}function h_(n,e,t){const r=t||"";try{o_(n,function(i,a){let l=i;Yf(i)&&(l=FC(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function lh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function p_(n){this.l=n.$b||null,this.j=n.ib||!1}function g_(n,e){Tr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=gp,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}l_.prototype.cancel=function(){if(this.i=d_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},pp.prototype.stringify=function(n){return St.JSON.stringify(n,void 0)},pp.prototype.parse=function(n){return St.JSON.parse(n,void 0)},Xr(p_,wl),p_.prototype.g=function(){return new g_(this.l,this.j)},p_.prototype.i=function(n){return function(){return n}}({}),Xr(g_,Tr);var gp=0;function m_(n){n.j.read().then(n.Sa.bind(n)).catch(n.ga.bind(n))}function ch(n){n.readyState=4,n.l=null,n.j=null,n.A=null,dh(n)}function dh(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(st=g_.prototype).open=function(n,e){if(this.readyState!=gp)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,dh(this)},st.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||St).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ga.bind(this))},st.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,ch(this)),this.readyState=gp},st.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,dh(this)),this.g&&(this.readyState=3,dh(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ga.bind(this));else if(void 0!==St.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;m_(this)}else n.text().then(this.Ua.bind(this),this.ga.bind(this))},st.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?ch(this):dh(this),3==this.readyState&&m_(this)}},st.Ua=function(n){this.g&&(this.response=this.responseText=n,ch(this))},st.Ta=function(n){this.g&&(this.response=n,ch(this))},st.ga=function(){this.g&&ch(this)},st.setRequestHeader=function(n,e){this.v.append(n,e)},st.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},st.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(g_.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var sw=St.JSON.parse;function cr(n){Tr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ow,this.K=this.L=!1}Xr(cr,Tr);var ow="",aw=/^https?$/i,XC=["POST","PUT"];function uw(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,lw(n),mp(n)}function lw(n){n.D||(n.D=!0,fi(n,"complete"),fi(n,"error"))}function __(n){if(n.h&&void 0!==Iv&&(!n.C[1]||4!=pu(n)||2!=n.aa()))if(n.v&&4==pu(n))zv(n.Ha,0,n);else if(fi(n,"readystatechange"),4==pu(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(WC)[1]||null;if(!i&&St.self&&St.self.location){var a=St.self.location.protocol;i=a.substr(0,a.length-1)}r=!aw.test(i?i.toLowerCase():"")}t=r}if(t)fi(n,"complete"),fi(n,"success");else{n.m=6;try{var l=2<pu(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.aa()+"]",lw(n)}}finally{mp(n)}}}function mp(n,e){if(n.g){eI(n);const t=n.g,r=n.C[0]?Gm:null;n.g=null,n.C=null,e||fi(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function eI(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(St.clearTimeout(n.A),n.A=null)}function pu(n){return n.g?n.g.readyState:0}function tI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case ow:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function cw(n){let e="";return eo(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function _p(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=cw(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):kn(n,e,t))}function hh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function dw(n){this.Ca=0,this.i=[],this.j=new t_,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.$a=this.U=0,this.Ya=hh("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Wa=hh("baseRetryDelayMs",5e3,n),this.ab=hh("retryDelaySeedMs",1e4,n),this.Za=hh("forwardChannelMaxRetries",2,n),this.ta=hh("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Yb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new l_(n&&n.concurrentRequestLimit),this.Fa=new vS,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Xa=n&&n.Wb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function y_(n){if(hw(n),3==n.G){var e=n.U++,t=El(n.F);kn(t,"SID",n.I),kn(t,"RID",e),kn(t,"TYPE","terminate"),v_(n,t),(e=new ih(n,n.j,e,void 0)).K=2,e.v=fu(El(t)),t=!1,St.navigator&&St.navigator.sendBeacon&&(t=St.navigator.sendBeacon(e.v.toString(),"")),!t&&St.Image&&((new Image).src=e.v,t=!0),t||(e.g=mw(e.l,null),e.g.da(e.v)),e.F=Date.now(),sh(e)}aI(n)}function yp(n){n.g&&(pw(n),n.g.cancel(),n.g=null)}function hw(n){yp(n),n.u&&(St.clearTimeout(n.u),n.u=null),wp(n),n.h.cancel(),n.m&&("number"==typeof n.m&&St.clearTimeout(n.m),n.m=null)}function vp(n){c_(n.h)||n.m||(n.m=!0,lS(n.Ja,n),n.C=0)}function fw(n,e){var t;t=e?e.m:n.U++;const r=El(n.F);kn(r,"SID",n.I),kn(r,"RID",t),kn(r,"AID",n.T),v_(n,r),n.o&&n.s&&_p(r,n.o,n.s),t=new ih(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=rI(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),kc(n.h,t),Jv(t,r,e)}function v_(n,e){n.ia&&eo(n.ia,function(t,r){kn(e,r,t)}),n.l&&o_({},function(t,r){kn(e,r,t)})}function rI(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Vr(n.l.Qa,n.l,n):null;e:{var i=n.i;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let w=i[_].h;const D=i[_].g;if(w-=a,0>w)a=Math.max(0,i[_].h-100),h=!1;else try{h_(D,l,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function iI(n){n.g||n.u||(n.Z=1,lS(n.Ia,n),n.A=0)}function w_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ca(Vr(n.Ia,n),oI(n,n.A)),n.A++,0))}function pw(n){null!=n.B&&(St.clearTimeout(n.B),n.B=null)}function vr(n){n.g=new ih(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=El(n.sa);kn(e,"RID","rpc"),kn(e,"SID",n.I),kn(e,"CI",n.L?"0":"1"),kn(e,"AID",n.T),kn(e,"TYPE","xmlhttp"),v_(n,e),n.o&&n.s&&_p(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=fu(El(e)),t.s=null,t.P=!0,Xv(t,n)}function wp(n){null!=n.v&&(St.clearTimeout(n.v),n.v=null)}function sI(n,e){var t=null;if(n.g==e){wp(n),pw(n),n.g=null;var r=2}else{if(!JC(n.h,e))return;t=e.D,iw(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;fi(r=bi(),new Mc(r,t,e,i)),vp(n)}else iI(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function nI(n,e){return!(QC(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Ya?0:n.Za)||(n.m=Ca(Vr(n.Ja,n,e),oI(n,n.C)),n.C++,0)))}(n,e)||2==r&&w_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:Il(n,5);break;case 4:Il(n,10);break;case 3:Il(n,6);break;default:Il(n,2)}}function oI(n,e){let t=n.Wa+Math.floor(Math.random()*n.ab);return n.l||(t*=2),t*e}function Il(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Vr(n.jb,n);t||(t=new oh("//www.google.com/images/cleardot.gif"),St.location&&"http"==St.location.protocol||a_(t,"https"),fu(t)),function f_(n,e){const t=new t_;if(St.Image){const r=new Image;r.onload=Qf(lh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Qf(lh,t,r,"TestLoadImage: error",!1,e),r.onabort=Qf(lh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Qf(lh,t,r,"TestLoadImage: timeout",!1,e),St.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else yr(2);n.G=0,n.l&&n.l.va(e),aI(n),hw(n)}function aI(n){if(n.G=0,n.la=[],n.l){const e=d_(n.h);(0!=e.length||0!=n.i.length)&&(Sv(n.la,e),Sv(n.la,n.i),n.h.i.length=0,Wm(n.i),n.i.length=0),n.l.ua()}}function gw(n,e,t){var r=t instanceof oh?El(t):new oh(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),dp(r,r.m);else{var i=St.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new oh(null,void 0);r&&a_(a,r),e&&(a.g=e),i&&dp(a,i),t&&(a.l=t),r=a}return e=n.za,(t=n.D)&&e&&kn(r,t,e),kn(r,"VER",n.ma),v_(n,r),r}function mw(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new cr(t&&n.Da&&!n.ra?new p_({ib:!0}):n.ra)).L=n.H,e}function Fc(){}function E_(){if(_l&&!(10<=Number(iS)))throw Error("Environmental error: no available transport.")}function As(n,e){Tr.call(this),this.g=new dw(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Xb)&&!Jf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Jf(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Lc(this)}function _w(n){r_.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function uI(){i_.call(this),this.status=1}function Lc(n){this.g=n}(st=cr.prototype).da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():s_.g(),this.C=function Pc(n){return n.h||(n.h=n.i())}(this.u?this.u:s_),this.g.onreadystatechange=Vr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void uw(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=St.FormData&&n instanceof St.FormData,!(0<=AC(XC,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{eI(this),0<this.B&&((this.K=function wS(n){return _l&&function PC(){return function Av(n){var e=rS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=va(String(Xf)).split("."),t=va("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=Xd(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||Xd(0==i[2].length,0==a[2].length)||Xd(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vr(this.qa,this)):this.A=zv(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){uw(this,a)}},st.qa=function(){void 0!==Iv&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,fi(this,"timeout"),this.abort(8))},st.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,fi(this,"complete"),fi(this,"abort"),mp(this))},st.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mp(this,!0)),cr.X.M.call(this)},st.Ha=function(){this.s||(this.F||this.v||this.l?__(this):this.eb())},st.eb=function(){__(this)},st.aa=function(){try{return 2<pu(this)?this.g.status:-1}catch(n){return-1}},st.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},st.Ra=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),sw(e)}},st.Ea=function(){return this.m},st.Na=function(){return"string"==typeof this.j?this.j:String(this.j)},(st=dw.prototype).ma=8,st.G=1,st.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new ih(this,this.j,n,void 0);let a=this.s;if(this.S&&(a?(a=Zm(a),kv(a,this.S)):a=this.S),null!==this.o||this.N||(i.H=a,a=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=rI(this,i,e),kn(t=El(this.F),"RID",n),kn(t,"CVER",22),this.D&&kn(t,"X-HTTP-Session-Id",this.D),v_(this,t),a&&(this.N?e="headers="+encodeURIComponent(String(cw(a)))+"&"+e:this.o&&_p(t,this.o,a)),kc(this.h,i),this.Xa&&kn(t,"TYPE","init"),this.O?(kn(t,"$req",e),kn(t,"SID","null"),i.Z=!0,Jv(i,t,null)):Jv(i,t,e),this.G=2}}else 3==this.G&&(n?fw(this,n):0==this.i.length||c_(this.h)||fw(this))},st.Ia=function(){if(this.u=null,vr(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ca(Vr(this.cb,this),n)}},st.cb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,yr(10),yp(this),vr(this))},st.bb=function(){null!=this.v&&(this.v=null,yp(this),w_(this),yr(19))},st.jb=function(n){n?(this.j.info("Successfully pinged google.com"),yr(2)):(this.j.info("Failed to ping google.com"),yr(1))},(st=Fc.prototype).xa=function(){},st.wa=function(){},st.va=function(){},st.ua=function(){},st.Qa=function(){},E_.prototype.g=function(n,e){return new As(n,e)},Xr(As,Tr),As.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;yr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=gw(n,null,n.V),vp(n)},As.prototype.close=function(){y_(this.g)},As.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=FC(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.$a++,n)),3==e.G&&vp(e)},As.prototype.M=function(){this.g.l=null,delete this.j,y_(this.g),delete this.g,As.X.M.call(this)},Xr(_w,r_),Xr(uI,i_),Xr(Lc,Fc),Lc.prototype.xa=function(){fi(this.g,"a")},Lc.prototype.wa=function(n){fi(this.g,new _w(n))},Lc.prototype.va=function(n){fi(this.g,new uI(n))},Lc.prototype.ua=function(){fi(this.g,"b")},E_.prototype.createWebChannel=E_.prototype.g,As.prototype.send=As.prototype.u,As.prototype.open=As.prototype.m,As.prototype.close=As.prototype.close,hu.NO_ERROR=0,hu.TIMEOUT=8,hu.HTTP_ERROR=6,Nc.COMPLETE="complete",Zv.EventType=rh,rh.OPEN="a",rh.CLOSE="b",rh.ERROR="c",rh.MESSAGE="d",Tr.prototype.listen=Tr.prototype.N,cr.prototype.listenOnce=cr.prototype.O,cr.prototype.getLastError=cr.prototype.Na,cr.prototype.getLastErrorCode=cr.prototype.Ea,cr.prototype.getStatus=cr.prototype.aa,cr.prototype.getResponseJson=cr.prototype.Ra,cr.prototype.getResponseText=cr.prototype.fa,cr.prototype.send=cr.prototype.da;var KM=gl.createWebChannelTransport=function(){return new E_},lI=gl.getStatEventTarget=function(){return bi()},Ep=gl.ErrorCode=hu,Ia=gl.EventType=Nc,ES=gl.Event=Ss,cI=gl.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},ba=gl.FetchXmlHttpFactory=p_,ss=gl.WebChannel=Zv,Mo=gl.XhrIo=cr;const yw="@firebase/firestore";class Sr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Sr.UNAUTHENTICATED=new Sr(null),Sr.GOOGLE_CREDENTIALS=new Sr("google-credentials-uid"),Sr.FIRST_PARTY=new Sr("first-party-uid"),Sr.MOCK_USER=new Sr("mock-user");let fh="9.10.0";const bl=new Xe.Yd("@firebase/firestore");function vw(){return bl.logLevel}function Pe(n,...e){if(bl.logLevel<=Xe.in.DEBUG){const t=e.map(C_);bl.debug(`Firestore (${fh}): ${n}`,...t)}}function Sn(n,...e){if(bl.logLevel<=Xe.in.ERROR){const t=e.map(C_);bl.error(`Firestore (${fh}): ${n}`,...t)}}function Vc(n,...e){if(bl.logLevel<=Xe.in.WARN){const t=e.map(C_);bl.warn(`Firestore (${fh}): ${n}`,...t)}}function C_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${fh}) INTERNAL ASSERTION FAILED: `+n;throw Sn(e),new Error(e)}function Dt(n,e){n||nt()}function Ge(n,e){return n}const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends R.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class I_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class b_{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Sr.UNAUTHENTICATED))}shutdown(){}}class hI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class fI{constructor(e){this.t=e,this.currentUser=Sr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Ar,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,k.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Pe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Pe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Ar)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Pe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new I_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Sr(e)}}class pI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Sr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Dt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class gI{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new pI(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Sr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ww{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mI{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=a=>{null!=a.error&&Pe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.A;return this.A=a.token,Pe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Pe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.T.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.T.getImmediate({optional:!0});a?i(a):Pe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.A=t.token,new ww(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function _I(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class yI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=_I(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function At(n,e){return n<e?-1:n>e?1:0}function ph(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function vI(n){return n+"\0"}class Fn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fn.fromMillis(Date.now())}static fromDate(e){return Fn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Fn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?At(this.nanoseconds,e.nanoseconds):At(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new Fn(0,0))}static max(){return new Et(new Fn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cp{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Cp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Jt extends Cp{construct(e,t,r){return new Jt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Jt(t)}static emptyPath(){return new Jt([])}}const bS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class er extends Cp{construct(e,t,r){return new er(e,t,r)}static isValidIdentifier(e){return bS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),er.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new er(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Me(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new er(t)}static emptyPath(){return new er([])}}class We{constructor(e){this.path=e}static fromPath(e){return new We(Jt.fromString(e))}static fromName(e){return new We(Jt.fromString(e).popFirst(5))}static empty(){return new We(Jt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Jt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Jt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new We(new Jt(e.slice()))}}class D_{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ew(n){return n.fields.find(e=>2===e.kind)}function Uc(n){return n.fields.filter(e=>2!==e.kind)}D_.UNKNOWN_ID=-1;class T_{constructor(e,t){this.fieldPath=e,this.kind=t}}class Ip{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Ip(0,os.min())}}function Cw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Et.fromTimestamp(1e9===r?new Fn(t+1,0):new Fn(t,r));return new os(i,We.empty(),e)}function Iw(n){return new os(n.readTime,n.key,-1)}class os{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new os(Et.min(),We.empty(),-1)}static max(){return new os(Et.max(),We.empty(),-1)}}function S_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=We.comparator(n.documentKey,e.documentKey),0!==t?t:At(n.largestBatchId,e.largestBatchId))}const bw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Dw{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function gu(n){return A_.apply(this,arguments)}function A_(){return A_=(0,k.Z)(function*(n){if(n.code!==fe.FAILED_PRECONDITION||n.message!==bw)throw n;Pe("LocalStore","Unexpectedly lost primary lease")}),A_.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(i=>i?oe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,i)=>{const a=e.length,l=new Array(a);let h=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(D=>{l[w]=D,++h,h===a&&r(l)},D=>i(D))}})}static doWhile(e,t){return new oe((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class bp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ar,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Dp(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=wI(r.target.error);this.P.reject(new Dp(e,i))}}static open(e,t,r,i){try{return new bp(t,e.transaction(i,r))}catch(a){throw new Dp(t,a)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Pe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new gh(t)}}class to{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===to.D((0,R.z$)())&&Sn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Pe("SimpleDb","Removing database:",e),mh(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,R.hl)())return!1;if(to.N())return!0;const e=(0,R.z$)(),t=to.D(e),r=0<t&&t<10,i=to.k(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.M)}static O(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,k.Z)(function*(){return t.db||(Pe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Dp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(fe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(fe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Dp(e,h))},a.onupgradeneeded=l=>{Pe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.S.$(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Pe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,k.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.F(e);const _=bp.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(D=>(_.V(),D)).catch(D=>(_.abort(D),oe.reject(D))).toPromise();return w.catch(()=>{}),yield _.v,w}catch(_){const w=_,D="FirebaseError"!==w.name&&h<3;if(Pe("SimpleDb","Transaction failed with error:",w.message,"Retrying:",D),a.close(),!D)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Bc{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return mh(this.U.delete())}}class Dp extends Me{constructor(e,t){super(fe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Dl(n){return"IndexedDbTransactionError"===n.name}class gh{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Pe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Pe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),mh(r)}add(e){return Pe("SimpleDb","ADD",this.store.name,e,e),mh(this.store.add(e))}get(e){return mh(this.store.get(e)).next(t=>(void 0===t&&(t=null),Pe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Pe("SimpleDb","DELETE",this.store.name,e),mh(this.store.delete(e))}count(){return Pe("SimpleDb","COUNT",this.store.name),mh(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.H(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new oe((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Y(e,t){Pe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(a,l,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new oe((r,i)=>{t.onerror=a=>{const l=wI(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}H(e,t){const r=[];return new oe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new Bc(h),w=t(h.primaryKey,h.value,_);if(w instanceof oe){const D=w.catch(S=>(_.done(),oe.reject(S)));r.push(D)}_.isDone?i():null===_.G?h.continue():h.continue(_.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mh(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=wI(r.target.error);t(i)}})}let x_=!1;function wI(n){const e=to.D((0,R.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return x_||(x_=!0,setTimeout(()=>{throw r},0)),r}}return n}class EI{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Pe("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,k.Z)(function*(){t.task=null;try{Pe("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){Dl(r)?Pe("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield gu(r)}yield t.nt(6e4)}))}}class CI{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,k.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,a=!0;return oe.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Pe("IndexBackiller",`Processing collection: ${l}`),this.rt(e,l,i).next(h=>{i-=h,r.add(l)});a=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.ot(i,a)).next(h=>(Pe("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=Iw(a);S_(l,r)>0&&(r=l)}),new os(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class xs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function vt(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function jc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function II(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}xs.at=-1;class tr{constructor(e,t){this.comparator=e,this.root=t||ti.EMPTY}insert(e,t){return new tr(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ti.BLACK,null,null))}remove(e){return new tr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ti.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ti{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:ti.RED,this.left=null!=i?i:ti.EMPTY,this.right=null!=a?a:ti.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new ti(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ti.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ti.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ti.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ti.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}ti.EMPTY=null,ti.RED=!0,ti.BLACK=!1,ti.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ti(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class un{constructor(e){this.comparator=e,this.data=new tr(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tp(this.data.getIterator())}getIteratorFrom(e){return new Tp(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof un)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new un(this.comparator);return t.data=e,t}}class Tp{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function vn(n){return n.hasNext()?n.getNext():void 0}class no{constructor(e){this.fields=e,e.sort(er.comparator)}static empty(){return new no([])}unionWith(e){let t=new un(er.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new no(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ph(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return At(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const SS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mu(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=SS.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Gn(n.seconds),nanos:Gn(n.nanos)}}function Gn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Tl(n){return"string"==typeof n?xr.fromBase64String(n):xr.fromUint8Array(n)}function R_(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function DI(n){const e=n.mapValue.fields.__previous_value__;return R_(e)?DI(e):e}function Sp(n){const e=mu(n.mapValue.fields.__local_write_time__.timestampValue);return new Fn(e.seconds,e.nanos)}class AS{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class ro{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new ro("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof ro&&e.projectId===this.projectId&&e.database===this.database}}function Ap(n){return null==n}function xp(n){return 0===n&&1/n==-1/0}function TI(n){return"number"==typeof n&&Number.isInteger(n)&&!xp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const No={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Rp={nullValue:"NULL_VALUE"};function Sl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?R_(n)?4:AI(n)?9007199254740991:10:nt()}function Po(n,e){if(n===e)return!0;const t=Sl(n);if(t!==Sl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sp(n).isEqual(Sp(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=mu(r.timestampValue),l=mu(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Tl(n.bytesValue).isEqual(Tl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Gn(r.geoPointValue.latitude)===Gn(i.geoPointValue.latitude)&&Gn(r.geoPointValue.longitude)===Gn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Gn(r.integerValue)===Gn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Gn(r.doubleValue),l=Gn(i.doubleValue);return a===l?xp(a)===xp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return ph(n.arrayValue.values||[],e.arrayValue.values||[],Po);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(vt(a)!==vt(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!Po(a[h],l[h])))return!1;return!0}(n,e);default:return nt()}var i}function Mp(n,e){return void 0!==(n.values||[]).find(t=>Po(t,e))}function io(n,e){if(n===e)return 0;const t=Sl(n),r=Sl(e);if(t!==r)return At(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return At(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Gn(i.integerValue||i.doubleValue),h=Gn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return _h(n.timestampValue,e.timestampValue);case 4:return _h(Sp(n),Sp(e));case 5:return At(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Tl(i),h=Tl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const w=At(l[_],h[_]);if(0!==w)return w}return At(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=At(Gn(i.latitude),Gn(a.latitude));return 0!==l?l:At(Gn(i.longitude),Gn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const w=io(l[_],h[_]);if(w)return w}return At(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===No.mapValue&&a===No.mapValue)return 0;if(i===No.mapValue)return 1;if(a===No.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},w=Object.keys(_);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=At(h[D],w[D]);if(0!==S)return S;const P=io(l[h[D]],_[w[D]]);if(0!==P)return P}return At(h.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function _h(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return At(n,e);const t=mu(n),r=mu(e),i=At(t.seconds,r.seconds);return 0!==i?i:At(t.nanos,r.nanos)}function yh(n){return Tw(n)}function Tw(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=mu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Tl(n.bytesValue).toBase64():"referenceValue"in n?We.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Tw(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Tw(r.fields[h])}`;return a+"}"}(n.mapValue):nt();var e}function $c(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function M_(n){return!!n&&"integerValue"in n}function vh(n){return!!n&&"arrayValue"in n}function Sw(n){return!!n&&"nullValue"in n}function SI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Np(n){return!!n&&"mapValue"in n}function Pp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return jc(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Pp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Pp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function AI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function ZM(n){return"nullValue"in n?Rp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?$c(ro.empty(),We.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function YM(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?$c(ro.empty(),We.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?No:nt()}function xS(n,e){const t=io(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function RS(n,e){const t=io(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ur{constructor(e){this.value=e}static empty(){return new Ur({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Np(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Pp(t)}setAll(e){let t=er.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Pp(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());Np(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Po(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Np(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){jc(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ur(Pp(this.value))}}function Op(n){const e=[];return jc(n.fields,(t,r)=>{const i=new er([t]);if(Np(r)){const a=Op(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new no(e)}class In{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new In(e,0,Et.min(),Et.min(),Ur.empty(),0)}static newFoundDocument(e,t,r){return new In(e,1,t,Et.min(),r,0)}static newNoDocument(e,t){return new In(e,2,t,Et.min(),Ur.empty(),0)}static newUnknownDocument(e,t){return new In(e,3,t,Et.min(),Ur.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ur.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ur.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof In&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new In(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class MS{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.ht=null}}function Aw(n,e=null,t=[],r=[],i=null,a=null,l=null){return new MS(n,e,t,r,i,a,l)}function Oo(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+yh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Ap(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>yh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>yh(r)).join(",")),e.ht=t}return e.ht}function kp(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!LS(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Po(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Nw(n.startAt,e.startAt)&&Nw(n.endAt,e.endAt)}function N_(n){return We.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function P_(n,e){return n.filters.filter(t=>t instanceof ni&&t.field.isEqual(e))}function xI(n,e,t){let r=Rp,i=!0;for(const a of P_(n,e)){let l=Rp,h=!0;switch(a.op){case"<":case"<=":l=ZM(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=Rp}xS({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];xS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function xw(n,e,t){let r=No,i=!0;for(const a of P_(n,e)){let l=No,h=!0;switch(a.op){case">=":case">":l=YM(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=No}RS({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];RS({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class ni extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new PS(e,t,r):"array-contains"===t?new kS(e,r):"in"===t?new RI(e,r):"not-in"===t?new FS(e,r):"array-contains-any"===t?new MI(e,r):new ni(e,t,r)}static lt(e,t,r){return"in"===t?new wh(e,r):new OS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(io(t,this.value)):null!==t&&Sl(this.value)===Sl(t)&&this.ft(io(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class PS extends ni{constructor(e,t,r){super(e,t,r),this.key=We.fromName(r.referenceValue)}matches(e){const t=We.comparator(e.key,this.key);return this.ft(t)}}class wh extends ni{constructor(e,t){super(e,"in",t),this.keys=Rw(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class OS extends ni{constructor(e,t){super(e,"not-in",t),this.keys=Rw(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Rw(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>We.fromName(r.referenceValue))}class kS extends ni{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return vh(t)&&Mp(t.arrayValue,this.value)}}class RI extends ni{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mp(this.value.arrayValue,t)}}class FS extends ni{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mp(this.value.arrayValue,t)}}class MI extends ni{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!vh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mp(this.value.arrayValue,r))}}class Al{constructor(e,t){this.position=e,this.inclusive=t}}class xl{constructor(e,t="asc"){this.field=e,this.dir=t}}function LS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Mw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?We.comparator(We.fromName(l.referenceValue),t.key):io(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Nw(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Po(n.position[t],e.position[t]))return!1;return!0}class _u{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this._t=null,this.wt=null}}function NI(n,e,t,r,i,a,l,h){return new _u(n,e,t,r,i,a,l,h)}function Eh(n){return new _u(n)}function O_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function Pw(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function k_(n){for(const e of n.filters)if(e.dt())return e.field;return null}function Ow(n){return null!==n.collectionGroup}function Ch(n){const e=Ge(n);if(null===e._t){e._t=[];const t=k_(e),r=Pw(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new xl(t)),e._t.push(new xl(er.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e._t.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new xl(er.keyField(),a))}}}return e._t}function as(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=Aw(e.path,e.collectionGroup,Ch(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Ch(e))t.push(new xl(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Al(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Al(e.startAt.position,e.startAt.inclusive):null;e.wt=Aw(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function F_(n,e,t){return new _u(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fp(n,e){return kp(as(n),as(e))&&n.limitType===e.limitType}function PI(n){return`${Oo(as(n))}|lt:${n.limitType}`}function kw(n){return`Query(target=${function NS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${yh(r.value)}`;var r}).join(", ")}]`),Ap(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>yh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>yh(t)).join(",")),`Target(${e})`}(as(n))}; limitType=${n.limitType})`}function Fw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):We.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=Mw(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Ch(t),r)||t.endAt&&!function(i,a,l){const h=Mw(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Ch(t),r)));var t,r}function Lw(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Vw(n){return(e,t)=>{let r=!1;for(const i of Ch(n)){const a=VS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function VS(n,e,t){const r=n.field.isKeyField()?We.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?io(h,_):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function OI(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xp(e)?"-0":e}}function Uw(n){return{integerValue:""+n}}function kI(n,e){return TI(e)?Uw(e):OI(n,e)}class L_{constructor(){this._=void 0}}function US(n,e,t){return n instanceof Gc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof yu?FI(n,e):n instanceof Wc?U_(n,e):function(r,i){const a=V_(r,i),l=jw(a)+jw(r.yt);return M_(a)&&M_(r.yt)?Uw(l):OI(r.It,l)}(n,e)}function Bw(n,e,t){return n instanceof yu?FI(n,e):n instanceof Wc?U_(n,e):t}function V_(n,e){return n instanceof Ih?M_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gc extends L_{}class yu extends L_{constructor(e){super(),this.elements=e}}function FI(n,e){const t=LI(e);for(const r of n.elements)t.some(i=>Po(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wc extends L_{constructor(e){super(),this.elements=e}}function U_(n,e){let t=LI(e);for(const r of n.elements)t=t.filter(i=>!Po(i,r));return{arrayValue:{values:t}}}class Ih extends L_{constructor(e,t){super(),this.It=e,this.yt=t}}function jw(n){return Gn(n.integerValue||n.doubleValue)}function LI(n){return vh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class bh{constructor(e,t){this.field=e,this.transform=t}}class VI{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function B_(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class qc{}function UI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kc(n.key,Wn.none()):new zc(n.key,n.data,Wn.none());{const t=n.data,r=Ur.empty();let i=new un(er.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new wu(n.key,r,new no(i.toArray()),Wn.none())}}function Dh(n,e,t){n instanceof zc?function(r,i,a){const l=r.value.clone(),h=jI(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof wu?function(r,i,a){if(!B_(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=jI(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(BI(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vu(n,e,t,r){return n instanceof zc?function(i,a,l,h){if(!B_(i.precondition,a))return l;const _=i.value.clone(),w=HI(i.fieldTransforms,h,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof wu?function(i,a,l,h){if(!B_(i.precondition,a))return l;const _=HI(i.fieldTransforms,h,a),w=a.data;return w.setAll(BI(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,B_(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function jS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=V_(r.transform,i||null);null!=a&&(null===t&&(t=Ur.empty()),t.set(r.field,a))}return t||null}function HS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&ph(t,r,(i,a)=>function BS(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof yu&&r instanceof yu||t instanceof Wc&&r instanceof Wc?ph(t.elements,r.elements,Po):t instanceof Ih&&r instanceof Ih?Po(t.yt,r.yt):t instanceof Gc&&r instanceof Gc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class zc extends qc{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class wu extends qc{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function BI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function jI(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,Bw(l,h,t[i]))}return r}function HI(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,US(a,l,e))}return r}class Kc extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class j_ extends qc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Hw{constructor(e){this.count=e}}var qn,Bt;function $I(n){switch(n){default:return nt();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0}}function $w(n){if(void 0===n)return Sn("GRPC error has no .code"),fe.UNKNOWN;switch(n){case qn.OK:return fe.OK;case qn.CANCELLED:return fe.CANCELLED;case qn.UNKNOWN:return fe.UNKNOWN;case qn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case qn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case qn.INTERNAL:return fe.INTERNAL;case qn.UNAVAILABLE:return fe.UNAVAILABLE;case qn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case qn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case qn.NOT_FOUND:return fe.NOT_FOUND;case qn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case qn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case qn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case qn.ABORTED:return fe.ABORTED;case qn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case qn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case qn.DATA_LOSS:return fe.DATA_LOSS;default:return nt()}}(Bt=qn||(qn={}))[Bt.OK=0]="OK",Bt[Bt.CANCELLED=1]="CANCELLED",Bt[Bt.UNKNOWN=2]="UNKNOWN",Bt[Bt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Bt[Bt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Bt[Bt.NOT_FOUND=5]="NOT_FOUND",Bt[Bt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Bt[Bt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Bt[Bt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Bt[Bt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Bt[Bt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Bt[Bt.ABORTED=10]="ABORTED",Bt[Bt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Bt[Bt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Bt[Bt.INTERNAL=13]="INTERNAL",Bt[Bt.UNAVAILABLE=14]="UNAVAILABLE",Bt[Bt.DATA_LOSS=15]="DATA_LOSS";class Eu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){jc(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return II(this.inner)}size(){return this.innerSize}}const $S=new tr(We.comparator);function us(){return $S}const H_=new tr(We.comparator);function Lp(...n){let e=H_;for(const t of n)e=e.insert(t.key,t);return e}function GS(n){let e=H_;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Da(){return Ta()}function GI(){return Ta()}function Ta(){return new Eu(n=>n.toString(),(n,e)=>n.isEqual(e))}const WI=new tr(We.comparator),Th=new un(We.comparator);function Ot(...n){let e=Th;for(const t of n)e=e.add(t);return e}const qI=new un(At);function $_(){return qI}class G_{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Sh.createSynthesizedTargetChangeForCurrentChange(e,t)),new G_(Et.min(),r,$_(),us(),Ot())}}class Sh{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Sh(xr.EMPTY_BYTE_STRING,t,Ot(),Ot(),Ot())}}class Gw{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class Ww{constructor(e,t){this.targetId=e,this.At=t}}class W_{constructor(e,t,r=xr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class zI{constructor(){this.Rt=0,this.bt=ZI(),this.Pt=xr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Ot(),t=Ot(),r=Ot();return this.bt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new Sh(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=ZI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Mt(e){this.Vt=!0,this.bt=this.bt.remove(e)}Ot(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class WS{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=us(),this.qt=KI(),this.Kt=new un(At)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const a=i.target;if(N_(a))if(0===r){const l=new We(a.path);this.jt(t,l,In.newNoDocument(l,Et.min()))}else Dt(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((a,l)=>{const h=this.Xt(l);if(h){if(a.current&&N_(h.target)){const _=new We(h.target.path);null!==this.Ut.get(_)||this.ee(l,_)||this.jt(l,_,In.newNoDocument(_,e))}a.Dt&&(t.set(l,a.xt()),a.Nt())}});let r=Ot();this.qt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const w=this.Xt(_);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.Ut.forEach((a,l)=>l.setReadTime(e));const i=new G_(e,t,this.Kt,this.Ut,r);return this.Ut=us(),this.qt=KI(),this.Kt=new un(At),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Mt(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.zt(e).Ot()}zt(e){let t=this.Lt.get(e);return t||(t=new zI,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new un(At),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Pe("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new zI),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function KI(){return new tr(We.comparator)}function ZI(){return new tr(We.comparator)}const qS={asc:"ASCENDING",desc:"DESCENDING"},zS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class KS{constructor(e,t){this.databaseId=e,this.gt=t}}function Vp(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function YI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function ZS(n,e){return Vp(n,e.toTimestamp())}function nr(n){return Dt(!!n),Et.fromTimestamp(function(e){const t=mu(e);return new Fn(t.seconds,t.nanos)}(n))}function q_(n,e){return(t=n,new Jt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function qw(n){const e=Jt.fromString(n);return Dt(Zw(e)),e}function Ah(n,e){return q_(n.databaseId,e.path)}function ko(n,e){const t=qw(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new We(JI(t))}function z_(n,e){return q_(n.databaseId,e)}function QI(n){const e=qw(n);return 4===e.length?Jt.emptyPath():JI(e)}function Up(n){return new Jt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function JI(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function XI(n,e,t){return{name:Ah(n,e),fields:t.value.mapValue.fields}}function eb(n,e,t){const r=ko(n,e.name),i=nr(e.updateTime),a=new Ur({mapValue:{fields:e.fields}}),l=In.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function Cu(n,e){let t;if(e instanceof zc)t={update:XI(n,e.key,e.value)};else if(e instanceof Kc)t={delete:Ah(n,e.key)};else if(e instanceof wu)t={update:XI(n,e.key,e.data),updateMask:rb(e.fieldMask)};else{if(!(e instanceof j_))return nt();t={verify:Ah(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Gc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ih)return{fieldPath:a.field.canonicalString(),increment:l.yt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:ZS(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function zw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Wn.updateTime(nr(i.updateTime)):void 0!==i.exists?Wn.exists(i.exists):Wn.none():Wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),h=new Gc):"appendMissingElements"in l?h=new yu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Wc(l.removeAllFromArray.values||[]):"increment"in l?h=new Ih(a,l.increment):nt();const _=er.fromServerFormat(l.fieldPath);return new bh(_,h)}(n,i)):[];var i;if(e.update){const i=ko(n,e.update.name),a=new Ur({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new no((e.updateMask.fieldPaths||[]).map(w=>er.fromServerFormat(w)));return new wu(i,a,l,t,r)}return new zc(i,a,t,r)}if(e.delete){const i=ko(n,e.delete);return new Kc(i,t)}if(e.verify){const i=ko(n,e.verify);return new j_(i,t)}return nt()}function Fo(n,e){return{documents:[z_(n,e.path)]}}function tb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=z_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=z_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const w=_.map(D=>function(S){if("=="===S.op){if(SI(S.value))return{unaryFilter:{field:Iu(S.field),op:"IS_NAN"}};if(Sw(S.value))return{unaryFilter:{field:Iu(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(SI(S.value))return{unaryFilter:{field:Iu(S.field),op:"IS_NOT_NAN"}};if(Sw(S.value))return{unaryFilter:{field:Iu(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Iu(S.field),op:XS(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:Iu((D=w).field),direction:JS(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.gt||Ap(w)?w:{value:w});var w,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function K_(n){let e=QI(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=nb(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new xl(bu((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Ap(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Al((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Al(D.values||[],!D.before)}(t.endAt)),NI(e,i,l,a,h,"F",_,w)}function nb(n){return n?void 0!==n.unaryFilter?[tA(n)]:void 0!==n.fieldFilter?[eA(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>nb(e)).reduce((e,t)=>e.concat(t)):nt():[]}function JS(n){return qS[n]}function XS(n){return zS[n]}function Iu(n){return{fieldPath:n.canonicalString()}}function bu(n){return er.fromServerFormat(n.fieldPath)}function eA(n){return ni.create(bu(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function tA(n){switch(n.unaryFilter.op){case"IS_NAN":const e=bu(n.unaryFilter.field);return ni.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=bu(n.unaryFilter.field);return ni.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bu(n.unaryFilter.field);return ni.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bu(n.unaryFilter.field);return ni.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function rb(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Zw(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=sb(e)),e=ib(n.get(t),e);return sb(e)}function ib(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function sb(n){return n+"\x01\x01"}function Sa(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Jt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:nt()}a=l+2}return new Jt(r)}const nA=["userId","batchId"];function xh(n,e){return[n,ri(e)]}function Z_(n,e,t){return[n,ri(e),t]}const ob={},Yw=["prefixPath","collectionGroup","readTime","documentId"],Qw=["prefixPath","collectionGroup","documentId"],rA=["collectionGroup","readTime","prefixPath","documentId"],iA=["canonicalId","targetId"],sA=["targetId","path"],oA=["path","targetId"],ab=["collectionId","parent"],Jw=["indexId","uid"],ub=["uid","sequenceNumber"],lb=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],cb=["indexId","uid","orderedDocumentKey"],db=["userId","collectionPath","documentId"],aA=["userId","collectionPath","largestBatchId"],hb=["userId","collectionGroup","largestBatchId"],Xw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],uA=[...Xw,"documentOverlays"],e0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fb=e0,Di=[...fb,"indexConfiguration","indexState","indexEntries"];class Rl extends Dw{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Br(n,e){const t=Ge(n);return to.O(t.ie,e)}class t0{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Dh(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=vu(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=vu(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=GI();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let h=this.applyToLocalView(l,a.mutatedFields);h=t.has(i.key)?null:h;const _=UI(l,h);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Et.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ot())}isEqual(e){return this.batchId===e.batchId&&ph(this.mutations,e.mutations,(t,r)=>HS(t,r))&&ph(this.baseMutations,e.baseMutations,(t,r)=>HS(t,r))}}class pb{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=WI;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new pb(e,t,r,i)}}class Zc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ml{constructor(e,t,r,i,a=Et.min(),l=Et.min(),h=xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Ml(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Ml(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Ml(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Y_{constructor(e){this.re=e}}function n0(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Q_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ah(i=n.re,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Vp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Yc(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Yc(e.version)}}var i,a;return r}function Q_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Yc(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Du(n){const e=new Fn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function Nl(n,e){const t=(e.baseMutations||[]).map(a=>zw(n.re,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>zw(n.re,a)),i=Fn.fromMillis(e.localWriteTimeMs);return new t0(e.batchId,i,t,r)}function Rh(n){const e=Du(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Du(n.lastLimboFreeSnapshotVersion):Et.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=as(Eh(QI(i.documents[0])))):r=as(K_(n.query)),new Ml(r,n.targetId,0,n.lastListenSequenceNumber,e,t,xr.fromBase64String(n.resumeToken))}function jp(n,e){const t=Yc(e.snapshotVersion),r=Yc(e.lastLimboFreeSnapshotVersion);let i;i=N_(e.target)?Fo(n.re,e.target):tb(n.re,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oo(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hp(n){const e=K_({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?F_(e,e.limit,"L"):e}function gb(n,e){return new Zc(e.largestBatchId,zw(n.re,e.overlayMutation))}function r0(n,e){const t=e.path.lastSegment();return[n,ri(e.path.popLast()),t]}function mb(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Yc(r.readTime),documentKey:ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class _b{getBundleMetadata(e,t){return $p(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Du(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return $p(e).put({bundleId:(r=t).id,createTime:Yc(nr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return s0(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Hp(i.bundledQuery),readTime:Du(i.readTime)};var i})}saveNamedQuery(e,t){return s0(e).put({name:(r=t).name,readTime:Yc(nr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function $p(n){return Br(n,"bundles")}function s0(n){return Br(n,"namedQueries")}class J_{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new J_(e,t.uid||"")}getOverlay(e,t){return Qc(e).get(r0(this.userId,t)).next(r=>r?gb(this.It,r):null)}getOverlays(e,t){const r=Da();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Zc(t,l);i.push(this.ue(e,h))}),oe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(ri(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Qc(e).Y("collectionPathOverlayIndex",h))}),oe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=Da(),a=ri(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Qc(e).W("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const w=gb(this.It,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=Da();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Qc(e).Z({index:"collectionGroupOverlayIndex",range:h},(_,w,D)=>{const S=gb(this.It,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}ue(e,t){return Qc(e).put(function(r,i,a){const[l,h,_]=r0(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Cu(r.re,a.mutation)}}(this.It,this.userId,t))}}function Qc(n){return Br(n,"documentOverlays")}class Tu{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Gn(e.integerValue));else if("doubleValue"in e){const r=Gn(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),xp(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(Tl(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?AI(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):nt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),We.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function QM(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function yb(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=QM(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Tu.Te=new Tu;class cA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=yb(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=yb(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Me(255),this.Me(255)}Oe(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Me(0),this.Me(1)}ve(){this.Fe(0),this.Fe(1)}Me(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class vb{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class wb{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Oe()}}class Gp{constructor(){this.Be=new cA,this.Le=new vb(this.Be),this.Ue=new wb(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Pl{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Pl(this.indexId,this.documentKey,this.arrayValue,r)}}function Ol(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Eb(n.arrayValue,e.arrayValue),0!==t?t:(t=Eb(n.directionalValue,e.directionalValue),0!==t?t:We.comparator(n.documentKey,e.documentKey)))}function Eb(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class dA{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=Ew(e);if(void 0!==t&&!this.ze(t))return!1;const r=Uc(e);let i=0,a=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const l=r[i];if(!this.He(this.je,l)||!this.Je(this.Ge[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Ge.length||!this.Je(this.Ge[a++],l))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Cb{constructor(){this.Ye=new o0}addToCollectionParentIndex(e,t){return this.Ye.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(os.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(os.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class o0{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new un(Jt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new un(Jt.comparator)).toArray()}}const Wp=new Uint8Array(0);class Ib{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new o0,this.Ze=new Eu(r=>Oo(r),(r,i)=>kp(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const a={collectionId:r,parent:ri(i)};return a0(e).put(a)}return oe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[vI(t),""],!1,!0);return a0(e).W(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Sa(l.parent))}return r})}addFieldIndex(e,t){const r=X_(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=qp(e);return a.next(h=>{l.put(mb(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=X_(e),i=qp(e),a=Mh(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Mh(e);let i=!0;const a=new Map;return oe.forEach(this.tn(t),l=>this.en(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=Ot();const h=[];return oe.forEach(a,(_,w)=>{var D;Pe("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(rt=>`${rt.fieldPath}:${rt.kind}`).join(",")}`} to execute ${Oo(t)}`);const S=function(rt,tt){const Ct=Ew(tt);if(void 0===Ct)return null;for(const Mt of P_(rt,Ct.fieldPath))switch(Mt.op){case"array-contains-any":return Mt.value.arrayValue.values||[];case"array-contains":return[Mt.value]}return null}(w,_),P=function(rt,tt){const Ct=new Map;for(const Mt of Uc(tt))for(const hr of P_(rt,Mt.fieldPath))switch(hr.op){case"==":case"in":Ct.set(Mt.fieldPath.canonicalString(),hr.value);break;case"not-in":case"!=":return Ct.set(Mt.fieldPath.canonicalString(),hr.value),Array.from(Ct.values())}return null}(w,_),F=function(rt,tt){const Ct=[];let Mt=!0;for(const hr of Uc(tt)){const Ou=0===hr.kind?xI(rt,hr.fieldPath,rt.startAt):xw(rt,hr.fieldPath,rt.startAt);Ct.push(Ou.value),Mt&&(Mt=Ou.inclusive)}return new Al(Ct,Mt)}(w,_),j=function(rt,tt){const Ct=[];let Mt=!0;for(const hr of Uc(tt)){const Ou=0===hr.kind?xw(rt,hr.fieldPath,rt.endAt):xI(rt,hr.fieldPath,rt.endAt);Ct.push(Ou.value),Mt&&(Mt=Ou.inclusive)}return new Al(Ct,Mt)}(w,_),ae=this.nn(_,w,F),Ce=this.nn(_,w,j),je=this.sn(_,w,P),et=this.rn(_.indexId,S,ae,F.inclusive,Ce,j.inclusive,je);return oe.forEach(et,rt=>r.J(rt,t.limit).next(tt=>{tt.forEach(Ct=>{const Mt=We.fromSegments(Ct.documentKey);l.has(Mt)||(l=l.add(Mt),h.push(Mt))})}))}).next(()=>h)}return oe.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const P=t?this.on(t[S/w]):Wp,F=this.un(e,P,r[S%w],i),j=this.cn(e,P,a[S%w],l),ae=h.map(Ce=>this.un(e,P,Ce,!0));D.push(...this.createRange(F,j,ae))}return D}un(e,t,r,i){const a=new Pl(e,We.empty(),t,r);return i?a:a.Ke()}cn(e,t,r,i){const a=new Pl(e,We.empty(),t,r);return i?a.Ke():a}en(e,t){const r=new dA(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.We(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return oe.forEach(this.tn(t),i=>this.en(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new un(er.comparator),_=!1;for(const w of l.filters){const D=w;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:h=h.add(D.field))}for(const w of l.orderBy)w.field.isKeyField()||(h=h.add(w.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Gp;for(const i of Uc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.qe(i.kind);Tu.Te.ce(a,l)}return r.$e()}on(e){const t=new Gp;return Tu.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Gp;return Tu.Te.ce($c(this.databaseId,t),r.qe(function(i){const a=Uc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Gp);let a=0;for(const l of Uc(e)){const h=r[a++];for(const _ of i)if(this.ln(t,l.fieldPath)&&vh(h))i=this.fn(i,l,h);else{const w=_.qe(l.kind);Tu.Te.ce(h,w)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new Gp;_.seed(h.$e()),Tu.Te.ce(l,_.qe(t.kind)),a.push(_)}return a}ln(e,t){return!!e.filters.find(r=>r instanceof ni&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=X_(e),i=qp(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(a=>{const l=[];return oe.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(w,D){const S=D?new Ip(D.sequenceNumber,new os(Du(D.readTime),new We(Sa(D.documentKey)),D.largestBatchId)):Ip.empty(),P=w.fields.map(([F,j])=>new T_(er.fromServerFormat(F),j));return new D_(w.indexId,w.collectionGroup,P,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:At(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=X_(e),a=qp(e);return this._n(e).next(l=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>oe.forEach(h,_=>a.put(mb(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?oe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),oe.forEach(h,_=>this.wn(e,i,_).next(w=>{const D=this.mn(a,_);return w.isEqual(D)?oe.resolve():this.gn(e,a,_,w,D)}))))})}yn(e,t,r,i){return Mh(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return Mh(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=Mh(e);let a=new un(Ol);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(l,h)=>{a=a.add(new Pl(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}mn(e,t){let r=new un(Ol);const i=this.an(t,e);if(null==i)return r;const a=Ew(t);if(null!=a){const l=e.data.field(a.fieldPath);if(vh(l))for(const h of l.arrayValue.values||[])r=r.add(new Pl(t.indexId,e.key,this.on(h),i))}else r=r.add(new Pl(t.indexId,e.key,Wp,i));return r}gn(e,t,r,i,a){Pe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,w,D,S){const P=h.getIterator(),F=_.getIterator();let j=vn(P),ae=vn(F);for(;j||ae;){let Ce=!1,je=!1;if(j&&ae){const et=w(j,ae);et<0?je=!0:et>0&&(Ce=!0)}else null!=j?je=!0:Ce=!0;Ce?(D(ae),ae=vn(F)):je?(S(j),j=vn(P)):(j=vn(P),ae=vn(F))}}(i,a,Ol,h=>{l.push(this.yn(e,t,r,h))},h=>{l.push(this.pn(e,t,r,h))}),oe.waitFor(l)}_n(e){let t=1;return qp(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Ol(l,h)).filter((l,h,_)=>!h||0!==Ol(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=Ol(l,e),_=Ol(l,t);if(0===h)i[0]=e.Ke();else if(h>0&&_<0)i.push(l),i.push(l.Ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,Wp,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,Wp,[]]));return a}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hA)}getMinOffset(e,t){return oe.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||nt())).next(hA)}}function a0(n){return Br(n,"collectionParents")}function Mh(n){return Br(n,"indexEntries")}function X_(n){return Br(n,"indexConfiguration")}function qp(n){return Br(n,"indexState")}function hA(n){Dt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;S_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new os(e.readTime,e.documentKey,t)}const u0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Rs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Rs(e,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function fA(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Z({range:l},(D,S,P)=>(h++,P.delete()));a.push(_.next(()=>{Dt(1===h)}));const w=[];for(const D of t.mutations){const S=Z_(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return oe.waitFor(a).next(()=>w)}function l0(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Rs.DEFAULT_COLLECTION_PERCENTILE=10,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rs.DEFAULT=new Rs(41943040,Rs.DEFAULT_COLLECTION_PERCENTILE,Rs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rs.DISABLED=new Rs(-1,0,0);class c0{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new c0(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Jc(e).Z({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=zp(e),l=Jc(e);return l.add({}).next(h=>{Dt("number"==typeof h);const _=new t0(h,t,r,i),w=function(P,F,j){const ae=j.baseMutations.map(je=>Cu(P.re,je)),Ce=j.mutations.map(je=>Cu(P.re,je));return{userId:F,batchId:j.batchId,localWriteTimeMs:j.localWriteTime.toMillis(),baseMutations:ae,mutations:Ce}}(this.It,this.userId,_),D=[];let S=new un((P,F)=>At(P.canonicalString(),F.canonicalString()));for(const P of i){const F=Z_(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(l.put(w)),D.push(a.put(F,ob))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.In[h]=_.keys()}),oe.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Jc(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Nl(this.It,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Jc(e).Z({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(Dt(h.batchId>=r),a=Nl(this.It,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Jc(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Jc(e).W("userMutationsIndex",t).next(r=>r.map(i=>Nl(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=xh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return zp(e).Z({range:i},(l,h,_)=>{const[w,D,S]=l,P=Sa(D);if(w===this.userId&&t.path.isEqual(P))return Jc(e).get(S).next(F=>{if(!F)throw nt();Dt(F.userId===this.userId),a.push(Nl(this.It,F))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);const i=[];return t.forEach(a=>{const l=xh(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=zp(e).Z({range:h},(w,D,S)=>{const[P,F,j]=w,ae=Sa(F);P===this.userId&&a.path.isEqual(ae)?r=r.add(j):S.done()});i.push(_)}),oe.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=xh(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new un(At);return zp(e).Z({range:l},(_,w,D)=>{const[S,P,F]=_,j=Sa(P);S===this.userId&&r.isPrefixOf(j)?j.length===i&&(h=h.add(F)):D.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Jc(e).get(a).next(l=>{if(null===l)throw nt();Dt(l.userId===this.userId),r.push(Nl(this.It,l))}))}),oe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return fA(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zp(e).Z({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=Sa(a[1]);i.push(_)}else h.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return pA(e,this.userId,t)}Rn(e){return gA(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function pA(n,e,t){const r=xh(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return zp(n).Z({range:a,X:!0},(h,_,w)=>{const[D,S,P]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Jc(n){return Br(n,"mutations")}function zp(n){return Br(n,"documentMutations")}function gA(n){return Br(n,"mutationQueues")}class Aa{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Aa(0)}static vn(){return new Aa(-1)}}class JM{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Aa(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Et.fromTimestamp(new Fn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Xc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Xc(e).Z((l,h)=>{const _=Rh(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>oe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Xc(e).Z((r,i)=>{const a=Rh(i);t(a)})}Vn(e){return ey(e).get("targetGlobalKey").next(t=>(Dt(null!==t),t))}Sn(e,t){return ey(e).put("targetGlobalKey",t)}Dn(e,t){return Xc(e).put(jp(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oo(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Xc(e).Z({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const w=Rh(h);kp(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Su(e);return t.forEach(l=>{const h=ri(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),oe.waitFor(i)}removeMatchingKeys(e,t,r){const i=Su(e);return oe.forEach(t,a=>{const l=ri(a.path);return oe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Su(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Su(e);let a=Ot();return i.Z({range:r,X:!0},(l,h,_)=>{const w=Sa(l[1]),D=new We(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=ri(t.path),i=IDBKeyRange.bound([r],[vI(r)],!1,!0);let a=0;return Su(e).Z({index:"documentTargetsIndex",X:!0,range:i},([l,h],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}se(e,t){return Xc(e).get(t).next(r=>r?Rh(r):null)}}function Xc(n){return Br(n,"targets")}function ey(n){return Br(n,"targetGlobal")}function Su(n){return Br(n,"targetDocuments")}function d0([n,e],[t,r]){const i=At(n,t);return 0===i?At(e,r):i}class XM{constructor(e){this.xn=e,this.buffer=new un(d0),this.Nn=0}kn(){return++this.Nn}Mn(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();d0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class h0{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.On=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.On&&(this.On.cancel(),this.On=null)}get started(){return null!==this.On}Fn(e){var t=this;Pe("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,k.Z)(function*(){t.On=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Dl(r)?Pe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield gu(r)}yield t.Fn(3e5)}))}}class bb{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(xs.at);const r=new XM(t);return this.$n.forEachTarget(e,i=>r.Mn(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.Mn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(u0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Pe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),u0):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,a,l,h,_,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Pe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),vw()<=Xe.in.DEBUG&&Pe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-D}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class mA{constructor(e,t){this.db=e,this.garbageCollector=new bb(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return Kp(e,r)}removeReference(e,t,r){return Kp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Kp(e,t)}Gn(e,t){return function(r,i){let a=!1;return gA(r).tt(l=>pA(r,l,i).next(h=>(h&&(a=!0),oe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Kn(e,(l,h)=>{if(h<=t){const _=this.Gn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Et.min()),Su(e).delete([0,ri(l.path)])))});i.push(_)}}).next(()=>oe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Kp(e,t)}Kn(e,t){const r=Su(e);let i,a=xs.at;return r.Z({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:w})=>{0===l?(a!==xs.at&&t(new We(Sa(i)),a),a=w,i=_):a=xs.at}).next(()=>{a!==xs.at&&t(new We(Sa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Kp(n,e){return Su(n).put((r=n.currentSequenceNumber,{targetId:0,path:ri(e.path),sequenceNumber:r}));var r}class _A{constructor(){this.changes=new Eu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,In.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yA{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Nh(e).put(r)}removeEntry(e,t,r){return Nh(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],Q_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=In.newInvalidDocument(t);return Nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ty(t))},(i,a)=>{r=this.jn(t,a)}).next(()=>r)}Wn(e,t){let r={size:0,document:In.newInvalidDocument(t)};return Nh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ty(t))},(i,a)=>{r={document:this.jn(t,a),size:l0(a)}}).next(()=>r)}getEntries(e,t){let r=us();return this.zn(e,t,(i,a)=>{const l=this.jn(i,a);r=r.insert(i,l)}).next(()=>r)}Hn(e,t){let r=us(),i=new tr(We.comparator);return this.zn(e,t,(a,l)=>{const h=this.jn(a,l);r=r.insert(a,h),i=i.insert(a,l0(l))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let i=new un(Sb);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(ty(i.first()),ty(i.last())),l=i.getIterator();let h=l.getNext();return Nh(e).Z({index:"documentKeyIndex",range:a},(_,w,D)=>{const S=We.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;h&&Sb(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,w),h=l.hasNext()?l.getNext():null),h?D.j(ty(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),Q_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Nh(e).W(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=us();for(const _ of l){const w=this.jn(We.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(w.key,w)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=us();const l=vA(t,r),h=vA(t,os.max());return Nh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,w,D)=>{const S=this.jn(We.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new f0(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Tb(e).get("remoteDocumentGlobalKey").next(t=>(Dt(!!t),t))}Qn(e,t){return Tb(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function lA(n,e){let t;if(e.document)t=eb(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=We.fromSegments(e.noDocument.path),i=Du(e.noDocument.readTime);t=In.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=We.fromSegments(e.unknownDocument.path),i=Du(e.unknownDocument.version);t=In.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Fn(r[0],r[1]);return Et.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(Et.min()))return r}return In.newInvalidDocument(e)}}function Db(n){return new yA(n)}class f0 extends _A{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Eu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new un((a,l)=>At(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Xn.get(a);if(t.push(this.Yn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=n0(this.Yn.It,l);i=i.add(a.path.popLast()),r+=l0(_)-h.size,t.push(this.Yn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=n0(this.Yn.It,l.convertToNoDocument(Et.min()));t.push(this.Yn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((a,l)=>{this.Xn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function Tb(n){return Br(n,"remoteDocumentGlobal")}function Nh(n){return Br(n,"remoteDocumentsV14")}function ty(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function vA(n,e){const t=e.documentKey.path.toArray();return[n,Q_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Sb(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=At(t[a],r[a]),i)return i;return i=At(t.length,r.length),i||(i=At(t[t.length-2],r[r.length-2]),i||At(t[t.length-1],r[r.length-1]))}class wA{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ab{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&vu(r.mutation,i,no.empty(),Fn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ot()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ot()){const i=Da();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=Lp();return a.forEach((h,_)=>{l=l.insert(h,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=Da();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ot()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let a=us();const l=Ta(),h=Ta();return t.forEach((_,w)=>{const D=r.get(w.key);i.has(w.key)&&(void 0===D||D.mutation instanceof wu)?a=a.insert(w.key,w):void 0!==D&&(l.set(w.key,D.mutation.getFieldMask()),vu(D.mutation,w,D.mutation.getFieldMask(),Fn.now()))}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,D)=>l.set(w,D)),t.forEach((w,D)=>{var S;return h.set(w,new wA(D,null!==(S=l.get(w))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Ta();let i=new tr((l,h)=>l-h),a=Ot();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let D=r.get(_)||no.empty();D=h.applyToLocalView(w,D),r.set(_,D);const S=(i.get(h.batchId)||Ot()).add(_);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const _=h.getNext(),w=_.key,D=_.value,S=GI();D.forEach(P=>{if(!a.has(P)){const F=UI(t.get(P),r.get(P));null!==F&&S.set(P,F),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return oe.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return We.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):Ow(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):oe.resolve(Da());let h=-1,_=a;return l.next(w=>oe.forEach(w,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),a.get(D)?oe.resolve():this.getBaseDocument(e,D,S).next(P=>{_=_.insert(D,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Ot())).next(D=>({batchId:h,changes:GS(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new We(t)).next(r=>{let i=Lp();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=Lp();return this.indexManager.getCollectionParents(e,i).next(l=>oe.forEach(l,h=>{const _=(w=t,D=h.child(i),new _u(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(a=>{a.forEach((h,_)=>{const w=_.getKey();null===i.get(w)&&(i=i.insert(w,In.newInvalidDocument(w)))});let l=Lp();return i.forEach((h,_)=>{const w=a.get(h);void 0!==w&&vu(w.mutation,_,no.empty(),Fn.now()),Fw(t,_)&&(l=l.insert(h,_))}),l})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):oe.resolve(In.newInvalidDocument(t))}}class eN{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:nr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:Hp(r.bundledQuery),readTime:nr(r.readTime)}),oe.resolve();var r}}class EA{constructor(){this.overlays=new tr(We.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Da();return oe.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.ue(e,t,a)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const i=Da(),a=t.length+1,l=new We(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return oe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new tr((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=Da(),a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=Da(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,D)=>h.set(w,D)),!(h.size()>=i)););return oe.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Zc(t,r));let a=this.es.get(t);void 0===a&&(a=Ot(),this.es.set(t,a)),this.es.set(t,a.add(r.key))}}class Zp{constructor(){this.ns=new un(jr.ss),this.rs=new un(jr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new jr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new jr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new We(new Jt([])),r=new jr(t,e),i=new jr(t,e+1),a=[];return this.rs.forEachInRange([r,i],l=>{this.cs(l),a.push(l.key)}),a}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new We(new Jt([])),r=new jr(t,e),i=new jr(t,e+1);let a=Ot();return this.rs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new jr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class jr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return We.comparator(e.key,t.key)||At(e._s,t._s)}static os(e,t){return At(e._s,t._s)||We.comparator(e.key,t.key)}}class Lo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new un(jr.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.ws;this.ws++;const l=new t0(a,t,r,i);this.mutationQueue.push(l);for(const h of i)this.gs=this.gs.add(new jr(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),a=i<0?0:i;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new jr(t,0),i=new jr(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],l=>{const h=this.ys(l._s);a.push(h)}),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new un(At);return t.forEach(i=>{const a=new jr(i,0),l=new jr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([a,l],h=>{r=r.add(h._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;We.isDocumentKey(a)||(a=a.child(""));const l=new jr(new We(a),0);let h=new un(At);return this.gs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(_._s)),!0)},l),oe.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,i=>{const a=new jr(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new jr(t,0),i=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class CA{constructor(e){this.Es=e,this.docs=new tr(We.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():In.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():In.newInvalidDocument(i))}),oe.resolve(r)}getAllFromCollection(e,t,r){let i=us();const a=new We(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||S_(Iw(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new p0(this)}getSize(e){return oe.resolve(this.size)}}class p0 extends _A{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class IA{constructor(e){this.persistence=e,this.Rs=new Eu(t=>Oo(t),kp),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Zp,this.targetCount=0,this.vs=Aa.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Aa(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Rs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),oe.waitFor(a).next(()=>i)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class xb{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new xs(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new IA(this),this.indexManager=new Cb,this.remoteDocumentCache=new CA(r=>this.referenceDelegate.xs(r)),this.It=new Y_(t),this.Ns=new eN(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new EA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Lo(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("MemoryPersistence","Starting transaction:",e);const i=new g0(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(a=>this.referenceDelegate.Ms(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Os(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class g0 extends Dw{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Fs=new Zp,this.$s=null}static Bs(e){return new Yp(e)}get Ls(){if(this.$s)return this.$s;throw nt()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ls.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Ms(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const i=We.fromPath(r);return this.Us(e,i).next(a=>{a||t.removeEntry(i,Et.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Os(e,t)])}}class Rb{constructor(e){this.It=e}$(e,t,r,i){const a=new bp("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nA,{unique:!0}),h.createObjectStore("documentMutations"),Mb(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=oe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),Mb(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").W().next(w=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",nA,{unique:!0});const D=_.store("mutations"),S=w.map(P=>D.put(P));return oe.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.qs(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(a)))),r<7&&i>=7&&(l=l.next(()=>this.Gs(a))),r<8&&i>=8&&(l=l.next(()=>this.Qs(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.js(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:db});_.createIndex("collectionPathOverlayIndex",aA,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",hb,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:Yw});_.createIndex("documentKeyIndex",Qw),_.createIndex("collectionGroupIndex",rA)}(e)).next(()=>this.Ws(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.zs(e,a))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:Jw}).createIndex("sequenceNumberIndex",ub,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:lb}).createIndex("documentKeyIndex",cb,{unique:!1})}(e))),l}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=l0(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>oe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",l).next(h=>oe.forEach(h,_=>{Dt(_.userId===a.userId);const w=Nl(this.It,_);return fA(e,a.userId,w).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Z((l,h)=>{const _=new Jt(l),w=[0,ri(_)];a.push(t.get(w).next(D=>D?oe.resolve():t.put({targetId:0,path:ri(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>oe.waitFor(a))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:ab});const r=t.store("collectionParents"),i=new o0,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:ri(_)})}};return t.store("remoteDocuments").Z({X:!0},(l,h)=>{const _=new Jt(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([l,h,_],w)=>{const D=Sa(h);return a(D.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const a=Rh(i),l=jp(this.It,a);return t.put(l)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(w=l,w.document?new We(Jt.fromString(w.document.name).popFirst(5)):w.noDocument?We.fromSegments(w.noDocument.path):w.unknownDocument?We.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>oe.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=Db(this.It),a=new xb(Yp.Bs,this.It.re);return r.W().next(l=>{const h=new Map;return l.forEach(_=>{var w;let D=null!==(w=h.get(_.userId))&&void 0!==w?w:Ot();Nl(this.It,_).keys().forEach(S=>D=D.add(S)),h.set(_.userId,D)}),oe.forEach(h,(_,w)=>{const D=new Sr(w),S=J_.oe(this.It,D),P=a.getIndexManager(D),F=c0.oe(D,this.It,P,a.referenceDelegate);return new Ab(i,F,S,P).recalculateAndSaveOverlaysForDocumentKeys(new Rl(t,xs.at),_).next()})})}}function Mb(n){n.createObjectStore("targetDocuments",{keyPath:sA}).createIndex("documentTargetsIndex",oA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iA,{unique:!0}),n.createObjectStore("targetGlobal")}const ny="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class m0{constructor(e,t,r,i,a,l,h,_,w,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=a,this.window=l,this.document=h,this.Js=w,this.Ys=D,this.Xs=S,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=P=>Promise.resolve(),!m0.C())throw new Me(fe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new mA(this,i),this.ii=t+"main",this.It=new Y_(_),this.ri=new to(this.ii,this.Xs,new Rb(this.It)),this.Cs=new JM(this.referenceDelegate,this.It),this.remoteDocumentCache=Db(this.It),this.Ns=new _b,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===D&&Sn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(fe.FAILED_PRECONDITION,ny);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new xs(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,k.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,k.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,k.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ry(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Dl(e))return Pe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Pe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Qp(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return ry(e).delete(this.clientId)}yi(){var e=this;return(0,k.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Br(r,"clientMetadata");return i.W().next(a=>{const l=e.Ii(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return oe.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):Qp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Me(fe.FAILED_PRECONDITION,ny);return!1}}return!(!this.networkEnabled||!this.inForeground)||ry(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Pe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,k.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Rl(t,xs.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>ry(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return c0.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Ib(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return J_.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Pe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.Xs)?Di:14===l?fb:13===l?e0:12===l?uA:11===l?Xw:void nt();var l;let h;return this.ri.runTransaction(e,i,a,_=>(h=new Rl(_,this.Ss?this.Ss.next():xs.at),"readwrite-primary"===t?this.fi(h).next(w=>!!w||this.di(h)).next(w=>{if(!w)throw Sn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Me(fe.FAILED_PRECONDITION,bw);return r(h)}).next(w=>this.wi(h).next(()=>w)):this.Vi(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}Vi(e){return Qp(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(fe.FAILED_PRECONDITION,ny)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qp(e).put("owner",t)}static C(){return to.C()}_i(e){const t=Qp(e);return t.get("owner").next(r=>this.mi(r)?(Pe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Sn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,R.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Pe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Sn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Sn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qp(n){return Br(n,"owner")}function ry(n){return Br(n,"clientMetadata")}function Jp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Au{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=Ot(),i=Ot();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new Au(e,t.fromCache,r,i)}}class _0{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(a=>a||this.Mi(e,t,i,r)).next(a=>a||this.Oi(e,t))}ki(e,t){if(O_(t))return oe.resolve(null);let r=as(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=F_(t,null,"F"),r=as(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Ot(...a);return this.Ni.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.Fi(t,h);return this.$i(t,w,l,_.readTime)?this.ki(e,F_(t,null,"F")):this.Bi(e,w,t,_)}))})))}Mi(e,t,r,i){return O_(t)||i.isEqual(Et.min())?this.Oi(e,t):this.Ni.getDocuments(e,r).next(a=>{const l=this.Fi(t,a);return this.$i(t,l,r,i)?this.Oi(e,t):(vw()<=Xe.in.DEBUG&&Pe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),kw(t)),this.Bi(e,l,t,Cw(i,-1)))})}Fi(e,t){let r=new un(Vw(e));return t.forEach((i,a)=>{Fw(e,a)&&(r=r.add(a))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Oi(e,t){return vw()<=Xe.in.DEBUG&&Pe("QueryEngine","Using full collection scan to execute query:",kw(t)),this.Ni.getDocumentsMatchingQuery(e,t,os.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class Nb{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new tr(At),this.qi=new Eu(a=>Oo(a),kp),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ab(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Pb(n,e,t,r){return new Nb(n,e,t,r)}function bA(n,e){return y0.apply(this,arguments)}function y0(){return y0=(0,k.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=Ot();for(const w of i){l.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)_=_.add(D.key)}return t.localDocuments.getDocuments(r,_).next(w=>({ji:w,removedBatchIds:l,addedBatchIds:h}))})})}),y0.apply(this,arguments)}function DA(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Gi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,w){const D=_.batch,S=D.keys();let P=oe.resolve();return S.forEach(F=>{P=P.next(()=>w.getEntry(h,F)).next(j=>{const ae=_.docVersions.get(F);Dt(null!==ae),j.version.compareTo(ae)<0&&(D.applyToRemoteDocument(j,_),j.isValidDocument()&&(j.setReadTime(_.commitVersion),w.addEntry(j)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=Ot();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(h=h.add(l.batch.mutations[_].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Ob(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function kb(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((D,S)=>{const P=i.get(S);if(!P)return;h.push(t.Cs.removeMatchingKeys(a,D.removedDocuments,S).next(()=>t.Cs.addMatchingKeys(a,D.addedDocuments,S)));let F=P.withSequenceNumber(a.currentSequenceNumber);var j,ae,Ce;e.targetMismatches.has(S)?F=F.withResumeToken(xr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):D.resumeToken.approximateByteSize()>0&&(F=F.withResumeToken(D.resumeToken,r)),i=i.insert(S,F),ae=F,Ce=D,(0===(j=P).resumeToken.approximateByteSize()||ae.snapshotVersion.toMicroseconds()-j.snapshotVersion.toMicroseconds()>=3e8||Ce.addedDocuments.size+Ce.modifiedDocuments.size+Ce.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(a,F))});let _=us(),w=Ot();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,D))}),h.push(Fb(a,l,e.documentUpdates).next(D=>{_=D.Wi,w=D.zi})),!r.isEqual(Et.min())){const D=t.Cs.getLastRemoteSnapshotVersion(a).next(S=>t.Cs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(D)}return oe.waitFor(h).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ui=i,a))}function Fb(n,e,t){let r=Ot(),i=Ot();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=us();return t.forEach((h,_)=>{const w=a.get(h);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(h)),_.isNoDocument()&&_.version.isEqual(Et.min())?(e.removeEntry(h,_.readTime),l=l.insert(h,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(h,_)):Pe("LocalStore","Ignoring outdated watch update for ",h,". Current version:",w.version," Watch version:",_.version)}),{Wi:l,zi:i}})}function TA(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Xp(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(a=>a?(i=a,oe.resolve(i)):t.Cs.allocateTargetId(r).next(l=>(i=new Ml(e,l,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function kl(n,e,t){return iy.apply(this,arguments)}function iy(){return iy=(0,k.Z)(function*(n,e,t){const r=Ge(n),i=r.Ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Dl(l))throw l;Pe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),iy.apply(this,arguments)}function sy(n,e,t){const r=Ge(n);let i=Et.min(),a=Ot();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,w){const D=Ge(h),S=D.qi.get(w);return void 0!==S?oe.resolve(D.Ui.get(S)):D.Cs.getTargetData(_,w)}(r,l,as(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.Li.getDocumentsMatchingQuery(l,e,t?i:Et.min(),t?a:Ot())).next(h=>(oy(r,Lw(e),h),{documents:h,Hi:a})))}function Lb(n,e){const t=Ge(n),r=Ge(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.se(a,e).next(l=>l?l.target:null))}function v0(n,e){const t=Ge(n),r=t.Ki.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,Cw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(oy(t,e,i),i))}function oy(n,e,t){let r=Et.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Ki.set(e,r)}function ay(){return ay=(0,k.Z)(function*(n,e,t,r){const i=Ge(n);let a=Ot(),l=us();for(const w of t){const D=e.Ji(w.metadata.name);w.document&&(a=a.add(D));const S=e.Yi(w);S.setReadTime(e.Xi(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),_=yield Xp(i,(w=r,as(Eh(Jt.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>Fb(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Cs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Cs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,D.Wi,D.zi)).next(()=>D.Wi)))}),ay.apply(this,arguments)}function SA(n,e){return uy.apply(this,arguments)}function uy(){return uy=(0,k.Z)(function*(n,e,t=Ot()){const r=yield Xp(n,as(Hp(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=nr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Ns.saveNamedQuery(a,e);const h=r.withResumeToken(xr.EMPTY_BYTE_STRING,l);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(a,h).next(()=>i.Cs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Cs.addMatchingKeys(a,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(a,e))})}),uy.apply(this,arguments)}function E0(n,e){return`firestore_clients_${n}_${e}`}function Vb(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function C0(n,e){return`firestore_targets_${n}_${e}`}class I0{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new I0(e,t,i.state,a):(Sn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ly{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new ly(e,r.state,i):(Sn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class eg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=$_();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=TI(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new eg(e,a):(Sn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class b0{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new b0(t.clientId,t.onlineState):(Sn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class D0{constructor(){this.activeTargetIds=$_()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class T0{constructor(e,t,r,i,a){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new tr(At),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=E0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new D0),this.lr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,k.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const a=e.getItem(E0(e.persistenceKey,i));if(a){const l=eg.Zi(i,a);l&&(e.ur=e.ur.insert(l.clientId,l))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(C0(this.persistenceKey,e));if(r){const i=ly.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(C0(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Pe("SharedClientState","READ",e,t),t}setItem(e,t){Pe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Pe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Pe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Sn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,k.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(a){let l=xs.at;if(null!=a)try{const h=JSON.parse(a);Dt("number"==typeof h),l=h}catch(h){Sn("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==xs.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Mr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Or(a)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new I0(this.currentUser,e,t,r),a=Vb(this.persistenceKey,this.currentUser,e);this.setItem(a,i.tr())}Er(e){const t=Vb(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=C0(this.persistenceKey,e),a=new ly(e,t,r);this.setItem(i,a.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return eg.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return I0.Zi(new Sr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return ly.Zi(i,t)}yr(e){return b0.Zi(e)}Mr(e){return JSON.parse(e)}Cr(e){var t=this;return(0,k.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Pe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Br(l,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=$_();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class AA{constructor(){this.Lr=new D0,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new D0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class tN{qr(e){}shutdown(){}}class xA{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Pe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Pe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const nN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class rN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class RA extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ao(e,t);Pe("RestConnection","Sending: ",l,r);const h={};return this.ho(h,i,a),this.lo(e,l,h,r).then(_=>(Pe("RestConnection","Received: ",_),_),_=>{throw Vc("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}fo(e,t,r,i,a,l){return this.co(e,t,r,i,a)}ho(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ao(e,t){return`${this.oo}/v1/${t}:${nN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}lo(e,t,r,i){return new Promise((a,l)=>{const h=new Mo;h.listenOnce(Ia.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Ep.NO_ERROR:const w=h.getResponseJson();Pe("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Ep.TIMEOUT:Pe("Connection",'RPC "'+e+'" timed out'),l(new Me(fe.DEADLINE_EXCEEDED,"Request time out"));break;case Ep.HTTP_ERROR:const D=h.getStatus();if(Pe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(F){const j=F.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(j)>=0?j:fe.UNKNOWN}(S.status);l(new Me(P,S.message))}else l(new Me(fe.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(fe.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Pe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}_o(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=KM(),l=lI(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new ba({})),this.ho(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const _=i.join("");Pe("Connection","Creating WebChannel: "+_,h);const w=a.createWebChannel(_,h);let D=!1,S=!1;const P=new rN({Hr:j=>{S?Pe("Connection","Not sending because WebChannel is closed:",j):(D||(Pe("Connection","Opening WebChannel transport."),w.open(),D=!0),Pe("Connection","WebChannel sending:",j),w.send(j))},Jr:()=>w.close()}),F=(j,ae,Ce)=>{j.listen(ae,je=>{try{Ce(je)}catch(et){setTimeout(()=>{throw et},0)}})};return F(w,ss.EventType.OPEN,()=>{S||Pe("Connection","WebChannel transport opened.")}),F(w,ss.EventType.CLOSE,()=>{S||(S=!0,Pe("Connection","WebChannel transport closed"),P.io())}),F(w,ss.EventType.ERROR,j=>{S||(S=!0,Vc("Connection","WebChannel transport errored:",j),P.io(new Me(fe.UNAVAILABLE,"The operation could not be completed")))}),F(w,ss.EventType.MESSAGE,j=>{var ae;if(!S){const Ce=j.data[0];Dt(!!Ce);const je=Ce,et=je.error||(null===(ae=je[0])||void 0===ae?void 0:ae.error);if(et){Pe("Connection","WebChannel received error:",et);const rt=et.status;let tt=function(Mt){const hr=qn[Mt];if(void 0!==hr)return $w(hr)}(rt),Ct=et.message;void 0===tt&&(tt=fe.INTERNAL,Ct="Unknown error status: "+rt+" with message "+et.message),S=!0,P.io(new Me(tt,Ct)),w.close()}else Pe("Connection","WebChannel received:",Ce),P.ro(Ce)}}),F(l,ES.STAT_EVENT,j=>{j.stat===cI.PROXY?Pe("Connection","Detected buffering proxy"):j.stat===cI.NOPROXY&&Pe("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.so()},0),P}}function tg(){return"undefined"!=typeof window?window:null}function cy(){return"undefined"!=typeof document?document:null}function ng(n){return new KS(n,!0)}class dy{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Hs=e,this.timerId=t,this.wo=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}reset(){this.po=0}Eo(){this.po=this.yo}Ao(e){this.cancel();const t=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,t-r);i>0&&Pe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.po} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Io=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.To=Date.now(),e())),this.po*=this.mo,this.po<this.wo&&(this.po=this.wo),this.po>this.yo&&(this.po=this.yo)}bo(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}cancel(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}Ro(){return(Math.random()-.5)*this.po}}class Fl{constructor(e,t,r,i,a,l,h,_){this.Hs=e,this.Po=r,this.vo=i,this.Vo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new dy(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,k.Z)(function*(){e.No()&&(yield e.close(0))})()}Oo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.Po,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,k.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,k.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===fe.RESOURCE_EXHAUSTED?(Sn(t.toString()),Sn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Eo()):t&&t.code===fe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new Me(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Mo(){var e=this;this.state=5,this.xo.Ao((0,k.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Pe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Pe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Ub extends Fl{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.It=a}jo(e,t){return this.Vo._o("Listen",e,t)}onMessage(e){this.xo.reset();const t=function QS(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:nt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.gt?(Dt(void 0===w||"string"==typeof w),xr.fromBase64String(w||"")):(Dt(void 0===w||w instanceof Uint8Array),xr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const w=void 0===_.code?fe.UNKNOWN:$w(_.code);return new Me(w,_.message||"")}(l);t=new W_(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ko(n,r.document.name),a=nr(r.document.updateTime),l=new Ur({mapValue:{fields:r.document.fields}}),h=In.newFoundDocument(i,a,l);t=new Gw(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ko(n,r.document),a=r.readTime?nr(r.readTime):Et.min(),l=In.newNoDocument(i,a);t=new Gw([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ko(n,r.document);t=new Gw([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,a=new Hw(r.count||0);t=new Ww(r.targetId,a)}}var _;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return Et.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Et.min():a.readTime?nr(a.readTime):Et.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Up(this.It),t.addTarget=function(i,a){let l;const h=a.target;return l=N_(h)?{documents:Fo(i,h)}:{query:tb(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=YI(i,a.resumeToken):a.snapshotVersion.compareTo(Et.min())>0&&(l.readTime=Vp(i,a.snapshotVersion.toTimestamp())),l}(this.It,e);const r=function Bp(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Up(this.It),t.removeTarget=e,this.Bo(t)}}class S0 extends Fl{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.It=a,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.Vo._o("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Kw(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=nr(r.updateTime?r.updateTime:i);return a.isEqual(Et.min())&&(a=nr(i)),new VI(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=nr(e.commitTime);return this.listener.Zo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Up(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Cu(this.It,r))};this.Bo(t)}}class A0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.Vo=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new Me(fe.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.Vo.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(fe.UNKNOWN,i.toString())})}fo(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.Vo.fo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Me(fe.UNKNOWN,a.toString())})}terminate(){this.nu=!0}}class MA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Sn(t),this.ou=!1):Pe("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class x0{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.qr(h=>{r.enqueueAndForget((0,k.Z)(function*(){var _;Ll(l)&&(Pe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,k.Z)(function*(w){const D=Ge(w);D._u.add(4),yield rg(D),D.gu.set("Unknown"),D._u.delete(4),yield ed(D)}),function(w){return _.apply(this,arguments)})(l))}))}),this.gu=new MA(r,i)}}function ed(n){return Ph.apply(this,arguments)}function Ph(){return Ph=(0,k.Z)(function*(n){if(Ll(n))for(const e of n.wu)yield e(!0)}),Ph.apply(this,arguments)}function rg(n){return Bb.apply(this,arguments)}function Bb(){return Bb=(0,k.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Bb.apply(this,arguments)}function R0(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),N0(t)?M0(t):u(t).ko()&&fy(t,e))}function hy(n,e){const t=Ge(n),r=u(t);t.du.delete(e),r.ko()&&jb(t,e),0===t.du.size&&(r.ko()?r.Fo():Ll(t)&&t.gu.set("Unknown"))}function fy(n,e){n.yu.Ot(e.targetId),u(n).zo(e)}function jb(n,e){n.yu.Ot(e),u(n).Ho(e)}function M0(n){n.yu=new WS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),u(n).start(),n.gu.uu()}function N0(n){return Ll(n)&&!u(n).No()&&n.du.size>0}function Ll(n){return 0===Ge(n)._u.size}function P0(n){n.yu=void 0}function Hb(n){return py.apply(this,arguments)}function py(){return py=(0,k.Z)(function*(n){n.du.forEach((e,t)=>{fy(n,e)})}),py.apply(this,arguments)}function NA(n,e){return O0.apply(this,arguments)}function O0(){return O0=(0,k.Z)(function*(n,e){P0(n),N0(n)?(n.gu.hu(e),M0(n)):n.gu.set("Unknown")}),O0.apply(this,arguments)}function $b(n,e,t){return ig.apply(this,arguments)}function ig(){return ig=(0,k.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof W_&&2===e.state&&e.cause)try{yield(r=(0,k.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.du.delete(h),i.yu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Pe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield k0(n,r)}else if(e instanceof Gw?n.yu.Gt(e):e instanceof Ww?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Et.min()))try{const r=yield Ob(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.yu.te(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.du.get(_);w&&i.du.set(_,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i.du.get(h);if(!_)return;i.du.set(h,_.withResumeToken(xr.EMPTY_BYTE_STRING,_.snapshotVersion)),jb(i,h);const w=new Ml(_.target,h,1,_.sequenceNumber);fy(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Pe("RemoteStore","Failed to raise snapshot:",r),yield k0(n,r)}var r}),ig.apply(this,arguments)}function k0(n,e,t){return gy.apply(this,arguments)}function gy(){return gy=(0,k.Z)(function*(n,e,t){if(!Dl(e))throw e;n._u.add(1),yield rg(n),n.gu.set("Offline"),t||(t=()=>Ob(n.localStore)),n.asyncQueue.enqueueRetryable((0,k.Z)(function*(){Pe("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield ed(n)}))}),gy.apply(this,arguments)}function my(n,e){return e().catch(t=>k0(n,t,e))}function Oh(n){return F0.apply(this,arguments)}function F0(){return F0=(0,k.Z)(function*(n){const e=Ge(n),t=c(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;iN(e);)try{const i=yield TA(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,sN(e,i)}catch(i){yield k0(e,i)}Gb(e)&&Wb(e)}),F0.apply(this,arguments)}function iN(n){return Ll(n)&&n.fu.length<10}function sN(n,e){n.fu.push(e);const t=c(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function Gb(n){return Ll(n)&&!c(n).No()&&n.fu.length>0}function Wb(n){c(n).start()}function oN(n){return qb.apply(this,arguments)}function qb(){return qb=(0,k.Z)(function*(n){c(n).eu()}),qb.apply(this,arguments)}function aN(n){return zb.apply(this,arguments)}function zb(){return zb=(0,k.Z)(function*(n){const e=c(n);for(const t of n.fu)e.Xo(t.mutations)}),zb.apply(this,arguments)}function uN(n,e,t){return L0.apply(this,arguments)}function L0(){return L0=(0,k.Z)(function*(n,e,t){const r=n.fu.shift(),i=pb.from(r,e,t);yield my(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Oh(n)}),L0.apply(this,arguments)}function lN(n,e){return Kb.apply(this,arguments)}function Kb(){return Kb=(0,k.Z)(function*(n,e){var t;e&&c(n).Yo&&(yield(t=(0,k.Z)(function*(r,i){if($I(a=i.code)&&a!==fe.ABORTED){const l=r.fu.shift();c(r).Oo(),yield my(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield Oh(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Gb(n)&&Wb(n)}),Kb.apply(this,arguments)}function PA(n,e){return Zb.apply(this,arguments)}function Zb(){return Zb=(0,k.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),Pe("RemoteStore","RemoteStore received new credentials");const r=Ll(t);t._u.add(3),yield rg(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield ed(t)}),Zb.apply(this,arguments)}function s(n,e){return o.apply(this,arguments)}function o(){return o=(0,k.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield ed(t)):e||(t._u.add(2),yield rg(t),t.gu.set("Unknown"))}),o.apply(this,arguments)}function u(n){return n.pu||(n.pu=function(e,t,r){const i=Ge(e);return i.su(),new Ub(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:Hb.bind(null,n),Zr:NA.bind(null,n),Wo:$b.bind(null,n)}),n.wu.push(function(){var e=(0,k.Z)(function*(t){t?(n.pu.Oo(),N0(n)?M0(n):n.gu.set("Unknown")):(yield n.pu.stop(),P0(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function c(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.su(),new S0(t,i.Vo,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:oN.bind(null,n),Zr:lN.bind(null,n),tu:aN.bind(null,n),Zo:uN.bind(null,n)}),n.wu.push(function(){var e=(0,k.Z)(function*(t){t?(n.Iu.Oo(),yield Oh(n)):(yield n.Iu.stop(),n.fu.length>0&&(Pe("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class d{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new d(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function g(n,e){if(Sn("AsyncQueue",`${e}: ${n}`),Dl(n))return new Me(fe.UNAVAILABLE,`${e}: ${n}`);throw n}class v{constructor(e){this.comparator=e?(t,r)=>e(t,r)||We.comparator(t.key,r.key):(t,r)=>We.comparator(t.key,r.key),this.keyedMap=Lp(),this.sortedSet=new tr(this.comparator)}static emptySet(e){return new v(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof v)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new v;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class C{constructor(){this.Tu=new tr(We.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):nt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class I{constructor(e,t,r,i,a,l,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new I(e,t,v.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class x{constructor(){this.Au=void 0,this.listeners=[]}}class M{constructor(){this.queries=new Eu(e=>PI(e),Fp),this.onlineState="Unknown",this.Ru=new Set}}function U(n,e){return G.apply(this,arguments)}function G(){return G=(0,k.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new x),i)try{a.Au=yield t.onListen(r)}catch(l){const h=g(l,`Initialization of query '${kw(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.bu(t.onlineState),a.Au&&e.Pu(a.Au)&&Je(t)}),G.apply(this,arguments)}function X(n,e){return ye.apply(this,arguments)}function ye(){return ye=(0,k.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ye.apply(this,arguments)}function Fe(n,e){const t=Ge(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Pu(i)&&(r=!0);l.Au=i}}r&&Je(t)}function He(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Je(n){n.Ru.forEach(e=>{e.next()})}class Te{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new I(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||!(this.options.Nu&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=I.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Vu=!0,this.vu.next(e)}}class mt{constructor(e,t){this.payload=e,this.byteLength=t}ku(){return"metadata"in this.payload}}class jt{constructor(e){this.It=e}Ji(e){return ko(this.It,e)}Yi(e){return e.metadata.exists?eb(this.It,e.document,!1):In.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return nr(e)}}class dn{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=ls(e)}Ou(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Jt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Fu(e){const t=new Map,r=new jt(this.It);for(const i of e)if(i.metadata.queries){const a=r.Ji(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||Ot()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,k.Z)(function*(){const t=yield function w0(n,e,t,r){return ay.apply(this,arguments)}(e.localStore,new jt(e.It),e.documents,e.Mu.id),r=e.Fu(e.documents);for(const i of e.queries)yield SA(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,$u:e.collectionGroups,Bu:t}})()}}function ls(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Vl{constructor(e){this.key=e}}class _y{constructor(e){this.key=e}}class yy{constructor(e,t){this.query=e,this.Lu=t,this.Uu=null,this.current=!1,this.qu=Ot(),this.mutatedKeys=Ot(),this.Ku=Vw(e),this.Gu=new v(this.Ku)}get Qu(){return this.Lu}ju(e,t){const r=t?t.Wu:new C,i=t?t.Gu:this.Gu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),F=Fw(this.query,S)?S:null,j=!!P&&this.mutatedKeys.has(P.key),ae=!!F&&(F.hasLocalMutations||this.mutatedKeys.has(F.key)&&F.hasCommittedMutations);let Ce=!1;P&&F?P.data.isEqual(F.data)?j!==ae&&(r.track({type:3,doc:F}),Ce=!0):this.zu(P,F)||(r.track({type:2,doc:F}),Ce=!0,(_&&this.Ku(F,_)>0||w&&this.Ku(F,w)<0)&&(h=!0)):!P&&F?(r.track({type:0,doc:F}),Ce=!0):P&&!F&&(r.track({type:1,doc:P}),Ce=!0,(_||w)&&(h=!0)),Ce&&(F?(l=l.add(F),a=ae?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Gu:l,Wu:r,$i:h,mutatedKeys:a}}zu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;const a=e.Wu.Eu();a.sort((w,D)=>function(S,P){const F=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return F(S)-F(P)}(w.type,D.type)||this.Ku(w.doc,D.doc)),this.Hu(r);const l=t?this.Ju():[],h=0===this.qu.size&&this.current?1:0,_=h!==this.Uu;return this.Uu=h,0!==a.length||_?{snapshot:new I(this.query,e.Gu,i,a,e.mutatedKeys,0===h,_,!1),Yu:l}:{Yu:l}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,Wu:new C,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Yu:[]}}Xu(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}Hu(e){e&&(e.addedDocuments.forEach(t=>this.Lu=this.Lu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Lu=this.Lu.delete(t)),this.current=e.current)}Ju(){if(!this.current)return[];const e=this.qu;this.qu=Ot(),this.Gu.forEach(r=>{this.Xu(r.key)&&(this.qu=this.qu.add(r.key))});const t=[];return e.forEach(r=>{this.qu.has(r)||t.push(new _y(r))}),this.qu.forEach(r=>{e.has(r)||t.push(new Vl(r))}),t}Zu(e){this.Lu=e.Hi,this.qu=Ot();const t=this.ju(e.documents);return this.applyChanges(t,!0)}tc(){return I.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.Uu)}}class V0{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class U0{constructor(e){this.key=e,this.ec=!1}}class B0{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.nc={},this.sc=new Eu(h=>PI(h),Fp),this.ic=new Map,this.rc=new Set,this.oc=new tr(We.comparator),this.uc=new Map,this.cc=new Zp,this.ac={},this.hc=new Map,this.lc=Aa.vn(),this.onlineState="Unknown",this.fc=void 0}get isPrimaryClient(){return!0===this.fc}}function j0(n,e){return sg.apply(this,arguments)}function sg(){return sg=(0,k.Z)(function*(n,e){const t=ex(n);let r,i;const a=t.sc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.tc();else{const l=yield Xp(t.localStore,as(e));t.isPrimaryClient&&R0(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield og(t,e,r,"current"===h)}return i}),sg.apply(this,arguments)}function og(n,e,t,r){return ag.apply(this,arguments)}function ag(){return ag=(0,k.Z)(function*(n,e,t,r){n.dc=(D,S,P)=>{return(F=(0,k.Z)(function*(j,ae,Ce,je){let et=ae.view.ju(Ce);et.$i&&(et=yield sy(j.localStore,ae.query,!1).then(({documents:Ct})=>ae.view.ju(Ct,et)));const rt=je&&je.targetChanges.get(ae.targetId),tt=ae.view.applyChanges(et,j.isPrimaryClient,rt);return $A(j,ae.targetId,tt.Yu),tt.snapshot}),function(j,ae,Ce,je){return F.apply(this,arguments)})(n,D,S,P);var F};const i=yield sy(n.localStore,e,!0),a=new yy(e,i.Hi),l=a.ju(i.documents),h=Sh.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,h);$A(n,t,_.Yu);const w=new V0(e,t,a);return n.sc.set(e,w),n.ic.has(t)?n.ic.get(t).push(e):n.ic.set(t,[e]),_.snapshot}),ag.apply(this,arguments)}function nL(n,e){return OA.apply(this,arguments)}function OA(){return OA=(0,k.Z)(function*(n,e){const t=Ge(n),r=t.sc.get(e),i=t.ic.get(r.targetId);if(i.length>1)return t.ic.set(r.targetId,i.filter(a=>!Fp(a,e))),void t.sc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield kl(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),hy(t.remoteStore,r.targetId),vy(t,r.targetId)}).catch(gu))):(vy(t,r.targetId),yield kl(t.localStore,r.targetId,!0))}),OA.apply(this,arguments)}function kA(){return kA=(0,k.Z)(function*(n,e,t){const r=tx(n);try{const i=yield function(a,l){const h=Ge(a),_=Fn.now(),w=l.reduce((P,F)=>P.add(F.key),Ot());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",P=>{let F=us(),j=Ot();return h.Gi.getEntries(P,w).next(ae=>{F=ae,F.forEach((Ce,je)=>{je.isValidDocument()||(j=j.add(Ce))})}).next(()=>h.localDocuments.getOverlayedDocuments(P,F)).next(ae=>{D=ae;const Ce=[];for(const je of l){const et=jS(je,D.get(je.key).overlayedDocument);null!=et&&Ce.push(new wu(je.key,et,Op(et.value.mapValue),Wn.exists(!0)))}return h.mutationQueue.addMutationBatch(P,_,Ce,l)}).next(ae=>{S=ae;const Ce=ae.applyToLocalDocumentSet(D,j);return h.documentOverlayCache.saveOverlays(P,ae.batchId,Ce)})}).then(()=>({batchId:S.batchId,changes:GS(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.ac[a.currentUser.toKey()];_||(_=new tr(At)),_=_.insert(l,h),a.ac[a.currentUser.toKey()]=_}(r,i.batchId,t),yield td(r,i.changes),yield Oh(r.remoteStore)}catch(i){const a=g(i,"Failed to persist write");t.reject(a)}}),kA.apply(this,arguments)}function cN(n,e){return FA.apply(this,arguments)}function FA(){return FA=(0,k.Z)(function*(n,e){const t=Ge(n);try{const r=yield kb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.uc.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.ec=!0:i.modifiedDocuments.size>0?Dt(l.ec):i.removedDocuments.size>0&&(Dt(l.ec),l.ec=!1))}),yield td(t,r,e)}catch(r){yield gu(r)}}),FA.apply(this,arguments)}function dN(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.sc.forEach((a,l)=>{const h=l.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ge(a);h.onlineState=l;let _=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.bu(l)&&(_=!0)}),_&&Je(h)}(r.eventManager,e),i.length&&r.nc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function iL(n,e,t){return LA.apply(this,arguments)}function LA(){return LA=(0,k.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.uc.get(e),a=i&&i.key;if(a){let l=new tr(We.comparator);l=l.insert(a,In.newNoDocument(a,Et.min()));const h=Ot().add(a),_=new G_(Et.min(),new Map,new un(At),l,h);yield cN(r,_),r.oc=r.oc.remove(a),r.uc.delete(e),GA(r)}else yield kl(r.localStore,e,!1).then(()=>vy(r,e,t)).catch(gu)}),LA.apply(this,arguments)}function sL(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,k.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield DA(t.localStore,e);HA(t,r,null),jA(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield td(t,i)}catch(i){yield gu(i)}}),VA.apply(this,arguments)}function oL(n,e,t){return UA.apply(this,arguments)}function UA(){return UA=(0,k.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(a,l){const h=Ge(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return h.mutationQueue.lookupMutationBatch(_,l).next(D=>(Dt(null!==D),w=D.keys(),h.mutationQueue.removeMutationBatch(_,D))).next(()=>h.mutationQueue.performConsistencyCheck(_)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>h.localDocuments.getDocuments(_,w))})}(r.localStore,e);HA(r,e,t),jA(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield td(r,i)}catch(i){yield gu(i)}}),UA.apply(this,arguments)}function BA(){return BA=(0,k.Z)(function*(n,e){const t=Ge(n);Ll(t.remoteStore)||Pe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ge(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.hc.get(r)||[];i.push(e),t.hc.set(r,i)}catch(r){const i=g(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),BA.apply(this,arguments)}function jA(n,e){(n.hc.get(e)||[]).forEach(t=>{t.resolve()}),n.hc.delete(e)}function HA(n,e,t){const r=Ge(n);let i=r.ac[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ac[r.currentUser.toKey()]=i}}function vy(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ic.get(e))n.sc.delete(r),t&&n.nc._c(r,t);n.ic.delete(e),n.isPrimaryClient&&n.cc.ls(e).forEach(r=>{n.cc.containsKey(r)||hN(n,r)})}function hN(n,e){n.rc.delete(e.path.canonicalString());const t=n.oc.get(e);null!==t&&(hy(n.remoteStore,t),n.oc=n.oc.remove(e),n.uc.delete(t),GA(n))}function $A(n,e,t){for(const r of t)r instanceof Vl?(n.cc.addReference(r.key,e),uL(n,r)):r instanceof _y?(Pe("SyncEngine","Document no longer in limbo: "+r.key),n.cc.removeReference(r.key,e),n.cc.containsKey(r.key)||hN(n,r.key)):nt()}function uL(n,e){const t=e.key,r=t.path.canonicalString();n.oc.get(t)||n.rc.has(r)||(Pe("SyncEngine","New document in limbo: "+t),n.rc.add(r),GA(n))}function GA(n){for(;n.rc.size>0&&n.oc.size<n.maxConcurrentLimboResolutions;){const e=n.rc.values().next().value;n.rc.delete(e);const t=new We(Jt.fromString(e)),r=n.lc.next();n.uc.set(r,new U0(t)),n.oc=n.oc.insert(t,r),R0(n.remoteStore,new Ml(as(Eh(t.path)),r,2,xs.at))}}function td(n,e,t){return WA.apply(this,arguments)}function WA(){return WA=(0,k.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[],l=[];var h;r.sc.isEmpty()||(r.sc.forEach((h,_)=>{l.push(r.dc(_,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=Au.Ci(_.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.nc.Wo(i),yield(h=(0,k.Z)(function*(_,w){const D=Ge(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>oe.forEach(w,P=>oe.forEach(P.Si,F=>D.persistence.referenceDelegate.addReference(S,P.targetId,F)).next(()=>oe.forEach(P.Di,F=>D.persistence.referenceDelegate.removeReference(S,P.targetId,F)))))}catch(S){if(!Dl(S))throw S;Pe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const F=D.Ui.get(P),ae=F.withLastLimboFreeSnapshotVersion(F.snapshotVersion);D.Ui=D.Ui.insert(P,ae)}}}),function(_,w){return h.apply(this,arguments)})(r.localStore,a))}),WA.apply(this,arguments)}function lL(n,e){return qA.apply(this,arguments)}function qA(){return qA=(0,k.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){Pe("SyncEngine","User change. New user:",e.toKey());const r=yield bA(t.localStore,e);t.currentUser=e,(i=t).hc.forEach(l=>{l.forEach(h=>{h.reject(new Me(fe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.hc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield td(t,r.ji)}var i}),qA.apply(this,arguments)}function cL(n,e){const t=Ge(n),r=t.uc.get(e);if(r&&r.ec)return Ot().add(r.key);{let i=Ot();const a=t.ic.get(e);if(!a)return i;for(const l of a){const h=t.sc.get(l);i=i.unionWith(h.view.Qu)}return i}}function dL(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,k.Z)(function*(n,e){const t=Ge(n),r=yield sy(t.localStore,e.query,!0),i=e.view.Zu(r);return t.isPrimaryClient&&$A(t,e.targetId,i.Yu),i}),zA.apply(this,arguments)}function hL(n,e){return KA.apply(this,arguments)}function KA(){return KA=(0,k.Z)(function*(n,e){const t=Ge(n);return v0(t.localStore,e).then(r=>td(t,r))}),KA.apply(this,arguments)}function fL(n,e,t,r){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,k.Z)(function*(n,e,t,r){const i=Ge(n),a=yield function(l,h){const _=Ge(l),w=Ge(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Tn(D,h).next(S=>S?_.localDocuments.getDocuments(D,S):oe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield Oh(i.remoteStore):"acknowledged"===t||"rejected"===t?(HA(i,e,r||null),jA(i,e),h=e,Ge(Ge(i.localStore).mutationQueue).An(h)):nt(),yield td(i,a)):Pe("SyncEngine","Cannot apply mutation batch with id: "+e)}),ZA.apply(this,arguments)}function YA(){return YA=(0,k.Z)(function*(n,e){const t=Ge(n);if(ex(t),tx(t),!0===e&&!0!==t.fc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield fN(t,r.toArray());t.fc=!0,yield s(t.remoteStore,!0);for(const a of i)R0(t.remoteStore,a)}else if(!1===e&&!1!==t.fc){const r=[];let i=Promise.resolve();t.ic.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(vy(t,l),kl(t.localStore,l,!0))),hy(t.remoteStore,l)}),yield i,yield fN(t,r),function(a){const l=Ge(a);l.uc.forEach((h,_)=>{hy(l.remoteStore,_)}),l.cc.fs(),l.uc=new Map,l.oc=new tr(We.comparator)}(t),t.fc=!1,yield s(t.remoteStore,!1)}}),YA.apply(this,arguments)}function fN(n,e,t){return QA.apply(this,arguments)}function QA(){return QA=(0,k.Z)(function*(n,e,t){const r=Ge(n),i=[],a=[];for(const l of e){let h;const _=r.ic.get(l);if(_&&0!==_.length){h=yield Xp(r.localStore,as(_[0]));for(const w of _){const D=r.sc.get(w),S=yield dL(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield Lb(r.localStore,l);h=yield Xp(r.localStore,w),yield og(r,pN(w),l,!1)}i.push(h)}return r.nc.Wo(a),i}),QA.apply(this,arguments)}function pN(n){return NI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function gL(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function mL(n,e,t,r){return JA.apply(this,arguments)}function JA(){return JA=(0,k.Z)(function*(n,e,t,r){const i=Ge(n);if(i.fc)return void Pe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ic.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield v0(i.localStore,Lw(a[0])),h=G_.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield td(i,l,h);break}case"rejected":yield kl(i.localStore,e,!0),vy(i,e,r);break;default:nt()}}),JA.apply(this,arguments)}function _L(n,e,t){return XA.apply(this,arguments)}function XA(){return XA=(0,k.Z)(function*(n,e,t){const r=ex(n);if(r.fc){for(const i of e){if(r.ic.has(i)){Pe("SyncEngine","Adding an already active target "+i);continue}const a=yield Lb(r.localStore,i),l=yield Xp(r.localStore,a);yield og(r,pN(a),l.targetId,!1),R0(r.remoteStore,l)}for(const i of t)r.ic.has(i)&&(yield kl(r.localStore,i,!1).then(()=>{hy(r.remoteStore,i),vy(r,i)}).catch(gu))}}),XA.apply(this,arguments)}function ex(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=cN.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=cL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=iL.bind(null,e),e.nc.Wo=Fe.bind(null,e.eventManager),e.nc._c=He.bind(null,e.eventManager),e}function tx(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=sL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=oL.bind(null,e),e}class gN{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,k.Z)(function*(){t.It=ng(e.databaseInfo.databaseId),t.sharedClientState=t.mc(e),t.persistence=t.gc(e),yield t.persistence.start(),t.localStore=t.yc(e),t.gcScheduler=t.Ic(e,t.localStore),t.indexBackfillerScheduler=t.Tc(e,t.localStore)})()}Ic(e,t){return null}Tc(e,t){return null}yc(e){return Pb(this.persistence,new _0,e.initialUser,this.It)}gc(e){return new xb(Yp.Bs,this.It)}mc(e){return new AA}terminate(){var e=this;return(0,k.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class mN extends gN{constructor(e,t,r){super(),this.Ec=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,k.Z)(function*(){yield t().call(r,e),yield r.Ec.initialize(r,e),yield tx(r.Ec.syncEngine),yield Oh(r.Ec.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}yc(e){return Pb(this.persistence,new _0,e.initialUser,this.It)}Ic(e,t){return new h0(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Tc(e,t){const r=new CI(t,this.persistence);return new EI(e.asyncQueue,r)}gc(e){const t=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Rs.withCacheSize(this.cacheSizeBytes):Rs.DEFAULT;return new m0(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,tg(),cy(),this.It,this.sharedClientState,!!this.forceOwnership)}mc(e){return new AA}}class vL extends mN{constructor(e,t){super(e,t,!1),this.Ec=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,k.Z)(function*(){yield t().call(r,e);const i=r.Ec.syncEngine;r.sharedClientState instanceof T0&&(r.sharedClientState.syncEngine={Fr:fL.bind(null,i),$r:mL.bind(null,i),Br:_L.bind(null,i),vi:gL.bind(null,i),Or:hL.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var a=(0,k.Z)(function*(l){yield function pL(n,e){return YA.apply(this,arguments)}(r.Ec.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}mc(e){const t=tg();if(!T0.C(t))throw new Me(fe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Jp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new T0(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class nx{initialize(e,t){var r=this;return(0,k.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>dN(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=lL.bind(null,r.syncEngine),yield s(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new M}createDatastore(e){const t=ng(e.databaseInfo.databaseId),r=new RA(e.databaseInfo);return new A0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>dN(this.syncEngine,h,0),l=xA.C()?new xA:new tN,new x0(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,w){const D=new B0(r,i,a,l,h,_);return w&&(D.fc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,k.Z)(function*(t){const r=Ge(t);Pe("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield rg(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function _N(n,e=10240){let t=0;return{read:()=>(0,k.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,k.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Yb{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ac(this.observer.next,e)}error(e){this.observer.error?this.Ac(this.observer.error,e):Sn("Uncaught Error in snapshot listener:",e)}Rc(){this.muted=!0}Ac(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wL{constructor(e,t){this.bc=e,this.It=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.Pc=new TextDecoder("utf-8"),this.vc().then(r=>{r&&r.ku()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.bc.cancel()}getMetadata(){var e=this;return(0,k.Z)(function*(){return e.metadata.promise})()}wc(){var e=this;return(0,k.Z)(function*(){return yield e.getMetadata(),e.vc()})()}vc(){var e=this;return(0,k.Z)(function*(){const t=yield e.Vc();if(null===t)return null;const r=e.Pc.decode(t),i=Number(r);isNaN(i)&&e.Sc(`length string (${r}) is not valid number`);const a=yield e.Dc(i);return new mt(JSON.parse(a),t.length+i)})()}Cc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Vc(){var e=this;return(0,k.Z)(function*(){for(;e.Cc()<0&&!(yield e.xc()););if(0===e.buffer.length)return null;const t=e.Cc();t<0&&e.Sc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Dc(e){var t=this;return(0,k.Z)(function*(){for(;t.buffer.length<e;)(yield t.xc())&&t.Sc("Reached the end of bundle when more is expected.");const r=t.Pc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Sc(e){throw this.bc.cancel(),new Error(`Invalid bundle format: ${e}`)}xc(){var e=this;return(0,k.Z)(function*(){const t=yield e.bc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class EL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,k.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(fe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,k.Z)(function*(a,l){const h=Ge(a),_=Up(h.It)+"/documents",w={documents:l.map(F=>Ah(h.It,F))},D=yield h.fo("BatchGetDocuments",_,w,l.length),S=new Map;D.forEach(F=>{const j=function YS(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=ko(t,r.found.name),a=nr(r.found.updateTime),l=new Ur({mapValue:{fields:r.found.fields}});return In.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=ko(t,r.missing),a=nr(r.readTime);return In.newNoDocument(i,a)}(n,e):nt()}(h.It,F);S.set(j.key.toString(),j)});const P=[];return l.forEach(F=>{const j=S.get(F.toString());Dt(!!j),P.push(j)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,k.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=We.fromPath(i);e.mutations.push(new j_(a,e.precondition(a)))}),yield(r=(0,k.Z)(function*(i,a){const l=Ge(i),h=Up(l.It)+"/documents",_={writes:a.map(w=>Cu(l.It,w))};yield l.co("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Et.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(fe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Me(fe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class CL{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Nc=r.maxAttempts,this.xo=new dy(this.asyncQueue,"transaction_retry")}run(){this.Nc-=1,this.kc()}kc(){var e=this;this.xo.Ao((0,k.Z)(function*(){const t=new EL(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Oc(a)}))}).catch(i=>{e.Oc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Ap(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Oc(e){this.Nc>0&&this.Fc(e)?(this.Nc-=1,this.asyncQueue.enqueueAndForget(()=>(this.kc(),Promise.resolve()))):this.deferred.reject(e)}Fc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!$I(t)}return!1}}class IL{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Sr.UNAUTHENTICATED,this.clientId=yI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,k.Z)(function*(h){Pe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Pe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,k.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(fe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,k.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=g(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function yN(n,e){return rx.apply(this,arguments)}function rx(){return rx=(0,k.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Pe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,k.Z)(function*(a){r.isEqual(a)||(yield bA(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),rx.apply(this,arguments)}function vN(n,e){return ix.apply(this,arguments)}function ix(){return ix=(0,k.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield sx(n);Pe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>PA(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>PA(e.remoteStore,a)),n.onlineComponents=e}),ix.apply(this,arguments)}function sx(n){return ox.apply(this,arguments)}function ox(){return ox=(0,k.Z)(function*(n){return n.offlineComponents||(Pe("FirestoreClient","Using default OfflineComponentProvider"),yield yN(n,new gN)),n.offlineComponents}),ox.apply(this,arguments)}function Qb(n){return ax.apply(this,arguments)}function ax(){return ax=(0,k.Z)(function*(n){return n.onlineComponents||(Pe("FirestoreClient","Using default OnlineComponentProvider"),yield vN(n,new nx)),n.onlineComponents}),ax.apply(this,arguments)}function wN(n){return sx(n).then(e=>e.persistence)}function Jb(n){return sx(n).then(e=>e.localStore)}function EN(n){return Qb(n).then(e=>e.remoteStore)}function ux(n){return Qb(n).then(e=>e.syncEngine)}function wy(n){return lx.apply(this,arguments)}function lx(){return lx=(0,k.Z)(function*(n){const e=yield Qb(n),t=e.eventManager;return t.onListen=j0.bind(null,e.syncEngine),t.onUnlisten=nL.bind(null,e.syncEngine),t}),lx.apply(this,arguments)}function CN(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return function(i,a,l,h,_){const w=new Yb({next:S=>{a.enqueueAndForget(()=>X(i,D));const P=S.docs.has(l);!P&&S.fromCache?_.reject(new Me(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?_.reject(new Me(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Te(Eh(l.path),w,{includeMetadataChanges:!0,Nu:!0});return U(i,D)}(yield wy(n),n.asyncQueue,e,t,r)})),r.promise}function IN(n,e,t={}){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return function(i,a,l,h,_){const w=new Yb({next:S=>{a.enqueueAndForget(()=>X(i,D)),S.fromCache&&"server"===h.source?_.reject(new Me(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new Te(l,w,{includeMetadataChanges:!0,Nu:!0});return U(i,D)}(yield wy(n),n.asyncQueue,e,t,r)})),r.promise}const bN=new Map;function cx(n,e,t){if(!t)throw new Me(fe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function DN(n,e,t,r){if(!0===e&&!0===r)throw new Me(fe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function TN(n){if(!We.isDocumentKey(n))throw new Me(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function SN(n){if(We.isDocumentKey(n))throw new Me(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xb(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function tn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xb(n);throw new Me(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function AN(n,e){if(e<=0)throw new Me(fe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class xN{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,DN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class H0{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Me(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xN(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new b_;switch(t.type){case"gapi":return new gI(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Me(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=bN.get(e);t&&(Pe("ComponentProvider","Removing Datastore"),bN.delete(e),t.terminate())}(this),Promise.resolve()}}class zn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zn(this.firestore,e,this._key)}}class cs{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new cs(this.firestore,e,this._query)}}class Ul extends cs{constructor(e,t,r){super(e,t,Eh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zn(this.firestore,null,new We(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function RN(n,e,...t){if(n=(0,R.m9)(n),cx("collection","path",e),n instanceof H0){const r=Jt.fromString(e,...t);return SN(r),new Ul(n,null,r)}{if(!(n instanceof zn||n instanceof Ul))throw new Me(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return SN(r),new Ul(n.firestore,null,r)}}function eD(n,e,...t){if(n=(0,R.m9)(n),1===arguments.length&&(e=yI.R()),cx("doc","path",e),n instanceof H0){const r=Jt.fromString(e,...t);return TN(r),new zn(n,null,new We(r))}{if(!(n instanceof zn||n instanceof Ul))throw new Me(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Jt.fromString(e,...t));return TN(r),new zn(n.firestore,n instanceof Ul?n.converter:null,new We(r))}}function MN(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),(n instanceof zn||n instanceof Ul)&&(e instanceof zn||e instanceof Ul)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function NN(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),n instanceof cs&&e instanceof cs&&n.firestore===e.firestore&&Fp(n._query,e._query)&&n.converter===e.converter}class OL{constructor(){this.$c=Promise.resolve(),this.Bc=[],this.Lc=!1,this.Uc=[],this.qc=null,this.Kc=!1,this.Gc=!1,this.Qc=[],this.xo=new dy(this,"async_queue_retry"),this.jc=()=>{const t=cy();t&&Pe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.bo()};const e=cy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.jc)}get isShuttingDown(){return this.Lc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Wc(),this.zc(e)}enterRestrictedMode(e){if(!this.Lc){this.Lc=!0,this.Gc=e||!1;const t=cy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.jc)}}enqueue(e){if(this.Wc(),this.Lc)return new Promise(()=>{});const t=new Ar;return this.zc(()=>this.Lc&&this.Gc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Bc.push(e),this.Hc()))}Hc(){var e=this;return(0,k.Z)(function*(){if(0!==e.Bc.length){try{yield e.Bc[0](),e.Bc.shift(),e.xo.reset()}catch(t){if(!Dl(t))throw t;Pe("AsyncQueue","Operation failed with retryable error: "+t)}e.Bc.length>0&&e.xo.Ao(()=>e.Hc())}})()}zc(e){const t=this.$c.then(()=>(this.Kc=!0,e().catch(r=>{throw this.qc=r,this.Kc=!1,Sn("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Kc=!1,r))));return this.$c=t,t}enqueueAfterDelay(e,t,r){this.Wc(),this.Qc.indexOf(e)>-1&&(t=0);const i=d.createAndSchedule(this,e,t,r,a=>this.Jc(a));return this.Uc.push(i),i}Wc(){this.qc&&nt()}verifyOperationInProgress(){}Yc(){var e=this;return(0,k.Z)(function*(){let t;do{t=e.$c,yield t}while(t!==e.$c)})()}Xc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}Zc(e){return this.Yc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Yc()})}ta(e){this.Qc.push(e)}Jc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function dx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class kL{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class rr extends H0{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new OL,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||PN(this),this._firestoreClient.terminate()}}function Hr(n){return n._firestoreClient||PN(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function PN(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new AS(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new IL(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ON(n,e,t){const r=new Ar;return n.asyncQueue.enqueue((0,k.Z)(function*(){try{yield yN(n,t),yield vN(n,e),r.resolve()}catch(i){const a=i;if(!("FirebaseError"===(l=a).name?l.code===fe.FAILED_PRECONDITION||l.code===fe.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&l instanceof DOMException)||22===l.code||20===l.code||11===l.code))throw a;Vc("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a)}var l})).then(()=>r.promise)}function kN(n){if(n._initialized||n._terminated)throw new Me(fe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class nd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new er(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bl(xr.fromBase64String(e))}catch(t){throw new Me(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Bl(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ug{constructor(e){this._methodName=e}}class tD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return At(this._lat,e._lat)||At(this._long,e._long)}}const WL=/^__.*__$/;class qL{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new wu(e,this.data,this.fieldMask,t,this.fieldTransforms):new zc(e,this.data,t,this.fieldTransforms)}}class FN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new wu(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function LN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class nD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ea(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get na(){return this.settings.na}sa(e){return new nD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ia(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.oa(e),i}ua(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.sa({path:r,ra:!1});return i.ea(),i}ca(e){return this.sa({path:void 0,ra:!0})}aa(e){return sD(e,this.settings.methodName,this.settings.ha||!1,this.path,this.settings.la)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ea(){if(this.path)for(let e=0;e<this.path.length;e++)this.oa(this.path.get(e))}oa(e){if(0===e.length)throw this.aa("Document fields must not be empty");if(LN(this.na)&&WL.test(e))throw this.aa('Document fields cannot begin and end with "__"')}}class zL{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||ng(e)}fa(e,t,r,i=!1){return new nD({na:e,methodName:t,la:r,path:er.emptyPath(),ra:!1,ha:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function lg(n){const e=n._freezeSettings(),t=ng(n._databaseId);return new zL(n._databaseId,!!e.ignoreUndefinedProperties,t)}function rD(n,e,t,r,i,a={}){const l=n.fa(a.merge||a.mergeFields?2:0,e,t,i);gx("Data must be an object, but it was:",l,r);const h=BN(r,l);let _,w;if(a.merge)_=new no(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=mx(e,S,t);if(!l.contains(P))throw new Me(fe.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);HN(D,P)||D.push(P)}_=new no(D),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new qL(new Ur(h),_,w)}class $0 extends ug{_toFieldTransform(e){if(2!==e.na)throw e.aa(1===e.na?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof $0}}function VN(n,e,t){return new nD({na:3,la:e.settings.la,methodName:n._methodName,ra:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class hx extends ug{_toFieldTransform(e){return new bh(e.path,new Gc)}isEqual(e){return e instanceof hx}}class KL extends ug{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=VN(this,e,!0),r=this.da.map(a=>cg(a,t)),i=new yu(r);return new bh(e.path,i)}isEqual(e){return this===e}}class ZL extends ug{constructor(e,t){super(e),this.da=t}_toFieldTransform(e){const t=VN(this,e,!0),r=this.da.map(a=>cg(a,t)),i=new Wc(r);return new bh(e.path,i)}isEqual(e){return this===e}}class YL extends ug{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=new Ih(e.It,kI(e.It,this._a));return new bh(e.path,t)}isEqual(e){return this===e}}function fx(n,e,t,r){const i=n.fa(1,e,t);gx("Data must be an object, but it was:",i,r);const a=[],l=Ur.empty();jc(r,(_,w)=>{const D=iD(e,_,t);w=(0,R.m9)(w);const S=i.ua(D);if(w instanceof $0)a.push(D);else{const P=cg(w,S);null!=P&&(a.push(D),l.set(D,P))}});const h=new no(a);return new FN(l,h,i.fieldTransforms)}function px(n,e,t,r,i,a){const l=n.fa(1,e,t),h=[mx(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(mx(e,a[P])),_.push(a[P+1]);const w=[],D=Ur.empty();for(let P=h.length-1;P>=0;--P)if(!HN(w,h[P])){const F=h[P];let j=_[P];j=(0,R.m9)(j);const ae=l.ua(F);if(j instanceof $0)w.push(F);else{const Ce=cg(j,ae);null!=Ce&&(w.push(F),D.set(F,Ce))}}const S=new no(w);return new FN(D,S,l.fieldTransforms)}function UN(n,e,t,r=!1){return cg(t,n.fa(r?4:3,e))}function cg(n,e){if(jN(n=(0,R.m9)(n)))return gx("Unsupported field value:",e,n),BN(n,e);if(n instanceof ug)return function(t,r){if(!LN(r.na))throw r.aa(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.aa(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ra&&4!==e.na)throw e.aa("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=cg(l,r.ca(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,R.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return kI(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Fn.fromDate(t);return{timestampValue:Vp(r.It,i)}}if(t instanceof Fn){const i=new Fn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Vp(r.It,i)}}if(t instanceof tD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Bl)return{bytesValue:YI(r.It,t._byteString)};if(t instanceof zn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.aa(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:q_(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.aa(`Unsupported field value: ${Xb(t)}`)}(n,e)}function BN(n,e){const t={};return II(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jc(n,(r,i)=>{const a=cg(i,e.ia(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function jN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Fn||n instanceof tD||n instanceof Bl||n instanceof zn||n instanceof ug)}function gx(n,e,t){if(!jN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=Xb(t);throw e.aa("an object"===r?n+" a custom object":n+" "+r)}var r}function mx(n,e,t){if((e=(0,R.m9)(e))instanceof nd)return e._internalPath;if("string"==typeof e)return iD(n,e);throw sD("Field path arguments must be of type string or ",n,!1,void 0,t)}const QL=new RegExp("[~\\*/\\[\\]]");function iD(n,e,t){if(e.search(QL)>=0)throw sD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new nd(...e.split("."))._internalPath}catch(r){throw sD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function sD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Me(fe.INVALID_ARGUMENT,h+n+_)}function HN(n,e){return n.some(t=>t.isEqual(e))}class G0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new zn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new JL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class JL extends G0{data(){return super.data()}}function oD(n,e){return"string"==typeof e?iD(n,e):e instanceof nd?e._internalPath:e._delegate._internalPath}class dg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class rd extends G0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new W0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(oD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class W0 extends rd{data(e={}){return super.data(e)}}class kh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new dg(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new W0(this._firestore,this._userDataWriter,r.key,r,new dg(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new W0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new W0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new dg(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:XL(l.type),doc:h,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function XL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function $N(n,e){return n instanceof rd&&e instanceof rd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kh&&e instanceof kh&&n._firestore===e._firestore&&NN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function GN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class q0{}function Fh(n,...e){for(const t of e)n=t._apply(n);return n}class eV extends q0{constructor(e,t,r){super(),this.wa=e,this.ma=t,this.ga=r,this.type="where"}_apply(e){const t=lg(e.firestore),r=function(i,a,l,h,_,w,D){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){YN(D,w);const F=[];for(const j of D)F.push(ZN(h,i,j));S={arrayValue:{values:F}}}else S=ZN(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||YN(D,w),S=UN(l,"where",D,"in"===w||"not-in"===w);const P=ni.create(_,w,S);return function(F,j){if(j.dt()){const Ce=k_(F);if(null!==Ce&&!Ce.isEqual(j.field))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ce.toString()}' and '${j.field.toString()}'`);const je=Pw(F);null!==je&&QN(0,j.field,je)}const ae=function(Ce,je){for(const et of Ce.filters)if(je.indexOf(et.op)>=0)return et.op;return null}(F,function(Ce){switch(Ce){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(j.op));if(null!==ae)throw new Me(fe.INVALID_ARGUMENT,ae===j.op?`Invalid query. You cannot use more than one '${j.op.toString()}' filter.`:`Invalid query. You cannot use '${j.op.toString()}' filters with '${ae.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.wa,this.ma,this.ga);return new cs(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new _u(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class nV extends q0{constructor(e,t){super(),this.wa=e,this.ya=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new xl(i,a);return function(h,_){if(null===Pw(h)){const w=k_(h);null!==w&&QN(0,w,_.field)}}(r,l),l}(e._query,this.wa,this.ya);return new cs(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new _u(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class WN extends q0{constructor(e,t,r){super(),this.type=e,this.pa=t,this.Ia=r}_apply(e){return new cs(e.firestore,e.converter,F_(e._query,this.pa,this.Ia))}}class qN extends q0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KN(e,this.type,this.Ta,this.Ea);return new cs(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class zN extends q0{constructor(e,t,r){super(),this.type=e,this.Ta=t,this.Ea=r}_apply(e){const t=KN(e,this.type,this.Ta,this.Ea);return new cs(e.firestore,e.converter,(i=t,new _u((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function KN(n,e,t,r){if(t[0]=(0,R.m9)(t[0]),t[0]instanceof G0)return function(i,a,l,h,_){if(!h)throw new Me(fe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of Ch(i))if(D.field.isKeyField())w.push($c(a,h.key));else{const S=h.data.field(D.field);if(R_(S))throw new Me(fe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Me(fe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new Al(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lg(n.firestore);return function(a,l,h,_,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Me(fe.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let F=0;F<w.length;F++){const j=w[F];if(S[F].field.isKeyField()){if("string"!=typeof j)throw new Me(fe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof j}`);if(!Ow(a)&&-1!==j.indexOf("/"))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${j}' contains a slash.`);const ae=a.path.child(Jt.fromString(j));if(!We.isDocumentKey(ae))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ae}' is not because it contains an odd number of segments.`);const Ce=new We(ae);P.push($c(l,Ce))}else{const ae=UN(h,_,j);P.push(ae)}}return new Al(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function ZN(n,e,t){if("string"==typeof(t=(0,R.m9)(t))){if(""===t)throw new Me(fe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ow(e)&&-1!==t.indexOf("/"))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Jt.fromString(t));if(!We.isDocumentKey(r))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return $c(n,new We(r))}if(t instanceof zn)return $c(n,t._key);throw new Me(fe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xb(t)}.`)}function YN(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(fe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function QN(n,e,t){if(!t.isEqual(e))throw new Me(fe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const cV={maxAttempts:5};class _x{convertValue(e,t="none"){switch(Sl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Gn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Tl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return jc(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new tD(Gn(e.latitude),Gn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=DI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sp(e));default:return null}}convertTimestamp(e){const t=mu(e);return new Fn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Jt.fromString(e);Dt(Zw(r));const i=new ro(r.get(1),r.get(3)),a=new We(r.popFirst(5));return i.isEqual(t)||Sn(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function aD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class dV extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}class JN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lg(e)}set(e,t,r){this._verifyNotCommitted();const i=Lh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,Wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Lh(e,this._firestore);let l;return l="string"==typeof(t=(0,R.m9)(t))||t instanceof nd?px(this._dataReader,"WriteBatch.update",a._key,t,r,i):fx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lh(e,this._firestore);return this._mutations=this._mutations.concat(new Kc(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(fe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lh(n,e){if((n=(0,R.m9)(n)).firestore!==e)throw new Me(fe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class hg extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new zn(this.firestore,null,t)}}function XN(n,e,t){n=tn(n,zn);const r=tn(n.firestore,rr),i=aD(n.converter,e,t);return Ey(r,[rD(lg(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Wn.none())])}function eP(n,e,t,...r){n=tn(n,zn);const i=tn(n.firestore,rr),a=lg(i);let l;return l="string"==typeof(e=(0,R.m9)(e))||e instanceof nd?px(a,"updateDoc",n._key,e,t,r):fx(a,"updateDoc",n._key,e),Ey(i,[l.toMutation(n._key,Wn.exists(!0))])}function tP(n,...e){var t,r,i;n=(0,R.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||dx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(dx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,D;if(n instanceof zn)w=tn(n.firestore,rr),D=Eh(n._key.path),_={next:S=>{e[l]&&e[l](yx(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=tn(n,cs);w=tn(S.firestore,rr),D=S._query;const P=new hg(w);_={next:F=>{e[l]&&e[l](new kh(w,P,S,F))},error:e[l+1],complete:e[l+2]},GN(n._query)}return function(S,P,F,j){const ae=new Yb(j),Ce=new Te(P,ae,F);return S.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return U(yield wy(S),Ce)})),()=>{ae.Rc(),S.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return X(yield wy(S),Ce)}))}}(Hr(w),D,h,_)}function Ey(n,e){return function(t,r){const i=new Ar;return t.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return function rL(n,e,t){return kA.apply(this,arguments)}(yield ux(t),r,i)})),i.promise}(Hr(n),e)}function yx(n,e,t){const r=t.docs.get(e._key),i=new hg(n);return new rd(n,i,e._key,r,new dg(t.hasPendingWrites,t.fromCache),e.converter)}class EV extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lg(e)}get(e){const t=Lh(e,this._firestore),r=new dV(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new G0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new G0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=Lh(e,this._firestore),a=aD(i.converter,t,r),l=rD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Lh(e,this._firestore);let l;return l="string"==typeof(t=(0,R.m9)(t))||t instanceof nd?px(this._dataReader,"Transaction.update",a._key,t,r,i):fx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Lh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lh(e,this._firestore),r=new hg(this._firestore);return super.get(e).then(i=>new rd(this._firestore,r,t._key,i._document,new dg(!1,!1),t.converter))}}function vx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function rP(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function iP(){if(!function bI(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fh=ne.SDK_VERSION,(0,ne._registerComponent)(new be.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new rr(new fI(t.getProvider("auth-internal")),new mI(t.getProvider("app-check-internal")),function(h,_){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new Me(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ro(h.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(yw,"3.5.0",n),(0,ne.registerVersion)(yw,"3.5.0","esm2017")}();class z0{constructor(e){this._delegate=e}static fromBase64String(e){return iP(),new z0(Bl.fromBase64String(e))}static fromUint8Array(e){return rP(),new z0(Bl.fromUint8Array(e))}toBase64(){return iP(),this._delegate.toBase64()}toUint8Array(){return rP(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function wx(n){return function RV(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class MV{enableIndexedDbPersistence(e,t){return function LL(n,e){kN(n=tn(n,rr));const t=Hr(n),r=n._freezeSettings(),i=new nx;return ON(t,i,new mN(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function VL(n){kN(n=tn(n,rr));const e=Hr(n),t=n._freezeSettings(),r=new nx;return ON(e,r,new vL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function UL(n){if(n._initialized&&!n._terminated)throw new Me(fe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,k.Z)(function*(){try{yield(t=(0,k.Z)(function*(r){if(!to.C())return Promise.resolve();const i=r+"main";yield to.delete(i)}),function(r){return t.apply(this,arguments)})(Jp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class sP{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof ro||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function NL(n,e,t,r={}){var i;const a=(n=tn(n,H0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&Vc("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Sr.MOCK_USER;else{l=(0,R.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Sr(_)}n._authCredentials=new hI(new I_(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function jL(n){return function bL(n){return n.asyncQueue.enqueue((0,k.Z)(function*(){const e=yield wN(n),t=yield EN(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i._u.delete(0),ed(i)}(t)}))}(Hr(n=tn(n,rr)))}(this._delegate)}disableNetwork(){return function HL(n){return function DL(n){return n.asyncQueue.enqueue((0,k.Z)(function*(){const e=yield wN(n),t=yield EN(n);return e.setNetworkEnabled(!1),(r=(0,k.Z)(function*(i){const a=Ge(i);a._u.add(0),yield rg(a),a.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Hr(n=tn(n,rr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,DN("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function BL(n){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return function aL(n,e){return BA.apply(this,arguments)}(yield ux(e),t)})),t.promise}(Hr(n=tn(n,rr)))}(this._delegate)}onSnapshotsInSync(e){return function wV(n,e){return function AL(n,e){const t=new Yb(e);return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return r=yield wy(n),i=t,Ge(r).Ru.add(i),void i.next();var r,i})),()=>{t.Rc(),n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return r=yield wy(n),i=t,void Ge(r).Ru.delete(i);var r,i}))}}(Hr(n=tn(n,rr)),dx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Cy(this,RN(this._delegate,e))}catch(t){throw Ms(t,"collection()","Firestore.collection()")}}doc(e){try{return new xa(this,eD(this._delegate,e))}catch(t){throw Ms(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ns(this,function PL(n,e){if(n=tn(n,H0),cx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(fe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new cs(n,null,(t=e,new _u(Jt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ms(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CV(n,e,t){n=tn(n,rr);const r=Object.assign(Object.assign({},cV),t);return function(i){if(i.maxAttempts<1)throw new Me(fe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function xL(n,e,t){const r=new Ar;return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){const i=yield(a=n,Qb(a).then(l=>l.datastore));var a;new CL(n.asyncQueue,i,t,e,r).run()})),r.promise}(Hr(n),i=>e(new EV(n,i)),r)}(this._delegate,t=>e(new oP(this,t)))}batch(){return Hr(this._delegate),new aP(new JN(this._delegate,e=>Ey(this._delegate,e)))}loadBundle(e){return function $L(n,e){const t=Hr(n=tn(n,rr)),r=new kL;return function RL(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return _N(_,w);if(_ instanceof ArrayBuffer)return _N(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new wL(_,l);var _}(t,ng(e));n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){!function yL(n,e,t){const r=Ge(n);var i;(i=(0,k.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(P,F){const j=Ge(P),ae=nr(F.createTime);return j.persistence.runTransaction("hasNewerBundle","readonly",Ce=>j.Ns.getBundleMetadata(Ce,F.id)).then(Ce=>!!Ce&&Ce.createTime.compareTo(ae)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(ls(_));const w=new dn(_,a.localStore,l.It);let D=yield l.wc();for(;D;){const P=yield w.Ou(D);P&&h._updateProgress(P),D=yield l.wc()}const S=yield w.complete();return yield td(a,S.Bu,void 0),yield function(P,F){const j=Ge(P);return j.persistence.runTransaction("Save bundle","readwrite",ae=>j.Ns.saveBundleMetadata(ae,F))}(a.localStore,_),h._completeWith(S.progress),Promise.resolve(S.$u)}catch(_){return Vc("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield ux(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function GL(n,e){return function ML(n,e){return n.asyncQueue.enqueue((0,k.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Ns.getNamedQuery(a,r))}(yield Jb(n),e)}))}(Hr(n=tn(n,rr)),e).then(t=>t?new cs(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ns(this,t):null)}}class uD extends _x{constructor(e){super(),this.firestore=e}convertBytes(e){return new z0(new Bl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return xa.forKey(t,this.firestore,null)}}class oP{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}get(e){const t=pg(e);return this._delegate.get(t).then(r=>new K0(this._firestore,new rd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=pg(e);return r?(vx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}}class aP{constructor(e){this._delegate=e}set(e,t,r){const i=pg(e);return r?(vx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=pg(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=pg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class fg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new W0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Z0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=fg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new fg(e,new uD(e),t),i.set(t,a)),a}}fg.INSTANCES=new WeakMap;class xa{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new xa(t,new zn(t._delegate,r,new We(e)))}static forKey(e,t,r){return new xa(t,new zn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Cy(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Cy(this.firestore,RN(this._delegate,e))}catch(t){throw Ms(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof zn&&MN(this._delegate,e)}set(e,t){t=vx("DocumentReference.set",t);try{return t?XN(this._delegate,e,t):XN(this._delegate,e)}catch(r){throw Ms(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?eP(this._delegate,e):eP(this._delegate,e,t,...r)}catch(i){throw Ms(i,"updateDoc()","DocumentReference.update()")}}delete(){return function yV(n){return Ey(tn(n.firestore,rr),[new Kc(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=uP(e),r=lP(e,i=>new K0(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return tP(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function fV(n){n=tn(n,zn);const e=tn(n.firestore,rr),t=Hr(e),r=new hg(e);return function TL(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return(r=(0,k.Z)(function*(i,a,l){try{const h=yield function(_,w){const D=Ge(_);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(fe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=g(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._key).then(i=>new rd(e,r,n._key,i,new dg(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function pV(n){n=tn(n,zn);const e=tn(n.firestore,rr);return CN(Hr(e),n._key,{source:"server"}).then(t=>yx(e,n,t))}(this._delegate):function hV(n){n=tn(n,zn);const e=tn(n.firestore,rr);return CN(Hr(e),n._key).then(t=>yx(e,n,t))}(this._delegate),t.then(r=>new K0(this.firestore,new rd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new xa(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function Ms(n,e,t){return n.message=n.message.replace(e,t),n}function uP(n){for(const e of n)if("object"==typeof e&&!wx(e))return e;return{}}function lP(n,e){var t,r;let i;return i=wx(n[0])?n[0]:wx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class K0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new xa(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return $N(this._delegate,e._delegate)}}class Z0 extends K0{data(e){const t=this._delegate.data(e);return function dI(n,e){n||nt()}(void 0!==t),t}}class Ns{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new uD(e)}where(e,t,r){try{return new Ns(this.firestore,Fh(this._delegate,function tV(n,e,t){const r=e,i=oD("where",n);return new eV(i,r,t)}(e,t,r)))}catch(i){throw Ms(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ns(this.firestore,Fh(this._delegate,function rV(n,e="asc"){const t=e,r=oD("orderBy",n);return new nV(r,t)}(e,t)))}catch(r){throw Ms(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ns(this.firestore,Fh(this._delegate,function iV(n){return AN("limit",n),new WN("limit",n,"F")}(e)))}catch(t){throw Ms(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ns(this.firestore,Fh(this._delegate,function sV(n){return AN("limitToLast",n),new WN("limitToLast",n,"L")}(e)))}catch(t){throw Ms(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ns(this.firestore,Fh(this._delegate,function oV(...n){return new qN("startAt",n,!0)}(...e)))}catch(t){throw Ms(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ns(this.firestore,Fh(this._delegate,function aV(...n){return new qN("startAfter",n,!1)}(...e)))}catch(t){throw Ms(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ns(this.firestore,Fh(this._delegate,function uV(...n){return new zN("endBefore",n,!1)}(...e)))}catch(t){throw Ms(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ns(this.firestore,Fh(this._delegate,function lV(...n){return new zN("endAt",n,!0)}(...e)))}catch(t){throw Ms(t,"endAt()","Query.endAt()")}}isEqual(e){return NN(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function mV(n){n=tn(n,cs);const e=tn(n.firestore,rr),t=Hr(e),r=new hg(e);return function SL(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,k.Z)(function*(){return(r=(0,k.Z)(function*(i,a,l){try{const h=yield sy(i,a,!0),_=new yy(a,h.Hi),w=_.ju(h.documents),D=_.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const _=g(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield Jb(n),e,t);var r})),t.promise}(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function _V(n){n=tn(n,cs);const e=tn(n.firestore,rr),t=Hr(e),r=new hg(e);return IN(t,n._query,{source:"server"}).then(i=>new kh(e,r,n,i))}(this._delegate):function gV(n){n=tn(n,cs);const e=tn(n.firestore,rr),t=Hr(e),r=new hg(e);return GN(n._query),IN(t,n._query).then(i=>new kh(e,r,n,i))}(this._delegate),t.then(r=>new Ex(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=uP(e),r=lP(e,i=>new Ex(this.firestore,new kh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return tP(this._delegate,t,r)}withConverter(e){return new Ns(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}class PV{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Z0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ex{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ns(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Z0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new PV(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Z0(this._firestore,r))})}isEqual(e){return $N(this._delegate,e._delegate)}}class Cy extends Ns{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new xa(this.firestore,e):null}doc(e){try{return new xa(this.firestore,void 0===e?eD(this._delegate):eD(this._delegate,e))}catch(t){throw Ms(t,"doc()","CollectionReference.doc()")}}add(e){return function vV(n,e){const t=tn(n.firestore,rr),r=eD(n),i=aD(n.converter,e);return Ey(t,[rD(lg(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new xa(this.firestore,t))}isEqual(e){return MN(this._delegate,e._delegate)}withConverter(e){return new Cy(this.firestore,this._delegate.withConverter(e?fg.getInstance(this.firestore,e):null))}}function pg(n){return tn(n,zn)}class Cx{constructor(...e){this._delegate=new nd(...e)}static documentId(){return new Cx(er.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof nd&&this._delegate._internalPath.isEqual(e._internalPath)}}class gg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function bV(){return new hx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gg(e)}static delete(){const e=function IV(){return new $0("deleteField")}();return e._methodName="FieldValue.delete",new gg(e)}static arrayUnion(...e){const t=function DV(...n){return new KL("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gg(t)}static arrayRemove(...e){const t=function TV(...n){return new ZL("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gg(t)}static increment(e){const t=function SV(n){return new YL("increment",n)}(e);return t._methodName="FieldValue.increment",new gg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OV={Firestore:sP,GeoPoint:tD,Timestamp:Fn,Blob:z0,Transaction:oP,WriteBatch:aP,DocumentReference:xa,DocumentSnapshot:K0,Query:Ns,QueryDocumentSnapshot:Z0,QuerySnapshot:Ex,CollectionReference:Cy,FieldPath:Cx,FieldValue:gg,setLogLevel:function NV(n){!function CS(n){bl.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function cP(n,e){return function LV(n,e=Ds.z){return new Yr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Ix(n,e){return cP(n,e).pipe((0,ht.U)(t=>({payload:t,type:"query"})))}function lD(n,e){return Ix(n,e).pipe(Hm(void 0),$m(),(0,ht.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function dP(n,e,t){return lD(n,t).pipe(Ac((r,i)=>function UV(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function BV(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return bx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return bx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return bx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),Ro(),(0,ht.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function bx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function hP(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function FV(n){(function kV(n,e){n.INTERNAL.registerComponent(new be.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OV)))})(n,(e,t)=>new sP(e,t,new MV)),n.registerVersion("@firebase/firestore-compat","0.1.25")}(Wd.Z);class fP{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=lD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ht.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Hm(void 0),$m(),Gt(([r,i])=>i.length>0||!r),(0,ht.U)(([r,i])=>i),Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ac((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hP(e);return dP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return Ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ut.iC)}get(e){return(0,xt.D)(this.query.get(e)).pipe(Ut.iC)}add(e){return this.ref.add(e)}doc(e){return new pP(this.ref.doc(e),this.afs)}}class pP{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=_P(r,t);return new fP(i,a,this.afs)}snapshotChanges(){return function VV(n,e){return cP(n,e).pipe(Hm(void 0),$m(),(0,ht.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ht.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,xt.D)(this.ref.get(e)).pipe(Ut.iC)}}class jV{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?lD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Gt(t=>t.length>0),Ut.iC):lD(this.query,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ac((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=hP(e);return dP(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return Ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,ht.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ut.iC)}get(e){return(0,xt.D)(this.query.get(e)).pipe(Ut.iC)}}const gP=new m.OlP("angularfire2.enableFirestorePersistence"),mP=new m.OlP("angularfire2.firestore.persistenceSettings"),HV=new m.OlP("angularfire2.firestore.settings"),$V=new m.OlP("angularfire2.firestore.use-emulator");function _P(n,e=(t=>t)){return{query:e(n),ref:n}}let Dx=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,P,F,j,ae,Ce,je,et){this.schedulers=_;const rt=(0,Qn.on)(t,h,r),tt=D;S&&Dc(rt,h,P,j,ae,Ce,F,je),[this.firestore,this.persistenceEnabled$]=(0,Qn.cc)(`${rt.name}.firestore`,"AngularFirestore",rt.name,()=>{const Ct=h.runOutsideAngular(()=>rt.firestore());if(a&&Ct.settings(a),tt&&Ct.useEmulator(...tt),i&&!zo(l)){const Mt=()=>{try{return(0,xt.D)(Ct.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(hr){return"undefined"!=typeof console&&console.warn(hr),ut(!1)}};return[Ct,h.runOutsideAngular(Mt)]}return[Ct,ut(!1)]},[a,tt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=_P(i,r),h=this.schedulers.ngZone.run(()=>a);return new fP(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new jV(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new pP(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qn.Dh),m.LFG(Qn.xv,8),m.LFG(gP,8),m.LFG(HV,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(mP,8),m.LFG($V,8),m.LFG(du,8),m.LFG($d,8),m.LFG(xf,8),m.LFG(ll,8),m.LFG(Rf,8),m.LFG(Gd,8),m.LFG(Lr,8),m.LFG(al,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GV=(()=>{class n{constructor(){Hd.Z.registerVersion("angularfire",Ut.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:gP,useValue:!0},{provide:mP,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Dx]}),n})();var WV=L(5032);const yP="@firebase/database";let Tx="";function wP(n){Tx=n}class KV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,R.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class ZV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const EP=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new KV(e)}}catch(e){}return new ZV},mg=EP("localStorage"),Sx=EP("sessionStorage"),Iy=new Xe.Yd("@firebase/database"),CP=function(){let n=1;return function(){return n++}}(),IP=function(n){const e=(0,R.dS)(n),t=new R.gQ;t.update(e);const r=t.digest();return R.US.encodeByteArray(r)},Y0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=Y0.apply(null,r):e+="object"==typeof r?(0,R.Pz)(r):r,e+=" "}return e};let _g=null,bP=!0;const DP=function(n,e){(0,R.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Iy.logLevel=Xe.in.VERBOSE,_g=Iy.log.bind(Iy),e&&Sx.set("logging_enabled",!0)):"function"==typeof n?_g=n:(_g=null,Sx.remove("logging_enabled"))},gi=function(...n){if(!0===bP&&(bP=!1,null===_g&&!0===Sx.get("logging_enabled")&&DP(!0)),_g){const e=Y0.apply(null,n);_g(e)}},Q0=function(n){return function(...e){gi(n,...e)}},Ax=function(...n){const e="FIREBASE INTERNAL ERROR: "+Y0(...n);Iy.error(e)},jl=function(...n){const e=`FIREBASE FATAL ERROR: ${Y0(...n)}`;throw Iy.error(e),new Error(e)},ds=function(...n){const e="FIREBASE WARNING: "+Y0(...n);Iy.warn(e)},cD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},id="[MIN_NAME]",Hl="[MAX_NAME]",yg=function(n,e){if(n===e)return 0;if(n===id||e===Hl)return-1;if(e===id||n===Hl)return 1;{const t=dD(n),r=dD(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},JV=function(n,e){return n===e?0:n<e?-1:1},J0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,R.Pz)(e))},xx=function(n){if("object"!=typeof n||null===n)return(0,R.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,R.Pz)(e[r]),t+=":",t+=xx(n[e[r]]);return t+="}",t},TP=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function mi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const SP=function(n){(0,R.hu)(!cD(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},nU=new RegExp("^-?(0*)\\d{1,10}$"),AP=-2147483648,Rx=2147483647,dD=function(n){if(nU.test(n)){const e=Number(n);if(e>=AP&&e<=Rx)return e}return null},by=function(n){try{n()}catch(e){setTimeout(()=>{throw ds("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},X0=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class iU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ds(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class sU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(gi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ds(e)}}let eE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const PP=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,FP="websocket",LP="long_polling";class Nx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=mg.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&mg.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function VP(n,e,t){let r;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof t,"typeof params must == object"),e===FP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==LP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function oU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return mi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class aU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,R.p$)(this.counters_)}}const Px={},Ox={};function kx(n){const e=n.toString();return Px[e]||(Px[e]=new aU),Px[e]}class lU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&by(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Vh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Q0(e),this.stats_=kx(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),VP(t,LP,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new lU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,R.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Fx((...a)=>{const[l,h,_,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&PP.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Vh.forceAllow_=!0}static forceDisallow(){Vh.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!Vh.forceAllow_&&(Vh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,R.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,R.h$)(t),i=TP(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,R.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Fx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=CP(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Fx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){gi("frame writing exception"),h.stack&&gi(h.stack),gi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,R.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{gi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let fD=null;"undefined"!=typeof MozWebSocket?fD=MozWebSocket:"undefined"!=typeof WebSocket&&(fD=WebSocket);let Dy=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Q0(this.connId),this.stats_=kx(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,R.Yr)()&&"undefined"!=typeof location&&location.hostname&&PP.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),VP(t,FP,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,mg.set("previous_websocket_failure",!0);try{let i;if((0,R.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Tx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new fD(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==fD&&!n.forceDisallow_}static previouslyFailed(){return mg.isInMemoryStorage||!0===mg.get("previous_websocket_failure")}markConnectionHealthy(){mg.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,R.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,R.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=TP(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),WP=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Vh,Dy]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=Dy&&Dy.isAvailable();let i=r&&!Dy.previouslyFailed();if(t.webSocketOnly&&(r||ds("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Dy];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class JP{constructor(e,t,r,i,a,l,h,_,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Q0("c:"+this.id+":"),this.transportManager_=new WP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=X0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=J0("t",e),r=J0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=J0("t",e),r=J0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=J0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Ax("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ax("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ds("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),X0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):X0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(mg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class XP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class eO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class pD extends eO{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new pD}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new mn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uh(n){return n.pieces_.length-n.pieceNum_}function An(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new mn(n.pieces_,e)}function Vx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function tE(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function rO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new mn(e,0)}function ir(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new mn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function Ps(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return Ps(An(n),An(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function MU(n,e){const t=tE(n,0),r=tE(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=yg(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Ux(n,e){if(Uh(n)!==Uh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ra(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Uh(n)>Uh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class NU{constructor(e,t){this.errorPrefix_=t,this.parts_=tE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,R.ug)(this.parts_[r]);iO(this)}}function iO(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+vg(n))}function vg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Bx extends eO{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Bx}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const nE=1e3;let mD,wg=(()=>{class n extends XP{constructor(t,r,i,a,l,h,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=Q0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=nE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Bx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&pD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,R.Pz)(l)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new R.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?r.resolve(_):r.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,D=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,R.r3)(t,"w")){const i=(0,R.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ds(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,R.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,R.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,R.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Ax("Unrecognized action received from server: "+(0,R.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=nE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,k.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,w=null;const D=function(){w?w.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(F){(0,R.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(F)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[F,j]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?gi("getToken() completed but was canceled"):(gi("getToken() completed. Creating connection."),t.authToken_=F&&F.accessToken,t.appCheckToken_=j&&j.token,w=new JP(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ae=>{ds(ae+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(F){t.log_("Failed to get token: "+F),_||(t.repoInfo_.nodeAdmin&&ds(F),D())}}})()}interrupt(t){gi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){gi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=nE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>xx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new mn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){gi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){gi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,R.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Tx.replace(/\./g,"-")]=1,(0,R.uI)()?t["framework.cordova"]=1:(0,R.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=pD.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Zt(e,t)}}class gD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Zt(id,e),i=new Zt(id,t);return 0!==this.compare(r,i)}minPost(){return Zt.MIN}}class aO extends gD{static get __EMPTY_NODE(){return mD}static set __EMPTY_NODE(e){mD=e}compare(e,t){return yg(e.name,t.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Zt.MIN}maxPost(){return new Zt(Hl,mD)}makePost(e,t){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Zt(e,mD)}toString(){return".key"}}const $l=new aO;class _D{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Hx,xu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:so.EMPTY_NODE,this.right=null!=l?l:so.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return so.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return so.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class so{constructor(e,t=so.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new so(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,xu.BLACK,null,null))}remove(e){return new so(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new _D(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new _D(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new _D(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new _D(this.root_,null,this.comparator_,!0,e)}}function BU(n,e){return yg(n.name,e.name)}function jx(n,e){return yg(n,e)}so.EMPTY_NODE=new class UU{copy(e,t,r,i,a){return this}insert(e,t,r){return new xu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const uO=function(n){return"number"==typeof n?"number:"+SP(n):"string:"+n},lO=function(n){if(n.isLeafNode()){const e=n.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(n===Hx||n.isEmpty(),"priority of unexpected type.");(0,R.hu)(n===Hx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let cO,dO,hO,Ty=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),lO(this.priorityNode_)}static set __childrenNodeConstructor(t){cO=t}static get __childrenNodeConstructor(){return cO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,R.hu)(".priority"!==i||1===Uh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(An(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+uO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?SP(this.value_):this.value_,this.lazyHash_=IP(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,R.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,R.hu)(a>=0,"Unknown leaf type: "+r),(0,R.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Ln=new class GU extends gD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?yg(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Zt.MIN}maxPost(){return new Zt(Hl,new Ty("[PRIORITY-POST]",hO))}makePost(e,t){const r=dO(e);return new Zt(t,new Ty("[PRIORITY-POST]",r))}toString(){return".priority"}},WU=Math.log(2);class qU{constructor(e){this.count=parseInt(Math.log(e+1)/WU,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const yD=function(n,e,t,r){n.sort(e);const i=function(_,w){const D=w-_;let S,P;if(0===D)return null;if(1===D)return S=n[_],P=t?t(S):S,new xu(P,S.node,xu.BLACK,null,null);{const F=parseInt(D/2,10)+_,j=i(_,F),ae=i(F+1,w);return S=n[F],P=t?t(S):S,new xu(P,S.node,xu.BLACK,j,ae)}},h=function(_){let w=null,D=null,S=n.length;const P=function(j,ae){const Ce=S-j,je=S;S-=j;const et=i(Ce+1,je),rt=n[Ce],tt=t?t(rt):rt;F(new xu(tt,rt.node,ae,null,et))},F=function(j){w?(w.left=j,w=j):(D=j,w=j)};for(let j=0;j<_.count;++j){const ae=_.nextBitIsOne(),Ce=Math.pow(2,_.count-(j+1));ae?P(Ce,xu.BLACK):(P(Ce,xu.BLACK),P(Ce,xu.RED))}return D}(new qU(n.length));return new so(r||e,h)};let $x;const Sy={};class sd{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,R.hu)(Sy&&Ln,"ChildrenNode.ts has not been loaded"),$x=$x||new sd({".priority":Sy},{".priority":Ln}),$x}get(e){const t=(0,R.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof so?t:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,R.hu)(e!==$l,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?yD(r,e.getCompare()):Sy;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new sd(D,w)}addToIndexes(e,t){const r=(0,R.UI)(this.indexes_,(i,a)=>{const l=(0,R.DV)(this.indexSet_,a);if((0,R.hu)(l,"Missing index implementation for "+a),i===Sy){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(Zt.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&h.push(w),w=_.getNext();return h.push(e),yD(h,l.getCompare())}return Sy}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new Zt(e.name,h))),_.insert(e,e.node)}});return new sd(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,R.UI)(this.indexes_,i=>{if(i===Sy)return i;{const a=t.get(e.name);return a?i.remove(new Zt(e.name,a)):i}});return new sd(r,this.indexSet_)}}let rE,kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&lO(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return rE||(rE=new n(new so(jx),null,sd.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||rE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?rE:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(An(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,R.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?rE:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Wt(t);if(null===i)return r;{(0,R.hu)(".priority"!==Wt(t)||1===Uh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(An(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Ln,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+uO(this.getPriority().val())+":"),this.forEachChild(Ln,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":IP(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===iE?-1:0}withIndex(t){if(t===$l||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===$l||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Ln),a=r.getIterator(Ln);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===$l?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const iE=new class zU extends kt{constructor(){super(new so(jx),kt.EMPTY_NODE,sd.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return kt.EMPTY_NODE}isEmpty(){return!1}};function dr(n,e=null){if(null===n)return kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Ty(n,dr(e));if(n instanceof Array){let t=kt.EMPTY_NODE;return mi(n,(r,i)=>{if((0,R.r3)(n,r)&&"."!==r.substring(0,1)){const a=dr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(dr(e))}{const t=[];let r=!1;if(mi(n,(l,h)=>{if("."!==l.substring(0,1)){const _=dr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new Zt(l,_)))}}),0===t.length)return kt.EMPTY_NODE;const a=yD(t,BU,l=>l.name,jx);if(r){const l=yD(t,Ln.getCompare());return new kt(a,dr(e),new sd({".priority":l},{".priority":Ln}))}return new kt(a,dr(e),sd.Default)}}Object.defineProperties(Zt,{MIN:{value:new Zt(id,kt.EMPTY_NODE)},MAX:{value:new Zt(Hl,iE)}}),aO.__EMPTY_NODE=kt.EMPTY_NODE,Ty.__childrenNodeConstructor=kt,function jU(n){Hx=n}(iE),function $U(n){hO=n}(iE),function HU(n){dO=n}(dr);class Gx extends gD{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!qt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?yg(e.name,t.name):a}makePost(e,t){const r=dr(e),i=kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Zt(t,i)}maxPost(){const e=kt.EMPTY_NODE.updateChild(this.indexPath_,iE);return new Zt(Hl,e)}toString(){return tE(this.indexPath_,0).join("/")}}const Wx=new class ZU extends gD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?yg(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Zt.MIN}maxPost(){return Zt.MAX}makePost(e,t){const r=dr(e);return new Zt(t,r)}toString(){return".value"}},Ay="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",YU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=Ay.charAt(t%64),t=Math.floor(t/64);(0,R.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=Ay.charAt(e[i]);return(0,R.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),gO=function(n){if(n===""+Rx)return"-";const e=dD(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Hl;const a=Ay.charAt(Ay.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},mO=function(n){if(n===""+AP)return id;const e=dD(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+Rx:(delete t[t.length-1],t.join("")):(t[t.length-1]=Ay.charAt(Ay.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function _O(n){return{type:"value",snapshotNode:n}}function xy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function sE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function oE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class zx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(sE(t,h)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(xy(t,r)):l.trackChildChange(oE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Ln,(i,a)=>{t.hasChild(i)||r.trackChildChange(sE(i,a))}),t.isLeafNode()||t.forEachChild(Ln,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(oE(i,a,l))}else r.trackChildChange(xy(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class aE{constructor(e){this.indexedFilter_=new zx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=aE.getStartPost_(e),this.endPost_=aE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Zt(t,r))||(r=kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(kt.EMPTY_NODE);const a=this;return t.forEachChild(Ln,(l,h)=>{a.matches(new Zt(l,h))||(i=i.updateImmediateChild(l,kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class JU{constructor(e){this.rangedFilter_=new aE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Zt(t,r))||(r=kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=kt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(kt.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(P,F)=>S(F,P)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,F)=>S(F,P)}else l=this.index_.getCompare();const h=e;(0,R.hu)(h.numChildren()===this.limit_,"");const _=new Zt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const F=null==P?1:l(P,_);if(D&&!r.isEmpty()&&F>=0)return null!=a&&a.trackChildChange(oE(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(sE(t,S));const ae=h.updateImmediateChild(t,kt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(xy(P.name,P.node)),ae.updateImmediateChild(P.name,P.node)):ae}}return r.isEmpty()?e:D&&l(w,_)>=0?(null!=a&&(a.trackChildChange(sE(w.name,w.node)),a.trackChildChange(xy(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,kt.EMPTY_NODE)):e}}class vD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ln}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:id}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Hl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ln}copy(){const e=new vD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Kx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Zx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function wD(n,e){const t=n.copy();return t.index_=e,t}function yO(n){const e={};if(n.isDefault())return e;let t;return n.index_===Ln?t="$priority":n.index_===Wx?t="$value":n.index_===$l?t="$key":((0,R.hu)(n.index_ instanceof Gx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,R.Pz)(t),n.startSet_&&(e.startAt=(0,R.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,R.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,R.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,R.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function vO(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Ln&&(e.i=n.index_.toString()),e}class ED extends XP{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Q0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=ED.getListenId_(e,r),h={};this.listens_[l]=h;const _=yO(e._queryParams);this.restRequest_(a+".json",_,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,R.DV)(this.listens_,l)===h){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=ED.getListenId_(e,t);delete this.listens_[r]}get(e){const t=yO(e._queryParams),r=e._path.toString(),i=new R.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,R.cI)(h.responseText)}catch(w){ds("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&ds("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class iB{constructor(){this.rootNode_=kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function CD(){return{value:null,children:new Map}}function Ry(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,CD()),Ry(n.children.get(r),e=An(e),t)}}function Yx(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Ln,(r,i)=>{Ry(n,new mn(r),i)}),Yx(n,e)}}if(n.children.size>0){const t=Wt(e);return e=An(e),n.children.has(t)&&Yx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Qx(n,e,t){null!==n.value?t(e,n.value):function sB(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Qx(i,new mn(e.toString()+"/"+r),t)})}class oB{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&mi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class lB{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new oB(e);const r=1e4+2e4*Math.random();X0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;mi(e,(i,a)=>{a>0&&(0,R.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),X0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ma=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ma||(Ma={})),Ma))();function eR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class ID{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Ma.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new mn(e));return new ID(hn(),t,this.revert)}}return(0,R.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new ID(An(this.path),this.affectedTree,this.revert)}}class uE{constructor(e,t){this.source=e,this.path=t,this.type=Ma.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new uE(this.source,hn()):new uE(this.source,An(this.path))}}class Eg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Ma.OVERWRITE}operationForChild(e){return qt(this.path)?new Eg(this.source,hn(),this.snap.getImmediateChild(e)):new Eg(this.source,An(this.path),this.snap)}}class My{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Ma.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new mn(e));return t.isEmpty()?null:t.value?new Eg(this.source,hn(),t.value):new My(this.source,hn(),t)}return(0,R.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new My(this.source,An(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Bh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class cB{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function lE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function fB(n,e,t){if(null==e.childName||null==t.childName)throw(0,R.g5)("Should only compare child_ events.");const r=new Zt(e.childName,e.snapshotNode),i=new Zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function hB(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(_,n.query_))})})}function bD(n,e){return{eventCache:n,serverCache:e}}function cE(n,e,t,r){return bD(new Bh(e,t,r),n.serverCache)}function EO(n,e,t,r){return bD(n.eventCache,new Bh(e,t,r))}function DD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Cg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let tR;class Vn{constructor(e,t=(()=>(tR||(tR=new so(JV)),tR))()){this.value=e,this.children=t}static fromObject(e){let t=new Vn(null);return mi(e,(r,i)=>{t=t.set(new mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(qt(e))return null;{const r=Wt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(An(e),t);return null!=a?{path:ir(new mn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(An(e)):new Vn(null)}}set(e,t){if(qt(e))return new Vn(t,this.children);{const r=Wt(e),a=(this.children.get(r)||new Vn(null)).set(An(e),t),l=this.children.insert(r,a);return new Vn(this.value,l)}}remove(e){if(qt(e))return this.children.isEmpty()?new Vn(null):new Vn(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const i=r.remove(An(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Vn(null):new Vn(this.value,a)}return this}}get(e){if(qt(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(An(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Wt(e),a=(this.children.get(r)||new Vn(null)).setTree(An(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Vn(this.value,l)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(ir(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const a=Wt(e),l=this.children.get(a);return l?l.findOnPath_(An(e),ir(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Wt(e),a=this.children.get(i);return a?a.foreachOnPath_(An(e),ir(t,i),r):new Vn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ir(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Ru{constructor(e){this.writeTree_=e}static empty(){return new Ru(new Vn(null))}}function dE(n,e,t){if(qt(e))return new Ru(new Vn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Ps(i,e);return a=a.updateChild(l,t),new Ru(n.writeTree_.set(i,a))}{const i=new Vn(t),a=n.writeTree_.setTree(e,i);return new Ru(a)}}}function nR(n,e,t){let r=n;return mi(t,(i,a)=>{r=dE(r,ir(e,i),a)}),r}function CO(n,e){if(qt(e))return Ru.empty();{const t=n.writeTree_.setTree(e,new Vn(null));return new Ru(t)}}function rR(n,e){return null!=Ig(n,e)}function Ig(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Ps(t.path,e)):null}function IO(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ln,(r,i)=>{e.push(new Zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Zt(r,i.value))}),e}function jh(n,e){if(qt(e))return n;{const t=Ig(n,e);return new Ru(null!=t?new Vn(t):n.writeTree_.subtree(e))}}function iR(n){return n.writeTree_.isEmpty()}function Ny(n,e){return bO(hn(),n.writeTree_,e)}function bO(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,R.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=bO(ir(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ir(n,".priority"),r)),t}}function TD(n,e){return xO(e,n)}function vB(n,e){if(n.snap)return Ra(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ra(ir(n.path,t),e))return!0;return!1}function EB(n){return n.visible}function DO(n,e,t){let r=Ru.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ra(t,l)?(h=Ps(t,l),r=dE(r,h,a.snap)):Ra(l,t)&&(h=Ps(l,t),r=dE(r,hn(),a.snap.getChild(h)));else{if(!a.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Ra(t,l))h=Ps(t,l),r=nR(r,h,a.children);else if(Ra(l,t))if(h=Ps(l,t),qt(h))r=nR(r,hn(),a.children);else{const _=(0,R.DV)(a.children,Wt(h));if(_){const w=_.getChild(An(h));r=dE(r,hn(),w)}}}}}return r}function TO(n,e,t,r,i){if(r||i){const a=jh(n.visibleWrites,e);return!i&&iR(a)?t:i||null!=t||rR(a,hn())?Ny(DO(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ra(w.path,e)||Ra(e,w.path))},e),t||kt.EMPTY_NODE):null}{const a=Ig(n.visibleWrites,e);if(null!=a)return a;{const l=jh(n.visibleWrites,e);return iR(l)?t:null!=t||rR(l,hn())?Ny(l,t||kt.EMPTY_NODE):null}}}function SD(n,e,t,r){return TO(n.writeTree,n.treePath,e,t,r)}function sR(n,e){return function CB(n,e,t){let r=kt.EMPTY_NODE;const i=Ig(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Ln,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=jh(n.visibleWrites,e);return t.forEachChild(Ln,(l,h)=>{const _=Ny(jh(a,new mn(l)),h);r=r.updateImmediateChild(l,_)}),IO(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return IO(jh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function SO(n,e,t,r){return function IB(n,e,t,r,i){(0,R.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=ir(e,t);if(rR(n.visibleWrites,a))return null;{const l=jh(n.visibleWrites,a);return iR(l)?i.getChild(t):Ny(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function AD(n,e){return function DB(n,e){return Ig(n.visibleWrites,e)}(n.writeTree,ir(n.treePath,e))}function oR(n,e,t){return function bB(n,e,t,r){const i=ir(e,t),a=Ig(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Ny(jh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function AO(n,e){return xO(ir(n.treePath,e),n.writeTree)}function xO(n,e){return{treePath:n,writeTree:e}}class xB{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,R.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,oE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,sE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,xy(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,oE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const RO=new class RB{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class aR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Bh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Cg(this.viewCache_),a=function AB(n,e,t,r,i,a){return function TB(n,e,t,r,i,a,l){let h;const _=jh(n.visibleWrites,e),w=Ig(_,hn());if(null!=w)h=w;else{if(null==t)return[];h=Ny(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let F=P.getNext();for(;F&&D.length<i;)0!==S(F,r)&&D.push(F),F=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function MO(n,e,t,r,i,a){const l=e.eventCache;if(null!=AD(r,t))return e;{let h,_;if(qt(t))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Cg(e),S=sR(r,w instanceof kt?w:kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=SD(r,Cg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Wt(t);if(".priority"===w){(0,R.hu)(1===Uh(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=SO(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=An(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=SO(r,t,l.getNode(),_);S=null!=P?l.getNode().getImmediateChild(w).updateChild(D,P):l.getNode().getImmediateChild(w)}else S=oR(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return cE(e,h,l.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function xD(n,e,t,r,i,a,l,h){const _=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(qt(t))w=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const F=_.getNode().updateChild(t,r);w=D.updateFullNode(_.getNode(),F,null)}else{const F=Wt(t);if(!_.isCompleteForPath(t)&&Uh(t)>1)return e;const j=An(t),Ce=_.getNode().getImmediateChild(F).updateChild(j,r);w=".priority"===F?D.updatePriority(_.getNode(),Ce):D.updateChild(_.getNode(),F,Ce,j,RO,null)}const S=EO(e,w,_.isFullyInitialized()||qt(t),D.filtersNodes());return MO(n,S,t,i,new aR(i,S,a),h)}function uR(n,e,t,r,i,a,l){const h=e.eventCache;let _,w;const D=new aR(i,e,a);if(qt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=cE(e,w,!0,n.filter.filtersNodes());else{const S=Wt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=cE(e,w,h.isFullyInitialized(),h.isFiltered());else{const P=An(t),F=h.getNode().getImmediateChild(S);let j;if(qt(P))j=r;else{const ae=D.getCompleteChild(S);j=null!=ae?".priority"===Vx(P)&&ae.getChild(rO(P)).isEmpty()?ae:ae.updateChild(P,r):kt.EMPTY_NODE}_=F.equals(j)?e:cE(e,n.filter.updateChild(h.getNode(),S,j,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function NO(n,e){return n.eventCache.isCompleteForChild(e)}function PO(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function lR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=qt(t)?r:new Vn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const j=PO(0,e.serverCache.getNode().getImmediateChild(S),P);_=xD(n,_,new mn(S),j,i,a,l,h)}}),w.children.inorderTraversal((S,P)=>{const F=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!D.hasChild(S)&&!F){const ae=PO(0,e.serverCache.getNode().getImmediateChild(S),P);_=xD(n,_,new mn(S),ae,i,a,l,h)}}),_}class UB{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new zx(r.getIndex()),a=function XU(n){return n.loadsAllData()?new zx(n.getIndex()):n.hasLimit()?new JU(n):new aE(n)}(r);this.processor_=function MB(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(kt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(kt.EMPTY_NODE,h.getNode(),null),D=new Bh(_,l.isFullyInitialized(),i.filtersNodes()),S=new Bh(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=bD(S,D),this.eventGenerator_=new cB(this.query_)}get query(){return this.query_}}function HB(n,e){const t=Cg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function OO(n){return 0===n.eventRegistrations_.length}function kO(n,e,t){const r=[];if(t){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function FO(n,e,t,r){e.type===Ma.MERGE&&null!==e.source.queryId&&((0,R.hu)(Cg(n.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(DD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function PB(n,e,t,r,i){const a=new xB;let l,h;if(t.type===Ma.OVERWRITE){const w=t;w.source.fromUser?l=uR(n,e,w.path,w.snap,r,i,a):((0,R.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!qt(w.path),l=xD(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===Ma.MERGE){const w=t;w.source.fromUser?l=function kB(n,e,t,r,i,a,l){let h=e;return r.foreach((_,w)=>{const D=ir(t,_);NO(e,Wt(D))&&(h=uR(n,h,D,w,i,a,l))}),r.foreach((_,w)=>{const D=ir(t,_);NO(e,Wt(D))||(h=uR(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,R.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=lR(n,e,w.path,w.children,r,i,h,a))}else if(t.type===Ma.ACK_USER_WRITE){const w=t;l=w.revert?function VB(n,e,t,r,i,a){let l;if(null!=AD(r,t))return e;{const h=new aR(r,e,i),_=e.eventCache.getNode();let w;if(qt(t)||".priority"===Wt(t)){let D;if(e.serverCache.isFullyInitialized())D=SD(r,Cg(e));else{const S=e.serverCache.getNode();(0,R.hu)(S instanceof kt,"serverChildren would be complete if leaf node"),D=sR(r,S)}D=D,w=n.filter.updateFullNode(_,D,a)}else{const D=Wt(t);let S=oR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),w=null!=S?n.filter.updateChild(_,D,S,An(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,kt.EMPTY_NODE,An(t),h,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=SD(r,Cg(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=AD(r,hn()),cE(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function FB(n,e,t,r,i,a,l){if(null!=AD(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(qt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return xD(n,e,t,_.getNode().getChild(t),i,a,h,l);if(qt(t)){let w=new Vn(null);return _.getNode().forEachChild($l,(D,S)=>{w=w.set(new mn(D),S)}),lR(n,e,t,w,i,a,h,l)}return e}{let w=new Vn(null);return r.foreach((D,S)=>{const P=ir(t,D);_.isCompleteForPath(P)&&(w=w.set(D,_.getNode().getChild(P)))}),lR(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==Ma.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+t.type);l=function LB(n,e,t,r,i){const a=e.serverCache;return MO(n,EO(e,a.getNode(),a.isFullyInitialized()||qt(t),a.isFiltered()),t,r,RO,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function OB(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=DD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(_O(DD(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function NB(n,e){(0,R.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,R.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,LO(n,a.changes,a.viewCache.eventCache.getNode(),null)}function LO(n,e,t,r){return function dB(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function QU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),lE(n,i,"child_removed",e,r,t),lE(n,i,"child_added",e,r,t),lE(n,i,"child_moved",a,r,t),lE(n,i,"child_changed",e,r,t),lE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let RD,ND;class VO{constructor(){this.views=new Map}}function cR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,R.hu)(null!=a,"SyncTree gave us an op for an invalid query."),FO(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(FO(l,e,t,r));return a}}function UO(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=SD(t,i?r:null),_=!1;h?_=!0:r instanceof kt?(h=sR(t,r),_=!1):(h=kt.EMPTY_NODE,_=!1);const w=bD(new Bh(h,_,!1),new Bh(r,i,!1));return new UB(e,w)}return l}function BO(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Hh(n,e){let t=null;for(const r of n.views.values())t=t||HB(r,e);return t}function jO(n,e){return e._queryParams.loadsAllData()?MD(n):n.views.get(e._queryIdentifier)}function HO(n,e){return null!=jO(n,e)}function $h(n){return null!=MD(n)}function MD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let JB=1;class $O{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Vn(null),this.pendingWriteTree_=function SB(){return{visibleWrites:Ru.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function dR(n,e,t,r,i){return function gB(n,e,t,r,i){(0,R.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=dE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Py(n,new Eg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Gh(n,e,t=!1){const r=function _B(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function yB(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,R.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&vB(h,r.path)?i=!1:Ra(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function wB(n){n.visibleWrites=DO(n.allWrites,EB,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=CO(n.visibleWrites,r.path):mi(r.children,_=>{n.visibleWrites=CO(n.visibleWrites,ir(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Vn(null);return null!=r.snap?a=a.set(hn(),!0):mi(r.children,l=>{a=a.set(new mn(l),!0)}),Py(n,new ID(r.path,a,t))}return[]}function hE(n,e,t){return Py(n,new Eg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function PD(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let h=[];if(l&&("default"===e._queryIdentifier||HO(l,e))){const _=function ZB(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=$h(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(kO(w,t,r)),OO(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(kO(_,t,r)),OO(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!$h(n)&&a.push(new(function qB(){return(0,R.hu)(RD,"Reference.ts has not been loaded"),RD}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function zB(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(h=_.events,!i){const D=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,F)=>$h(F));if(D&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const F=function s2(n){return n.fold((e,t,r)=>{if(t&&$h(t))return[MD(t)];{let i=[];return t&&(i=BO(t)),mi(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let j=0;j<F.length;++j){const ae=F[j],Ce=ae.query,je=zO(n,ae);n.listenProvider_.startListening(pE(Ce),fE(n,Ce),je.hashFn,je.onComplete)}}}!S&&w.length>0&&!r&&(D?n.listenProvider_.stopListening(pE(e),null):w.forEach(P=>{const F=n.queryToTagMap.get(kD(P));n.listenProvider_.stopListening(pE(P),F)}))}!function o2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=kD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return h}function GO(n,e,t,r){const i=fR(n,r);if(null!=i){const a=pR(i),l=a.path,h=a.queryId,_=Ps(l,e);return gR(n,l,new Eg(eR(h),_,t))}return[]}function hR(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,F)=>{const j=Ps(P,i);a=a||Hh(F,j),l=l||$h(F)});let _,h=n.syncPointTree_.get(i);h?(l=l||$h(h),a=a||Hh(h,hn())):(h=new VO,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=a?_=!0:(_=!1,a=kt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((F,j)=>{const ae=Hh(j,hn());ae&&(a=a.updateImmediateChild(F,ae))}));const w=HO(h,e);if(!w&&!e._queryParams.loadsAllData()){const P=kD(e);(0,R.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const F=function a2(){return JB++}();n.queryToTagMap.set(P,F),n.tagToQueryMap.set(F,P)}let S=function KB(n,e,t,r,i,a){const l=UO(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function $B(n,e){n.eventRegistrations_.push(e)}(l,t),function GB(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ln,(a,l)=>{r.push(xy(a,l))}),t.isFullyInitialized()&&r.push(_O(t.getNode())),LO(n,r,t.getNode(),e)}(l,t)}(h,e,t,TD(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const P=jO(h,e);S=S.concat(function u2(n,e,t){const r=e._path,i=fE(n,e),a=zO(n,t),l=n.listenProvider_.startListening(pE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,R.hu)(!$h(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((w,D,S)=>{if(!qt(w)&&D&&$h(D))return[MD(D).query];{let P=[];return D&&(P=P.concat(BO(D).map(F=>F.query))),mi(S,(F,j)=>{P=P.concat(j)}),P}});for(let w=0;w<_.length;++w){const D=_[w];n.listenProvider_.stopListening(pE(D),fE(n,D))}}return l}(n,e,P))}return S}function OD(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=Hh(h,Ps(l,e));if(w)return w});return TO(i,e,a,t,!0)}function Py(n,e){return WO(e,n.syncPointTree_,null,TD(n.pendingWriteTree_,hn()))}function WO(n,e,t,r){if(qt(n.path))return qO(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=Hh(i,hn()));let a=[];const l=Wt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const w=t?t.getImmediateChild(l):null,D=AO(r,l);a=a.concat(WO(h,_,w,D))}return i&&(a=a.concat(cR(i,n,r,t))),a}}function qO(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=Hh(i,hn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,w=AO(r,l),D=n.operationForChild(l);D&&(a=a.concat(qO(D,h,_,w)))}),i&&(a=a.concat(cR(i,n,r,t))),a}function zO(n,e){const t=e.query,r=fE(n,t);return{hashFn:()=>(function BB(n){return n.viewCache_.serverCache.getNode()}(e)||kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function n2(n,e,t){const r=fR(n,t);if(r){const i=pR(r),a=i.path,l=i.queryId,h=Ps(a,e);return gR(n,a,new uE(eR(l),h))}return[]}(n,t._path,r):function t2(n,e){return Py(n,new uE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function tU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return PD(n,t,null,a)}}}}function fE(n,e){const t=kD(e);return n.queryToTagMap.get(t)}function kD(n){return n._path.toString()+"$"+n._queryIdentifier}function fR(n,e){return n.tagToQueryMap.get(e)}function pR(n){const e=n.indexOf("$");return(0,R.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new mn(n.substr(0,e))}}function gR(n,e,t){const r=n.syncPointTree_.get(e);return(0,R.hu)(r,"Missing sync point for query tag that we're tracking"),cR(r,t,TD(n.pendingWriteTree_,e),null)}function pE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function QB(){return(0,R.hu)(ND,"Reference.ts has not been loaded"),ND}())(n._repo,n._path):n}class mR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new mR(t)}node(){return this.node_}}class _R{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ir(this.path_,e);return new _R(this.syncTree_,t)}node(){return OD(this.syncTree_,this.path_)}}const KO=function(n,e,t){return n&&"object"==typeof n?((0,R.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?c2(n[".sv"],e,t):"object"==typeof n[".sv"]?d2(n[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},c2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,R.hu)(!1,"Unexpected server value: "+n)},d2=function(n,e,t){n.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,R.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,R.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},ZO=function(n,e,t,r){return vR(e,new _R(t,n),r)},yR=function(n,e,t){return vR(n,new mR(e),t)};function vR(n,e,t){const r=n.getPriority().val(),i=KO(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=KO(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new Ty(h,dr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Ty(i))),l.forEachChild(Ln,(h,_)=>{const w=vR(_,e.getImmediateChild(h),t);w!==_&&(a=a.updateImmediateChild(h,w))}),a}}class wR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function FD(n,e){let t=e instanceof mn?e:new mn(e),r=n,i=Wt(t);for(;null!==i;){const a=(0,R.DV)(r.node.children,i)||{children:{},childCount:0};r=new wR(i,r,a),t=An(t),i=Wt(t)}return r}function bg(n){return n.node.value}function ER(n,e){n.node.value=e,CR(n)}function YO(n){return n.node.childCount>0}function LD(n,e){mi(n.node.children,(t,r)=>{e(new wR(t,n,r))})}function QO(n,e,t,r){t&&!r&&e(n),LD(n,i=>{QO(i,e,!0,r)}),t&&r&&e(n)}function gE(n){return new mn(null===n.parent?n.name:gE(n.parent)+"/"+n.name)}function CR(n){null!==n.parent&&function p2(n,e,t){const r=function h2(n){return void 0===bg(n)&&!YO(n)}(t),i=(0,R.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,CR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,CR(n))}(n.parent,n.name,n)}const g2=/[\[\].#$\/\u0000-\u001F\u007F]/,m2=/[\[\].#$\u0000-\u001F\u007F]/,IR=10485760,VD=function(n){return"string"==typeof n&&0!==n.length&&!g2.test(n)},JO=function(n){return"string"==typeof n&&0!==n.length&&!m2.test(n)},mE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!cD(n)||n&&"object"==typeof n&&(0,R.r3)(n,".sv")},Gl=function(n,e,t,r){r&&void 0===e||_E((0,R.gK)(n,"value"),e,t)},_E=function(n,e,t){const r=t instanceof mn?new NU(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+vg(r));if("function"==typeof e)throw new Error(n+"contains a function "+vg(r)+" with contents = "+e.toString());if(cD(e))throw new Error(n+"contains "+e.toString()+" "+vg(r));if("string"==typeof e&&e.length>IR/3&&(0,R.ug)(e)>IR)throw new Error(n+"contains a string greater than "+IR+" utf8 bytes "+vg(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(mi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!VD(l)))throw new Error(n+" contains an invalid key ("+l+") "+vg(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function PU(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,R.ug)(e),iO(n)})(r,l),_E(n,h,r),function OU(n){const e=n.parts_.pop();n.byteLength_-=(0,R.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+vg(r)+" in addition to actual children.")}},XO=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,R.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];mi(e,(l,h)=>{const _=new mn(l);if(_E(i,h,ir(t,_)),".priority"===Vx(_)&&!mE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=tE(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!VD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(MU);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ra(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},bR=function(n,e,t){if(!t||void 0!==e){if(cD(e))throw new Error((0,R.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mE(e))throw new Error((0,R.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},yE=function(n,e,t,r){if(!(r&&void 0===t||VD(t)))throw new Error((0,R.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},vE=function(n,e,t,r){if(!(r&&void 0===t||JO(t)))throw new Error((0,R.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Na=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},ek=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!VD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),JO(n)}(t))throw new Error((0,R.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class w2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function UD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Ux(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function tk(n,e,t){UD(n,t),nk(n,r=>Ux(r,e))}function Vo(n,e,t){UD(n,t),nk(n,r=>Ra(r,e)||Ra(e,r))}function nk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(E2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function E2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();_g&&gi("event: "+t.toString()),by(r)}}}const rk="repo_interrupt";class I2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new w2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=CD(),this.transactionQueueTree_=new wR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ik(n){const t=n.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function wE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:ik(n)})}function sk(n,e,t,r,i){n.dataUpdateCount++;const a=new mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,R.UI)(t,w=>dr(w));l=function r2(n,e,t,r){const i=fR(n,r);if(i){const a=pR(i),l=a.path,h=a.queryId,_=Ps(l,e),w=Vn.fromObject(t);return gR(n,l,new My(eR(h),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=dr(t);l=GO(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,R.UI)(t,w=>dr(w));l=function e2(n,e,t){const r=Vn.fromObject(t);return Py(n,new My({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=dr(t);l=hE(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=ky(n,a)),Vo(n.eventQueue_,h,l)}function ok(n,e){DR(n,"connected",e),!1===e&&function A2(n){Oy(n,"onDisconnectEvents");const e=wE(n),t=CD();Qx(n.onDisconnect_,hn(),(i,a)=>{const l=ZO(i,a,n.serverSyncTree_,e);Ry(t,i,l)});let r=[];Qx(t,hn(),(i,a)=>{r=r.concat(hE(n.serverSyncTree_,i,a));const l=xR(n,i);ky(n,l)}),n.onDisconnect_=CD(),Vo(n.eventQueue_,hn(),r)}(n)}function DR(n,e,t){const r=new mn("/.info/"+e),i=dr(t);n.infoData_.updateSnapshot(r,i);const a=hE(n.infoSyncTree_,r,i);Vo(n.eventQueue_,r,a)}function BD(n){return n.nextWriteId_++}function TR(n,e,t,r,i){Oy(n,"set",{path:e.toString(),value:t,priority:r});const a=wE(n),l=dr(t,r),h=OD(n.serverSyncTree_,e),_=yR(l,h,a),w=BD(n),D=dR(n.serverSyncTree_,e,_,w,!0);UD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,F)=>{const j="ok"===P;j||ds("set at "+e+" failed: "+P);const ae=Gh(n.serverSyncTree_,w,!j);Vo(n.eventQueue_,e,ae),Wh(0,i,P,F)});const S=xR(n,e);ky(n,S),Vo(n.eventQueue_,S,[])}function x2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Yx(n.onDisconnect_,e),Wh(0,t,r,i)})}function ak(n,e,t,r){const i=dr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Ry(n.onDisconnect_,e,i),Wh(0,r,a,l)})}function SR(n,e,t){let r;r=".info"===Wt(e._path)?PD(n.infoSyncTree_,e,t):PD(n.serverSyncTree_,e,t),tk(n.eventQueue_,e._path,r)}function uk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(rk)}function Oy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),gi(t,...e)}function Wh(n,e,t,r){e&&by(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function AR(n,e,t){return OD(n.serverSyncTree_,e,t)||kt.EMPTY_NODE}function jD(n,e=n.transactionQueueTree_){if(e||HD(n,e),bg(e)){const t=ck(n,e);(0,R.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function k2(n,e,t){const r=t.map(w=>w.currentWriteId),i=AR(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,R.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Ps(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,w=>{Oy(n,"transaction put response",{path:_.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Gh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();HD(n,FD(n.transactionQueueTree_,e)),jD(n,n.transactionQueueTree_),Vo(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)by(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ds("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}ky(n,e)}},l)}(n,gE(e),t)}else YO(e)&&LD(e,t=>{jD(n,t)})}function ky(n,e){const t=lk(n,e),r=gE(t);return function F2(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],w=Ps(t,_.path);let S,D=!1;if((0,R.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(Gh(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(Gh(n.serverSyncTree_,_.currentWriteId,!0));else{const P=AR(n,_.path,l);_.currentInputSnapshot=P;const F=e[h].update(P.val());if(void 0!==F){_E("transaction failed: Data returned ",F,_.path);let j=dr(F);"object"==typeof F&&null!=F&&(0,R.r3)(F,".priority")||(j=j.updatePriority(P.getPriority()));const Ce=_.currentWriteId,je=wE(n),et=yR(j,P,je);_.currentOutputSnapshotRaw=j,_.currentOutputSnapshotResolved=et,_.currentWriteId=BD(n),l.splice(l.indexOf(Ce),1),i=i.concat(dR(n.serverSyncTree_,_.path,et,_.currentWriteId,_.applyLocally)),i=i.concat(Gh(n.serverSyncTree_,Ce,!0))}else D=!0,S="nodata",i=i.concat(Gh(n.serverSyncTree_,_.currentWriteId,!0))}Vo(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}HD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)by(r[h]);jD(n,n.transactionQueueTree_)}(n,ck(n,t),r),r}function lk(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===bg(r);)r=FD(r,t),t=Wt(e=An(e));return r}function ck(n,e){const t=[];return dk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function dk(n,e,t){const r=bg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);LD(e,i=>{dk(n,i,t)})}function HD(n,e){const t=bg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,ER(e,t.length>0?t:void 0)}LD(e,r=>{HD(n,r)})}function xR(n,e){const t=gE(lk(n,e)),r=FD(n.transactionQueueTree_,e);return function f2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{RR(n,i)}),RR(n,r),QO(r,i=>{RR(n,i)}),t}function RR(n,e){const t=bg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,R.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,R.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Gh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?ER(e,void 0):t.length=a+1,Vo(n.eventQueue_,gE(e),i);for(let l=0;l<r.length;l++)by(r[l])}}const MR=function(n,e){const t=U2(n),r=t.namespace;return"firebase.com"===t.domain&&jl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&jl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ds("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Nx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new mn(t.pathString)}},U2=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function L2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function V2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ds(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(w+1),10)):w=e.length;const F=e.slice(0,w);if("localhost"===F.toLowerCase())t="localhost";else if(F.split(".").length<=2)t=F;else{const j=e.indexOf(".");r=e.substring(0,j).toLowerCase(),t=e.substring(j+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class hk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Pz)(this.snapshot.exportVal())}}class fk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class NR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class pk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new R.BH;return x2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Na("OnDisconnect.remove",this._path);const e=new R.BH;return ak(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Na("OnDisconnect.set",this._path),Gl("OnDisconnect.set",e,this._path,!1);const t=new R.BH;return ak(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Na("OnDisconnect.setWithPriority",this._path),Gl("OnDisconnect.setWithPriority",e,this._path,!1),bR("OnDisconnect.setWithPriority",t,!1);const r=new R.BH;return function R2(n,e,t,r,i){const a=dr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&Ry(n.onDisconnect_,e,a),Wh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Na("OnDisconnect.update",this._path),XO("OnDisconnect.update",e,this._path,!1);const t=new R.BH;return function M2(n,e,t,r){if((0,R.xb)(t))return gi("onDisconnect().update() called with empty data.  Don't do anything."),void Wh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&mi(t,(l,h)=>{const _=dr(h);Ry(n.onDisconnect_,ir(e,l),_)}),Wh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class oo{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:Vx(this._path)}get ref(){return new Pa(this._repo,this._path)}get _queryIdentifier(){const e=vO(this._queryParams),t=xx(e);return"{}"===t?"default":t}get _queryObject(){return vO(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof oo))return!1;const t=this._repo===e._repo,r=Ux(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function RU(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function $D(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function qh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===$l){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==id)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Hl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Ln){if(null!=e&&!mE(e)||null!=t&&!mE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(n.getIndex()instanceof Gx||n.getIndex()===Wx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function GD(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Pa extends oo{constructor(e,t){super(e,t,new vD,!1)}get parent(){const e=rO(this._path);return null===e?null:new Pa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Dg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new mn(e),r=Tg(this.ref,e);return new Dg(this._node.getChild(t),r,Ln)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Dg(i,Tg(this.ref,r),Ln)))}hasChild(e){const t=new mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function gk(n,e){return(n=(0,R.m9)(n))._checkNotDeleted("ref"),void 0!==e?Tg(n._root,e):n._root}function mk(n,e){(n=(0,R.m9)(n))._checkNotDeleted("refFromURL");const t=MR(e,n._repo.repoInfo_.nodeAdmin);ek("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&jl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),gk(n,t.path.toString())}function Tg(n,e){return null===Wt((n=(0,R.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),vE("child","path",t,!1)):vE("child","path",e,!1),new Pa(n._repo,ir(n._path,e));var t}function PR(n,e){n=(0,R.m9)(n),Na("set",n._path),Gl("set",e,n._path,!1);const t=new R.BH;return TR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function G2(n,e){XO("update",e,n._path,!1);const t=new R.BH;return function S2(n,e,t,r){Oy(n,"update",{path:e.toString(),value:t});let i=!0;const a=wE(n),l={};if(mi(t,(h,_)=>{i=!1,l[h]=ZO(ir(e,h),dr(_),n.serverSyncTree_,a)}),i)gi("update() called with empty data.  Don't do anything."),Wh(0,r,"ok",void 0);else{const h=BD(n),_=function XB(n,e,t,r){!function mB(n,e,t,r){(0,R.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=nR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Vn.fromObject(t);return Py(n,new My({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);UD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||ds("update at "+e+" failed: "+w);const P=Gh(n.serverSyncTree_,h,!S),F=P.length>0?ky(n,e):e;Vo(n.eventQueue_,F,P),Wh(0,r,w,D)}),mi(t,w=>{const D=xR(n,ir(e,w));ky(n,D)}),Vo(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function W2(n){n=(0,R.m9)(n);const e=new NR(()=>{}),t=new EE(e);return function T2(n,e,t){const r=function i2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Ps(w,t);r=r||Hh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Hh(i,hn()):(i=new VO,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Bh(r,!0,!1):null;return function jB(n){return DD(n.viewCache_)}(UO(i,e,TD(n.pendingWriteTree_,e._path),a?l.getNode():kt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=dr(i).withIndex(e._queryParams.getIndex());let l;if(hR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=hE(n.serverSyncTree_,e._path,a);else{const h=fE(n.serverSyncTree_,e);l=GO(n.serverSyncTree_,e._path,a,h)}return Vo(n.eventQueue_,e._path,l),PD(n.serverSyncTree_,e,t,null,!0),a},i=>(Oy(n,"get for query "+(0,R.Pz)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Dg(r,new Pa(n._repo,n._path),n._queryParams.getIndex()))}class EE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new hk("value",this,new Dg(e.snapshotNode,new Pa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fk(this,e,t):null}matches(e){return e instanceof EE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class WD{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new fk(this,e,t):null}createEvent(e,t){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const r=Tg(new Pa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new hk(e.type,this,new Dg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof WD&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function CE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(D,S)=>{SR(n._repo,n,h),_(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new NR(t,a||void 0),h="value"===e?new EE(l):new WD(e,l);return function N2(n,e,t){let r;r=".info"===Wt(e._path)?hR(n.infoSyncTree_,e,t):hR(n.serverSyncTree_,e,t),tk(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>SR(n._repo,n,h)}function OR(n,e,t,r){return CE(n,"value",e,t,r)}function _k(n,e,t,r){return CE(n,"child_added",e,t,r)}function yk(n,e,t,r){return CE(n,"child_changed",e,t,r)}function vk(n,e,t,r){return CE(n,"child_moved",e,t,r)}function wk(n,e,t,r){return CE(n,"child_removed",e,t,r)}function Ek(n,e,t){let r=null;const i=t?new NR(t):null;"value"===e?r=new EE(i):e&&(r=new WD(e,i)),SR(n._repo,n,r)}class Mu{}class Ck extends Mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("endAt",this._value,e._path,!0);const t=Zx(e._queryParams,this._value,this._key);if(GD(t),qh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class z2 extends Mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("endBefore",this._value,e._path,!1);const t=function rB(n,e,t){let r,i;return n.index_===$l?("string"==typeof e&&(e=mO(e)),i=Zx(n,e,t)):(r=null==t?id:mO(t),i=Zx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(GD(t),qh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class Ik extends Mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("startAt",this._value,e._path,!0);const t=Kx(e._queryParams,this._value,this._key);if(GD(t),qh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class Y2 extends Mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Gl("startAfter",this._value,e._path,!1);const t=function nB(n,e,t){let r;if(n.index_===$l)"string"==typeof e&&(e=gO(e)),r=Kx(n,e,t);else{let i;i=null==t?Hl:gO(t),r=Kx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(GD(t),qh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new oo(e._repo,e._path,t,e._orderByCalled)}}class J2 extends Mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function eB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class ej extends Mu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new oo(e._repo,e._path,function tB(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class nj extends Mu{constructor(e){super(),this._path=e}_apply(e){$D(e,"orderByChild");const t=new mn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Gx(t),i=wD(e._queryParams,r);return qh(i),new oo(e._repo,e._path,i,!0)}}class ij extends Mu{_apply(e){$D(e,"orderByKey");const t=wD(e._queryParams,$l);return qh(t),new oo(e._repo,e._path,t,!0)}}class oj extends Mu{_apply(e){$D(e,"orderByPriority");const t=wD(e._queryParams,Ln);return qh(t),new oo(e._repo,e._path,t,!0)}}class uj extends Mu{_apply(e){$D(e,"orderByValue");const t=wD(e._queryParams,Wx);return qh(t),new oo(e._repo,e._path,t,!0)}}class cj extends Mu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Gl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ck(this._value,this._key)._apply(new Ik(this._value,this._key)._apply(e))}}function Nu(n,...e){let t=(0,R.m9)(n);for(const r of e)t=r._apply(t);return t}(function WB(n){(0,R.hu)(!RD,"__referenceConstructor has already been defined"),RD=n})(Pa),function YB(n){(0,R.hu)(!ND,"__referenceConstructor has already been defined"),ND=n}(Pa);const kR={};function Dk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||jl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=MR(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${h.namespace}`,l=MR(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new eE(eE.OWNER):new sU(n.name,n.options,e);ek("Invalid Firebase Database URL",l),qt(l.path)||jl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function gj(n,e,t,r){let i=kR[e.name];i||(i={},kR[e.name]=i);let a=i[n.toURLString()];return a&&jl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new I2(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new iU(n.name,t));return new _j(S,n)}class _j{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function b2(n,e,t){if(n.stats_=kx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new ED(n.repoInfo_,(r,i,a,l)=>{sk(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>ok(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new wg(n.repoInfo_,e,(r,i,a,l)=>{sk(n,r,i,a,l)},r=>{ok(n,r)},r=>{!function D2(n,e){mi(e,(t,r)=>{DR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function uU(n,e){const t=n.toString();return Ox[t]||(Ox[t]=e()),Ox[t]}(n.repoInfo_,()=>new lB(n.stats_,n.server_)),n.infoData_=new iB,n.infoSyncTree_=new $O({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=hE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),DR(n,"connected",!1),n.serverSyncTree_=new $O({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const w=l(h,_);Vo(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Pa(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function pj(n,e){const t=kR[e];(!t||t[n.key]!==n)&&jl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),uk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&jl("Cannot call "+e+" on a deleted database.")}}function Tk(){WP.IS_TRANSPORT_INITIALIZED&&ds("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function yj(){Tk(),Vh.forceDisallow()}function vj(){Tk(),Dy.forceDisallow(),Vh.forceAllow()}function Ij(n,e){DP(n,e)}const Dj={".sv":"timestamp"};class Aj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}wg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},wg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function bj(n){wP(ne.SDK_VERSION),(0,ne._registerComponent)(new be.wA("database",(e,{instanceIdentifier:t})=>Dk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(yP,"0.13.6",n),(0,ne.registerVersion)(yP,"0.13.6","esm2017")}();const Nj=new Xe.Yd("@firebase/database-compat"),Sk=function(n){Nj.warn("FIREBASE WARNING: "+n)};class kj{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Sk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Fj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class zh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),vE("DataSnapshot.child","path",e,!1),new zh(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),vE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new zh(this._database,t)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Ti{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",t,!1);const l=Ti.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new zh(this.database,w),D)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return OR(this._delegate,h,_),t;case"child_added":return _k(this._delegate,h,_),t;case"child_removed":return wk(this._delegate,h,_),t;case"child_changed":return yk(this._delegate,h,_),t;case"child_moved":return vk(this._delegate,h,_),t;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,R.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",t,!0),(0,R.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Ek(this._delegate,e,i)}else Ek(this._delegate,e)}get(){return W2(this._delegate).then(e=>new zh(this.database,e))}once(e,t,r,i){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",t,!0);const a=Ti.getCancelAndContextArgs_("Query.once",r,i),l=new R.BH,h=(w,D)=>{const S=new zh(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":OR(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":_k(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":wk(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":yk(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":vk(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new Ti(this.database,Nu(this._delegate,function X2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new J2(n)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new Ti(this.database,Nu(this._delegate,function tj(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ej(n)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new Ti(this.database,Nu(this._delegate,function rj(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return vE("orderByChild","path",n,!1),new nj(n)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new Ti(this.database,Nu(this._delegate,function sj(){return new ij}()))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new Ti(this.database,Nu(this._delegate,function aj(){return new oj}()))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new Ti(this.database,Nu(this._delegate,function lj(){return new uj}()))}startAt(e=null,t){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new Ti(this.database,Nu(this._delegate,function Z2(n=null,e){return yE("startAt","key",e,!0),new Ik(n,e)}(e,t)))}startAfter(e=null,t){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new Ti(this.database,Nu(this._delegate,function Q2(n,e){return yE("startAfter","key",e,!0),new Y2(n,e)}(e,t)))}endAt(e=null,t){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new Ti(this.database,Nu(this._delegate,function q2(n,e){return yE("endAt","key",e,!0),new Ck(n,e)}(e,t)))}endBefore(e=null,t){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new Ti(this.database,Nu(this._delegate,function K2(n,e){return yE("endBefore","key",e,!0),new z2(n,e)}(e,t)))}equalTo(e,t){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new Ti(this.database,Nu(this._delegate,function dj(n,e){return yE("equalTo","key",e,!0),new cj(n,e)}(e,t)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Ti))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,R.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,R.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new Pa(this._delegate._repo,this._delegate._path))}}class Uo extends Ti{constructor(e,t){super(e,new oo(t._repo,t._path,new vD,!1)),this.database=e,this._delegate=t}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,Tg(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",t,!0);const r=PR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,Sk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Na("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",t,!0);const r=G2(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function $2(n,e,t){if(Na("setWithPriority",n._path),Gl("setWithPriority",e,n._path,!1),bR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new R.BH;return TR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const t=function j2(n){return Na("remove",n._path),PR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function xj(n,e,t){var r;if(n=(0,R.m9)(n),Na("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new R.BH,h=OR(n,()=>{});return function O2(n,e,t,r,i,a){Oy(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:CP(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=AR(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{_E("transaction failed: Data returned ",_,l.path),l.status=0;const w=FD(n.transactionQueueTree_,e),D=bg(w)||[];let S;D.push(l),ER(w,D),"object"==typeof _&&null!==_&&(0,R.r3)(_,".priority")?(S=(0,R.DV)(_,".priority"),(0,R.hu)(mE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(OD(n.serverSyncTree_,e)||kt.EMPTY_NODE).getPriority().val();const P=wE(n),F=dr(_,S),j=yR(F,h,P);l.currentOutputSnapshotRaw=F,l.currentOutputSnapshotResolved=j,l.currentWriteId=BD(n);const ae=dR(n.serverSyncTree_,e,j,l.currentWriteId,l.applyLocally);Vo(n.eventQueue_,e,ae),jD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,D)=>{let S=null;_?a.reject(_):(S=new Dg(D,new Pa(n._repo,n._path),Ln),a.resolve(new Aj(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Fj(a.committed,new zh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",t,!0);const r=function H2(n,e){n=(0,R.m9)(n),Na("setPriority",n._path),bR("setPriority",e,!1);const t=new R.BH;return TR(n._repo,ir(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",t,!0);const r=function B2(n,e){n=(0,R.m9)(n),Na("push",n._path),Gl("push",e,n._path,!0);const t=ik(n._repo),r=YU(t),i=Tg(n,r),a=Tg(n,r);let l;return l=null!=e?PR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Uo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Uo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Na("Reference.onDisconnect",this._delegate._path),new kj(new pk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class IE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:yj,forceLongPolling:vj}}useEmulator(e,t,r={}){!function wj(n,e,t,r={}){(n=(0,R.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&jl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&jl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new eE(eE.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,R.Sg)(r.mockUserToken,n.app.options.projectId);a=new eE(l)}!function fj(n,e,t,r){n.repoInfo_=new Nx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=mk(this._delegate,e.toString());return new Uo(this,t)}{const t=gk(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const r=mk(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function Ej(n){(n=(0,R.m9)(n))._checkNotDeleted("goOffline"),uk(n._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function Cj(n){(n=(0,R.m9)(n))._checkNotDeleted("goOnline"),function P2(n){n.persistentConnection_&&n.persistentConnection_.resume(rk)}(n._repo)}(this._delegate)}}IE.ServerValue={TIMESTAMP:function Tj(){return Dj}(),increment:n=>function Sj(n){return{".sv":{increment:n}}}(n)};var Vj=Object.freeze({__proto__:null,initStandalone:function Lj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){wP(t);const l=new be.zt("auth-internal",new be.H0("database-standalone"));return l.setComponent(new be.wA("auth-internal",()=>r,"PRIVATE")),{instance:new IE(Dk(n,l,void 0,e,a),n),namespace:i}}});const Uj=IE.ServerValue;function Ak(n){return null==n}function xk(n){return"function"==typeof n.set}function Rk(n,e){return xk(e)?e:n.ref(e)}function Mk(n,e){if(function jj(n){return"string"==typeof n}(n))return e.stringCase();if(xk(n))return e.firebaseCase();if(function Hj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function bE(n,e,t="on",r=Ds.z){return new Yr.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,ht.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,hc.B)())}function Nk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Wj(n,e){const{payload:t,prevKey:r,key:i}=e,a=Nk(n,i),l=function Gj(n,e){if(Ak(e))return 0;{const t=Nk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Pk(n){return(Ak(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Ok(n,e,t){return function $j(n,e,t){return bE(n,"value","once",t).pipe(Tn(r=>{const i=[ut(r)];return e.forEach(a=>i.push(bE(n,a,"on",t))),(0,Do.T)(...i).pipe(Ac(Wj,[]))}),Ro())}(n,e=Pk(e),t)}function kk(n,e,t){const r=(e=Pk(e)).map(i=>bE(n,i,"on",t));return(0,Do.T)(...r)}function Fk(n,e){return function(r,i){return Mk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Zj(n){return function(t){return t?Mk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Lk(n,e){return function(){return bE(n,"value","on",e)}}!function Bj(n){n.INTERNAL.registerComponent(new be.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new IE(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:Ti,Database:IE,DataSnapshot:zh,enableLogging:Ij,INTERNAL:Vj,ServerValue:Uj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.6")}(Wd.Z);const Jj=new m.OlP("angularfire2.realtimeDatabaseURL"),Xj=new m.OlP("angularfire2.database.use-emulator");let eH=(()=>{class n{constructor(t,r,i,a,l,h,_,w,D,S,P,F,j,ae,Ce){this.schedulers=h;const je=_,et=(0,Qn.on)(t,l,r);w&&Dc(et,l,D,P,F,j,S,ae),this.database=(0,Qn.cc)(`${et.name}.database.${i}`,"AngularFireDatabase",et.name,()=>{const rt=l.runOutsideAngular(()=>et.database(i||void 0));return je&&rt.useEmulator(...je),rt},[je])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Rk(this.database,t));let a=i;return r&&(a=r(i)),function Yj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:Fk(r,"update"),set:Fk(r,"set"),push:i=>r.push(i),remove:Zj(r),snapshotChanges:i=>Ok(n,i,t).pipe(Ut.iC),stateChanges:i=>kk(n,i,t).pipe(Ut.iC),auditTrail:i=>function qj(n,e,t){return function Kj(n,e,t){return function zj(n,e){return bE(n,"value","on",e).pipe((0,ht.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function qV(...n){const e=(0,na.jO)(n);return(0,fn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Ks.Xf)(n[_]).subscribe((0,Pn.x)(r,w=>{a[_]=w,!h&&!l[_]&&(l[_]=!0,(h=l.every(Ki.y))&&(l=null))},WV.Z));t.subscribe((0,Pn.x)(r,_=>{if(h){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,ht.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function zV(n){return(0,fn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Pn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,ht.U)(i=>i.actions))}(n,kk(n,e).pipe(Ac((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ut.iC),valueChanges:(i,a)=>Ok(n,i,t).pipe((0,ht.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Ut.iC)}}(a,this)}object(t){return function Qj(n,e){return{query:n,snapshotChanges:()=>Lk(n,e.schedulers.outsideAngular)().pipe(Ut.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Lk(n,e.schedulers.outsideAngular)().pipe(Ut.iC,(0,ht.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Rk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Qn.Dh),m.LFG(Qn.xv,8),m.LFG(Jj,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(Xj,8),m.LFG(du,8),m.LFG($d,8),m.LFG(xf,8),m.LFG(ll,8),m.LFG(Rf,8),m.LFG(Gd,8),m.LFG(Lr,8),m.LFG(al,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tH=(()=>{class n{constructor(){Hd.Z.registerVersion("angularfire",Ut.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[eH]}),n})();const Vk_firebase={apiKey:"AIzaSyCFwnI5Z_O53jBkBMJrXFRDlX0A_dfais0",authDomain:"scadenzario-14b0c.firebaseapp.com",databaseURL:"https://scadenzario-14b0c-default-rtdb.europe-west1.firebasedatabase.app",projectId:"scadenzario-14b0c",storageBucket:"scadenzario-14b0c.appspot.com",messagingSenderId:"930036765064",appId:"1:930036765064:web:b89e8b90973918e57f2a3d"},{isArray:nH}=Array,{getPrototypeOf:rH,prototype:iH,keys:sH}=Object;function Uk(n){if(1===n.length){const e=n[0];if(nH(e))return{args:e,keys:null};if(function oH(n){return n&&"object"==typeof n&&rH(n)===iH}(e)){const t=sH(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:aH}=Array;function Bk(n){return(0,ht.U)(e=>function uH(n,e){return aH(e)?n(...e):n(e)}(n,e))}function jk(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let Hk=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),Sg=(()=>{class n extends Hk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Wl=new m.OlP("NgValueAccessor"),dH={provide:Wl,useExisting:(0,m.Gpc)(()=>DE),multi:!0},fH=new m.OlP("CompositionEventMode");let DE=(()=>{class n extends Hk{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function hH(){const n=V()?V().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(fH,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([dH]),m.qOj]}),n})();const hs=new m.OlP("NgValidators"),Zh=new m.OlP("NgAsyncValidators");function Xk(n){return null!=n}function e1(n){const e=(0,m.QGY)(n)?(0,xt.D)(n):n;return(0,m.CqO)(e),e}function t1(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function n1(n,e){return e.map(t=>t(n))}function r1(n){return n.map(e=>function gH(n){return!n.validate}(e)?e:t=>e.validate(t))}function FR(n){return null!=n?function i1(n){if(!n)return null;const e=n.filter(Xk);return 0==e.length?null:function(t){return t1(n1(t,e))}}(r1(n)):null}function LR(n){return null!=n?function s1(n){if(!n)return null;const e=n.filter(Xk);return 0==e.length?null:function(t){return function lH(...n){const e=(0,na.jO)(n),{args:t,keys:r}=Uk(n),i=new Yr.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,w=l;for(let D=0;D<l;D++){let S=!1;(0,Ks.Xf)(t[D]).subscribe((0,Pn.x)(a,P=>{S||(S=!0,w--),h[D]=P},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?jk(r,h):h),a.complete())}))}});return e?i.pipe(Bk(e)):i}(n1(t,e).map(e1)).pipe((0,ht.U)(t1))}}(r1(n)):null}function o1(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function VR(n){return n?Array.isArray(n)?n:[n]:[]}function zD(n,e){return Array.isArray(n)?n.includes(e):n===e}function l1(n,e){const t=VR(e);return VR(n).forEach(i=>{zD(t,i)||t.push(i)}),t}function c1(n,e){return VR(e).filter(t=>!zD(n,t))}class d1{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=FR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=LR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Yh extends d1{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Os extends d1{get formDirective(){return null}get path(){return null}}let UR=(()=>{class n extends class h1{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Yh,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})();function TE(n,e){(function HR(n,e){const t=function a1(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(o1(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function u1(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(o1(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();QD(e._rawValidators,i),QD(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function bH(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&p1(n,e)})}(n,e),function TH(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function DH(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&p1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function IH(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function QD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function p1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function WR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const SE="VALID",XD="INVALID",Fy="PENDING",AE="DISABLED";function zR(n){return(eT(n)?n.validators:n)||null}function y1(n){return Array.isArray(n)?FR(n):n||null}function KR(n,e){return(eT(e)?e.asyncValidators:n)||null}function v1(n){return Array.isArray(n)?LR(n):n||null}function eT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const ZR=n=>n instanceof QR;function E1(n){return(n=>n instanceof b1)(n)?n.value:n.getRawValue()}function C1(n,e){const t=ZR(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function I1(n,e){ZR(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new m.vHH(1002,"")})}class YR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=y1(this._rawValidators),this._composedAsyncValidatorFn=v1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===SE}get invalid(){return this.status===XD}get pending(){return this.status==Fy}get disabled(){return this.status===AE}get enabled(){return this.status!==AE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=y1(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=v1(e)}addValidators(e){this.setValidators(l1(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(l1(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(c1(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(c1(e,this._rawAsyncValidators))}hasValidator(e){return zD(this._rawValidators,e)}hasAsyncValidator(e){return zD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Fy,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=AE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=SE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===SE||this.status===Fy)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?AE:SE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Fy,this._hasOwnPendingAsyncValidator=!0;const t=e1(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function RH(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=ZR(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof NH)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?AE:this.errors?XD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fy)?Fy:this._anyControlsHaveStatus(XD)?XD:SE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){eT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class b1 extends YR{constructor(e=null,t,r){super(zR(t),KR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),eT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){WR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){WR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class QR extends YR{constructor(e,t,r){super(zR(t),KR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){I1(this,e),Object.keys(e).forEach(r=>{C1(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=E1(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class NH extends YR{constructor(e,t,r){super(zR(t),KR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){I1(this,e),e.forEach((r,i)=>{C1(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>E1(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const kH={provide:Yh,useExisting:(0,m.Gpc)(()=>tT)},S1=(()=>Promise.resolve(null))();let tT=(()=>{class n extends Yh{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new b1,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function GR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===DE?t=a:function xH(n){return Object.getPrototypeOf(n.constructor)===Sg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $R(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){TE(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){S1.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;S1.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?function ZD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Os,9),m.Y36(hs,10),m.Y36(Zh,10),m.Y36(Wl,10),m.Y36(m.sBO,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([kH]),m.qOj,m.TTD]}),n})(),x1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),a$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[x1]]}),n})(),u$=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[a$]}),n})();class Pu extends Hn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var l$=L(9672);function z1(n,e,t){n?(0,l$.f)(t,n,e):e()}function nT(n,e){const t=(0,Ja.m)(n)?n:()=>n,r=i=>i.error(t());return new Yr.y(e?i=>e.schedule(r,0,i):r)}function K1(n){return new Yr.y(e=>{(0,Ks.Xf)(n()).subscribe(e)})}var Ly=L(515),Z1=L(727);function Y1(){return(0,fn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Pn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class h$ extends Yr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,fn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Z1.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Pn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Z1.w0.EMPTY)}return e}refCount(){return Y1()(this)}}function Qh(n){return(0,fn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Pn.x)(t,void 0,void 0,l=>{a=(0,Ks.Xf)(n(l,Qh(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function sM(n){return n<=0?()=>Ly.E:(0,fn.e)((e,t)=>{let r=[];e.subscribe((0,Pn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Bo=L(8505);class od{constructor(e,t){this.id=e,this.url=t}}class oM extends od{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class RE extends od{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Q1 extends od{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class g$ extends od{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class m$ extends od{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _$ extends od{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y$ extends od{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class v$ extends od{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class w$ extends od{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class J1{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class X1{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class E${constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class C${constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I${constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class b${constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class eF{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Yt="primary";class D${constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Vy(n){return new D$(n)}const tF="ngNavigationCancelingError";function aM(n){const e=Error("NavigationCancelingError: "+n);return e[tF]=!0,e}function S$(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function ql(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!nF(n[i],e[i]))return!1;return!0}function nF(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function rF(n){return Array.prototype.concat.apply([],n)}function iF(n){return n.length>0?n[n.length-1]:null}function Si(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function zl(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,xt.D)(Promise.resolve(n)):ut(n)}const R$={exact:function aF(n,e,t){if(!Rg(n.segments,e.segments)||!rT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!aF(n.children[r],e.children[r],t))return!1;return!0},subset:uF},sF={exact:function M$(n,e){return ql(n,e)},subset:function N$(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>nF(n[t],e[t]))},ignored:()=>!0};function oF(n,e,t){return R$[t.paths](n.root,e.root,t.matrixParams)&&sF[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function uF(n,e,t){return lF(n,e,e.segments,t)}function lF(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Rg(i,t)||e.hasChildren()||!rT(i,t,r))}if(n.segments.length===t.length){if(!Rg(n.segments,t)||!rT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!uF(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Rg(n.segments,i)&&rT(n.segments,i,r)&&n.children[Yt])&&lF(n.children[Yt],e,a,r)}}function rT(n,e,t){return e.every((r,i)=>sF[t](n[i].parameters,r.parameters))}class xg{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vy(this.queryParams)),this._queryParamMap}toString(){return k$.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Si(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return iT(this)}}class ME{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Vy(this.parameters)),this._parameterMap}toString(){return pF(this)}}function Rg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class cF{}class dF{parse(e){const t=new G$(e);return new xg(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${NE(e.root,!0)}`,r=function V$(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${sT(t)}=${sT(i)}`).join("&"):`${sT(t)}=${sT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function F$(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const k$=new dF;function iT(n){return n.segments.map(e=>pF(e)).join("/")}function NE(n,e){if(!n.hasChildren())return iT(n);if(e){const t=n.children[Yt]?NE(n.children[Yt],!1):"",r=[];return Si(n.children,(i,a)=>{a!==Yt&&r.push(`${a}:${NE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function O$(n,e){let t=[];return Si(n.children,(r,i)=>{i===Yt&&(t=t.concat(e(r,i)))}),Si(n.children,(r,i)=>{i!==Yt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Yt?[NE(n.children[Yt],!1)]:[`${i}:${NE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Yt]?`${iT(n)}/${t[0]}`:`${iT(n)}/(${t.join("//")})`}}function hF(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function sT(n){return hF(n).replace(/%3B/gi,";")}function uM(n){return hF(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function oT(n){return decodeURIComponent(n)}function fF(n){return oT(n.replace(/\+/g,"%20"))}function pF(n){return`${uM(n.path)}${function L$(n){return Object.keys(n).map(e=>`;${uM(e)}=${uM(n[e])}`).join("")}(n.parameters)}`}const U$=/^[^\/()?;=#]+/;function aT(n){const e=n.match(U$);return e?e[0]:""}const B$=/^[^=?&#]+/,H$=/^[^&#]+/;class G${constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Yt]=new Xt(e,t)),r}parseSegment(){const e=aT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new ME(oT(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=aT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=aT(this.remaining);i&&(r=i,this.capture(r))}e[oT(t)]=oT(r)}parseQueryParam(e){const t=function j$(n){const e=n.match(B$);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function $$(n){const e=n.match(H$);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=fF(t),a=fF(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=aT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Yt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Yt]:new Xt([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class gF{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=lM(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=lM(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=cM(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return cM(e,this._root).map(t=>t.value)}}function lM(n,e){if(n===e.value)return e;for(const t of e.children){const r=lM(n,t);if(r)return r}return null}function cM(n,e){if(n===e.value)return[e];for(const t of e.children){const r=cM(n,t);if(r.length)return r.unshift(e),r}return[]}class ad{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Uy(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class mF extends gF{constructor(e,t){super(e),this.snapshot=t,dM(this,e)}toString(){return this.snapshot.toString()}}function _F(n,e){const t=function W$(n,e){const l=new uT([],{},{},"",{},Yt,e,null,n.root,-1,{});return new vF("",new ad(l,[]))}(n,e),r=new Pu([new ME("",{})]),i=new Pu({}),a=new Pu({}),l=new Pu({}),h=new Pu(""),_=new By(r,i,l,h,a,Yt,e,t.root);return _.snapshot=t.root,new mF(new ad(_,[]),t)}class By{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ht.U)(e=>Vy(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ht.U)(e=>Vy(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function yF(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function q$(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class uT{constructor(e,t,r,i,a,l,h,_,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Vy(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Vy(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vF extends gF{constructor(e,t){super(t),this.url=e,dM(this,t)}toString(){return wF(this._root)}}function dM(n,e){e.value._routerState=n,e.children.forEach(t=>dM(n,t))}function wF(n){const e=n.children.length>0?` { ${n.children.map(wF).join(", ")} } `:"";return`${n.value}${e}`}function hM(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ql(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ql(e.params,t.params)||n.params.next(t.params),function A$(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ql(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ql(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fM(n,e){const t=ql(n.params,e.params)&&function P$(n,e){return Rg(n,e)&&n.every((t,r)=>ql(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fM(n.parent,e.parent))}function PE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function K$(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return PE(n,r,i);return PE(n,r)})}(n,e,t);return new ad(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>PE(n,h)),l}}const r=function Z$(n){return new By(new Pu(n.url),new Pu(n.params),new Pu(n.queryParams),new Pu(n.fragment),new Pu(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>PE(n,a));return new ad(r,i)}}function lT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function OE(n){return"object"==typeof n&&null!=n&&n.outlets}function pM(n,e,t,r,i){let a={};if(r&&Si(r,(h,_)=>{a[_]=Array.isArray(h)?h.map(w=>`${w}`):`${h}`}),n===e)return new xg(t,a,i);const l=EF(n,e,t);return new xg(l,a,i)}function EF(n,e,t){const r={};return Si(n.children,(i,a)=>{r[a]=i===e?t:EF(i,e,t)}),new Xt(n.segments,r)}class CF{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&lT(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(OE);if(i&&i!==iF(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gM{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function IF(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return cT(n,e,t);const r=function tG(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(OE(h))break;const _=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!DF(_,w,l))return a;r+=2}else{if(!DF(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new Xt(n.segments.slice(0,r.pathIndex),{});return a.children[Yt]=new Xt(n.segments.slice(r.pathIndex),n.children),cT(a,0,i)}return r.match&&0===i.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?mM(n,e,t):r.match?cT(n,0,i):mM(n,e,t)}function cT(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function eG(n){return OE(n[0])?n[0].outlets:{[Yt]:n}}(t),i={};return Si(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=IF(n.children[l],e,a))}),Si(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new Xt(n.segments,i)}}function mM(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(OE(a)){const _=nG(a.outlets);return new Xt(r,_)}if(0===i&&lT(t[0])){r.push(new ME(n.segments[e].path,bF(t[0]))),i++;continue}const l=OE(a)?a.outlets[Yt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&lT(h)?(r.push(new ME(l,bF(h))),i+=2):(r.push(new ME(l,{})),i++)}return new Xt(r,{})}function nG(n){const e={};return Si(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=mM(new Xt([],{}),0,t))}),e}function bF(n){const e={};return Si(n,(t,r)=>e[r]=`${t}`),e}function DF(n,e,t){return n==t.path&&ql(e,t.parameters)}class iG{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hM(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Uy(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Si(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Uy(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=Uy(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Uy(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new b$(a.value.snapshot))}),e.children.length&&this.forwardEvent(new C$(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(hM(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),hM(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function sG(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class _M{constructor(e,t){this.routes=e,this.module=t}}function Jh(n){return"function"==typeof n}function Mg(n){return n instanceof xg}const kE=Symbol("INITIAL_VALUE");function FE(){return Tn(n=>function c$(...n){const e=(0,na.yG)(n),t=(0,na.jO)(n),{args:r,keys:i}=Uk(n);if(0===r.length)return(0,xt.D)([],e);const a=new Yr.y(function d$(n,e,t=Ki.y){return r=>{z1(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)z1(e,()=>{const w=(0,xt.D)(n[_],e);let D=!1;w.subscribe((0,Pn.x)(r,S=>{a[_]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>jk(i,l):Ki.y));return t?a.pipe(Bk(t)):a}(n.map(e=>e.pipe((0,Cs.q)(1),Hm(kE)))).pipe(Ac((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==kE?i:(a===kE&&(r=!0),r||!1!==a&&l!==t.length-1&&!Mg(a)?i:a),e)},kE),Gt(e=>e!==kE),(0,ht.U)(e=>Mg(e)?e:!0===e),(0,Cs.q)(1)))}class dG{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new LE,this.attachRef=null}}class LE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new dG,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let yM=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=a||Yt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new hG(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(LE),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class hG{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===By?this.route:e===LE?this.childContexts:this.parent.get(e,t)}}let TF=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[yM],encapsulation:2}),n})();function SF(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];fG(r,pG(e,r))}}function fG(n,e){n.children&&SF(n.children,e)}function pG(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function vM(n){const e=n.children&&n.children.map(vM),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Yt&&(t.component=TF),t}function Oa(n){return n.outlet||Yt}function AF(n,e){const t=n.filter(r=>Oa(r)===e);return t.push(...n.filter(r=>Oa(r)!==e)),t}const xF={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},xF):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||S$)(t,n,e);if(!a)return Object.assign({},xF);const l={};Si(a.posParams,(_,w)=>{l[w]=_.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function hT(n,e,t,r,i="corrected"){if(t.length>0&&function _G(n,e,t){return t.some(r=>fT(n,e,r)&&Oa(r)!==Yt)}(n,t,r)){const l=new Xt(e,function mG(n,e,t,r){const i={};i[Yt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Oa(a)!==Yt){const l=new Xt([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Oa(a)]=l}return i}(n,e,r,new Xt(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function yG(n,e,t){return t.some(r=>fT(n,e,r))}(n,t,r)){const l=new Xt(n.segments,function gG(n,e,t,r,i,a){const l={};for(const h of r)if(fT(n,t,h)&&!i[Oa(h)]){const _=new Xt([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Oa(h)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new Xt(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function fT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function RF(n,e,t,r){return!!(Oa(n)===r||r!==Yt&&fT(e,t,n))&&("**"===n.path||dT(e,n,t).matched)}function MF(n,e,t){return 0===e.length&&!n.children[t]}class pT{constructor(e){this.segmentGroup=e||null}}class NF{constructor(e){this.urlTree=e}}function VE(n){return nT(new pT(n))}function PF(n){return nT(new NF(n))}function vG(n){return nT(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class CG{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=hT(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Yt).pipe((0,ht.U)(a=>this.createUrlTree(wM(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qh(a=>{if(a instanceof NF)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof pT?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Yt).pipe((0,ht.U)(i=>this.createUrlTree(wM(i),e.queryParams,e.fragment))).pipe(Qh(i=>{throw i instanceof pT?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new Xt([],{[Yt]:e}):e;return new xg(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ht.U)(a=>new Xt([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,xt.D)(i).pipe(vo(a=>{const l=r.children[a],h=AF(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,ht.U)(_=>({segment:_,outlet:a})))}),Ac((a,l)=>(a[l.outlet]=l.segment,a),{}),function f$(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Gt((i,a)=>n(i,a,r)):Ki.y,sM(1),t?zi(e):fc(()=>new Jn))}())}expandSegment(e,t,r,i,a,l){return(0,xt.D)(r).pipe(vo(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(Qh(w=>{if(w instanceof pT)return ut(null);throw w}))),aa(h=>!!h),Qh((h,_)=>{if(h instanceof Jn||"EmptyError"===h.name)return MF(t,i,a)?ut(new Xt([],{})):VE(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return RF(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):VE(t):VE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?PF(a):this.lineralizeSegments(r,a).pipe((0,cn.z)(l=>{const h=new Xt(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:w,positionalParamSegments:D}=dT(t,i,a);if(!h)return VE(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?PF(S):this.lineralizeSegments(i,S).pipe((0,cn.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ut(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,ht.U)(S=>(r._loadedConfig=S,new Xt(i,{})))):ut(new Xt(i,{}));const{matched:l,consumedSegments:h,remainingSegments:_}=dT(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,cn.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:F,slicedSegments:j}=hT(t,h,_,P),ae=new Xt(F.segments,F.children);if(0===j.length&&ae.hasChildren())return this.expandChildren(S,P,ae).pipe((0,ht.U)(rt=>new Xt(h,rt)));if(0===P.length&&0===j.length)return ut(new Xt(h,{}));const Ce=Oa(r)===a;return this.expandSegment(S,ae,P,j,Ce?Yt:a,!0).pipe((0,ht.U)(et=>new Xt(h.concat(et.segments),et.children)))})):VE(t)}getChildConfig(e,t,r){return t.children?ut(new _M(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ut(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,cn.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,ht.U)(a=>(t._loadedConfig=a,a))):function wG(n){return nT(aM(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ut(new _M([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return ut(!0);const a=i.map(l=>{const h=e.get(l);let _;if(function aG(n){return n&&Jh(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!Jh(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return zl(_)});return ut(a).pipe(FE(),(0,Bo.b)(l=>{if(!Mg(l))return;const h=aM(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,ht.U)(l=>!0===l))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ut(r);if(i.numberOfChildren>1||!i.children[Yt])return vG(e.redirectTo);i=i.children[Yt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new xg(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Si(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Si(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new Xt(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function wM(n){const e={};for(const r of Object.keys(n.children)){const a=wM(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function IG(n){if(1===n.numberOfChildren&&n.children[Yt]){const e=n.children[Yt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}class OF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class gT{constructor(e,t){this.component=e,this.route=t}}function DG(n,e,t){const r=n._root;return UE(r,e?e._root:null,t,[r.value])}function mT(n,e,t){const r=function SG(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function UE(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=Uy(e);return n.children.forEach(l=>{(function AG(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function xG(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Rg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Rg(n.url,e.url)||!ql(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fM(n,e)||!ql(n.queryParams,e.queryParams);default:return!fM(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new OF(r)):(a.data=l.data,a._resolvedData=l._resolvedData),UE(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new gT(h.outlet.component,l))}else l&&BE(e,h,i),i.canActivateChecks.push(new OF(r)),UE(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Si(a,(l,h)=>BE(l,t.getContext(h),i)),i}function BE(n,e,t){const r=Uy(n),i=n.value;Si(r,(a,l)=>{BE(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new gT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class VG{}function kF(n){return new Yr.y(e=>e.error(n))}class BG{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=hT(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Yt);if(null===t)return null;const r=new uT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Yt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ad(r,t),a=new vF(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=yF(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=AF(e,a),_=this.processSegmentGroup(h,l,a);if(null===_)return null;r.push(..._)}const i=FF(r);return function jG(n){n.sort((e,t)=>e.value.outlet===Yt?-1:t.value.outlet===Yt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return MF(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!RF(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const F=r.length>0?iF(r).parameters:{};a=new uT(r,F,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UF(e),Oa(e),e.component,e,LF(t),VF(t)+r.length,BF(e))}else{const F=dT(t,e,r);if(!F.matched)return null;l=F.consumedSegments,h=F.remainingSegments,a=new uT(l,F.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,UF(e),Oa(e),e.component,e,LF(t),VF(t)+l.length,BF(e))}const _=function HG(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=hT(t,l,h,_.filter(F=>void 0===F.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const F=this.processChildren(_,w);return null===F?null:[new ad(a,F)]}if(0===_.length&&0===D.length)return[new ad(a,[])];const S=Oa(e)===i,P=this.processSegment(_,w,D,S?Yt:i);return null===P?null:[new ad(a,P)]}}function $G(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function FF(n){const e=[],t=new Set;for(const r of n){if(!$G(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=FF(r.children);e.push(new ad(r.value,i))}return e.filter(r=>!t.has(r))}function LF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function VF(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function UF(n){return n.data||{}}function BF(n){return n.resolve||{}}function jF(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function EM(n){return Tn(e=>{const t=n(e);return t?(0,xt.D)(t).pipe((0,ht.U)(()=>e)):ut(e)})}class QG extends class YG{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const CM=new m.OlP("ROUTES");class HF{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,ht.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new _M(rF(l.injector.get(CM,void 0,m.XFs.Self|m.XFs.Optional)).map(vM),l)}),Qh(a=>{throw t._loader$=void 0,a}));return t._loader$=new h$(i,()=>new Hn.x).pipe(Y1()),t._loader$}loadModuleFactory(e){return zl(e()).pipe((0,cn.z)(t=>t instanceof m.YKP?ut(t):(0,xt.D)(this.compiler.compileModuleAsync(t))))}}class XG{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function eW(n){throw n}function tW(n,e,t){return e.parse("/")}function $F(n,e){return ut(null)}const nW={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rW={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ao=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Hn.x,this.errorHandler=eW,this.malformedUriErrorHandler=tW,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:$F,afterPreactivation:$F},this.urlHandlingStrategy=new XG,this.routeReuseStrategy=new QG,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function x$(){return new xg(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new HF(l,h,P=>this.triggerEvent(new J1(P)),P=>this.triggerEvent(new X1(P))),this.routerState=_F(this.currentUrlTree,this.rootComponentType),this.transitions=new Pu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Gt(i=>0!==i.id),(0,ht.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Tn(i=>{let a=!1,l=!1;return ut(i).pipe((0,Bo.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Tn(h=>{const _=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return GF(h.source)&&(this.browserUrlTree=h.extractedUrl),ut(h).pipe(Tn(S=>{const P=this.transitions.getValue();return r.next(new oM(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?Ly.E:Promise.resolve(S)}),function bG(n,e,t,r){return Tn(i=>function EG(n,e,t,r,i){return new CG(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,ht.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Bo.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function GG(n,e,t,r,i){return(0,cn.z)(a=>function UG(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new BG(n,e,t,r,i,a).recognize();return null===l?kF(new VG):ut(l)}catch(l){return kF(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,ht.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Bo.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const F=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(F,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new m$(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:F,source:j,restoredState:ae,extras:Ce}=h,je=new oM(P,this.serializeUrl(F),j,ae);r.next(je);const et=_F(F,this.rootComponentType).snapshot;return ut(Object.assign(Object.assign({},h),{targetSnapshot:et,urlAfterRedirects:F,extras:Object.assign(Object.assign({},Ce),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Ly.E}),EM(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:F}}=h;return this.hooks.beforePreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!F})}),(0,Bo.b)(h=>{const _=new _$(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,ht.U)(h=>Object.assign(Object.assign({},h),{guards:DG(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function RG(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ut(Object.assign(Object.assign({},t),{guardsResult:!0})):function MG(n,e,t,r){return(0,xt.D)(n).pipe((0,cn.z)(i=>function LG(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ut(a.map(h=>{const _=mT(h,e,i);let w;if(function cG(n){return n&&Jh(n.canDeactivate)}(_))w=zl(_.canDeactivate(n,e,t,r));else{if(!Jh(_))throw new Error("Invalid CanDeactivate guard");w=zl(_(n,e,t,r))}return w.pipe(aa())})).pipe(FE()):ut(!0)}(i.component,i.route,t,e,r)),aa(i=>!0!==i,!0))}(l,r,i,n).pipe((0,cn.z)(h=>h&&function oG(n){return"boolean"==typeof n}(h)?function NG(n,e,t,r){return(0,xt.D)(e).pipe(vo(i=>Ev(function OG(n,e){return null!==n&&e&&e(new E$(n)),ut(!0)}(i.route.parent,r),function PG(n,e){return null!==n&&e&&e(new I$(n)),ut(!0)}(i.route,r),function FG(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function TG(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>K1(()=>ut(l.guards.map(_=>{const w=mT(_,l.node,t);let D;if(function lG(n){return n&&Jh(n.canActivateChild)}(w))D=zl(w.canActivateChild(r,n));else{if(!Jh(w))throw new Error("Invalid CanActivateChild guard");D=zl(w(r,n))}return D.pipe(aa())})).pipe(FE())));return ut(a).pipe(FE())}(n,i.path,t),function kG(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ut(!0);const i=r.map(a=>K1(()=>{const l=mT(a,e,t);let h;if(function uG(n){return n&&Jh(n.canActivate)}(l))h=zl(l.canActivate(e,n));else{if(!Jh(l))throw new Error("Invalid CanActivate guard");h=zl(l(e,n))}return h.pipe(aa())}));return ut(i).pipe(FE())}(n,i.route,t))),aa(i=>!0!==i,!0))}(r,a,n,e):ut(h)),(0,ht.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Bo.b)(h=>{if(Mg(h.guardsResult)){const w=aM(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const _=new y$(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),Gt(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),EM(h=>{if(h.guards.canActivateChecks.length)return ut(h).pipe((0,Bo.b)(_=>{const w=new v$(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Tn(_=>{let w=!1;return ut(_).pipe(function WG(n,e){return(0,cn.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ut(t);let a=0;return(0,xt.D)(i).pipe(vo(l=>function qG(n,e,t,r){return function zG(n,e,t,r){const i=jF(n);if(0===i.length)return ut({});const a={};return(0,xt.D)(i).pipe((0,cn.z)(l=>function KG(n,e,t,r){const i=mT(n,e,r);return zl(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Bo.b)(h=>{a[l]=h}))),sM(1),(0,cn.z)(()=>jF(a).length===i.length?ut(a):Ly.E))}(n._resolve,n,e,r).pipe((0,ht.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),yF(n,t).resolve),null)))}(l.route,r,n,e)),(0,Bo.b)(()=>a++),sM(1),(0,cn.z)(l=>a===i.length?ut(t):Ly.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Bo.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Bo.b)(_=>{const w=new w$(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),EM(h=>{const{targetSnapshot:_,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:F}}=h;return this.hooks.afterPreactivation(_,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!F})}),(0,ht.U)(h=>{const _=function z$(n,e,t){const r=PE(n,e._root,t?t._root:void 0);return new mF(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,Bo.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,ht.U)(r=>(new iG(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Bo.b)({next(){a=!0},complete(){a=!0}}),function p$(n){return(0,fn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),Qh(h=>{if(l=!0,function T$(n){return n&&n[tF]}(h)){const _=Mg(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const w=new Q1(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||GF(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new g$(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Ly.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){SF(t),this.config=t.map(vM),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,w=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function Y$(n,e,t,r,i){if(0===t.length)return pM(e.root,e.root,e.root,r,i);const a=function Q$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new CF(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Si(a.outlets,(_,w)=>{h[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new CF(t,e,r)}(t);if(a.toRoot())return pM(e.root,e.root,new Xt([],{}),r,i);const l=function J$(n,e,t){if(n.isAbsolute)return new gM(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new gM(a,a===e.root,0)}const r=lT(n.commands[0])?0:1;return function X$(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new gM(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?cT(l.segmentGroup,l.index,a.commands):IF(l.segmentGroup,l.index,a.commands);return pM(e.root,l.segmentGroup,h,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Mg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function iW(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},nW):!1===r?Object.assign({},rW):r,Mg(t))return oF(this.currentUrlTree,t,i);const a=this.parseUrl(t);return oF(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new RE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,_;if(this.disposed)return Promise.resolve(!1);let w,D,S;l?(w=l.resolve,D=l.reject,S=l.promise):S=new Promise((j,ae)=>{w=j,D=ae});const P=++this.navigationId;let F;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),F=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):F=0,this.setTransition({id:P,targetPageId:F,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:w,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(j=>Promise.reject(j))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new Q1(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function GF(n){return"imperative"!==n}let jE=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new Hn.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:jy(this.skipLocationChange),replaceUrl:jy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ao),m.Y36(By),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})(),_T=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new Hn.x,this.subscription=t.events.subscribe(a=>{a instanceof RE&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:jy(this.skipLocationChange),replaceUrl:jy(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:jy(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(ao),m.Y36(By),m.Y36(ge))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function jy(n){return""===n||!!n}class WF{}class qF{preload(e,t){return ut(null)}}let zF=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new HF(i,r,_=>t.triggerEvent(new J1(_)),_=>t.triggerEvent(new X1(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Gt(t=>t instanceof RE),vo(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,xt.D)(i).pipe((0,jm.J)(),(0,ht.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ut(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,cn.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ao),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(WF))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),IM=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof oM?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof RE&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof eF&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new eF(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Ng=new m.OlP("ROUTER_CONFIGURATION"),KF=new m.OlP("ROUTER_FORROOT_GUARD"),uW=[Ee,{provide:cF,useClass:dF},{provide:ao,useFactory:function fW(n,e,t,r,i,a,l={},h,_){const w=new ao(null,n,e,t,r,i,rF(a));return h&&(w.urlHandlingStrategy=h),_&&(w.routeReuseStrategy=_),function pW(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[cF,LE,Ee,m.zs3,m.Sil,CM,Ng,[class JG{},new m.FiY],[class ZG{},new m.FiY]]},LE,{provide:By,useFactory:function gW(n){return n.routerState.root},deps:[ao]},zF,qF,class aW{preload(e,t){return t().pipe(Qh(()=>ut(null)))}},{provide:Ng,useValue:{enableTracing:!1}}];function lW(){return new m.PXZ("Router",ao)}let bM=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[uW,ZF(t),{provide:KF,useFactory:hW,deps:[[ao,new m.FiY,new m.tp0]]},{provide:Ng,useValue:r||{}},{provide:ge,useFactory:dW,deps:[ue,[new m.tBr(qe),new m.FiY],Ng]},{provide:IM,useFactory:cW,deps:[ao,Ql,Ng]},{provide:WF,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:qF},{provide:m.PXZ,multi:!0,useFactory:lW},[DM,{provide:m.ip1,multi:!0,useFactory:mW,deps:[DM]},{provide:YF,useFactory:_W,deps:[DM]},{provide:m.tb,multi:!0,useExisting:YF}]]}}static forChild(t){return{ngModule:n,providers:[ZF(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(KF,8),m.LFG(ao,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function cW(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new IM(n,e,t)}function dW(n,e,t={}){return t.useHash?new Se(n,e):new Ze(n,e)}function hW(n){return"guarded"}function ZF(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:CM,multi:!0,useValue:n}]}let DM=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Hn.x}appInitializer(){return this.injector.get(W,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(ao),l=this.injector.get(Ng);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ut(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(Ng),i=this.injector.get(zF),a=this.injector.get(IM),l=this.injector.get(ao),h=this.injector.get(m.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function mW(n){return n.appInitializer.bind(n)}function _W(n){return n.bootstrapListener.bind(n)}const YF=new m.OlP("Router Initializer"),vW=[];let wW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[bM.forRoot(vW)],bM]}),n})(),yT=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user),this.router.navigate(["/home"])}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["login"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Dx),m.LFG(du),m.LFG(ao),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),EW=(()=>{class n{constructor(t){this.authService=t,this.user=JSON.stringify(this.authService.userData),this.title="ScadenzarioAngular",this.date=new Date,this.day=this.date.getDate(),this.month=this.date.getMonth(),this.year=this.date.getFullYear(),this.today=`${this.day}/${this.month+1}/${this.year}`}isLogged(){return this.authService.isLoggedIn?"home":"login"}getUser(){return this.authService.isLoggedIn?JSON.parse(localStorage.getItem("user")).email:"OSPITE"}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yT))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:18,vars:3,consts:[[1,"header"],[1,"user"],[1,"headerWrapper"],[1,"link"],[3,"routerLink"],["routerLink","login"],["routerLink","signup"],[3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"p",1),m._uU(2),m.qZA(),m.TgZ(3,"div",2)(4,"h1"),m._uU(5,"SCADENZARIO"),m.qZA(),m.TgZ(6,"div",3)(7,"a",4),m._uU(8,"HOME"),m.qZA(),m.TgZ(9,"a",5),m._uU(10,"ACCEDI"),m.qZA(),m.TgZ(11,"a",6),m._uU(12,"ISCRIVITI"),m.qZA(),m.TgZ(13,"a",7),m.NdJ("click",function(){return r.authService.SignOut()}),m._uU(14,"LOG-OUT"),m.qZA(),m.TgZ(15,"p"),m._uU(16),m.qZA()()()(),m._UZ(17,"router-outlet")),2&t&&(m.xp6(2),m.Oqu(r.getUser()),m.xp6(5),m.Q6J("routerLink",r.isLogged()),m.xp6(9),m.Oqu(r.today))},directives:[_T,yM],styles:[".header[_ngcontent-%COMP%]{height:200px;padding:0 20px;background-color:orange;margin-bottom:20px}.header[_ngcontent-%COMP%]   .user[_ngcontent-%COMP%]{font-size:20px;margin:0;padding:10px}.header[_ngcontent-%COMP%]   .headerWrapper[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-content:space-around;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;font-size:50px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:50px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.header[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;align-items:center}.header[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px;text-decoration:none}"]}),n})(),CW=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yT))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:19,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["routerLink","/signup"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Accedi",1,"btn","btnPrimary",3,"click"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p"),m._uU(4,"Possono accedere ai contenuti della HOME solo gli utenti che hanno effetuato l'accesso"),m.qZA(),m.TgZ(5,"span"),m._uU(6,"se non sei un utente registrato effetua la registrazioni "),m.qZA(),m.TgZ(7,"span",3),m._uU(8,"qui"),m.qZA(),m.TgZ(9,"h3"),m._uU(10,"Accedi"),m.qZA(),m.TgZ(11,"div",4),m._UZ(12,"input",5,6),m.qZA(),m.TgZ(14,"div",4),m._UZ(15,"input",7,8),m.qZA(),m.TgZ(17,"div",4)(18,"input",9),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(13),h=m.MAs(16);return r.authService.SignIn(l.value,h.value)}),m.qZA()()()()()}},directives:[jE],styles:[""]}),n})(),QF=(()=>{class n{constructor(t){var r=this;this.db=t,this.items=[],this.user=JSON.parse(localStorage.getItem("user")),this.itemObj={items:this.items},this.setData=function(){var i=(0,k.Z)(function*(a){r.db.collection("users").doc(r.user.uid).set(a)});return function(a){return i.apply(this,arguments)}}(),this.updateData=function(){var i=(0,k.Z)(function*(a){r.db.collection("users").doc(r.user.uid).update(a)});return function(a){return i.apply(this,arguments)}}(),this.getData=(0,k.Z)(function*(){r.db.collection("users").doc(r.user.uid).ref.get().then(i=>{i.data().items&&localStorage.setItem("item",JSON.stringify(i.data()))})}),null===JSON.parse(localStorage.getItem("item"))?localStorage.setItem("item",JSON.stringify(this.itemObj)):this.itemObj=JSON.parse(localStorage.getItem("item"))}addItem(t){this.itemObj.items.unshift(t),localStorage.setItem("item",JSON.stringify(this.itemObj)),this.setData(this.itemObj),window.alert(`${JSON.stringify(t.item)} aggiunto`)}removeItem(t){confirm(`vuoi cancellare ${this.itemObj.items[t].item}?`)&&(this.itemObj.items.splice(t,1),localStorage.setItem("item",JSON.stringify(this.itemObj)))}expiredItem(t){this.itemObj.items.splice(t,1),localStorage.setItem("item",JSON.stringify(this.itemObj))}getItems(){return this.itemObj.items}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Dx))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),IW=(()=>{class n{constructor(t){this.scadenzarioService=t,this.today=new Date,this.item="",this.expired=new Date,this.expiredDay=0,this.scadenzarioService.getData()}addItem(){this.scadenzarioService.addItem({item:this.item,expired:this.expired}),this.item="",this.expired=new Date}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(QF))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-input"]],decls:11,vars:2,consts:[[1,"wrapper"],[1,"item"],["for","item"],["name","item","id","item",3,"ngModel","ngModelChange"],[1,"expired"],["for","expired"],["type","date","name","expired","id","expired",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"label",2),m._uU(3,"Descrizione"),m.qZA(),m.TgZ(4,"input",3),m.NdJ("ngModelChange",function(a){return r.item=a}),m.qZA()(),m.TgZ(5,"div",4)(6,"label",5),m._uU(7,"Scadenza"),m.qZA(),m.TgZ(8,"input",6),m.NdJ("ngModelChange",function(a){return r.expired=a}),m.qZA()(),m.TgZ(9,"button",7),m.NdJ("click",function(){return r.addItem()}),m._uU(10,"Inserisci"),m.qZA()()),2&t&&(m.xp6(4),m.Q6J("ngModel",r.item),m.xp6(4),m.Q6J("ngModel",r.expired))},directives:[DE,UR,tT],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;align-content:space-around}.wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .expired[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin:10px}.wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:30px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:30px;border-radius:10px}.wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;background-color:orange;font-size:30px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}"]}),n})();const bW=["newDateBox"];function DW(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",4),m.NdJ("click",function(){const a=m.CHM(t).index;return m.oxw().modifyDate(a)}),m._uU(1),m.TgZ(2,"button",5),m.NdJ("click",function(){const a=m.CHM(t).index;return m.oxw().deleteItem(a)}),m._uU(3,"X"),m.qZA(),m.TgZ(4,"p"),m._uU(5),m.qZA(),m.TgZ(6,"p"),m._uU(7),m.qZA(),m.TgZ(8,"p"),m._uU(9),m.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=m.oxw();m.Q6J("ngClass",i.getDiffDays(t.expired)<7?"nearExpired":"farExpired"),m.xp6(1),m.hij(" ",i.deleteExpired(t.expired,r)," "),m.xp6(4),m.hij("SCADE TRA ",i.getDiffDays(t.expired)," GIORNI"),m.xp6(2),m.Oqu(t.item),m.xp6(2),m.Oqu(t.expired)}}let TW=(()=>{class n{constructor(t,r){this.scadenzarioService=t,this.el=r,this.today=new Date,this.items=this.scadenzarioService.getItems(),this.itemsSorted=this.items.sort((i,a)=>+new Date(i.expired)-+new Date(a.expired)),this.expired=new Date}deleteExpired(t,r){this.getDiffDays(t)<0&&this.expiredItems(r)}getDiffDays(t){return Math.floor((new Date(t).getTime()-(new Date).getTime())/864e5+1)}modifyDate(t){confirm("modificare la data di scadenza?")&&(this.el.nativeElement.querySelector(".newDateBox"),this.items[t].expired="2023-12-04")}deleteItem(t){this.scadenzarioService.removeItem(t)}expiredItems(t){this.scadenzarioService.expiredItem(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(QF),m.Y36(m.SBq))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-card-item"]],viewQuery:function(t,r){if(1&t&&m.Gf(bW,5),2&t){let i;m.iGM(i=m.CRH())&&(r.newDateBox=i.first)}},decls:6,vars:2,consts:[[1,"wrapper"],["class","cardItem",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"newDateBox"],["type","date","name","expired","id","expired",3,"ngModel","ngModelChange"],[1,"cardItem",3,"ngClass","click"],[1,"deleteButton",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,DW,10,5,"div",1),m.TgZ(2,"div",2)(3,"h2"),m._uU(4,"NUOVA DATA DI SCADENZA"),m.qZA(),m.TgZ(5,"input",3),m.NdJ("ngModelChange",function(a){return r.expired=a}),m.qZA()()()),2&t&&(m.xp6(1),m.Q6J("ngForOf",r.itemsSorted),m.xp6(4),m.Q6J("ngModel",r.expired))},directives:[or,ps,DE,UR,tT],styles:[".newDateBox[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;border:1px solid;padding:10px;background:white;font-size:30px;border-radius:10px;text-align:center;display:none}.newDateBox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:30px}.wrapper[_ngcontent-%COMP%]{margin:10px;display:flex;flex-direction:row;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .cardItem[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:300px;width:300px;border:1px solid;margin:5px;padding:15px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:30px}.wrapper[_ngcontent-%COMP%]   .nearExpired[_ngcontent-%COMP%]{background-color:red}.wrapper[_ngcontent-%COMP%]   .deleteButton[_ngcontent-%COMP%]{height:30px;width:30px;position:absolute;right:10px;top:10px}"]}),n})();const SW=[{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&m._UZ(0,"app-input")(1,"app-card-item")},directives:[IW,TW],styles:[""]}),n})()},{path:"signup",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(yT))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-signin"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(7),h=m.MAs(10);return r.authService.SignUp(l.value,h.value)}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()()(),m.TgZ(17,"div",11)(18,"span"),m._uU(19,"Already have an account? "),m.TgZ(20,"span",12),m._uU(21,"Log In"),m.qZA()()()()()}},directives:[jE],styles:[""]}),n})()},{path:"login",component:CW}];let AW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[EW]}),n.\u0275inj=m.cJS({providers:[yT],imports:[[Qn.hO.initializeApp(Vk_firebase),vm,GV,DC,tH,Ka,wW,u$,bM.forRoot(SW),qg]]}),n})();(0,m.G48)(),Wu().bootstrapModule(AW).catch(n=>console.error(n))},5867:(Qe,ve,L)=>{L.d(ve,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=L(9681);(0,m.registerVersion)("firebase","9.10.0","app")},127:(Qe,ve,L)=>{L.d(ve,{Z:()=>m.Z});var m=L(3942);m.Z.registerVersion("firebase","9.10.0","app-compat")},2476:(Qe,ve,L)=>{L.r(ve);var m=L(5861),ee=L(3942),V=L(2090),ce=L(9681),ie=L(655),me=L(1877),de=L(4859);const Ne=function $e(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ve=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ge=new V.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new me.Yd("@firebase/auth");function Ze(y,...f){qe.logLevel<=me.in.ERROR&&qe.error(`Auth (${ce.SDK_VERSION}): ${y}`,...f)}function Se(y,...f){throw Be(y,...f)}function Ee(y,...f){return Be(y,...f)}function Ie(y,f,p){const E=Object.assign(Object.assign({},Ve()),{[f]:p});return new V.LL("auth","Firebase",E).create(f,{appName:y.name})}function Ue(y,f,p){if(!(f instanceof p))throw p.name!==f.constructor.name&&Se(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Be(y,...f){if("string"!=typeof y){const p=f[0],E=[...f.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(p,...E)}return ge.create(y,...f)}function K(y,f,...p){if(!y)throw Be(f,...p)}function we(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ze(f),new Error(f)}function J(y,f){y||we(f)}const se=new Map;function te(y){J(y instanceof Function,"Expected a class definition");let f=se.get(y);return f?(J(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,se.set(y,f),f)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function lt(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class nn{constructor(f,p){this.shortDelay=f,this.longDelay=p,J(p>f,"Short delay should be less than long delay!"),this.isMobile=(0,V.uI)()||(0,V.b$)()}get(){return function Ft(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,V.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function xn(y,f){J(y.emulator,"Emulator should always be set here");const{url:p}=y.emulator;return f?`${p}${f.startsWith("/")?f.slice(1):f}`:p}class rn{static initialize(f,p,E){this.fetchImpl=f,p&&(this.headersImpl=p),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void we("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void we("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void we("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Rr=new nn(3e4,6e4);function zt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,p,E){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,m.Z)(function*(y,f,p,E,A={}){return ii(y,A,(0,m.Z)(function*(){let O={},Q={};E&&("GET"===f?Q=E:O={body:JSON.stringify(E)});const he=(0,V.xO)(Object.assign({key:y.config.apiKey},Q)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),rn.fetch()(ks(y,y.config.apiHost,p,he),Object.assign({method:f,headers:ke,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function ii(y,f,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,m.Z)(function*(y,f,p){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Qt),f);try{const A=new Gr(y),O=yield Promise.race([p(),A.promise]);A.clearNetworkTimeout();const Q=yield O.json();if("needConfirmation"in Q)throw _i(y,"account-exists-with-different-credential",Q);if(O.ok&&!("errorMessage"in Q))return Q;{const he=O.ok?Q.errorMessage:Q.error.message,[ke,Ke]=he.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw _i(y,"credential-already-in-use",Q);if("EMAIL_EXISTS"===ke)throw _i(y,"email-already-in-use",Q);if("USER_DISABLED"===ke)throw _i(y,"user-disabled",Q);const gt=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(y,gt,Ke);Se(y,gt)}}catch(A){if(A instanceof V.ZR)throw A;Se(y,"network-request-failed")}})).apply(this,arguments)}function $r(y,f,p,E){return xi.apply(this,arguments)}function xi(){return(xi=(0,m.Z)(function*(y,f,p,E,A={}){const O=yield Lt(y,f,p,E,A);return"mfaPendingCredential"in O&&Se(y,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function ks(y,f,p,E){const A=`${f}${p}?${E}`;return y.config.emulator?xn(y.config,A):`${y.config.apiScheme}://${A}`}class Gr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((p,E)=>{this.timer=setTimeout(()=>E(Ee(this.auth,"network-request-failed")),Rr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _i(y,f,p){const E={appName:y.name};p.email&&(E.email=p.email),p.phoneNumber&&(E.phoneNumber=p.phoneNumber);const A=Ee(y,f,E);return A.customData._tokenResponse=p,A}function Wr(){return(Wr=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Rn(y,f){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ri(y,f){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function bn(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function uo(){return(uo=(0,m.Z)(function*(y,f=!1){const p=(0,V.m9)(y),E=yield p.getIdToken(f),A=it(E);K(A&&A.exp&&A.auth_time&&A.iat,p.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,Q=null==O?void 0:O.sign_in_provider;return{claims:A,token:E,authTime:bn($t(A.auth_time)),issuedAtTime:bn($t(A.iat)),expirationTime:bn($t(A.exp)),signInProvider:Q||null,signInSecondFactor:(null==O?void 0:O.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function it(y){var f;const[p,E,A]=y.split(".");if(void 0===p||void 0===E||void 0===A)return Ze("JWT malformed, contained fewer than 3 sections"),null;try{const O=(0,V.tV)(E);return O?JSON.parse(O):(Ze("Failed to decode base64 JWT payload"),null)}catch(O){return Ze("Caught error parsing JWT payload as JSON",null===(f=O)||void 0===f?void 0:f.toString()),null}}function Er(y,f){return oi.apply(this,arguments)}function oi(){return(oi=(0,m.Z)(function*(y,f,p=!1){if(p)return f;try{return yield f}catch(E){throw E instanceof V.ZR&&Vt(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class Fs{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var p;if(f){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(p=this.user.stsTokenManager.expirationTime)&&void 0!==p?p:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var p=this;if(!this.isRunning)return;const E=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield p.iteration()}),E)}iteration(){var f=this;return(0,m.Z)(function*(){var p;try{yield f.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(p=E)||void 0===p?void 0:p.code)&&f.schedule(!0))}f.schedule()})()}}class Cr{constructor(f,p){this.createdAt=f,this.lastLoginAt=p,this._initializeTime()}_initializeTime(){this.lastSignInTime=bn(this.lastLoginAt),this.creationTime=bn(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Mr(y){return ct.apply(this,arguments)}function ct(){return(ct=(0,m.Z)(function*(y){var f;const p=y.auth,E=yield y.getIdToken(),A=yield Er(y,Ri(p,{idToken:E}));K(null==A?void 0:A.users.length,p,"internal-error");const O=A.users[0];y._notifyReloadListener(O);const Q=(null===(f=O.providerUserInfo)||void 0===f?void 0:f.length)?H(O.providerUserInfo):[],he=Y(y.providerData,Q),gt=!!y.isAnonymous&&!(y.email&&O.passwordHash||(null==he?void 0:he.length)),dt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:he,metadata:new Cr(O.createdAt,O.lastLoginAt),isAnonymous:gt};Object.assign(y,dt)})).apply(this,arguments)}function $(){return($=(0,m.Z)(function*(y){const f=(0,V.m9)(y);yield Mr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function Y(y,f){return[...y.filter(E=>!f.some(A=>A.providerId===E.providerId)),...f]}function H(y){return y.map(f=>{var{providerId:p}=f,E=(0,ie._T)(f,["providerId"]);return{providerId:p,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Z(){return(Z=(0,m.Z)(function*(y,f){const p=yield ii(y,{},(0,m.Z)(function*(){const E=(0,V.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:O}=y.config,Q=ks(y,A,"/v1/token",`key=${O}`),he=yield y._getAdditionalHeaders();return he["Content-Type"]="application/x-www-form-urlencoded",rn.fetch()(Q,{method:"POST",headers:he,body:E})}));return{accessToken:p.access_token,expiresIn:p.expires_in,refreshToken:p.refresh_token}})).apply(this,arguments)}class xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){K(f.idToken,"internal-error"),K(void 0!==f.idToken,"internal-error"),K(void 0!==f.refreshToken,"internal-error");const p="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function wt(y){const f=it(y);return K(f,"internal-error"),K(void 0!==f.exp,"internal-error"),K(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,p)}getToken(f,p=!1){var E=this;return(0,m.Z)(function*(){return K(!E.accessToken||E.refreshToken,f,"user-token-expired"),p||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(f,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,p){var E=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:Q}=yield function q(y,f){return Z.apply(this,arguments)}(f,p);E.updateTokensAndExpiration(A,O,Number(Q))})()}updateTokensAndExpiration(f,p,E){this.refreshToken=p||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(f,p){const{refreshToken:E,accessToken:A,expirationTime:O}=p,Q=new xe;return E&&(K("string"==typeof E,"internal-error",{appName:f}),Q.refreshToken=E),A&&(K("string"==typeof A,"internal-error",{appName:f}),Q.accessToken=A),O&&(K("number"==typeof O,"internal-error",{appName:f}),Q.expirationTime=O),Q}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new xe,this.toJSON())}_performRefresh(){return we("not implemented")}}function Le(y,f){K("string"==typeof y||void 0===y,"internal-error",{appName:f})}class ot{constructor(f){var{uid:p,auth:E,stsTokenManager:A}=f,O=(0,ie._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Fs(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=p,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Cr(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(f){var p=this;return(0,m.Z)(function*(){const E=yield Er(p,p.stsTokenManager.getToken(p.auth,f));return K(E,p.auth,"internal-error"),p.accessToken!==E&&(p.accessToken=E,yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)),E})()}getIdTokenResult(f){return function si(y){return uo.apply(this,arguments)}(this,f)}reload(){return function Ls(y){return $.apply(this,arguments)}(this)}_assign(f){this!==f&&(K(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(p=>Object.assign({},p)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new ot(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,p=!1){var E=this;return(0,m.Z)(function*(){let A=!1;f.idToken&&f.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(f),A=!0),p&&(yield Mr(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var f=this;return(0,m.Z)(function*(){const p=yield f.getIdToken();return yield Er(f,function _t(y,f){return Wr.apply(this,arguments)}(f.auth,{idToken:p})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,p){var E,A,O,Q,he,ke,Ke,gt;const dt=null!==(E=p.displayName)&&void 0!==E?E:void 0,$n=null!==(A=p.email)&&void 0!==A?A:void 0,mr=null!==(O=p.phoneNumber)&&void 0!==O?O:void 0,cl=null!==(Q=p.photoURL)&&void 0!==Q?Q:void 0,Em=null!==(he=p.tenantId)&&void 0!==he?he:void 0,ns=null!==(ke=p._redirectEventId)&&void 0!==ke?ke:void 0,ha=null!==(Ke=p.createdAt)&&void 0!==Ke?Ke:void 0,_r=null!==(gt=p.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:Pf,emailVerified:qd,isAnonymous:Cm,providerData:Of,stsTokenManager:Im}=p;K(Pf&&Im,f,"internal-error");const nv=xe.fromJSON(this.name,Im);K("string"==typeof Pf,f,"internal-error"),Le(dt,f.name),Le($n,f.name),K("boolean"==typeof qd,f,"internal-error"),K("boolean"==typeof Cm,f,"internal-error"),Le(mr,f.name),Le(cl,f.name),Le(Em,f.name),Le(ns,f.name),Le(ha,f.name),Le(_r,f.name);const dl=new ot({uid:Pf,auth:f,email:$n,emailVerified:qd,displayName:dt,isAnonymous:Cm,photoURL:cl,phoneNumber:mr,tenantId:Em,stsTokenManager:nv,createdAt:ha,lastLoginAt:_r});return Of&&Array.isArray(Of)&&(dl.providerData=Of.map(bm=>Object.assign({},bm))),ns&&(dl._redirectEventId=ns),dl}static _fromIdTokenResponse(f,p,E=!1){return(0,m.Z)(function*(){const A=new xe;A.updateFromServerResponse(p);const O=new ot({uid:p.localId,auth:f,stsTokenManager:A,isAnonymous:E});return yield Mr(O),O})()}}const Kt=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(p,E){var A=this;return(0,m.Z)(function*(){A.storage[p]=E})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=E.storage[p];return void 0===A?null:A})()}_remove(p){var E=this;return(0,m.Z)(function*(){delete E.storage[p]})()}_addListener(p,E){}_removeListener(p,E){}}return y.type="NONE",y})();function sr(y,f,p){return`firebase:${y}:${f}:${p}`}class Nt{constructor(f,p,E){this.persistence=f,this.auth=p,this.userKey=E;const{config:A,name:O}=this.auth;this.fullUserKey=sr(this.userKey,A.apiKey,O),this.fullPersistenceKey=sr("persistence",A.apiKey,O),this.boundEventHandler=p._onStorageEvent.bind(p),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const p=yield f.persistence._get(f.fullUserKey);return p?ot._fromJSON(f.auth,p):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var p=this;return(0,m.Z)(function*(){if(p.persistence===f)return;const E=yield p.getCurrentUser();return yield p.removeCurrentUser(),p.persistence=f,E?p.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,p,E="authUser"){return(0,m.Z)(function*(){if(!p.length)return new Nt(te(Kt),f,E);const A=(yield Promise.all(p.map(function(){var Ke=(0,m.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let O=A[0]||te(Kt);const Q=sr(E,f.config.apiKey,f.name);let he=null;for(const Ke of p)try{const gt=yield Ke._get(Q);if(gt){const dt=ot._fromJSON(f,gt);Ke!==O&&(he=dt),O=Ke;break}}catch(gt){}const ke=A.filter(Ke=>Ke._shouldAllowMigration);return O._shouldAllowMigration&&ke.length?(O=ke[0],he&&(yield O._set(Q,he.toJSON())),yield Promise.all(p.map(function(){var Ke=(0,m.Z)(function*(gt){if(gt!==O)try{yield gt._remove(Q)}catch(dt){}});return function(gt){return Ke.apply(this,arguments)}}())),new Nt(O,f,E)):new Nt(O,f,E)})()}}function ai(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Zn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Ni(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(fs(f))return"Blackberry";if(Yn(f))return"Webos";if(jo(f))return"Safari";if((f.includes("chrome/")||ka(f))&&!f.includes("edge/"))return"Chrome";if(Nr(f))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function Ni(y=(0,V.z$)()){return/firefox\//i.test(y)}function jo(y=(0,V.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function ka(y=(0,V.z$)()){return/crios\//i.test(y)}function Zn(y=(0,V.z$)()){return/iemobile/i.test(y)}function Nr(y=(0,V.z$)()){return/android/i.test(y)}function fs(y=(0,V.z$)()){return/blackberry/i.test(y)}function Yn(y=(0,V.z$)()){return/webos/i.test(y)}function qr(y=(0,V.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function Vs(y=(0,V.z$)()){return qr(y)||Nr(y)||Yn(y)||fs(y)||/windows phone/i.test(y)||Zn(y)}function Ho(y,f=[]){let p;switch(y){case"Browser":p=ai((0,V.z$)());break;case"Worker":p=`${ai((0,V.z$)())}-${y}`;break;default:p=y}const E=f.length?f.join(","):"FirebaseCore-web";return`${p}/JsCore/${ce.SDK_VERSION}/${E}`}class zr{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,p){const E=O=>new Promise((Q,he)=>{try{Q(f(O))}catch(ke){he(ke)}});E.onAbort=p,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var p=this;return(0,m.Z)(function*(){var E;if(p.auth.currentUser===f)return;const A=[];try{for(const O of p.queue)yield O(f),O.onAbort&&A.push(O.onAbort)}catch(O){A.reverse();for(const Q of A)try{Q()}catch(he){}throw p.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=O)||void 0===E?void 0:E.message})}})()}}class ze{constructor(f,p,E){this.app=f,this.heartbeatServiceProvider=p,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new zr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ge,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(f,p){var E=this;return p&&(this._popupRedirectResolver=te(p)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,O;if(!E._deleted&&(E.persistenceManager=yield Nt.create(E,f),!E._deleted)){if(null===(A=E._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Q){}yield E.initializeCurrentUser(p),E.lastNotifiedUid=(null===(O=E.currentUser)||void 0===O?void 0:O.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const p=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||p){if(f.currentUser&&p&&f.currentUser.uid===p.uid)return f._currentUser._assign(p),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(p,!0)}})()}initializeCurrentUser(f){var p=this;return(0,m.Z)(function*(){var E;const A=yield p.assertedPersistence.getCurrentUser();let O=A,Q=!1;if(f&&p.config.authDomain){yield p.getOrInitRedirectPersistenceManager();const he=null===(E=p.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=null==O?void 0:O._redirectEventId,Ke=yield p.tryRedirectSignIn(f);(!he||he===ke)&&(null==Ke?void 0:Ke.user)&&(O=Ke.user,Q=!0)}if(!O)return p.directlySetCurrentUser(null);if(!O._redirectEventId){if(Q)try{yield p.beforeStateQueue.runMiddleware(O)}catch(he){O=A,p._popupRedirectResolver._overrideRedirectResult(p,()=>Promise.reject(he))}return O?p.reloadAndSetCurrentUserOrClear(O):p.directlySetCurrentUser(null)}return K(p._popupRedirectResolver,p,"argument-error"),yield p.getOrInitRedirectPersistenceManager(),p.redirectUser&&p.redirectUser._redirectEventId===O._redirectEventId?p.directlySetCurrentUser(O):p.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(f){var p=this;return(0,m.Z)(function*(){let E=null;try{E=yield p._popupRedirectResolver._completeRedirectFn(p,f,!0)}catch(A){yield p._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(f){var p=this;return(0,m.Z)(function*(){var E;try{yield Mr(f)}catch(A){if("auth/network-request-failed"!==(null===(E=A)||void 0===E?void 0:E.code))return p.directlySetCurrentUser(null)}return p.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Ye(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var p=this;return(0,m.Z)(function*(){const E=f?(0,V.m9)(f):null;return E&&K(E.auth.config.apiKey===p.config.apiKey,p,"invalid-user-token"),p._updateCurrentUser(E&&E._clone(p))})()}_updateCurrentUser(f,p=!1){var E=this;return(0,m.Z)(function*(){if(!E._deleted)return f&&K(E.tenantId===f.tenantId,E,"tenant-id-mismatch"),p||(yield E.beforeStateQueue.runMiddleware(f)),E.queue((0,m.Z)(function*(){yield E.directlySetCurrentUser(f),E.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var p=this;return this.queue((0,m.Z)(function*(){yield p.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new V.LL("auth","Firebase",f())}onAuthStateChanged(f,p,E){return this.registerStateListener(this.authStateSubscription,f,p,E)}beforeAuthStateChanged(f,p){return this.beforeStateQueue.pushCallback(f,p)}onIdTokenChanged(f,p,E){return this.registerStateListener(this.idTokenSubscription,f,p,E)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,p){var E=this;return(0,m.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(p);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var p=this;return(0,m.Z)(function*(){if(!p.redirectPersistenceManager){const E=f&&te(f)||p._popupRedirectResolver;K(E,p,"argument-error"),p.redirectPersistenceManager=yield Nt.create(p,[te(E._redirectPersistence)],"redirectUser"),p.redirectUser=yield p.redirectPersistenceManager.getCurrentUser()}return p.redirectPersistenceManager})()}_redirectUserForId(f){var p=this;return(0,m.Z)(function*(){var E,A;return p._isInitialized&&(yield p.queue((0,m.Z)(function*(){}))),(null===(E=p._currentUser)||void 0===E?void 0:E._redirectEventId)===f?p._currentUser:(null===(A=p.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?p.redirectUser:null})()}_persistUserIfCurrent(f){var p=this;return(0,m.Z)(function*(){if(f===p.currentUser)return p.queue((0,m.Z)(function*(){return p.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,p;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(p=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==p?p:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,p,E,A){if(this._deleted)return()=>{};const O="function"==typeof p?p:p.next.bind(p),Q=this._isInitialized?Promise.resolve():this._initializationPromise;return K(Q,this,"internal-error"),Q.then(()=>O(this.currentUser)),"function"==typeof p?f.addObserver(p,E,A):f.addObserver(p)}directlySetCurrentUser(f){var p=this;return(0,m.Z)(function*(){p.currentUser&&p.currentUser!==f&&p._currentUser._stopProactiveRefresh(),f&&p.isProactiveRefreshEnabled&&f._startProactiveRefresh(),p.currentUser=f,f?yield p.assertedPersistence.setCurrentUser(f):yield p.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Ho(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var p;const E={"X-Client-Version":f.clientVersion};f.app.options.appId&&(E["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(p=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===p?void 0:p.getHeartbeatsHeader();return A&&(E["X-Firebase-Client"]=A),E})()}}function at(y){return(0,V.m9)(y)}class on{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,V.ne)(p=>this.observer=p)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Pi(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Oi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class yi{constructor(f,p){this.providerId=f,this.signInMethod=p}toJSON(){return we("not implemented")}_getIdTokenResponse(f){return we("not implemented")}_linkToIdToken(f,p){return we("not implemented")}_getReauthenticationResolver(f){return we("not implemented")}}function Mn(y,f){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",zt(y,f))})).apply(this,arguments)}function $o(y,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ku(y,f){return Us.apply(this,arguments)}function Us(){return(Us=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",zt(y,f))})).apply(this,arguments)}function co(){return(co=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithPassword",zt(y,f))})).apply(this,arguments)}function Bs(y,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",zt(y,f))})).apply(this,arguments)}function ln(y,f){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,m.Z)(function*(y,f){return Bs(y,f)})).apply(this,arguments)}function La(y,f){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,m.Z)(function*(y,f){return Bs(y,f)})).apply(this,arguments)}function ki(y,f){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,m.Z)(function*(y,f){return Bs(y,f)})).apply(this,arguments)}function ld(y,f){return Fi.apply(this,arguments)}function Fi(){return(Fi=(0,m.Z)(function*(y,f){return Bs(y,f)})).apply(this,arguments)}function Kl(){return(Kl=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,f))})).apply(this,arguments)}function cd(){return(cd=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithEmailLink",zt(y,f))})).apply(this,arguments)}class br extends yi{constructor(f,p,E,A=null){super("password",E),this._email=f,this._password=p,this._tenantId=A}static _fromEmailAndPassword(f,p){return new br(f,p,"password")}static _fromEmailAndCode(f,p,E=null){return new br(f,p,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f;if((null==p?void 0:p.email)&&(null==p?void 0:p.password)){if("password"===p.signInMethod)return this._fromEmailAndPassword(p.email,p.password);if("emailLink"===p.signInMethod)return this._fromEmailAndCode(p.email,p.password,p.tenantId)}return null}_getIdTokenResponse(f){var p=this;return(0,m.Z)(function*(){switch(p.signInMethod){case"password":return function or(y,f){return co.apply(this,arguments)}(f,{returnSecureToken:!0,email:p._email,password:p._password});case"emailLink":return function Li(y,f){return Kl.apply(this,arguments)}(f,{email:p._email,oobCode:p._password});default:Se(f,"internal-error")}})()}_linkToIdToken(f,p){var E=this;return(0,m.Z)(function*(){switch(E.signInMethod){case"password":return $o(f,{idToken:p,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Pg(y,f){return cd.apply(this,arguments)}(f,{idToken:p,email:E._email,oobCode:E._password});default:Se(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function js(y,f){return dd.apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithIdp",zt(y,f))})).apply(this,arguments)}class gs extends yi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const p=new gs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(p.idToken=f.idToken),f.accessToken&&(p.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(p.nonce=f.nonce),f.pendingToken&&(p.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(p.accessToken=f.oauthToken,p.secret=f.oauthTokenSecret):Se("argument-error"),p}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A}=p,O=(0,ie._T)(p,["providerId","signInMethod"]);if(!E||!A)return null;const Q=new gs(E,A);return Q.idToken=O.idToken||void 0,Q.accessToken=O.accessToken||void 0,Q.secret=O.secret,Q.nonce=O.nonce,Q.pendingToken=O.pendingToken||null,Q}_getIdTokenResponse(f){return js(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,js(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,js(f,p)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const p={};this.idToken&&(p.id_token=this.idToken),this.accessToken&&(p.access_token=this.accessToken),this.secret&&(p.oauth_token_secret=this.secret),p.providerId=this.providerId,this.nonce&&!this.pendingToken&&(p.nonce=this.nonce),f.postBody=(0,V.xO)(p)}return f}}function kg(y,f){return hd.apply(this,arguments)}function hd(){return(hd=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",zt(y,f))})).apply(this,arguments)}function Hs(){return(Hs=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,f))})).apply(this,arguments)}function fd(){return(fd=(0,m.Z)(function*(y,f){const p=yield $r(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,f));if(p.temporaryProof)throw _i(y,"account-exists-with-different-credential",p);return p})).apply(this,arguments)}const Lg={USER_NOT_FOUND:"user-not-found"};function pd(){return(pd=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithPhoneNumber",zt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Lg)})).apply(this,arguments)}class Go extends yi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,p){return new Go({verificationId:f,verificationCode:p})}static _fromTokenResponse(f,p){return new Go({phoneNumber:f,temporaryProof:p})}_getIdTokenResponse(f){return function Zl(y,f){return Hs.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,p){return function Fg(y,f){return fd.apply(this,arguments)}(f,Object.assign({idToken:p},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Vg(y,f){return pd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:p,verificationId:E,verificationCode:A}=this.params;return f&&p?{temporaryProof:f,phoneNumber:p}:{sessionInfo:E,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:O}=f;return E||p||A||O?new Go({verificationId:p,verificationCode:E,phoneNumber:A,temporaryProof:O}):null}}class Vu{constructor(f){var p,E,A,O,Q,he;const ke=(0,V.zd)((0,V.pd)(f)),Ke=null!==(p=ke.apiKey)&&void 0!==p?p:null,gt=null!==(E=ke.oobCode)&&void 0!==E?E:null,dt=function Xh(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ke.mode)&&void 0!==A?A:null);K(Ke&&gt&&dt,"argument-error"),this.apiKey=Ke,this.operation=dt,this.code=gt,this.continueUrl=null!==(O=ke.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(Q=ke.languageCode)&&void 0!==Q?Q:null,this.tenantId=null!==(he=ke.tenantId)&&void 0!==he?he:null}static parseLink(f){const p=function Va(y){const f=(0,V.zd)((0,V.pd)(y)).link,p=f?(0,V.zd)((0,V.pd)(f)).deep_link_id:null,E=(0,V.zd)((0,V.pd)(y)).deep_link_id;return(E?(0,V.zd)((0,V.pd)(E)).link:null)||E||p||f||y}(f);try{return new Vu(p)}catch(E){return null}}}let md=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(p,E){return br._fromEmailAndPassword(p,E)}static credentialWithLink(p,E){const A=Vu.parseLink(E);return K(A,"argument-error"),br._fromEmailAndCode(p,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Dr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class ho extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Vi extends ho{static credentialFromJSON(f){const p="string"==typeof f?JSON.parse(f):f;return K("providerId"in p&&"signInMethod"in p,"argument-error"),gs._fromParams(p)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return K(f.idToken||f.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Vi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Vi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:p,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:O,nonce:Q,providerId:he}=f;if(!E&&!A&&!p&&!O||!he)return null;try{return new Vi(he)._credential({idToken:p,accessToken:E,nonce:Q,pendingToken:O})}catch(ke){return null}}}let Wo=(()=>{class y extends ho{constructor(){super("facebook.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),_d=(()=>{class y extends ho{constructor(){super("google.com"),this.addScope("profile")}static credential(p,E){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:p,accessToken:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:E,oauthAccessToken:A}=p;if(!E&&!A)return null;try{return y.credential(E,A)}catch(O){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ef=(()=>{class y extends ho{constructor(){super("github.com")}static credential(p){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:p})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p||!("oauthAccessToken"in p)||!p.oauthAccessToken)return null;try{return y.credential(p.oauthAccessToken)}catch(E){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class fo extends yi{constructor(f,p){super(f,f),this.pendingToken=p}_getIdTokenResponse(f){return js(f,this.buildRequest())}_linkToIdToken(f,p){const E=this.buildRequest();return E.idToken=p,js(f,E)}_getReauthenticationResolver(f){const p=this.buildRequest();return p.autoCreate=!1,js(f,p)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const p="string"==typeof f?JSON.parse(f):f,{providerId:E,signInMethod:A,pendingToken:O}=p;return E&&A&&O&&E===A?new fo(E,O):null}static _create(f,p){return new fo(f,p)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Pr extends Dr{constructor(f){K(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Pr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Pr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const p=fo.fromJSON(f);return K(p,"argument-error"),p}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:p,providerId:E}=f;if(!p||!E)return null;try{return fo._create(E,p)}catch(A){return null}}}let vd=(()=>{class y extends ho{constructor(){super("twitter.com")}static credential(p,E){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:p,oauthTokenSecret:E})}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=p;if(!E||!A)return null;try{return y.credential(E,A)}catch(O){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Or(y,f){return zo.apply(this,arguments)}function zo(){return(zo=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signUp",zt(y,f))})).apply(this,arguments)}class ui{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,p,E,A=!1){return(0,m.Z)(function*(){const O=yield ot._fromIdTokenResponse(f,E,A),Q=Yl(E);return new ui({user:O,providerId:Q,_tokenResponse:E,operationType:p})})()}static _forOperation(f,p,E){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(E,!0);const A=Yl(E);return new ui({user:f,providerId:A,_tokenResponse:E,operationType:p})})()}}function Yl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ql(){return(Ql=(0,m.Z)(function*(y){var f;const p=at(y);if(yield p._initializationPromise,null===(f=p.currentUser)||void 0===f?void 0:f.isAnonymous)return new ui({user:p.currentUser,providerId:null,operationType:"signIn"});const E=yield Or(p,{returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(p,"signIn",E,!0);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ko extends V.ZR{constructor(f,p,E,A){var O;super(p.code,p.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Ko.prototype),this.customData={appName:f.name,tenantId:null!==(O=f.tenantId)&&void 0!==O?O:void 0,_serverResponse:p.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(f,p,E,A){return new Ko(f,p,E,A)}}function Jl(y,f,p,E){return("reauthenticate"===f?p._getReauthenticationResolver(y):p._getIdTokenResponse(y)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?Ko._fromErrorAndOperation(y,O,f,E):O})}function Ui(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function an(){return(an=(0,m.Z)(function*(y,f){const p=(0,V.m9)(y);yield en(!0,p,f);const{providerUserInfo:E}=yield Rn(p.auth,{idToken:yield p.getIdToken(),deleteProvider:[f]}),A=Ui(E||[]);return p.providerData=p.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(p.phoneNumber=null),yield p.auth._persistUserIfCurrent(p),p})).apply(this,arguments)}function Ua(y,f){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(y,f,p=!1){const E=yield Er(y,f._linkToIdToken(y.auth,yield y.getIdToken()),p);return ui._forOperation(y,"link",E)})).apply(this,arguments)}function en(y,f,p){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(y,f,p){yield Mr(f);const A=!1===y?"provider-already-linked":"no-such-provider";K(Ui(f.providerData).has(p)===y,f.auth,A)})).apply(this,arguments)}function Uu(y,f){return $s.apply(this,arguments)}function $s(){return($s=(0,m.Z)(function*(y,f,p=!1){var E;const{auth:A}=y,O="reauthenticate";try{const Q=yield Er(y,Jl(A,O,f,y),p);K(Q.idToken,A,"internal-error");const he=it(Q.idToken);K(he,A,"internal-error");const{sub:ke}=he;return K(y.uid===ke,A,"user-mismatch"),ui._forOperation(y,O,Q)}catch(Q){throw"auth/user-not-found"===(null===(E=Q)||void 0===E?void 0:E.code)&&Se(A,"user-mismatch"),Q}})).apply(this,arguments)}function pr(y,f){return Xl.apply(this,arguments)}function Xl(){return(Xl=(0,m.Z)(function*(y,f,p=!1){const E="signIn",A=yield Jl(y,E,f),O=yield ui._fromIdTokenResponse(y,E,A);return p||(yield y._updateCurrentUser(O.user)),O})).apply(this,arguments)}function wn(y,f){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,m.Z)(function*(y,f){return pr(at(y),f)})).apply(this,arguments)}function gr(y,f){return go.apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(y,f){const p=(0,V.m9)(y);return yield en(!1,p,f.providerId),Ua(p,f)})).apply(this,arguments)}function ms(y,f){return ja.apply(this,arguments)}function ja(){return(ja=(0,m.Z)(function*(y,f){return Uu((0,V.m9)(y),f)})).apply(this,arguments)}function vi(y,f){return ji.apply(this,arguments)}function ji(){return(ji=(0,m.Z)(function*(y,f){return $r(y,"POST","/v1/accounts:signInWithCustomToken",zt(y,f))})).apply(this,arguments)}function pt(){return(pt=(0,m.Z)(function*(y,f){const p=at(y),E=yield vi(p,{token:f,returnSecureToken:!0}),A=yield ui._fromIdTokenResponse(p,"signIn",E);return yield p._updateCurrentUser(A.user),A})).apply(this,arguments)}class Yo{constructor(f,p){this.factorId=f,this.uid=p.mfaEnrollmentId,this.enrollmentTime=new Date(p.enrolledAt).toUTCString(),this.displayName=p.displayName}static _fromServerResponse(f,p){return"phoneInfo"in p?Bu._fromServerResponse(f,p):Se(f,"internal-error")}}class Bu extends Yo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,p){return new Bu(p)}}function Ha(y,f,p){var E;K((null===(E=p.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),K(void 0===p.dynamicLinkDomain||p.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=p.url,f.dynamicLinkDomain=p.dynamicLinkDomain,f.canHandleCodeInApp=p.handleCodeInApp,p.iOS&&(K(p.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=p.iOS.bundleId),p.android&&(K(p.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=p.android.installApp,f.androidMinimumVersionCode=p.android.minimumVersion,f.androidPackageName=p.android.packageName)}function $a(){return($a=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y),A={requestType:"PASSWORD_RESET",email:f};p&&Ha(E,A,p),yield La(E,A)})).apply(this,arguments)}function nc(){return(nc=(0,m.Z)(function*(y,f,p){yield Mn((0,V.m9)(y),{oobCode:f,newPassword:p})})).apply(this,arguments)}function Pt(){return(Pt=(0,m.Z)(function*(y,f){yield ku((0,V.m9)(y),{oobCode:f})})).apply(this,arguments)}function ju(y,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,m.Z)(function*(y,f){const p=(0,V.m9)(y),E=yield Mn(p,{oobCode:f}),A=E.requestType;switch(K(A,p,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(E.newEmail,p,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(E.mfaInfo,p,"internal-error");default:K(E.email,p,"internal-error")}let O=null;return E.mfaInfo&&(O=Yo._fromServerResponse(at(p),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function mo(){return(mo=(0,m.Z)(function*(y,f){const{data:p}=yield ju((0,V.m9)(y),f);return p.email})).apply(this,arguments)}function Ga(){return(Ga=(0,m.Z)(function*(y,f,p){const E=at(y),A=yield Or(E,{returnSecureToken:!0,email:f,password:p}),O=yield ui._fromIdTokenResponse(E,"signIn",A);return yield E._updateCurrentUser(O.user),O})).apply(this,arguments)}function Hu(){return(Hu=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};K(p.handleCodeInApp,E,"argument-error"),p&&Ha(E,A,p),yield ki(E,A)})).apply(this,arguments)}function Nn(){return(Nn=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y),A=md.credentialWithLink(f,p||Oe());return K(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),wn(E,A)})).apply(this,arguments)}function _s(y,f){return qa.apply(this,arguments)}function qa(){return(qa=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",zt(y,f))})).apply(this,arguments)}function wi(){return(wi=(0,m.Z)(function*(y,f){const E={identifier:f,continueUri:lt()?Oe():"http://localhost"},{signinMethods:A}=yield _s((0,V.m9)(y),E);return A||[]})).apply(this,arguments)}function Gu(){return(Gu=(0,m.Z)(function*(y,f){const p=(0,V.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&Ha(p.auth,A,f);const{email:O}=yield ln(p.auth,A);O!==y.email&&(yield y.reload())})).apply(this,arguments)}function Wu(){return(Wu=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};p&&Ha(E.auth,O,p);const{email:Q}=yield ld(E.auth,O);Q!==y.email&&(yield y.reload())})).apply(this,arguments)}function za(y,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Za(){return(Za=(0,m.Z)(function*(y,{displayName:f,photoURL:p}){if(void 0===f&&void 0===p)return;const E=(0,V.m9)(y),O={idToken:yield E.getIdToken(),displayName:f,photoUrl:p,returnSecureToken:!0},Q=yield Er(E,za(E.auth,O));E.displayName=Q.displayName||null,E.photoURL=Q.photoUrl||null;const he=E.providerData.find(({providerId:ke})=>"password"===ke);he&&(he.displayName=E.displayName,he.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Q)})).apply(this,arguments)}function Jo(y,f,p){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,m.Z)(function*(y,f,p){const{auth:E}=y,O={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(O.email=f),p&&(O.password=p);const Q=yield Er(y,$o(E,O));yield y._updateTokensIfNecessary(Q,!0)})).apply(this,arguments)}class Xo{constructor(f,p,E={}){this.isNewUser=f,this.providerId=p,this.profile=E}}class Cd extends Xo{constructor(f,p,E,A){super(f,p,E),this.username=A}}class ea extends Xo{constructor(f,p){super(f,"facebook.com",p)}}class Hi extends Cd{constructor(f,p){super(f,"github.com",p,"string"==typeof(null==p?void 0:p.login)?null==p?void 0:p.login:null)}}class nf extends Xo{constructor(f,p){super(f,"google.com",p)}}class ar extends Cd{constructor(f,p,E){super(f,"twitter.com",p,E)}}function $i(y){const{user:f,_tokenResponse:p}=y;return f.isAnonymous&&!p?{providerId:null,isNewUser:!1,profile:null}:function Ed(y){var f,p;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},O=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&(null==y?void 0:y.idToken)){const Q=null===(p=null===(f=it(y.idToken))||void 0===f?void 0:f.firebase)||void 0===p?void 0:p.sign_in_provider;if(Q)return new Xo(O,"anonymous"!==Q&&"custom"!==Q?Q:null)}if(!E)return null;switch(E){case"facebook.com":return new ea(O,A);case"github.com":return new Hi(O,A);case"google.com":return new nf(O,A);case"twitter.com":return new ar(O,A,y.screenName||null);case"custom":case"anonymous":return new Xo(O,null);default:return new Xo(O,E,A)}}(p)}class ys{constructor(f,p,E){this.type=f,this.credential=p,this.auth=E}static _fromIdtoken(f,p){return new ys("enroll",f,p)}static _fromMfaPendingCredential(f){return new ys("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var p,E;if(null==f?void 0:f.multiFactorSession){if(null===(p=f.multiFactorSession)||void 0===p?void 0:p.pendingCredential)return ys._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(E=f.multiFactorSession)||void 0===E?void 0:E.idToken)return ys._fromIdtoken(f.multiFactorSession.idToken)}return null}}class ta{constructor(f,p,E){this.session=f,this.hints=p,this.signInResolver=E}static _fromError(f,p){const E=at(f),A=p.customData._serverResponse,O=(A.mfaInfo||[]).map(he=>Yo._fromServerResponse(E,he));K(A.mfaPendingCredential,E,"internal-error");const Q=ys._fromMfaPendingCredential(A.mfaPendingCredential);return new ta(Q,O,function(){var he=(0,m.Z)(function*(ke){const Ke=yield ke._process(E,Q);delete A.mfaInfo,delete A.mfaPendingCredential;const gt=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(p.operationType){case"signIn":const dt=yield ui._fromIdTokenResponse(E,p.operationType,gt);return yield E._updateCurrentUser(dt.user),dt;case"reauthenticate":return K(p.user,E,"internal-error"),ui._forOperation(p.user,p.operationType,gt);default:Se(E,"internal-error")}});return function(ke){return he.apply(this,arguments)}}())}resolveSignIn(f){var p=this;return(0,m.Z)(function*(){return p.signInResolver(f)})()}}function sf(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",zt(y,f))}class Dd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(p=>{p.mfaInfo&&(this.enrolledFactors=p.mfaInfo.map(E=>Yo._fromServerResponse(f.auth,E)))})}static _fromUser(f){return new Dd(f)}getSession(){var f=this;return(0,m.Z)(function*(){return ys._fromIdtoken(yield f.user.getIdToken(),f.user.auth)})()}enroll(f,p){var E=this;return(0,m.Z)(function*(){const A=f,O=yield E.getSession(),Q=yield Er(E.user,A._process(E.user.auth,O,p));return yield E.user._updateTokensIfNecessary(Q),E.user.reload()})()}unenroll(f){var p=this;return(0,m.Z)(function*(){var E;const A="string"==typeof f?f:f.uid,O=yield p.user.getIdToken(),Q=yield Er(p.user,function qu(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",zt(y,f))}(p.user.auth,{idToken:O,mfaEnrollmentId:A}));p.enrolledFactors=p.enrolledFactors.filter(({uid:he})=>he!==A),yield p.user._updateTokensIfNecessary(Q);try{yield p.user.reload()}catch(he){if("auth/user-token-expired"!==(null===(E=he)||void 0===E?void 0:E.code))throw he}})()}}const zu=new WeakMap,yo="__sak";class Td{constructor(f,p){this.storageRetriever=f,this.type=p}_isAvailable(){try{return this.storage?(this.storage.setItem(yo,"1"),this.storage.removeItem(yo),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,p){return this.storage.setItem(f,JSON.stringify(p)),Promise.resolve()}_get(f){const p=this.storage.getItem(f);return Promise.resolve(p?JSON.parse(p):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const ut=(()=>{class y extends Td{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(p,E)=>this.onStorageEvent(p,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Hg(){const y=(0,V.z$)();return jo(y)||qr(y)}()&&function fr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Vs(),this._shouldAllowMigration=!0}forAllChangedKeys(p){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),O=this.localCache[E];A!==O&&p(E,O,A)}}onStorageEvent(p,E=!1){if(!p.key)return void this.forAllChangedKeys((he,ke,Ke)=>{this.notifyListeners(he,Ke)});const A=p.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const he=this.storage.getItem(A);if(p.newValue!==he)null!==p.newValue?this.storage.setItem(A,p.newValue):this.storage.removeItem(A);else if(this.localCache[A]===p.newValue&&!E)return}const O=()=>{const he=this.storage.getItem(A);!E&&this.localCache[A]===he||this.notifyListeners(A,he)},Q=this.storage.getItem(A);!function Fa(){return(0,V.w1)()&&10===document.documentMode}()||Q===p.newValue||p.newValue===p.oldValue?O():setTimeout(O,10)}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const O of Array.from(A))O(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((p,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:p,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(p,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[p]||(this.listeners[p]=new Set,this.localCache[p]=this.storage.getItem(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(p,E){var A=()=>super._set,O=this;return(0,m.Z)(function*(){yield A().call(O,p,E),O.localCache[p]=JSON.stringify(E)})()}_get(p){var E=()=>super._get,A=this;return(0,m.Z)(function*(){const O=yield E().call(A,p);return A.localCache[p]=JSON.stringify(O),O})()}_remove(p){var E=()=>super._remove,A=this;return(0,m.Z)(function*(){yield E().call(A,p),delete A.localCache[p]})()}}return y.type="LOCAL",y})(),cn=(()=>{class y extends Td{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(p,E){}_removeListener(p,E){}}return y.type="SESSION",y})();let vo=(()=>{class y{constructor(p){this.eventTarget=p,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(p){const E=this.receivers.find(O=>O.isListeningto(p));if(E)return E;const A=new y(p);return this.receivers.push(A),A}isListeningto(p){return this.eventTarget===p}handleEvent(p){var E=this;return(0,m.Z)(function*(){const A=p,{eventId:O,eventType:Q,data:he}=A.data,ke=E.handlersMap[Q];if(!(null==ke?void 0:ke.size))return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:Q});const Ke=Array.from(ke).map(function(){var dt=(0,m.Z)(function*($n){return $n(A.origin,he)});return function($n){return dt.apply(this,arguments)}}()),gt=yield function Ja(y){return Promise.all(y.map(function(){var f=(0,m.Z)(function*(p){try{return{fulfilled:!0,value:yield p}}catch(E){return{fulfilled:!1,reason:E}}});return function(p){return f.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:O,eventType:Q,response:gt})})()}_subscribe(p,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[p]||(this.handlersMap[p]=new Set),this.handlersMap[p].add(E)}_unsubscribe(p,E){this.handlersMap[p]&&E&&this.handlersMap[p].delete(E),(!E||0===this.handlersMap[p].size)&&delete this.handlersMap[p],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function fn(y="",f=10){let p="";for(let E=0;E<f;E++)p+=Math.floor(10*Math.random());return y+p}class Pn{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,p,E=50){var A=this;return(0,m.Z)(function*(){const O="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let Q,he;return new Promise((ke,Ke)=>{const gt=fn("",20);O.port1.start();const dt=setTimeout(()=>{Ke(new Error("unsupported_event"))},E);he={messageChannel:O,onMessage($n){const mr=$n;if(mr.data.eventId===gt)switch(mr.data.status){case"ack":clearTimeout(dt),Q=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(Q),ke(mr.data.response);break;default:clearTimeout(dt),clearTimeout(Q),Ke(new Error("invalid_response"))}}},A.handlers.add(he),O.port1.addEventListener("message",he.onMessage),A.target.postMessage({eventType:f,eventId:gt,data:p},[O.port2])}).finally(()=>{he&&A.removeMessageHandler(he)})})()}}function Gt(){return window}function Ws(){return void 0!==Gt().WorkerGlobalScope&&"function"==typeof Gt().importScripts}function ci(){return(ci=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Zu="firebaseLocalStorageDb",vs="firebaseLocalStorage",eu="fbase_key";class lr{constructor(f){this.request=f}toPromise(){return new Promise((f,p)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{p(this.request.error)})})}}function ra(y,f){return y.transaction([vs],f?"readwrite":"readonly").objectStore(vs)}function Yu(){const y=indexedDB.open(Zu,1);return new Promise((f,p)=>{y.addEventListener("error",()=>{p(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(vs,{keyPath:eu})}catch(A){p(A)}}),y.addEventListener("success",(0,m.Z)(function*(){const E=y.result;E.objectStoreNames.contains(vs)?f(E):(E.close(),yield function lc(){const y=indexedDB.deleteDatabase(Zu);return new lr(y).toPromise()}(),f(yield Yu()))}))})}function ia(y,f,p){return tu.apply(this,arguments)}function tu(){return(tu=(0,m.Z)(function*(y,f,p){const E=ra(y,!0).put({[eu]:f,value:p});return new lr(E).toPromise()})).apply(this,arguments)}function ru(){return(ru=(0,m.Z)(function*(y,f){const p=ra(y,!1).get(f),E=yield new lr(p).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function wo(y,f){const p=ra(y,!0).delete(f);return new lr(p).toPromise()}const Gi=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var p=this;return(0,m.Z)(function*(){return p.db||(p.db=yield Yu()),p.db})()}_withRetries(p){var E=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const O=yield E._openDb();return yield p(O)}catch(O){if(A++>3)throw O;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var p=this;return(0,m.Z)(function*(){return Ws()?p.initializeReceiver():p.initializeSender()})()}initializeReceiver(){var p=this;return(0,m.Z)(function*(){p.receiver=vo._getInstance(function af(){return Ws()?self:null}()),p.receiver._subscribe("keyChanged",function(){var E=(0,m.Z)(function*(A,O){return{keyProcessed:(yield p._poll()).includes(O.key)}});return function(A,O){return E.apply(this,arguments)}}()),p.receiver._subscribe("ping",function(){var E=(0,m.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return E.apply(this,arguments)}}())})()}initializeSender(){var p=this;return(0,m.Z)(function*(){var E,A;if(p.activeServiceWorker=yield function uc(){return ci.apply(this,arguments)}(),!p.activeServiceWorker)return;p.sender=new Pn(p.activeServiceWorker);const O=yield p.sender._send("ping",{},800);!O||(null===(E=O[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=O[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(p.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(p){var E=this;return(0,m.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Sd(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:p},E.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const p=yield Yu();return yield ia(p,yo,"1"),yield wo(p,yo),!0}catch(p){}return!1})()}_withPendingWrite(p){var E=this;return(0,m.Z)(function*(){E.pendingWrites++;try{yield p()}finally{E.pendingWrites--}})()}_set(p,E){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(O=>ia(O,p,E)),A.localCache[p]=E,A.notifyServiceWorker(p)}))})()}_get(p){var E=this;return(0,m.Z)(function*(){const A=yield E._withRetries(O=>function nu(y,f){return ru.apply(this,arguments)}(O,p));return E.localCache[p]=A,A})()}_remove(p){var E=this;return(0,m.Z)(function*(){return E._withPendingWrite((0,m.Z)(function*(){return yield E._withRetries(A=>wo(A,p)),delete E.localCache[p],E.notifyServiceWorker(p)}))})()}_poll(){var p=this;return(0,m.Z)(function*(){const E=yield p._withRetries(Q=>{const he=ra(Q,!1).getAll();return new lr(he).toPromise()});if(!E)return[];if(0!==p.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:Q,value:he}of E)O.add(Q),JSON.stringify(p.localCache[Q])!==JSON.stringify(he)&&(p.notifyListeners(Q,he),A.push(Q));for(const Q of Object.keys(p.localCache))p.localCache[Q]&&!O.has(Q)&&(p.notifyListeners(Q,null),A.push(Q));return A})()}notifyListeners(p,E){this.localCache[p]=E;const A=this.listeners[p];if(A)for(const O of Array.from(A))O(E)}startPolling(){var p=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return p._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(p,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[p]||(this.listeners[p]=new Set,this._get(p)),this.listeners[p].add(E)}_removeListener(p,E){this.listeners[p]&&(this.listeners[p].delete(E),0===this.listeners[p].size&&delete this.listeners[p]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function iu(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",zt(y,f))}function Co(){return(Co=(0,m.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function qi(y){return new Promise((f,p)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=f,E.onerror=A=>{const O=Ee("internal-error");O.customData=A,p(O)},E.type="text/javascript",E.charset="UTF-8",function su(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(E)})}function Io(y){return`__${y}${Math.floor(1e6*Math.random())}`}const bo=1e12;class Ju{constructor(f){this.auth=f,this.counter=bo,this._widgets=new Map}render(f,p){const E=this.counter;return this._widgets.set(E,new $y(f,this.auth.name,p||{})),this.counter++,E}reset(f){var p;const E=f||bo;null===(p=this._widgets.get(E))||void 0===p||p.delete(),this._widgets.delete(E)}getResponse(f){var p;return(null===(p=this._widgets.get(f||bo))||void 0===p?void 0:p.getResponse())||""}execute(f){var p=this;return(0,m.Z)(function*(){var E;return null===(E=p._widgets.get(f||bo))||void 0===E||E.execute(),""})()}}class $y{constructor(f,p,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;K(A,"argument-error",{appName:p}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function $g(y){const f=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)f.push(p.charAt(Math.floor(Math.random()*p.length)));return f.join("")}(50);const{callback:f,"expired-callback":p}=this.params;if(f)try{f(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,p)try{p()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const En=Io("rcb"),uf=new nn(3e4,6e4);class cc{constructor(){var f;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(f=Gt().grecaptcha)||void 0===f?void 0:f.render)}load(f,p=""){return K(function lf(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(p),f,"argument-error"),this.shouldResolveImmediately(p)?Promise.resolve(Gt().grecaptcha):new Promise((E,A)=>{const O=Gt().setTimeout(()=>{A(Ee(f,"network-request-failed"))},uf.get());Gt()[En]=()=>{Gt().clearTimeout(O),delete Gt()[En];const he=Gt().grecaptcha;if(!he)return void A(Ee(f,"internal-error"));const ke=he.render;he.render=(Ke,gt)=>{const dt=ke(Ke,gt);return this.counter++,dt},this.hostLanguage=p,E(he)},qi(`https://www.google.com/recaptcha/api.js??${(0,V.xO)({onload:En,render:"explicit",hl:p})}`).catch(()=>{clearTimeout(O),A(Ee(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){var p;return!!(null===(p=Gt().grecaptcha)||void 0===p?void 0:p.render)&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class cf{load(f){return(0,m.Z)(function*(){return new Ju(f)})()}clearedOneInstance(){}}const df="recaptcha",Gy={theme:"light",type:"image"};class oa{constructor(f,p=Object.assign({},Gy),E){this.parameters=p,this.type=df,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=at(E),this.isInvisible="invisible"===this.parameters.size,K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;K(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new cf:new cc,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const p=yield f.render(),E=f.getAssertedRecaptcha();return E.getResponse(p)||new Promise(O=>{const Q=he=>{!he||(f.tokenChangeListeners.delete(Q),O(he))};f.tokenChangeListeners.add(Q),f.isInvisible&&E.execute(p)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return p=>{if(this.tokenChangeListeners.forEach(E=>E(p)),"function"==typeof f)f(p);else if("string"==typeof f){const E=Gt()[f];"function"==typeof E&&E(p)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let p=f.container;if(!f.isInvisible){const E=document.createElement("div");p.appendChild(E),p=E}f.widgetId=f.getAssertedRecaptcha().render(p,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){K(lt()&&!Ws(),f.auth,"internal-error"),yield function Wg(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const p=yield function Wi(y){return Co.apply(this,arguments)}(f.auth);K(p,f.auth,"internal-error"),f.parameters.sitekey=p})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class jn{constructor(f,p){this.verificationId=f,this.onConfirmation=p}confirm(f){const p=Go._fromVerification(this.verificationId,f);return this.onConfirmation(p)}}function zs(){return(zs=(0,m.Z)(function*(y,f,p){const E=at(y),A=yield Do(E,f,(0,V.m9)(p));return new jn(A,O=>wn(E,O))})).apply(this,arguments)}function Ad(){return(Ad=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y);yield en(!1,E,"phone");const A=yield Do(E.auth,f,(0,V.m9)(p));return new jn(A,O=>gr(E,O))})).apply(this,arguments)}function Hn(){return(Hn=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y),A=yield Do(E.auth,f,(0,V.m9)(p));return new jn(A,O=>ms(E,O))})).apply(this,arguments)}function Do(y,f,p){return Es.apply(this,arguments)}function Es(){return(Es=(0,m.Z)(function*(y,f,p){var E;const A=yield p.verify();try{let O;if(K("string"==typeof A,y,"argument-error"),K(p.type===df,y,"argument-error"),O="string"==typeof f?{phoneNumber:f}:f,"session"in O){const Q=O.session;if("phoneNumber"in O)return K("enroll"===Q.type,y,"internal-error"),(yield sf(y,{idToken:Q.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{K("signin"===Q.type,y,"internal-error");const he=(null===(E=O.multiFactorHint)||void 0===E?void 0:E.uid)||O.multiFactorUid;return K(he,y,"missing-multi-factor-info"),(yield iu(y,{mfaPendingCredential:Q.credential,mfaEnrollmentId:he,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Q}=yield kg(y,{phoneNumber:O.phoneNumber,recaptchaToken:A});return Q}}finally{p._reset()}})).apply(this,arguments)}function Tn(){return(Tn=(0,m.Z)(function*(y,f){yield Ua((0,V.m9)(y),f)})).apply(this,arguments)}let ou=(()=>{class y{constructor(p){this.providerId=y.PROVIDER_ID,this.auth=at(p)}verifyPhoneNumber(p,E){return Do(this.auth,p,(0,V.m9)(E))}static credential(p,E){return Go._fromVerification(p,E)}static credentialFromResult(p){return y.credentialFromTaggedObject(p)}static credentialFromError(p){return y.credentialFromTaggedObject(p.customData||{})}static credentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{phoneNumber:E,temporaryProof:A}=p;return E&&A?Go._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function Zs(y,f){return f?te(f):(K(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class hc extends yi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return js(f,this._buildIdpRequest())}_linkToIdToken(f,p){return js(f,this._buildIdpRequest(p))}_getReauthenticationResolver(f){return js(f,this._buildIdpRequest())}_buildIdpRequest(f){const p={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(p.idToken=f),p}}function hf(y){return pr(y.auth,new hc(y),y.bypassAuthState)}function Xu(y){const{auth:f,user:p}=y;return K(p,f,"internal-error"),Uu(p,new hc(y),y.bypassAuthState)}function Jn(y){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,m.Z)(function*(y){const{auth:f,user:p}=y;return K(p,f,"internal-error"),Ua(p,new hc(y),y.bypassAuthState)})).apply(this,arguments)}class zi{constructor(f,p,E,A,O=!1){this.auth=f,this.resolver=E,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(p)?p:[p]}execute(){var f=this;return new Promise(function(){var p=(0,m.Z)(function*(E,A){f.pendingPromise={resolve:E,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(O){f.reject(O)}});return function(E,A){return p.apply(this,arguments)}}())}onAuthEvent(f){var p=this;return(0,m.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:O,tenantId:Q,error:he,type:ke}=f;if(he)return void p.reject(he);const Ke={auth:p.auth,requestUri:E,sessionId:A,tenantId:Q||void 0,postBody:O||void 0,user:p.user,bypassAuthState:p.bypassAuthState};try{p.resolve(yield p.getIdpTask(ke)(Ke))}catch(gt){p.reject(gt)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return hf;case"linkViaPopup":case"linkViaRedirect":return Jn;case"reauthViaPopup":case"reauthViaRedirect":return Xu;default:Se(this.auth,"internal-error")}}resolve(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const fc=new nn(2e3,1e4);function Ki(){return(Ki=(0,m.Z)(function*(y,f,p){const E=at(y);Ue(y,f,Dr);const A=Zs(E,p);return new au(E,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function pc(){return(pc=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ue(E.auth,f,Dr);const A=Zs(E.auth,p);return new au(E.auth,"reauthViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}function Ut(){return(Ut=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ue(E.auth,f,Dr);const A=Zs(E.auth,p);return new au(E.auth,"linkViaPopup",f,A,E).executeNotNull()})).apply(this,arguments)}let au=(()=>{class y extends zi{constructor(p,E,A,O,Q){super(p,E,O,Q),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var p=this;return(0,m.Z)(function*(){const E=yield p.execute();return K(E,p.auth,"internal-error"),E})()}onExecution(){var p=this;return(0,m.Z)(function*(){J(1===p.filter.length,"Popup operations only handle one event");const E=fn();p.authWindow=yield p.resolver._openPopup(p.auth,p.provider,p.filter[0],E),p.authWindow.associatedEvent=E,p.resolver._originValidation(p.auth).catch(A=>{p.reject(A)}),p.resolver._isIframeWebStorageSupported(p.auth,A=>{A||p.reject(Ee(p.auth,"web-storage-unsupported"))}),p.pollUserCancellation()})()}get eventId(){var p;return(null===(p=this.authWindow)||void 0===p?void 0:p.associatedEvent)||null}cancel(){this.reject(Ee(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const p=()=>{var E,A;this.pollId=(null===(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ee(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(p,fc.get())};p()}}return y.currentPopupAction=null,y})();const Is=new Map;class Wy extends zi{constructor(f,p,E=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],p,void 0,E),this.eventId=null}execute(){var f=()=>super.execute,p=this;return(0,m.Z)(function*(){let E=Is.get(p.auth._key());if(!E){try{const O=(yield function uu(y,f){return Qr.apply(this,arguments)}(p.resolver,p.auth))?yield f().call(p):null;E=()=>Promise.resolve(O)}catch(A){E=()=>Promise.reject(A)}Is.set(p.auth._key(),E)}return p.bypassAuthState||Is.set(p.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(f){var p=()=>super.onAuthEvent,E=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return p().call(E,f);if("unknown"!==f.type){if(f.eventId){const A=yield E.auth._redirectUserForId(f.eventId);if(A)return E.user=A,p().call(E,f);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function Qr(){return(Qr=(0,m.Z)(function*(y,f){const p=pf(f),E=gc(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(p));return yield E._remove(p),A})).apply(this,arguments)}function lu(y,f){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,m.Z)(function*(y,f){return gc(y)._set(pf(f),"true")})).apply(this,arguments)}function Rd(y,f){Is.set(y._key(),f)}function gc(y){return te(y._redirectPersistence)}function pf(y){return sr("pendingRedirect",y.config.apiKey,y.name)}function b(){return(b=(0,m.Z)(function*(y,f,p){const E=at(y);Ue(y,f,Dr);const A=Zs(E,p);return yield lu(A,E),A._openRedirect(E,f,"signInViaRedirect")})).apply(this,arguments)}function B(){return(B=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ue(E.auth,f,Dr);const A=Zs(E.auth,p);yield lu(A,E.auth);const O=yield ft(E);return A._openRedirect(E.auth,f,"reauthViaRedirect",O)})).apply(this,arguments)}function be(){return(be=(0,m.Z)(function*(y,f,p){const E=(0,V.m9)(y);Ue(E.auth,f,Dr);const A=Zs(E.auth,p);yield en(!1,E,f.providerId),yield lu(A,E.auth);const O=yield ft(E);return A._openRedirect(E.auth,f,"linkViaRedirect",O)})).apply(this,arguments)}function Xe(){return(Xe=(0,m.Z)(function*(y,f){return yield at(y)._initializationPromise,yt(y,f,!1)})).apply(this,arguments)}function yt(y,f){return It.apply(this,arguments)}function It(){return(It=(0,m.Z)(function*(y,f,p=!1){const E=at(y),A=Zs(E,f),Q=yield new Wy(E,A,p).execute();return Q&&!p&&(delete Q.user._redirectEventId,yield E._persistUserIfCurrent(Q.user),yield E._setRedirectUser(null,f)),Q})).apply(this,arguments)}function ft(y){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,m.Z)(function*(y){const f=fn(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class bs{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let p=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(f,E)&&(p=!0,this.sendToConsumer(f,E),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function Md(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Yi(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,p||(this.queuedRedirectEvent=f,p=!0)),p}sendToConsumer(f,p){var E;if(f.error&&!Yi(f)){const A=(null===(E=f.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";p.onError(Ee(this.auth,A))}else p.onAuthEvent(f)}isEventForConsumer(f,p){const E=null===p.eventId||!!f.eventId&&f.eventId===p.eventId;return p.filter.includes(f.type)&&E}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zi(f))}saveEventToCache(f){this.cachedEventUids.add(Zi(f)),this.lastProcessedEventTime=Date.now()}}function Zi(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function Yi({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function nl(y){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,m.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const di=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qi=/^https?/;function Kg(){return(Kg=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield nl(y);for(const p of f)try{if(kr(p))return}catch(E){}Se(y,"unauthorized-domain")})).apply(this,arguments)}function kr(y){const f=Oe(),{protocol:p,hostname:E}=new URL(f);if(y.startsWith("chrome-extension://")){const Q=new URL(y);return""===Q.hostname&&""===E?"chrome-extension:"===p&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===p&&Q.hostname===E}if(!Qi.test(p))return!1;if(di.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const Pd=new nn(3e4,6e4);function Zg(){const y=Gt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let p=0;p<y.CP.length;p++)y.CP[p]=null}let cu=null;function mf(y){return cu=cu||function gf(y){return new Promise((f,p)=>{var E,A,O;function Q(){Zg(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Zg(),p(Ee(y,"network-request-failed"))},timeout:Pd.get()})}if(null===(A=null===(E=Gt().gapi)||void 0===E?void 0:E.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(O=Gt().gapi)||void 0===O?void 0:O.load)){const he=Io("iframefcb");return Gt()[he]=()=>{gapi.load?Q():p(Ee(y,"network-request-failed"))},qi(`https://apis.google.com/js/api.js?onload=${he}`).catch(ke=>p(ke))}Q()}}).catch(f=>{throw cu=null,f})}(y),cu}const rl=new nn(5e3,15e3),qy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function GE(y){const f=y.config;K(f.authDomain,y,"auth-domain-config-required");const p=f.emulator?xn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:f.apiKey,appName:y.name,v:ce.SDK_VERSION},A=zy.get(y.config.apiHost);A&&(E.eid=A);const O=y._getFrameworks();return O.length&&(E.fw=O.join(",")),`${p}?${(0,V.xO)(E).slice(1)}`}function sl(){return sl=(0,m.Z)(function*(y){const f=yield mf(y),p=Gt().gapi;return K(p,y,"internal-error"),f.open({where:document.body,url:GE(y),messageHandlersFilter:p.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:qy,dontclear:!0},E=>new Promise(function(){var A=(0,m.Z)(function*(O,Q){yield E.restyle({setHideOnLeave:!1});const he=Ee(y,"network-request-failed"),ke=Gt().setTimeout(()=>{Q(he)},rl.get());function Ke(){Gt().clearTimeout(ke),O(E)}E.ping(Ke).then(Ke,()=>{Q(he)})});return function(O,Q){return A.apply(this,arguments)}}()))}),sl.apply(this,arguments)}const mc={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Jg{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function la(y,f,p,E,A,O){K(y.config.authDomain,y,"auth-domain-config-required"),K(y.config.apiKey,y,"invalid-api-key");const Q={apiKey:y.config.apiKey,appName:y.name,authType:p,redirectUrl:E,v:ce.SDK_VERSION,eventId:A};if(f instanceof Dr){f.setDefaultLanguage(y.languageCode),Q.providerId=f.providerId||"",(0,V.xb)(f.getCustomParameters())||(Q.customParameters=JSON.stringify(f.getCustomParameters()));for(const[ke,Ke]of Object.entries(O||{}))Q[ke]=Ke}if(f instanceof ho){const ke=f.getScopes().filter(Ke=>""!==Ke);ke.length>0&&(Q.scopes=ke.join(","))}y.tenantId&&(Q.tid=y.tenantId);const he=Q;for(const ke of Object.keys(he))void 0===he[ke]&&delete he[ke];return`${function _c({config:y}){return y.emulator?xn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,V.xO)(he).slice(1)}`}const tm="webStorageSupport";class Od extends class WE{constructor(f){this.factorId=f}_process(f,p,E){switch(p.type){case"enroll":return this._finalizeEnroll(f,p.credential,E);case"signin":return this._finalizeSignIn(f,p.credential);default:return we("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Od(f)}_finalizeEnroll(f,p,E){return function _o(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",zt(y,f))}(f,{idToken:p,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,p){return function qs(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",zt(y,f))}(f,{mfaPendingCredential:p,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let wf=(()=>{class y{constructor(){}static assertion(p){return Od._fromCredential(p)}}return y.FACTOR_ID="phone",y})();var Ef="@firebase/auth";class Zy{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var p=this;return(0,m.Z)(function*(){return p.assertAuthConfigured(),yield p.auth._initializationPromise,p.auth.currentUser?{accessToken:yield p.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const p=this.auth.onIdTokenChanged(E=>{var A;f((null===(A=E)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,p),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const p=this.internalListeners.get(f);!p||(this.internalListeners.delete(f),p(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ji(){return window}function ca(){return(ca=(0,m.Z)(function*(y,f,p){var E;const{BuildInfo:A}=Ji();J(f.sessionId,"AuthEvent did not contain a session ID");const O=yield If(f.sessionId),Q={};return qr()?Q.ibi=A.packageName:Nr()?Q.apn=A.packageName:Se(y,"operation-not-supported-in-this-environment"),A.displayName&&(Q.appDisplayName=A.displayName),Q.sessionId=O,la(y,p,f.type,void 0,null!==(E=f.eventId)&&void 0!==E?E:void 0,Q)})).apply(this,arguments)}function yc(){return(yc=(0,m.Z)(function*(y){const{BuildInfo:f}=Ji(),p={};qr()?p.iosBundleId=f.packageName:Nr()?p.androidPackageName=f.packageName:Se(y,"operation-not-supported-in-this-environment"),yield nl(y,p)})).apply(this,arguments)}function sm(){return(sm=(0,m.Z)(function*(y,f,p){const{cordova:E}=Ji();let A=()=>{};try{yield new Promise((O,Q)=>{let he=null;function ke(){var dt;O();const $n=null===(dt=E.plugins.browsertab)||void 0===dt?void 0:dt.close;"function"==typeof $n&&$n(),"function"==typeof(null==p?void 0:p.close)&&p.close()}function Ke(){he||(he=window.setTimeout(()=>{Q(Ee(y,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}f.addPassiveListener(ke),document.addEventListener("resume",Ke,!1),Nr()&&document.addEventListener("visibilitychange",gt,!1),A=()=>{f.removePassiveListener(ke),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",gt,!1),he&&window.clearTimeout(he)}})}finally{A()}})).apply(this,arguments)}function If(y){return wc.apply(this,arguments)}function wc(){return(wc=(0,m.Z)(function*(y){const f=bf(y),p=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(p)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function bf(y){if(J(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),p=new Uint8Array(f);for(let E=0;E<y.length;E++)p[E]=y.charCodeAt(E);return p}!function qE(y){(0,ce._registerComponent)(new de.wA("auth",(f,{options:p})=>{const E=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:O,authDomain:Q}=E.options;return((he,ke)=>{K(O&&!O.includes(":"),"invalid-api-key",{appName:he.name}),K(!(null==Q?void 0:Q.includes(":")),"argument-error",{appName:he.name});const Ke={apiKey:O,authDomain:Q,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ho(y)},gt=new ze(he,ke,Ke);return function le(y,f){const p=(null==f?void 0:f.persistence)||[],E=(Array.isArray(p)?p:[p]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(E,null==f?void 0:f.popupRedirectResolver)}(gt,p),gt})(E,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,p,E)=>{f.getProvider("auth-internal").initialize()})),(0,ce._registerComponent)(new de.wA("auth-internal",f=>{const p=at(f.getProvider("auth").getImmediate());return new Zy(p)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ce.registerVersion)(Ef,"0.20.7",function Yy(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ce.registerVersion)(Ef,"0.20.7","esm2017")}("Browser");class YE extends bs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(p=>p(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function Ec(y){return Ld.apply(this,arguments)}function Ld(){return(Ld=(0,m.Z)(function*(y){const f=yield ol()._get(Df(y));return f&&(yield ol()._remove(Df(y))),f})).apply(this,arguments)}function Vd(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let p=0;p<20;p++){const E=Math.floor(Math.random()*f.length);y.push(f.charAt(E))}return y.join("")}function ol(){return te(ut)}function Df(y){return sr("authEvent",y.config.apiKey,y.name)}function Cn(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...p]=y.split("?");return(0,V.zd)(p.join("?"))}function dm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ee("no-auth-event")}}function Bd(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function hm(y=(0,V.z$)()){return!("file:"!==Bd()&&"ionic:"!==Bd()&&"capacitor:"!==Bd()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function fm(){try{const y=self.localStorage,f=fn();if(y)return y.setItem(f,"1"),y.removeItem(f),!function al(y=(0,V.z$)()){return function Fr(){return(0,V.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Ic(y=(0,V.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,V.hl)()}catch(y){return Xn()&&(0,V.hl)()}return!1}function Xn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function ul(){return(function XE(){return"http:"===Bd()||"https:"===Bd()}()||(0,V.ru)()||hm())&&!function Cc(){return(0,V.b$)()||(0,V.UG)()}()&&fm()&&!Xn()}function jd(){return hm()&&"undefined"!=typeof document}function Af(){return(Af=(0,m.Z)(function*(){return!!jd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const es={LOCAL:"local",NONE:"none",SESSION:"session"},bc=K,gm="persistence";function mm(y){return _m.apply(this,arguments)}function _m(){return(_m=(0,m.Z)(function*(y){yield y._initializationPromise;const f=ev(),p=sr(gm,y.config.apiKey,y.name);f&&f.setItem(p,y._getPersistence())})).apply(this,arguments)}function ev(){var y;try{return(null===(y=function pm(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const Hd=K;class Xs{constructor(){this.browserResolver=te(class nm{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cn,this._completeRedirectFn=yt,this._overrideRedirectResult=Rd}_openPopup(f,p,E,A){var O=this;return(0,m.Z)(function*(){var Q;J(null===(Q=O.eventManagers[f._key()])||void 0===Q?void 0:Q.manager,"_initialize() not called before _openPopup()");const he=la(f,p,E,Oe(),A);return function Xg(y,f,p,E=500,A=600){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),Q=Math.max((window.screen.availWidth-E)/2,0).toString();let he="";const ke=Object.assign(Object.assign({},mc),{width:E.toString(),height:A.toString(),top:O,left:Q}),Ke=(0,V.z$)().toLowerCase();p&&(he=ka(Ke)?"_blank":p),Ni(Ke)&&(f=f||"http://localhost",ke.scrollbars="yes");const gt=Object.entries(ke).reduce(($n,[mr,cl])=>`${$n}${mr}=${cl},`,"");if(function lo(y=(0,V.z$)()){var f;return qr(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ke)&&"_self"!==he)return function vf(y,f){const p=document.createElement("a");p.href=y,p.target=f;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),p.dispatchEvent(E)}(f||"",he),new Jg(null);const dt=window.open(f||"",he,gt);K(dt,y,"popup-blocked");try{dt.focus()}catch($n){}return new Jg(dt)}(f,he,fn())})()}_openRedirect(f,p,E,A){var O=this;return(0,m.Z)(function*(){return yield O._originValidation(f),function ht(y){Gt().location.href=y}(la(f,p,E,Oe(),A)),new Promise(()=>{})})()}_initialize(f){const p=f._key();if(this.eventManagers[p]){const{manager:A,promise:O}=this.eventManagers[p];return A?Promise.resolve(A):(J(O,"If manager is not set, promise should be"),O)}const E=this.initAndGetManager(f);return this.eventManagers[p]={promise:E},E.catch(()=>{delete this.eventManagers[p]}),E}initAndGetManager(f){var p=this;return(0,m.Z)(function*(){const E=yield function ua(y){return sl.apply(this,arguments)}(f),A=new bs(f);return E.register("authEvent",O=>(K(null==O?void 0:O.authEvent,f,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),p.eventManagers[f._key()]={manager:A},p.iframes[f._key()]=E,A})()}_isIframeWebStorageSupported(f,p){this.iframes[f._key()].send(tm,{type:tm},A=>{var O;const Q=null===(O=null==A?void 0:A[0])||void 0===O?void 0:O[tm];void 0!==Q&&p(!!Q),Se(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function Nd(y){return Kg.apply(this,arguments)}(f)),this.originValidationPromises[p]}get _shouldInitProactively(){return Vs()||jo()||qr()}}),this.cordovaResolver=te(class cm{constructor(){this._redirectPersistence=cn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=yt,this._overrideRedirectResult=Rd}_initialize(f){var p=this;return(0,m.Z)(function*(){const E=f._key();let A=p.eventManagers.get(E);return A||(A=new YE(f),p.eventManagers.set(E,A),p.attachCallbackListeners(f,A)),A})()}_openPopup(f){Se(f,"operation-not-supported-in-this-environment")}_openRedirect(f,p,E,A){var O=this;return(0,m.Z)(function*(){!function KE(y){var f,p,E,A,O,Q,he,ke,Ke,gt;const dt=Ji();K("function"==typeof(null===(f=null==dt?void 0:dt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(void 0!==(null===(p=null==dt?void 0:dt.BuildInfo)||void 0===p?void 0:p.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(O=null===(A=null===(E=null==dt?void 0:dt.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(ke=null===(he=null===(Q=null==dt?void 0:dt.cordova)||void 0===Q?void 0:Q.plugins)||void 0===he?void 0:he.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(gt=null===(Ke=null==dt?void 0:dt.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===gt?void 0:gt.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Q=yield O._initialize(f);yield Q.initialized(),Q.resetRedirect(),function ff(){Is.clear()}(),yield O._originValidation(f);const he=function om(y,f,p=null){return{type:f,eventId:p,urlResponse:null,sessionId:Vd(),postBody:null,tenantId:y.tenantId,error:Ee(y,"no-auth-event")}}(f,E,A);yield function Qy(y,f){return ol()._set(Df(y),f)}(f,he);const ke=yield function Xi(y,f,p){return ca.apply(this,arguments)}(f,he,p),Ke=yield function vc(y){const{cordova:f}=Ji();return new Promise(p=>{f.plugins.browsertab.isAvailable(E=>{let A=null;E?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function ud(y=(0,V.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),p(A)})})}(ke);return function zE(y,f,p){return sm.apply(this,arguments)}(f,Q,Ke)})()}_isIframeWebStorageSupported(f,p){throw new Error("Method not implemented.")}_originValidation(f){const p=f._key();return this.originValidationPromises[p]||(this.originValidationPromises[p]=function im(y){return yc.apply(this,arguments)}(f)),this.originValidationPromises[p]}attachCallbackListeners(f,p){const{universalLinks:E,handleOpenURL:A,BuildInfo:O}=Ji(),Q=setTimeout((0,m.Z)(function*(){yield Ec(f),p.onEvent(dm())}),500),he=function(){var gt=(0,m.Z)(function*(dt){clearTimeout(Q);const $n=yield Ec(f);let mr=null;$n&&(null==dt?void 0:dt.url)&&(mr=function am(y,f){var p,E;const A=function um(y){const f=Cn(y),p=f.link?decodeURIComponent(f.link):void 0,E=Cn(p).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Cn(A).link||A||E||p||y}(f);if(A.includes("/__/auth/callback")){const O=Cn(A),Q=O.firebaseError?function Tf(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(O.firebaseError)):null,he=null===(E=null===(p=null==Q?void 0:Q.code)||void 0===p?void 0:p.split("auth/"))||void 0===E?void 0:E[1],ke=he?Ee(he):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}($n,dt.url)),p.onEvent(mr||dm())});return function($n){return gt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,he);const ke=A,Ke=`${O.packageName.toLowerCase()}://`;Ji().handleOpenURL=function(){var gt=(0,m.Z)(function*(dt){if(dt.toLowerCase().startsWith(Ke)&&he({url:dt}),"function"==typeof ke)try{ke(dt)}catch($n){console.error($n)}});return function(dt){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=cn,this._completeRedirectFn=yt,this._overrideRedirectResult=Rd}_initialize(f){var p=this;return(0,m.Z)(function*(){return yield p.selectUnderlyingResolver(),p.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,p,E,A){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(f,p,E,A)})()}_openRedirect(f,p,E,A){var O=this;return(0,m.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(f,p,E,A)})()}_isIframeWebStorageSupported(f,p){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,p)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return jd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Hd(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const p=yield function eC(){return Af.apply(this,arguments)}();f.underlyingResolver=p?f.cordovaResolver:f.browserResolver})()}}function $d(y){return y.unwrap()}function ll(y){return Gd(y)}function Gd(y){const{_tokenResponse:f}=y instanceof V.ZR?y.customData:y;if(!f)return null;if(!(y instanceof V.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return ou.credentialFromResult(y);const p=f.providerId;if(!p||"password"===p)return null;let E;switch(p){case"google.com":E=_d;break;case"facebook.com":E=Wo;break;case"github.com":E=ef;break;case"twitter.com":E=vd;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:Q,pendingToken:he,nonce:ke}=f;return O||Q||A||he?he?p.startsWith("saml.")?fo._create(p,he):gs._fromParams({providerId:p,signInMethod:p,pendingToken:he,idToken:A,accessToken:O}):new Vi(p).credential({idToken:A,accessToken:O,rawNonce:ke}):null}return y instanceof V.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Lr(y,f){return f.catch(p=>{throw p instanceof V.ZR&&function Rf(y,f){var p,E;const A=null===(p=f.customData)||void 0===p?void 0:p._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=f)||void 0===E?void 0:E.code))f.resolver=new vm(y,function ur(y,f){var p;const E=(0,V.m9)(y),A=f;return K(f.customData.operationType,E,"argument-error"),K(null===(p=A.customData._serverResponse)||void 0===p?void 0:p.mfaPendingCredential,E,"argument-error"),ta._fromError(E,A)}(y,f));else if(A){const O=Gd(f),Q=f;O&&(Q.credential=O,Q.tenantId=A.tenantId||void 0,Q.email=A.email||void 0,Q.phoneNumber=A.phoneNumber||void 0)}}(y,p),p}).then(p=>{const A=p.user;return{operationType:p.operationType,credential:ll(p),additionalUserInfo:$i(p),user:Ds.getOrCreate(A)}})}function Dc(y,f){return du.apply(this,arguments)}function du(){return(du=(0,m.Z)(function*(y,f){const p=yield f;return{verificationId:p.verificationId,confirm:E=>Lr(y,p.confirm(E))}})).apply(this,arguments)}class vm{constructor(f,p){this.resolver=p,this.auth=function xf(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Lr($d(this.auth),this.resolver.resolveSignIn(f))}}class Ds{constructor(f){this._delegate=f,this.multiFactor=function Ku(y){const f=(0,V.m9)(y);return zu.has(f)||zu.set(f,Dd._fromUser(f)),zu.get(f)}(f)}static getOrCreate(f){return Ds.USER_MAP.has(f)||Ds.USER_MAP.set(f,new Ds(f)),Ds.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var p=this;return(0,m.Z)(function*(){return Lr(p.auth,gr(p._delegate,f))})()}linkWithPhoneNumber(f,p){var E=this;return(0,m.Z)(function*(){return Dc(E.auth,function qg(y,f,p){return Ad.apply(this,arguments)}(E._delegate,f,p))})()}linkWithPopup(f){var p=this;return(0,m.Z)(function*(){return Lr(p.auth,function xd(y,f,p){return Ut.apply(this,arguments)}(p._delegate,f,Xs))})()}linkWithRedirect(f){var p=this;return(0,m.Z)(function*(){return yield mm(at(p.auth)),function k(y,f,p){return function ne(y,f,p){return be.apply(this,arguments)}(y,f,p)}(p._delegate,f,Xs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var p=this;return(0,m.Z)(function*(){return Lr(p.auth,ms(p._delegate,f))})()}reauthenticateWithPhoneNumber(f,p){return Dc(this.auth,function Ei(y,f,p){return Hn.apply(this,arguments)}(this._delegate,f,p))}reauthenticateWithPopup(f){return Lr(this.auth,function aa(y,f,p){return pc.apply(this,arguments)}(this._delegate,f,Xs))}reauthenticateWithRedirect(f){var p=this;return(0,m.Z)(function*(){return yield mm(at(p.auth)),function T(y,f,p){return function N(y,f,p){return B.apply(this,arguments)}(y,f,p)}(p._delegate,f,Xs)})()}sendEmailVerification(f){return function ic(y,f){return Gu.apply(this,arguments)}(this._delegate,f)}unlink(f){var p=this;return(0,m.Z)(function*(){return yield function tf(y,f){return an.apply(this,arguments)}(p._delegate,f),p})()}updateEmail(f){return function Bg(y,f){return Jo((0,V.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function ac(y,f){return Jo((0,V.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Ks(y,f){return Tn.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function oc(y,f){return Za.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,p){return function sc(y,f,p){return Wu.apply(this,arguments)}(this._delegate,f,p)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ds.USER_MAP=new WeakMap;const Tc=K;let Wd=(()=>{class y{constructor(p,E){if(this.app=p,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=p.options;Tc(A,"invalid-api-key",{appName:p.name}),Tc(A,"invalid-api-key",{appName:p.name});const O="undefined"!=typeof window?Xs:void 0;this._delegate=E.initialize({options:{persistence:wm(A,p.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(Ne),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ds.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(p){this._delegate.languageCode=p}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(p){this._delegate.tenantId=p}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(p,E){!function Kr(y,f,p){const E=at(y);K(E._canInitEmulator,E,"emulator-config-failed"),K(/^https?:\/\//.test(f),E,"invalid-emulator-scheme");const A=!!(null==p?void 0:p.disableWarnings),O=Pi(f),{host:Q,port:he}=function Bn(y){const f=Pi(y),p=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!p)return{host:"",port:null};const E=p[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const O=A[1];return{host:O,port:Oi(E.substr(O.length+1))}}{const[O,Q]=E.split(":");return{host:O,port:Oi(Q)}}}(f);E.config.emulator={url:`${O}//${Q}${null===he?"":`:${he}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Q,port:he,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function pn(){function y(){const f=document.createElement("p"),p=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",p.position="fixed",p.width="100%",p.backgroundColor="#ffffff",p.border=".1em solid #000000",p.color="#b50000",p.bottom="0px",p.left="0px",p.margin="0px",p.zIndex="10000",p.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,p,E)}applyActionCode(p){return function Ae(y,f){return Pt.apply(this,arguments)}(this._delegate,p)}checkActionCode(p){return ju(this._delegate,p)}confirmPasswordReset(p,E){return function tc(y,f,p){return nc.apply(this,arguments)}(this._delegate,p,E)}createUserWithEmailAndPassword(p,E){var A=this;return(0,m.Z)(function*(){return Lr(A._delegate,function li(y,f,p){return Ga.apply(this,arguments)}(A._delegate,p,E))})()}fetchProvidersForEmail(p){return this.fetchSignInMethodsForEmail(p)}fetchSignInMethodsForEmail(p){return function Gs(y,f){return wi.apply(this,arguments)}(this._delegate,p)}isSignInWithEmailLink(p){return function Wa(y,f){const p=Vu.parseLink(f);return"EMAIL_SIGNIN"===(null==p?void 0:p.operation)}(0,p)}getRedirectResult(){var p=this;return(0,m.Z)(function*(){Tc(ul(),p._delegate,"operation-not-supported-in-this-environment");const E=yield function R(y,f){return Xe.apply(this,arguments)}(p._delegate,Xs);return E?Lr(p._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(p){!function Jy(y,f){at(y)._logFramework(f)}(this._delegate,p)}onAuthStateChanged(p,E,A){const{next:O,error:Q,complete:he}=Mf(p,E,A);return this._delegate.onAuthStateChanged(O,Q,he)}onIdTokenChanged(p,E,A){const{next:O,error:Q,complete:he}=Mf(p,E,A);return this._delegate.onIdTokenChanged(O,Q,he)}sendSignInLinkToEmail(p,E){return function Ug(y,f,p){return Hu.apply(this,arguments)}(this._delegate,p,E)}sendPasswordResetEmail(p,E){return function ec(y,f,p){return $a.apply(this,arguments)}(this._delegate,p,E||void 0)}setPersistence(p){var E=this;return(0,m.Z)(function*(){let A;switch(function Xy(y,f){bc(Object.values(es).includes(f),y,"invalid-persistence-type"),(0,V.b$)()?bc(f!==es.SESSION,y,"unsupported-persistence-type"):(0,V.UG)()?bc(f===es.NONE,y,"unsupported-persistence-type"):Xn()?bc(f===es.NONE||f===es.LOCAL&&(0,V.hl)(),y,"unsupported-persistence-type"):bc(f===es.NONE||fm(),y,"unsupported-persistence-type")}(E._delegate,p),p){case es.SESSION:A=cn;break;case es.LOCAL:A=(yield te(Gi)._isAvailable())?Gi:ut;break;case es.NONE:A=Kt;break;default:return Se("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(p){return this.signInWithCredential(p)}signInAnonymously(){return Lr(this._delegate,function wd(y){return Ql.apply(this,arguments)}(this._delegate))}signInWithCredential(p){return Lr(this._delegate,wn(this._delegate,p))}signInWithCustomToken(p){return Lr(this._delegate,function Zo(y,f){return pt.apply(this,arguments)}(this._delegate,p))}signInWithEmailAndPassword(p,E){return Lr(this._delegate,function rc(y,f,p){return wn((0,V.m9)(y),md.credential(f,p))}(this._delegate,p,E))}signInWithEmailLink(p,E){return Lr(this._delegate,function $u(y,f,p){return Nn.apply(this,arguments)}(this._delegate,p,E))}signInWithPhoneNumber(p,E){return Dc(this._delegate,function dc(y,f,p){return zs.apply(this,arguments)}(this._delegate,p,E))}signInWithPopup(p){var E=this;return(0,m.Z)(function*(){return Tc(ul(),E._delegate,"operation-not-supported-in-this-environment"),Lr(E._delegate,function el(y,f,p){return Ki.apply(this,arguments)}(E._delegate,p,Xs))})()}signInWithRedirect(p){var E=this;return(0,m.Z)(function*(){return Tc(ul(),E._delegate,"operation-not-supported-in-this-environment"),yield mm(E._delegate),function tl(y,f,p){return function zg(y,f,p){return b.apply(this,arguments)}(y,f,p)}(E._delegate,p,Xs)})()}updateCurrentUser(p){return this._delegate.updateCurrentUser(p)}verifyPasswordResetCode(p){return function Qo(y,f){return mo.apply(this,arguments)}(this._delegate,p)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=es,y})();function Mf(y,f,p){let E=y;"function"!=typeof y&&({next:E,error:f,complete:p}=y);const A=E;return{next:Q=>A(Q&&Ds.getOrCreate(Q)),error:f,complete:p}}function wm(y,f){const p=function ym(y,f){const p=ev();if(!p)return[];const E=sr(gm,y,f);switch(p.getItem(E)){case es.NONE:return[Kt];case es.LOCAL:return[Gi,cn];case es.SESSION:return[cn];default:return[]}}(y,f);if("undefined"!=typeof self&&!p.includes(Gi)&&p.push(Gi),"undefined"!=typeof window)for(const E of[ut,cn])p.includes(E)||p.push(E);return p.includes(Kt)||p.push(Kt),p}class Nf{constructor(){this.providerId="phone",this._delegate=new ou($d(ee.Z.auth()))}static credential(f,p){return ou.credential(f,p)}verifyPhoneNumber(f,p){return this._delegate.verifyPhoneNumber(f,p)}unwrap(){return this._delegate}}Nf.PHONE_SIGN_IN_METHOD=ou.PHONE_SIGN_IN_METHOD,Nf.PROVIDER_ID=ou.PROVIDER_ID;const tv=K;class On{constructor(f,p,E=ee.Z.app()){var A;tv(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new oa(f,p,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function ts(y){y.INTERNAL.registerComponent(new de.wA("auth-compat",f=>{const p=f.getProvider("app-compat").getImmediate(),E=f.getProvider("auth");return new Wd(p,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:md,FacebookAuthProvider:Wo,GithubAuthProvider:ef,GoogleAuthProvider:_d,OAuthProvider:Vi,SAMLAuthProvider:Pr,PhoneAuthProvider:Nf,PhoneMultiFactorGenerator:wf,RecaptchaVerifier:On,TwitterAuthProvider:vd,Auth:Wd,AuthCredential:yi,Error:V.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.20")}(ee.Z)},8306:(Qe,ve,L)=>{L.d(ve,{y:()=>W});var m=L(930),ee=L(727),V=L(8822),ce=L(4671);var de=L(2416),ue=L(576),pe=L(2806);let W=(()=>{class Re{constructor(Ve){Ve&&(this._subscribe=Ve)}lift(Ve){const ge=new Re;return ge.source=this,ge.operator=Ve,ge}subscribe(Ve,ge,De){const qe=function $e(Re){return Re&&Re instanceof m.Lv||function re(Re){return Re&&(0,ue.m)(Re.next)&&(0,ue.m)(Re.error)&&(0,ue.m)(Re.complete)}(Re)&&(0,ee.Nn)(Re)}(Ve)?Ve:new m.Hp(Ve,ge,De);return(0,pe.x)(()=>{const{operator:Ze,source:Se}=this;qe.add(Ze?Ze.call(qe,Se):Se?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ve){try{return this._subscribe(Ve)}catch(ge){Ve.error(ge)}}forEach(Ve,ge){return new(ge=z(ge))((De,qe)=>{const Ze=new m.Hp({next:Se=>{try{Ve(Se)}catch(Ee){qe(Ee),Ze.unsubscribe()}},error:qe,complete:De});this.subscribe(Ze)})}_subscribe(Ve){var ge;return null===(ge=this.source)||void 0===ge?void 0:ge.subscribe(Ve)}[V.L](){return this}pipe(...Ve){return function me(Re){return 0===Re.length?ce.y:1===Re.length?Re[0]:function(Ve){return Re.reduce((ge,De)=>De(ge),Ve)}}(Ve)(this)}toPromise(Ve){return new(Ve=z(Ve))((ge,De)=>{let qe;this.subscribe(Ze=>qe=Ze,Ze=>De(Ze),()=>ge(qe))})}}return Re.create=Ne=>new Re(Ne),Re})();function z(Re){var Ne;return null!==(Ne=null!=Re?Re:de.v.Promise)&&void 0!==Ne?Ne:Promise}},7579:(Qe,ve,L)=>{L.d(ve,{x:()=>de});var m=L(8306),ee=L(727);const ce=(0,L(3888).d)(pe=>function(){pe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),me=L(2806);let de=(()=>{class pe extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(z){const re=new ue(this,this);return re.operator=z,re}_throwIfClosed(){if(this.closed)throw new ce}next(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(z)}})}error(z){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=z;const{observers:re}=this;for(;re.length;)re.shift().error(z)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:z}=this;for(;z.length;)z.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var z;return(null===(z=this.observers)||void 0===z?void 0:z.length)>0}_trySubscribe(z){return this._throwIfClosed(),super._trySubscribe(z)}_subscribe(z){return this._throwIfClosed(),this._checkFinalizedStatuses(z),this._innerSubscribe(z)}_innerSubscribe(z){const{hasError:re,isStopped:$e,observers:Re}=this;return re||$e?ee.Lc:(this.currentObservers=null,Re.push(z),new ee.w0(()=>{this.currentObservers=null,(0,ie.P)(Re,z)}))}_checkFinalizedStatuses(z){const{hasError:re,thrownError:$e,isStopped:Re}=this;re?z.error($e):Re&&z.complete()}asObservable(){const z=new m.y;return z.source=this,z}}return pe.create=(W,z)=>new ue(W,z),pe})();class ue extends de{constructor(W,z){super(),this.destination=W,this.source=z}next(W){var z,re;null===(re=null===(z=this.destination)||void 0===z?void 0:z.next)||void 0===re||re.call(z,W)}error(W){var z,re;null===(re=null===(z=this.destination)||void 0===z?void 0:z.error)||void 0===re||re.call(z,W)}complete(){var W,z;null===(z=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===z||z.call(W)}_subscribe(W){var z,re;return null!==(re=null===(z=this.source)||void 0===z?void 0:z.subscribe(W))&&void 0!==re?re:ee.Lc}}},930:(Qe,ve,L)=>{L.d(ve,{Hp:()=>Ve,Lv:()=>re});var m=L(576),ee=L(727),V=L(2416),ce=L(7849),ie=L(5032);const me=pe("C",void 0,void 0);function pe(Se,Ee,Ie){return{kind:Se,value:Ee,error:Ie}}var W=L(3410),z=L(2806);class re extends ee.w0{constructor(Ee){super(),this.isStopped=!1,Ee?(this.destination=Ee,(0,ee.Nn)(Ee)&&Ee.add(this)):this.destination=Ze}static create(Ee,Ie,Ue){return new Ve(Ee,Ie,Ue)}next(Ee){this.isStopped?qe(function ue(Se){return pe("N",Se,void 0)}(Ee),this):this._next(Ee)}error(Ee){this.isStopped?qe(function de(Se){return pe("E",void 0,Se)}(Ee),this):(this.isStopped=!0,this._error(Ee))}complete(){this.isStopped?qe(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ee){this.destination.next(Ee)}_error(Ee){try{this.destination.error(Ee)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function Re(Se,Ee){return $e.call(Se,Ee)}class Ne{constructor(Ee){this.partialObserver=Ee}next(Ee){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ee)}catch(Ue){ge(Ue)}}error(Ee){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ee)}catch(Ue){ge(Ue)}else ge(Ee)}complete(){const{partialObserver:Ee}=this;if(Ee.complete)try{Ee.complete()}catch(Ie){ge(Ie)}}}class Ve extends re{constructor(Ee,Ie,Ue){let Be;if(super(),(0,m.m)(Ee)||!Ee)Be={next:null!=Ee?Ee:void 0,error:null!=Ie?Ie:void 0,complete:null!=Ue?Ue:void 0};else{let K;this&&V.v.useDeprecatedNextContext?(K=Object.create(Ee),K.unsubscribe=()=>this.unsubscribe(),Be={next:Ee.next&&Re(Ee.next,K),error:Ee.error&&Re(Ee.error,K),complete:Ee.complete&&Re(Ee.complete,K)}):Be=Ee}this.destination=new Ne(Be)}}function ge(Se){V.v.useDeprecatedSynchronousErrorHandling?(0,z.O)(Se):(0,ce.h)(Se)}function qe(Se,Ee){const{onStoppedNotification:Ie}=V.v;Ie&&W.z.setTimeout(()=>Ie(Se,Ee))}const Ze={closed:!0,next:ie.Z,error:function De(Se){throw Se},complete:ie.Z}},727:(Qe,ve,L)=>{L.d(ve,{Lc:()=>me,w0:()=>ie,Nn:()=>de});var m=L(576);const V=(0,L(3888).d)(pe=>function(z){pe(this),this.message=z?`${z.length} errors occurred during unsubscription:\n${z.map((re,$e)=>`${$e+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=z});var ce=L(8737);class ie{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:z}=this;if(z)if(this._parentage=null,Array.isArray(z))for(const Re of z)Re.remove(this);else z.remove(this);const{initialTeardown:re}=this;if((0,m.m)(re))try{re()}catch(Re){W=Re instanceof V?Re.errors:[Re]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const Re of $e)try{ue(Re)}catch(Ne){W=null!=W?W:[],Ne instanceof V?W=[...W,...Ne.errors]:W.push(Ne)}}if(W)throw new V(W)}}add(W){var z;if(W&&W!==this)if(this.closed)ue(W);else{if(W instanceof ie){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(z=this._finalizers)&&void 0!==z?z:[]).push(W)}}_hasParent(W){const{_parentage:z}=this;return z===W||Array.isArray(z)&&z.includes(W)}_addParent(W){const{_parentage:z}=this;this._parentage=Array.isArray(z)?(z.push(W),z):z?[z,W]:W}_removeParent(W){const{_parentage:z}=this;z===W?this._parentage=null:Array.isArray(z)&&(0,ce.P)(z,W)}remove(W){const{_finalizers:z}=this;z&&(0,ce.P)(z,W),W instanceof ie&&W._removeParent(this)}}ie.EMPTY=(()=>{const pe=new ie;return pe.closed=!0,pe})();const me=ie.EMPTY;function de(pe){return pe instanceof ie||pe&&"closed"in pe&&(0,m.m)(pe.remove)&&(0,m.m)(pe.add)&&(0,m.m)(pe.unsubscribe)}function ue(pe){(0,m.m)(pe)?pe():pe.unsubscribe()}},2416:(Qe,ve,L)=>{L.d(ve,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Qe,ve,L)=>{L.d(ve,{E:()=>ee});const ee=new(L(8306).y)(ie=>ie.complete())},8996:(Qe,ve,L)=>{L.d(ve,{D:()=>Ee});var m=L(8421),ee=L(5363),V=L(9468),me=L(8306),ue=L(2202),pe=L(576),W=L(9672);function re(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new me.y(Be=>{(0,W.f)(Be,Ue,()=>{const K=Ie[Symbol.asyncIterator]();(0,W.f)(Be,Ue,()=>{K.next().then(we=>{we.done?Be.complete():Be.next(we.value)})},0,!0)})})}var $e=L(3670),Re=L(8239),Ne=L(1144),Ve=L(6495),ge=L(2206),De=L(4532),qe=L(3260);function Ee(Ie,Ue){return Ue?function Se(Ie,Ue){if(null!=Ie){if((0,$e.c)(Ie))return function ce(Ie,Ue){return(0,m.Xf)(Ie).pipe((0,V.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,Ne.z)(Ie))return function de(Ie,Ue){return new me.y(Be=>{let K=0;return Ue.schedule(function(){K===Ie.length?Be.complete():(Be.next(Ie[K++]),Be.closed||this.schedule())})})}(Ie,Ue);if((0,Re.t)(Ie))return function ie(Ie,Ue){return(0,m.Xf)(Ie).pipe((0,V.R)(Ue),(0,ee.Q)(Ue))}(Ie,Ue);if((0,ge.D)(Ie))return re(Ie,Ue);if((0,Ve.T)(Ie))return function z(Ie,Ue){return new me.y(Be=>{let K;return(0,W.f)(Be,Ue,()=>{K=Ie[ue.h](),(0,W.f)(Be,Ue,()=>{let we,J;try{({value:we,done:J}=K.next())}catch(se){return void Be.error(se)}J?Be.complete():Be.next(we)},0,!0)}),()=>(0,pe.m)(null==K?void 0:K.return)&&K.return()})}(Ie,Ue);if((0,qe.L)(Ie))return function Ze(Ie,Ue){return re((0,qe.Q)(Ie),Ue)}(Ie,Ue)}throw(0,De.z)(Ie)}(Ie,Ue):(0,m.Xf)(Ie)}},8421:(Qe,ve,L)=>{L.d(ve,{Xf:()=>$e});var m=L(655),ee=L(1144),V=L(8239),ce=L(8306),ie=L(3670),me=L(2206),de=L(4532),ue=L(6495),pe=L(3260),W=L(576),z=L(7849),re=L(8822);function $e(Se){if(Se instanceof ce.y)return Se;if(null!=Se){if((0,ie.c)(Se))return function Re(Se){return new ce.y(Ee=>{const Ie=Se[re.L]();if((0,W.m)(Ie.subscribe))return Ie.subscribe(Ee);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Se);if((0,ee.z)(Se))return function Ne(Se){return new ce.y(Ee=>{for(let Ie=0;Ie<Se.length&&!Ee.closed;Ie++)Ee.next(Se[Ie]);Ee.complete()})}(Se);if((0,V.t)(Se))return function Ve(Se){return new ce.y(Ee=>{Se.then(Ie=>{Ee.closed||(Ee.next(Ie),Ee.complete())},Ie=>Ee.error(Ie)).then(null,z.h)})}(Se);if((0,me.D)(Se))return De(Se);if((0,ue.T)(Se))return function ge(Se){return new ce.y(Ee=>{for(const Ie of Se)if(Ee.next(Ie),Ee.closed)return;Ee.complete()})}(Se);if((0,pe.L)(Se))return function qe(Se){return De((0,pe.Q)(Se))}(Se)}throw(0,de.z)(Se)}function De(Se){return new ce.y(Ee=>{(function Ze(Se,Ee){var Ie,Ue,Be,K;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,m.KL)(Se);!(Ue=yield Ie.next()).done;)if(Ee.next(Ue.value),Ee.closed)return}catch(we){Be={error:we}}finally{try{Ue&&!Ue.done&&(K=Ie.return)&&(yield K.call(Ie))}finally{if(Be)throw Be.error}}Ee.complete()})})(Se,Ee).catch(Ie=>Ee.error(Ie))})}},6451:(Qe,ve,L)=>{L.d(ve,{T:()=>me});var m=L(8189),ee=L(8421),V=L(515),ce=L(7669),ie=L(8996);function me(...de){const ue=(0,ce.yG)(de),pe=(0,ce._6)(de,1/0),W=de;return W.length?1===W.length?(0,ee.Xf)(W[0]):(0,m.J)(pe)((0,ie.D)(W,ue)):V.E}},5403:(Qe,ve,L)=>{L.d(ve,{x:()=>ee});var m=L(930);function ee(ce,ie,me,de,ue){return new V(ce,ie,me,de,ue)}class V extends m.Lv{constructor(ie,me,de,ue,pe,W){super(ie),this.onFinalize=pe,this.shouldUnsubscribe=W,this._next=me?function(z){try{me(z)}catch(re){ie.error(re)}}:super._next,this._error=ue?function(z){try{ue(z)}catch(re){ie.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=de?function(){try{de()}catch(z){ie.error(z)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(Qe,ve,L)=>{L.d(ve,{U:()=>V});var m=L(4482),ee=L(5403);function V(ce,ie){return(0,m.e)((me,de)=>{let ue=0;me.subscribe((0,ee.x)(de,pe=>{de.next(ce.call(ie,pe,ue++))}))})}},8189:(Qe,ve,L)=>{L.d(ve,{J:()=>V});var m=L(5577),ee=L(4671);function V(ce=1/0){return(0,m.z)(ee.y,ce)}},5577:(Qe,ve,L)=>{L.d(ve,{z:()=>ue});var m=L(4004),ee=L(8421),V=L(4482),ce=L(9672),ie=L(5403),de=L(576);function ue(pe,W,z=1/0){return(0,de.m)(W)?ue((re,$e)=>(0,m.U)((Re,Ne)=>W(re,Re,$e,Ne))((0,ee.Xf)(pe(re,$e))),z):("number"==typeof W&&(z=W),(0,V.e)((re,$e)=>function me(pe,W,z,re,$e,Re,Ne,Ve){const ge=[];let De=0,qe=0,Ze=!1;const Se=()=>{Ze&&!ge.length&&!De&&W.complete()},Ee=Ue=>De<re?Ie(Ue):ge.push(Ue),Ie=Ue=>{Re&&W.next(Ue),De++;let Be=!1;(0,ee.Xf)(z(Ue,qe++)).subscribe((0,ie.x)(W,K=>{null==$e||$e(K),Re?Ee(K):W.next(K)},()=>{Be=!0},void 0,()=>{if(Be)try{for(De--;ge.length&&De<re;){const K=ge.shift();Ne?(0,ce.f)(W,Ne,()=>Ie(K)):Ie(K)}Se()}catch(K){W.error(K)}}))};return pe.subscribe((0,ie.x)(W,Ee,()=>{Ze=!0,Se()})),()=>{null==Ve||Ve()}}(re,$e,pe,z)))}},5363:(Qe,ve,L)=>{L.d(ve,{Q:()=>ce});var m=L(9672),ee=L(4482),V=L(5403);function ce(ie,me=0){return(0,ee.e)((de,ue)=>{de.subscribe((0,V.x)(ue,pe=>(0,m.f)(ue,ie,()=>ue.next(pe),me),()=>(0,m.f)(ue,ie,()=>ue.complete(),me),pe=>(0,m.f)(ue,ie,()=>ue.error(pe),me)))})}},3099:(Qe,ve,L)=>{L.d(ve,{B:()=>me});var m=L(8996),ee=L(5698),V=L(7579),ce=L(930),ie=L(4482);function me(ue={}){const{connector:pe=(()=>new V.x),resetOnError:W=!0,resetOnComplete:z=!0,resetOnRefCountZero:re=!0}=ue;return $e=>{let Re=null,Ne=null,Ve=null,ge=0,De=!1,qe=!1;const Ze=()=>{null==Ne||Ne.unsubscribe(),Ne=null},Se=()=>{Ze(),Re=Ve=null,De=qe=!1},Ee=()=>{const Ie=Re;Se(),null==Ie||Ie.unsubscribe()};return(0,ie.e)((Ie,Ue)=>{ge++,!qe&&!De&&Ze();const Be=Ve=null!=Ve?Ve:pe();Ue.add(()=>{ge--,0===ge&&!qe&&!De&&(Ne=de(Ee,re))}),Be.subscribe(Ue),Re||(Re=new ce.Hp({next:K=>Be.next(K),error:K=>{qe=!0,Ze(),Ne=de(Se,W,K),Be.error(K)},complete:()=>{De=!0,Ze(),Ne=de(Se,z),Be.complete()}}),(0,m.D)(Ie).subscribe(Re))})($e)}}function de(ue,pe,...W){return!0===pe?(ue(),null):!1===pe?null:pe(...W).pipe((0,ee.q)(1)).subscribe(()=>ue())}},9468:(Qe,ve,L)=>{L.d(ve,{R:()=>ee});var m=L(4482);function ee(V,ce=0){return(0,m.e)((ie,me)=>{me.add(V.schedule(()=>ie.subscribe(me),ce))})}},5698:(Qe,ve,L)=>{L.d(ve,{q:()=>ce});var m=L(515),ee=L(4482),V=L(5403);function ce(ie){return ie<=0?()=>m.E:(0,ee.e)((me,de)=>{let ue=0;me.subscribe((0,V.x)(de,pe=>{++ue<=ie&&(de.next(pe),ie<=ue&&de.complete())}))})}},8505:(Qe,ve,L)=>{L.d(ve,{b:()=>ie});var m=L(576),ee=L(4482),V=L(5403),ce=L(4671);function ie(me,de,ue){const pe=(0,m.m)(me)||de||ue?{next:me,error:de,complete:ue}:me;return pe?(0,ee.e)((W,z)=>{var re;null===(re=pe.subscribe)||void 0===re||re.call(pe);let $e=!0;W.subscribe((0,V.x)(z,Re=>{var Ne;null===(Ne=pe.next)||void 0===Ne||Ne.call(pe,Re),z.next(Re)},()=>{var Re;$e=!1,null===(Re=pe.complete)||void 0===Re||Re.call(pe),z.complete()},Re=>{var Ne;$e=!1,null===(Ne=pe.error)||void 0===Ne||Ne.call(pe,Re),z.error(Re)},()=>{var Re,Ne;$e&&(null===(Re=pe.unsubscribe)||void 0===Re||Re.call(pe)),null===(Ne=pe.finalize)||void 0===Ne||Ne.call(pe)}))}):ce.y}},4408:(Qe,ve,L)=>{L.d(ve,{o:()=>ie});var m=L(727);class ee extends m.w0{constructor(de,ue){super()}schedule(de,ue=0){return this}}const V={setInterval(me,de,...ue){const{delegate:pe}=V;return(null==pe?void 0:pe.setInterval)?pe.setInterval(me,de,...ue):setInterval(me,de,...ue)},clearInterval(me){const{delegate:de}=V;return((null==de?void 0:de.clearInterval)||clearInterval)(me)},delegate:void 0};var ce=L(8737);class ie extends ee{constructor(de,ue){super(de,ue),this.scheduler=de,this.work=ue,this.pending=!1}schedule(de,ue=0){if(this.closed)return this;this.state=de;const pe=this.id,W=this.scheduler;return null!=pe&&(this.id=this.recycleAsyncId(W,pe,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(W,this.id,ue),this}requestAsyncId(de,ue,pe=0){return V.setInterval(de.flush.bind(de,this),pe)}recycleAsyncId(de,ue,pe=0){if(null!=pe&&this.delay===pe&&!1===this.pending)return ue;V.clearInterval(ue)}execute(de,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const pe=this._execute(de,ue);if(pe)return pe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(de,ue){let W,pe=!1;try{this.work(de)}catch(z){pe=!0,W=z||new Error("Scheduled action threw falsy error")}if(pe)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:de,scheduler:ue}=this,{actions:pe}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ce.P)(pe,this),null!=de&&(this.id=this.recycleAsyncId(ue,de,null)),this.delay=null,super.unsubscribe()}}}},7565:(Qe,ve,L)=>{L.d(ve,{v:()=>V});var m=L(6063);class ee{constructor(ie,me=ee.now){this.schedulerActionCtor=ie,this.now=me}schedule(ie,me=0,de){return new this.schedulerActionCtor(this,ie).schedule(de,me)}}ee.now=m.l.now;class V extends ee{constructor(ie,me=ee.now){super(ie,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(ie){const{actions:me}=this;if(this._active)return void me.push(ie);let de;this._active=!0;do{if(de=ie.execute(ie.state,ie.delay))break}while(ie=me.shift());if(this._active=!1,de){for(;ie=me.shift();)ie.unsubscribe();throw de}}}},4986:(Qe,ve,L)=>{L.d(ve,{z:()=>V});var m=L(4408);const V=new(L(7565).v)(m.o)},6063:(Qe,ve,L)=>{L.d(ve,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(Qe,ve,L)=>{L.d(ve,{z:()=>m});const m={setTimeout(ee,V,...ce){const{delegate:ie}=m;return(null==ie?void 0:ie.setTimeout)?ie.setTimeout(ee,V,...ce):setTimeout(ee,V,...ce)},clearTimeout(ee){const{delegate:V}=m;return((null==V?void 0:V.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Qe,ve,L)=>{L.d(ve,{h:()=>ee});const ee=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Qe,ve,L)=>{L.d(ve,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Qe,ve,L)=>{L.d(ve,{_6:()=>me,jO:()=>ce,yG:()=>ie});var m=L(576);function V(de){return de[de.length-1]}function ce(de){return(0,m.m)(V(de))?de.pop():void 0}function ie(de){return function ee(de){return de&&(0,m.m)(de.schedule)}(V(de))?de.pop():void 0}function me(de,ue){return"number"==typeof V(de)?de.pop():ue}},8737:(Qe,ve,L)=>{function m(ee,V){if(ee){const ce=ee.indexOf(V);0<=ce&&ee.splice(ce,1)}}L.d(ve,{P:()=>m})},3888:(Qe,ve,L)=>{function m(ee){const ce=ee(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ce.prototype=Object.create(Error.prototype),ce.prototype.constructor=ce,ce}L.d(ve,{d:()=>m})},2806:(Qe,ve,L)=>{L.d(ve,{O:()=>ce,x:()=>V});var m=L(2416);let ee=null;function V(ie){if(m.v.useDeprecatedSynchronousErrorHandling){const me=!ee;if(me&&(ee={errorThrown:!1,error:null}),ie(),me){const{errorThrown:de,error:ue}=ee;if(ee=null,de)throw ue}}else ie()}function ce(ie){m.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ie)}},9672:(Qe,ve,L)=>{function m(ee,V,ce,ie=0,me=!1){const de=V.schedule(function(){ce(),me?ee.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(ee.add(de),!me)return de}L.d(ve,{f:()=>m})},4671:(Qe,ve,L)=>{function m(ee){return ee}L.d(ve,{y:()=>m})},1144:(Qe,ve,L)=>{L.d(ve,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Qe,ve,L)=>{L.d(ve,{D:()=>ee});var m=L(576);function ee(V){return Symbol.asyncIterator&&(0,m.m)(null==V?void 0:V[Symbol.asyncIterator])}},576:(Qe,ve,L)=>{function m(ee){return"function"==typeof ee}L.d(ve,{m:()=>m})},3670:(Qe,ve,L)=>{L.d(ve,{c:()=>V});var m=L(8822),ee=L(576);function V(ce){return(0,ee.m)(ce[m.L])}},6495:(Qe,ve,L)=>{L.d(ve,{T:()=>V});var m=L(2202),ee=L(576);function V(ce){return(0,ee.m)(null==ce?void 0:ce[m.h])}},8239:(Qe,ve,L)=>{L.d(ve,{t:()=>ee});var m=L(576);function ee(V){return(0,m.m)(null==V?void 0:V.then)}},3260:(Qe,ve,L)=>{L.d(ve,{L:()=>ce,Q:()=>V});var m=L(655),ee=L(576);function V(ie){return(0,m.FC)(this,arguments,function*(){const de=ie.getReader();try{for(;;){const{value:ue,done:pe}=yield(0,m.qq)(de.read());if(pe)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(ue)}}finally{de.releaseLock()}})}function ce(ie){return(0,ee.m)(null==ie?void 0:ie.getReader)}},4482:(Qe,ve,L)=>{L.d(ve,{A:()=>ee,e:()=>V});var m=L(576);function ee(ce){return(0,m.m)(null==ce?void 0:ce.lift)}function V(ce){return ie=>{if(ee(ie))return ie.lift(function(me){try{return ce(me,this)}catch(de){this.error(de)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Qe,ve,L)=>{function m(){}L.d(ve,{Z:()=>m})},7849:(Qe,ve,L)=>{L.d(ve,{h:()=>V});var m=L(2416),ee=L(3410);function V(ce){ee.z.setTimeout(()=>{const{onUnhandledError:ie}=m.v;if(!ie)throw ce;ie(ce)})}},4532:(Qe,ve,L)=>{function m(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(ve,{z:()=>m})},655:(Qe,ve,L)=>{function ce(J,se){var te={};for(var _e in J)Object.prototype.hasOwnProperty.call(J,_e)&&se.indexOf(_e)<0&&(te[_e]=J[_e]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var le=0;for(_e=Object.getOwnPropertySymbols(J);le<_e.length;le++)se.indexOf(_e[le])<0&&Object.prototype.propertyIsEnumerable.call(J,_e[le])&&(te[_e[le]]=J[_e[le]])}return te}function ue(J,se,te,_e){return new(te||(te=Promise))(function(Oe,lt){function Ht(nn){try{Ye(_e.next(nn))}catch(xn){lt(xn)}}function Ft(nn){try{Ye(_e.throw(nn))}catch(xn){lt(xn)}}function Ye(nn){nn.done?Oe(nn.value):function le(Oe){return Oe instanceof te?Oe:new te(function(lt){lt(Oe)})}(nn.value).then(Ht,Ft)}Ye((_e=_e.apply(J,se||[])).next())})}function ge(J){return this instanceof ge?(this.v=J,this):new ge(J)}function De(J,se,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var le,_e=te.apply(J,se||[]),Oe=[];return le={},lt("next"),lt("throw"),lt("return"),le[Symbol.asyncIterator]=function(){return this},le;function lt(rn){_e[rn]&&(le[rn]=function(Qt){return new Promise(function(Rr,zt){Oe.push([rn,Qt,Rr,zt])>1||Ht(rn,Qt)})})}function Ht(rn,Qt){try{!function Ft(rn){rn.value instanceof ge?Promise.resolve(rn.value.v).then(Ye,nn):xn(Oe[0][2],rn)}(_e[rn](Qt))}catch(Rr){xn(Oe[0][3],Rr)}}function Ye(rn){Ht("next",rn)}function nn(rn){Ht("throw",rn)}function xn(rn,Qt){rn(Qt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function Ze(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function re(J){var se="function"==typeof Symbol&&Symbol.iterator,te=se&&J[se],_e=0;if(te)return te.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&_e>=J.length&&(J=void 0),{value:J&&J[_e++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),te={},_e("next"),_e("throw"),_e("return"),te[Symbol.asyncIterator]=function(){return this},te);function _e(Oe){te[Oe]=J[Oe]&&function(lt){return new Promise(function(Ht,Ft){!function le(Oe,lt,Ht,Ft){Promise.resolve(Ft).then(function(Ye){Oe({value:Ye,done:Ht})},lt)}(Ht,Ft,(lt=J[Oe](lt)).done,lt.value)})}}}L.d(ve,{FC:()=>De,KL:()=>Ze,_T:()=>ce,mG:()=>ue,qq:()=>ge})},5e3:(Qe,ve,L)=>{L.d(ve,{$8M:()=>su,$Z:()=>iw,AFp:()=>Su,AaK:()=>ue,CHM:()=>ju,CRH:()=>db,CZH:()=>ey,CqO:()=>ow,EJc:()=>Tb,EpF:()=>dh,F4k:()=>cr,FYo:()=>zc,FiY:()=>It,G48:()=>C0,Gf:()=>lb,GfV:()=>Kc,Gpc:()=>z,JOm:()=>A,LFG:()=>T,LSH:()=>Ud,Lbi:()=>mA,MAs:()=>Xv,NdJ:()=>aw,OlP:()=>En,Oqu:()=>I_,PXZ:()=>DA,Q6J:()=>d_,QGY:()=>sw,Qsj:()=>wu,R0b:()=>Lo,RDi:()=>Jl,Rgc:()=>Bp,SBq:()=>vu,Sil:()=>wA,Suo:()=>cb,TTD:()=>Vi,TgZ:()=>h_,VLi:()=>ry,X6Q:()=>Vb,XFs:()=>_t,Xpm:()=>Le,Y36:()=>kc,YKP:()=>WI,YNc:()=>up,Yjl:()=>ka,Yz7:()=>Qt,ZZ4:()=>ig,_Bn:()=>jw,_UZ:()=>lh,_Vd:()=>qc,_c5:()=>Gb,_uU:()=>Ar,aQg:()=>my,c2e:()=>yA,cJS:()=>zt,cg1:()=>x_,dDg:()=>ny,deG:()=>uf,dqk:()=>Vt,eFA:()=>kb,ekj:()=>Ep,g9A:()=>bb,h0i:()=>Ta,hGG:()=>Wb,hij:()=>b_,iGM:()=>ub,ifc:()=>$t,ip1:()=>Xc,kL8:()=>EI,lG2:()=>jo,n5z:()=>Wi,oAB:()=>Nt,oxw:()=>mp,q4F:()=>j_,qLn:()=>ll,qOj:()=>Gv,qZA:()=>f_,sBO:()=>b0,sIi:()=>nh,s_b:()=>bu,soG:()=>f0,tBr:()=>yt,tb:()=>Kp,tp0:()=>Rt,uIk:()=>n_,vHH:()=>Ne,vpe:()=>Fo,wAp:()=>vt,xp6:()=>zd,z2F:()=>oy,zSh:()=>_l,zs3:()=>eo});var m=L(7579),ee=L(727),V=L(8306),ce=L(6451),ie=L(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function de(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function pe(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const W=me({__forward_ref__:me});function z(s){return s.__forward_ref__=z,s.toString=function(){return ue(this())},s}function re(s){return $e(s)?s():s}function $e(s){return"function"==typeof s&&s.hasOwnProperty(W)&&s.__forward_ref__===z}class Ne extends Error{constructor(o,u){super(function Ve(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function ge(s){return"string"==typeof s?s:null==s?"":String(s)}function De(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ge(s)}function Ee(s,o){const u=o?` in ${o}`:"";throw new Ne(-201,`No provider for ${De(s)} found${u}`)}function Ft(s,o){null==s&&function Ye(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function zt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return Ai(s,xi)||Ai(s,Gr)}function Ai(s,o){return s.hasOwnProperty(o)?s[o]:null}function $r(s){return s&&(s.hasOwnProperty(ks)||s.hasOwnProperty(_i))?s[ks]:null}const xi=me({\u0275prov:me}),ks=me({\u0275inj:me}),Gr=me({ngInjectableDef:me}),_i=me({ngInjectorDef:me});var _t=(()=>((_t=_t||{})[_t.Default=0]="Default",_t[_t.Host=1]="Host",_t[_t.Self=2]="Self",_t[_t.SkipSelf=4]="SkipSelf",_t[_t.Optional=8]="Optional",_t))();let Wr;function Kn(s){const o=Wr;return Wr=s,o}function Ri(s,o,u){const c=Lt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&_t.Optional?null:void 0!==o?o:void Ee(ue(s),"Injector")}function bn(s){return{toString:s}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const it="undefined"!=typeof globalThis&&globalThis,wt="undefined"!=typeof window&&window,Er="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=it||"undefined"!=typeof global&&global||wt||Er,Mr={},ct=[],Ls=me({\u0275cmp:me}),$=me({\u0275dir:me}),Y=me({\u0275pipe:me}),H=me({\u0275mod:me}),q=me({\u0275fac:me}),Z=me({__NG_ELEMENT_ID__:me});let xe=0;function Le(s){return bn(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||ct,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||ct,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,g=s.features,v=s.pipes;return c.id+=xe++,c.inputs=Ni(s.inputs,u),c.outputs=Ni(s.outputs),g&&g.forEach(C=>C(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(sn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(Kt):null,c})}function sn(s){return Zn(s)||function Nr(s){return s[$]||null}(s)}function Kt(s){return function fs(s){return s[Y]||null}(s)}const sr={};function Nt(s){return bn(()=>{const o={type:s.type,bootstrap:s.bootstrap||ct,declarations:s.declarations||ct,imports:s.imports||ct,exports:s.exports||ct,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(sr[s.id]=s.type),o})}function Ni(s,o){if(null==s)return Mr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],g=d;Array.isArray(d)&&(g=d[1],d=d[0]),u[d]=c,o&&(o[d]=g)}return u}const jo=Le;function ka(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function Zn(s){return s[Ls]||null}function Yn(s,o){const u=s[H]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function Zr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ki(s){return Array.isArray(s)&&!0===s[1]}function Lu(s){return 0!=(8&s.flags)}function ld(s){return 2==(2&s.flags)}function Fi(s){return 1==(1&s.flags)}function Li(s){return null!==s.template}function Kl(s){return 0!=(512&s[2])}function Dr(s,o){return s.hasOwnProperty(q)?s[q]:null}class ho{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Vi(){return Wo}function Wo(s){return s.type.prototype.ngOnChanges&&(s.setInput=ef),_d}function _d(){const s=fo(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Mr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ef(s,o,u,c){const d=fo(s)||function qo(s,o){return s[yd]=o}(s,{previous:Mr,current:null}),g=d.current||(d.current={}),v=d.previous,C=this.declaredInputs[u],I=v[C];g[C]=new ho(I&&I.currentValue,o,v===Mr),s[c]=o}Vi.ngInherit=!0;const yd="__ngSimpleChanges__";function fo(s){return s[yd]||null}let Ko;function Jl(s){Ko=s}function an(s){return!!s.listen}const Ua={createRenderer:(s,o)=>function Ui(){return void 0!==Ko?Ko:"undefined"!=typeof document?document:void 0}()};function en(s){for(;Array.isArray(s);)s=s[0];return s}function $s(s,o){return en(o[s])}function pr(s,o){return en(o[s.index])}function wn(s,o){return s.data[o]}function gr(s,o){const u=o[s];return Zr(u)?u:u[0]}function go(s){return 4==(4&s[2])}function ms(s){return 128==(128&s[2])}function vi(s,o){return null==o?null:s[o]}function ji(s){s[18]=0}function Zo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const pt={lFrame:Ed(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function $a(){return pt.bindingsEnabled}function Ae(){return pt.lFrame.lView}function Pt(){return pt.lFrame.tView}function ju(s){return pt.lFrame.contextLView=s,s[8]}function _n(){let s=Qo();for(;null!==s&&64===s.type;)s=s.parent;return s}function Qo(){return pt.lFrame.currentTNode}function li(s,o){const u=pt.lFrame;u.currentTNode=s,u.isParent=o}function Ga(){return pt.lFrame.isParent}function Wa(){return pt.isInCheckNoChangesMode}function $u(s){pt.isInCheckNoChangesMode=s}function Gs(){return pt.lFrame.bindingIndex++}function sc(s,o){const u=pt.lFrame;u.bindingIndex=u.bindingRootIndex=s,za(o)}function za(s){pt.lFrame.currentDirectiveIndex=s}function oc(){return pt.lFrame.currentQueryIndex}function Za(s){pt.lFrame.currentQueryIndex=s}function Bg(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ac(s,o,u){if(u&_t.SkipSelf){let d=o,g=s;for(;!(d=d.parent,null!==d||u&_t.Host||(d=Bg(g),null===d||(g=g[15],10&d.type))););if(null===d)return!1;o=d,s=g}const c=pt.lFrame=Ya();return c.currentTNode=o,c.lView=s,!0}function Jo(s){const o=Ya(),u=s[1];pt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Ya(){const s=pt.lFrame,o=null===s?null:s.child;return null===o?Ed(s):o}function Ed(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Xo(){const s=pt.lFrame;return pt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Cd=Xo;function ea(){const s=Xo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ar(){return pt.lFrame.selectedIndex}function $i(s){pt.lFrame.selectedIndex=s}function Dn(){const s=pt.lFrame;return wn(s.tView,s.selectedIndex)}function bd(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const g=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:M}=g;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=M&&(s.destroyHooks||(s.destroyHooks=[])).push(u,M)}}function Qa(s,o,u){ur(s,o,3,u)}function ys(s,o,u,c){(3&s[2])===u&&ur(s,o,u,c)}function ta(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function ur(s,o,u,c){const g=null!=c?c:-1,v=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<g||-1==g)&&(sf(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function sf(s,o,u,c){const d=u[c]<0,g=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{g.call(C)}finally{}}}else try{g.call(C)}finally{}}class qu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function xt(s,o,u){const c=an(s);let d=0;for(;d<u.length;){const g=u[d];if("number"==typeof g){if(0!==g)break;d++;const v=u[d++],C=u[d++],I=u[d++];c?s.setAttribute(o,C,I,v):o.setAttributeNS(v,C,I)}else{const v=g,C=u[++d];Yr(v)?c&&s.setProperty(o,v,C):c?s.setAttribute(o,v,C):o.setAttribute(v,C),d++}}return d}function ut(s){return 3===s||4===s||6===s}function Yr(s){return 64===s.charCodeAt(0)}function cn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Ja(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Ja(s,o,u,c,d){let g=0,v=s.length;if(-1===o)v=-1;else for(;g<s.length;){const C=s[g++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=g-1;break}}}for(;g<s.length;){const C=s[g];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[g+1]=d));if(c===s[g+1])return void(s[g+2]=d)}g++,null!==c&&g++,null!==d&&g++}-1!==v&&(s.splice(v,0,o),g=v+1),s.splice(g++,0,u),null!==c&&s.splice(g++,0,c),null!==d&&s.splice(g++,0,d)}function vo(s){return-1!==s}function fn(s){return 32767&s}function Gt(s,o){let u=function Pn(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let ht=!0;function Ws(s){const o=ht;return ht=s,o}let af=0;function Xa(s,o){const u=eu(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,vs(c.data,s),vs(o,null),vs(c.blueprint,null));const d=lr(s,o),g=s.injectorIndex;if(vo(d)){const v=fn(d),C=Gt(d,o),I=C[1].data;for(let x=0;x<8;x++)o[g+x]=C[v+x]|I[v+x]}return o[g+8]=d,g}function vs(s,o){s.push(0,0,0,0,0,0,0,0,o)}function eu(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function lr(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const g=d[1],v=g.type;if(c=2===v?g.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function ra(s,o,u){!function Zu(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Z)&&(c=u[Z]),null==c&&(c=u[Z]=af++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Yu(s,o,u){if(u&_t.Optional)return s;Ee(o,"NodeInjector")}function ia(s,o,u,c){if(u&_t.Optional&&void 0===c&&(c=null),0==(u&(_t.Self|_t.Host))){const d=s[9],g=Kn(void 0);try{return d?d.get(o,c,u&_t.Optional):Ri(o,c,u&_t.Optional)}finally{Kn(g)}}return Yu(c,o,u)}function tu(s,o,u,c=_t.Default,d){if(null!==s){const g=function Qu(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Z)?s[Z]:void 0;return"number"==typeof o?o>=0?255&o:ru:o}(u);if("function"==typeof g){if(!ac(o,s,c))return c&_t.Host?Yu(d,u,c):ia(o,u,c,d);try{const v=g(c);if(null!=v||c&_t.Optional)return v;Ee(u)}finally{Cd()}}else if("number"==typeof g){let v=null,C=eu(s,o),I=-1,x=c&_t.Host?o[16][6]:null;for((-1===C||c&_t.SkipSelf)&&(I=-1===C?lr(s,o):o[C+8],-1!==I&&iu(c,!1)?(v=o[1],C=fn(I),o=Gt(I,o)):C=-1);-1!==C;){const M=o[1];if(Gi(g,C,M.data)){const U=wo(C,o,u,v,c,x);if(U!==nu)return U}I=o[C+8],-1!==I&&iu(c,o[1].data[C+8]===x)&&Gi(g,C,o)?(v=M,C=fn(I),o=Gt(I,o)):C=-1}}}return ia(o,u,c,d)}const nu={};function ru(){return new qs(_n(),Ae())}function wo(s,o,u,c,d,g){const v=o[1],C=v.data[s+8],M=gn(C,v,u,null==c?ld(C)&&ht:c!=v&&0!=(3&C.type),d&_t.Host&&g===C);return null!==M?Eo(o,v,M,C):nu}function gn(s,o,u,c,d){const g=s.providerIndexes,v=o.data,C=1048575&g,I=s.directiveStart,M=g>>20,G=d?C+M:s.directiveEnd;for(let X=c?C:C+M;X<G;X++){const ye=v[X];if(X<I&&u===ye||X>=I&&ye.type===u)return X}if(d){const X=v[I];if(X&&Li(X)&&X.type===u)return I}return null}function Eo(s,o,u,c){let d=s[u];const g=o.data;if(function Dd(s){return s instanceof qu}(d)){const v=d;v.resolving&&function qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ne(-200,`Circular dependency in DI detected for ${s}${u}`)}(De(g[u]));const C=Ws(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?Kn(v.injectImpl):null;ac(s,c,_t.Default);try{d=s[u]=v.factory(void 0,g,s,c),o.firstCreatePass&&u>=c.directiveStart&&function jg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:g}=o.type.prototype;if(c){const v=Wo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),g&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,g),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,g))}(u,g[u],o)}finally{null!==I&&Kn(I),Ws(C),v.resolving=!1,Cd()}}return d}function Gi(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function iu(s,o){return!(s&_t.Self||s&_t.Host&&o)}class qs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return tu(this._tNode,this._lView,o,c,u)}}function Wi(s){return bn(()=>{const o=s.prototype.constructor,u=o[q]||Co(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const g=d[q]||Co(d);if(g&&g!==u)return g;d=Object.getPrototypeOf(d)}return g=>new g})}function Co(s){return $e(s)?()=>{const o=Co(re(s));return o&&o()}:Dr(s)}function su(s){return function lc(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const g=u[d];if(ut(g))break;if(0===g)d+=2;else if("number"==typeof g)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(g===o)return u[d+1];d+=2}}}return null}(_n(),s)}const Io="__parameters__";function Ju(s,o,u){return bn(()=>{const c=function bo(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...g){if(this instanceof d)return c.apply(this,g),this;const v=new d(...g);return C.annotation=v,C;function C(I,x,M){const U=I.hasOwnProperty(Io)?I[Io]:Object.defineProperty(I,Io,{value:[]})[Io];for(;U.length<=M;)U.push(null);return(U[M]=U[M]||[]).push(v),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class En{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const uf=new En("AnalyzeForEntryComponents");function Ei(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Ei(c,o)):o!==s&&o.push(c)}return o}function Hn(s,o){s.forEach(u=>Array.isArray(u)?Hn(u,o):o(u))}function Do(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Es(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Jn(s,o,u){let c=zi(s,o);return c>=0?s[1|c]=u:(c=~c,function Zs(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Cs(s,o){const u=zi(s,o);if(u>=0)return s[1|u]}function zi(s,o){return function el(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const g=c+(d-c>>1),v=s[g<<u];if(o===v)return g<<u;v>o?d=g:c=g+1}return~(d<<u)}(s,o,1)}const uu={},Qr="__NG_DI_FLAG__",lu="ngTempTokenPath",ff=/\n/gm,gc="__source",pf=me({provide:String,useValue:me});let tl;function zg(s){const o=tl;return tl=s,o}function b(s,o=_t.Default){if(void 0===tl)throw new Ne(203,"");return null===tl?Ri(s,void 0,o):tl.get(s,o&_t.Optional?null:void 0,o)}function T(s,o=_t.Default){return(function Rn(){return Wr}()||b)(re(s),o)}const B=T;function k(s){const o=[];for(let u=0;u<s.length;u++){const c=re(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Ne(900,"");let d,g=_t.Default;for(let v=0;v<c.length;v++){const C=c[v],I=be(C);"number"==typeof I?-1===I?d=C.token:g|=I:d=C}o.push(T(d,g))}else o.push(T(c))}return o}function ne(s,o){return s[Qr]=o,s.prototype[Qr]=o,s}function be(s){return s[Qr]}const yt=ne(Ju("Inject",s=>({token:s})),-1),It=ne(Ju("Optional"),8),Rt=ne(Ju("SkipSelf"),4);class Qg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Js(s){return s instanceof Qg?s.changingThisBreaksApplicationSecurity:s}const Yy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Cf=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Cn=(()=>((Cn=Cn||{})[Cn.NONE=0]="NONE",Cn[Cn.HTML=1]="HTML",Cn[Cn.STYLE=2]="STYLE",Cn[Cn.SCRIPT=3]="SCRIPT",Cn[Cn.URL=4]="URL",Cn[Cn.RESOURCE_URL=5]="RESOURCE_URL",Cn))();function Ud(s){const o=function Cc(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Cn.URL,s)||"":function la(s,o){const u=function _c(s){return s instanceof Qg&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Js(s):function Ji(s){return(s=String(s)).match(Yy)||s.match(Cf)?s:"unsafe:"+s}(ge(s))}const fm="__ngContext__";function Xn(s,o){s[fm]=o}function jd(s){const o=function ul(s){return s[fm]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function Xs(s){return s.ngOriginalError}function xf(s,...o){s.error(...o)}class ll{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function $d(s){return s&&s.ngErrorLogger||xf}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&Xs(o);for(;u&&Xs(u);)u=Xs(u);return u||null}}const wm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function ts(s){return s instanceof Function?s():s}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function Q(s,o){return undefined(s,o)}function Ke(s){const o=s[3];return ki(o)?o[3]:o}function $n(s){return cl(s[13])}function mr(s){return cl(s[4])}function cl(s){for(;null!==s&&!ki(s);)s=s[4];return s}function ns(s,o,u,c,d){if(null!=c){let g,v=!1;ki(c)?g=c:Zr(c)&&(v=!0,c=c[0]);const C=en(c);0===s&&null!==u?null==d?nC(o,u,C):Sc(o,u,C,d||null,!0):1===s&&null!==u?Sc(o,u,C,d||null,!0):2===s?function oC(s,o,u){const c=Sm(s,o);c&&function wT(s,o,u,c){an(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=g&&function CT(s,o,u,c,d){const g=u[7];g!==en(u)&&ns(o,s,c,g,d);for(let C=10;C<u.length;C++){const I=u[C];Uf(I[1],I,s,o,c,g)}}(o,s,g,u,d)}}function qd(s,o,u){if(an(s))return s.createElement(o,u);{const c=null!==u?function Ql(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function Dm(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Zo(d,-1)),u.splice(c,1)}function kf(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&Dm(d,c),o>0&&(s[u-1][4]=c[4]);const g=Es(s,10+o);!function Cm(s,o){Uf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=g[19];null!==v&&v.detachView(g[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function fa(s,o){if(!(256&o[2])){const u=o[11];an(u)&&u.destroyNode&&Uf(s,o,u,3,null,null),function nv(s){let o=s[13];if(!o)return Tm(s[1],s);for(;o;){let u=null;if(Zr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)Zr(o)&&Tm(o[1],o),o=o[3];null===o&&(o=s),Zr(o)&&Tm(o[1],o),u=o&&o[4]}o=u}}(o)}}function Tm(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function vT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof qu)){const g=u[c+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const C=d[g[v]],I=g[v+1];try{I.call(C)}finally{}}else try{g.call(d)}finally{}}}}(s,o),function hl(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let g=0;g<u.length-1;g+=2)if("string"==typeof u[g]){const v=u[g+1],C="function"==typeof v?v(o):en(o[v]),I=c[d=u[g+2]],x=u[g+3];"boolean"==typeof x?C.removeEventListener(u[g],I,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),g+=2}else{const v=c[d=u[g+1]];u[g].call(v)}if(null!==c){for(let g=d+1;g<c.length;g++)c[g]();o[7]=null}}(s,o),1===o[1].type&&an(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&ki(o[3])){u!==o[3]&&Dm(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function Ff(s,o,u){return function tC(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===$t.None||d===$t.Emulated)return null}return pr(c,u)}(s,o.parent,u)}function Sc(s,o,u,c,d){an(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function nC(s,o,u){an(s)?s.appendChild(o,u):o.appendChild(u)}function rC(s,o,u,c,d){null!==c?Sc(s,o,u,c,d):nC(s,o,u)}function Sm(s,o){return an(s)?s.parentNode(o):o.parentNode}let rs=function sC(s,o,u){return 40&s.type?pr(s,u):null};function Vf(s,o,u,c){const d=Ff(s,c,o),g=o[11],C=function iC(s,o,u){return rs(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)rC(g,d,u[I],C,!1);else rC(g,d,u,C,!1)}function xm(s,o){if(null!==o){const u=o.type;if(3&u)return pr(o,s);if(4&u)return Rm(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return xm(s,c);{const d=s[o.index];return ki(d)?Rm(-1,d):en(d)}}if(32&u)return Q(o,s)()||en(s[o.index]);{const c=rv(s,o);return null!==c?Array.isArray(c)?c[0]:xm(Ke(s[16]),c):xm(s,o.next)}}return null}function rv(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Rm(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return xm(c,d)}return o[7]}function iv(s,o,u,c,d,g,v){for(;null!=u;){const C=c[u.index],I=u.type;if(v&&0===o&&(C&&Xn(en(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)iv(s,o,u.child,c,d,g,!1),ns(o,s,d,C,g);else if(32&I){const x=Q(u,c);let M;for(;M=x();)ns(o,s,d,M,g);ns(o,s,d,C,g)}else 16&I?Mm(s,o,c,u,d,g):ns(o,s,d,C,g);u=v?u.projectionNext:u.next}}function Uf(s,o,u,c,d,g){iv(u,c,s.firstChild,o,d,g,!1)}function Mm(s,o,u,c,d,g){const v=u[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)ns(o,s,d,I[x],g);else iv(s,o,I,v[3],d,g,!0)}function sv(s,o,u){an(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function ov(s,o,u){an(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function hi(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const g=o.length;if(d+g===c||s.charCodeAt(d+g)<=32)return d}u=d+1}}const aC="ng-template";function Bf(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==hi(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function uC(s){return 4===s.type&&s.value!==aC}function bT(s,o,u){return o===(4!==s.type||u?s.value:aC)}function lC(s,o,u){let c=4;const d=s.attrs||[],g=function DT(s){for(let o=0;o<s.length;o++)if(ut(s[o]))return o;return s.length}(d);let v=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!bT(s,I,u)||""===I&&1===o.length){if(To(c))return!1;v=!0}}else{const x=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!Bf(s.attrs,x,u)){if(To(c))return!1;v=!0}continue}const U=uv(8&c?"class":I,d,uC(s),u);if(-1===U){if(To(c))return!1;v=!0;continue}if(""!==x){let G;G=U>g?"":d[U+1].toLowerCase();const X=8&c?G:null;if(X&&-1!==hi(X,x,0)||2&c&&x!==G){if(To(c))return!1;v=!0}}}}else{if(!v&&!To(c)&&!To(I))return!1;if(v&&To(I))continue;v=!1,c=I|1&c}}return To(c)||v}function To(s){return 0==(1&s)}function uv(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let g=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)g=!0;else{if(1===v||2===v){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=g?1:2}return-1}return function TT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function lv(s,o,u=!1){for(let c=0;c<o.length;c++)if(lC(s,o[c],u))return!0;return!1}function So(s,o){return s?":not("+o.trim()+")":o}function Nm(s){let o=s[0],u=1,c=2,d="",g=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!To(v)&&(o+=So(g,d),d=""),c=v,g=g||!To(c);u++}return""!==d&&(o+=So(g,d)),o}const bt={};function zd(s){cv(Pt(),Ae(),ar()+s,Wa())}function cv(s,o,u,c){if(!c)if(3==(3&o[2])){const g=s.preOrderCheckHooks;null!==g&&Qa(o,g,u)}else{const g=s.preOrderHooks;null!==g&&ys(o,g,0,u)}$i(u)}function jf(s,o){return s<<17|o<<2}function Ao(s){return s>>17&32767}function dv(s){return 2|s}function ma(s){return(131068&s)>>2}function Pm(s,o){return-131069&s|o<<2}function $f(s){return 1|s}function BT(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],g=u[c+1];if(-1!==g){const v=s.data[g];Za(d),v.contentQueries(2,o[g],g)}}}function qf(s,o,u,c,d,g,v,C,I,x){const M=o.blueprint.slice();return M[0]=d,M[2]=140|c,ji(M),M[3]=M[15]=s,M[8]=u,M[10]=v||s&&s[10],M[11]=C||s&&s[11],M[12]=I||s&&s[12]||null,M[9]=x||s&&s[9]||null,M[6]=g,M[16]=2==o.type?s[16]:M,M}function Kd(s,o,u,c,d){let g=s.data[o];if(null===g)g=function mv(s,o,u,c,d){const g=Qo(),v=Ga(),I=s.data[o]=function IC(s,o,u,c,d,g){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(s,o,u,c,d),function ic(){return pt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=u,g.value=c,g.attrs=d;const v=function mo(){const s=pt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return li(g,!0),g}function Zd(s,o,u,c){if(0===u)return-1;const d=o.length;for(let g=0;g<u;g++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function zf(s,o,u){Jo(o);try{const c=s.viewQuery;null!==c&&Tv(1,c,u);const d=s.template;null!==d&&EC(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&BT(s,o),s.staticViewQueries&&Tv(2,s.viewQuery,u);const g=s.components;null!==g&&function jT(s,o){for(let u=0;u<o.length;u++)Yf(s,o[u])}(o,g)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ea()}}function Yd(s,o,u,c){const d=o[2];if(256==(256&d))return;Jo(o);const g=Wa();try{ji(o),function qa(s){return pt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&EC(s,o,u,2,c);const v=3==(3&d);if(!g)if(v){const x=s.preOrderCheckHooks;null!==x&&Qa(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ys(o,x,0,null),ta(o,0)}if(function St(s){for(let o=$n(s);null!==o;o=mr(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],g=d[3];0==(1024&d[2])&&Zo(g,1),d[2]|=1024}}}(o),function Iv(s){for(let o=$n(s);null!==o;o=mr(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ms(c)&&Yd(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&BT(s,o),!g)if(v){const x=s.contentCheckHooks;null!==x&&Qa(o,x)}else{const x=s.contentHooks;null!==x&&ys(o,x,1),ta(o,1)}!function FM(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)$i(~d);else{const g=d,v=u[++c],C=u[++c];sc(v,g),C(2,o[g])}}}finally{$i(-1)}}(s,o);const C=s.components;null!==C&&function LM(s,o){for(let u=0;u<o.length;u++)Gm(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&Tv(2,I,c),!g)if(v){const x=s.viewCheckHooks;null!==x&&Qa(o,x)}else{const x=s.viewHooks;null!==x&&ys(o,x,2),ta(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),g||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Zo(o[3],-1))}finally{ea()}}function wC(s,o,u,c){const d=o[10],g=!Wa(),v=go(o);try{g&&!v&&d.begin&&d.begin(),v&&zf(s,o,c),Yd(s,o,u,c)}finally{g&&!v&&d.end&&d.end()}}function EC(s,o,u,c,d){const g=ar(),v=2&c;try{$i(-1),v&&o.length>20&&cv(s,o,20,Wa()),u(c,d)}finally{$i(g)}}function _v(s,o,u){!$a()||(function BM(s,o,u,c){const d=u.directiveStart,g=u.directiveEnd;s.firstCreatePass||Xa(u,o),Xn(c,o);const v=u.initialInputs;for(let C=d;C<g;C++){const I=s.data[C],x=Li(I);x&&Ac(o,u,I);const M=Eo(o,s,C,u);Xn(M,o),null!==v&&jM(0,C-d,M,I,0,v),x&&(gr(u.index,o)[8]=M)}}(s,o,u,pr(u,o)),128==(128&u.flags)&&function XT(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,C=function Wu(){return pt.lFrame.currentDirectiveIndex}();try{$i(v);for(let I=c;I<d;I++){const x=s.data[I],M=o[I];za(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&DC(x,M)}}finally{$i(-1),za(C)}}(s,o,u))}function CC(s,o,u=pr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let g=0;g<c.length;g+=2){const v=c[g+1],C=-1===v?u(o,s):s[v];s[d++]=C}}}function $T(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Bm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Bm(s,o,u,c,d,g,v,C,I,x){const M=20+c,U=M+d,G=function GT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:bt);return u}(M,U),X="function"==typeof x?x():x;return G[1]={type:s,blueprint:G,template:u,queries:null,viewQuery:C,declTNode:o,data:G.slice().fill(null,M),bindingStartIndex:M,expandoStartIndex:U,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:X,incompleteFirstPass:!1}}function ya(s,o,u,c){const d=Wm(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Sv(s).push(c,d.length-1))}function vv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function wv(s,o,u,c){let d=!1;if($a()){const g=function jm(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let g=0;g<c.length;g++){const v=c[g];lv(u,v.selectors,!1)&&(d||(d=[]),ra(Xa(u,o),s,v.type),Li(v)?(TC(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==g){d=!0,$m(u,s.data.length,g.length);for(let M=0;M<g.length;M++){const U=g[M];U.providersResolver&&U.providersResolver(U)}let C=!1,I=!1,x=Zd(s,o,g.length,null);for(let M=0;M<g.length;M++){const U=g[M];u.mergedAttrs=cn(u.mergedAttrs,U.hostAttrs),SC(s,u,o,x,U),Hm(x,U,v),null!==U.contentQueries&&(u.flags|=8),(null!==U.hostBindings||null!==U.hostAttrs||0!==U.hostVars)&&(u.flags|=128);const G=U.type.prototype;!C&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),x++}!function qT(s,o){const c=o.directiveEnd,d=s.data,g=o.attrs,v=[];let C=null,I=null;for(let x=o.directiveStart;x<c;x++){const M=d[x],U=M.inputs,G=null===g||uC(o)?null:eS(U,g);v.push(G),C=vv(U,x,C),I=vv(M.outputs,x,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=I}(s,u)}v&&function Ev(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const g=u[o[d+1]];if(null==g)throw new Ne(-301,!1);c.push(o[d],g)}}}(u,c,v)}return u.mergedAttrs=cn(u.mergedAttrs,u.attrs),d}function bC(s,o,u,c,d,g){const v=g.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function JT(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,d,v)}}function DC(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function TC(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function Hm(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Li(o)&&(u[""]=s)}}function $m(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function SC(s,o,u,c,d){s.data[c]=d;const g=d.factory||(d.factory=Dr(d.type)),v=new qu(g,Li(d),null);s.blueprint[c]=v,u[c]=v,bC(s,o,0,c,Zd(s,u,d.hostVars,bt),d)}function Ac(s,o,u){const c=pr(o,s),d=$T(u),g=s[10],v=Jd(s,qf(s,d,null,u.onPush?64:16,c,o,g,g.createRenderer(c,u),null,null));s[o.index]=v}function Ro(s,o,u,c,d,g){const v=pr(s,o);!function Cv(s,o,u,c,d,g,v){if(null==g)an(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const C=null==v?ge(g):v(g,c||"",d);an(s)?s.setAttribute(o,d,C,u):u?o.setAttributeNS(u,d,C):o.setAttribute(d,C)}}(o[11],v,g,s.value,u,c,d)}function jM(s,o,u,c,d,g){const v=g[o];if(null!==v){const C=c.setInput;for(let I=0;I<v.length;){const x=v[I++],M=v[I++],U=v[I++];null!==C?c.setInput(u,U,x,M):u[M]=U}}}function eS(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function st(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function Gm(s,o){const u=gr(o,s);if(ms(u)){const c=u[1];80&u[2]?Yd(c,u,c.template,u[8]):u[5]>0&&Qd(u)}}function Qd(s){for(let c=$n(s);null!==c;c=mr(c))for(let d=10;d<c.length;d++){const g=c[d];if(1024&g[2]){const v=g[1];Yd(v,g,v.template,g[8])}else g[5]>0&&Qd(g)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=gr(u[c],s);ms(d)&&d[5]>0&&Qd(d)}}function Yf(s,o){const u=gr(o,s),c=u[1];(function tS(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),zf(c,u,u[8])}function Jd(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function bv(s){for(;s;){s[2]|=64;const o=Ke(s);if(Kl(s)&&!o)return s;s=o}return null}function Vr(s,o,u){const c=o[10];c.begin&&c.begin();try{Yd(s,o,s.template,u)}catch(d){throw xC(o,d),d}finally{c.end&&c.end()}}function Qf(s){!function Dv(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=jd(u),d=c[1];wC(d,c,d.template,u)}}(s[8])}function Tv(s,o,u){Za(0),o(s,u)}const AC=(()=>Promise.resolve(null))();function Wm(s){return s[7]||(s[7]=[])}function Sv(s){return s.cleanup||(s.cleanup=[])}function xC(s,o){const u=s[9],c=u?u.get(ll,null):null;c&&c.handleError(o)}function Jf(s,o,u,c,d){for(let g=0;g<u.length;){const v=u[g++],C=u[g++],I=o[v],x=s.data[v];null!==x.setInput?x.setInput(I,d,c,C):I[C]=d}}function va(s,o,u){const c=$s(o,s);!function _r(s,o,u){an(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Xd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,g=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?g=C:1==g?d=pe(d,C):2==g&&(c=pe(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Av=new En("INJECTOR",-1);class MC{get(o,u=uu){if(u===uu){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const _l=new En("Set Injector scope."),eh={},xv={};let zm;function NC(){return void 0===zm&&(zm=new MC),zm}function Rv(s,o=null,u=null,c){const d=Xf(s,o,u,c);return d._resolveInjectorDefTypes(),d}function Xf(s,o=null,u=null,c){return new Mv(s,u,o||NC(),c)}class Mv{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const g=[];u&&Hn(u,C=>this.processProvider(C,o,u)),Hn([o],C=>this.processInjectorType(C,[],g)),this.records.set(Av,yl(void 0,this));const v=this.records.get(_l);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=uu,c=_t.Default){this.assertNotDestroyed();const d=zg(this),g=Kn(void 0);try{if(!(c&_t.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function Km(s){return"function"==typeof s||"object"==typeof s&&s instanceof En}(o)&&Lt(o);C=I&&this.injectableDefInScope(I)?yl(ep(o),eh):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&_t.Self?NC():this.parent).get(o,u=c&_t.Optional&&u===uu?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[lu]=v[lu]||[]).unshift(ue(o)),d)throw v;return function R(s,o,u,c){const d=s[lu];throw o[gc]&&d.unshift(o[gc]),s.message=function Xe(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let g=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];g.push(v+":"+("string"==typeof C?JSON.stringify(C):ue(C)))}d=`{${g.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(ff,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[lu]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{Kn(g),zg(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ne(205,!1)}processInjectorType(o,u,c){if(!(o=re(o)))return!1;let d=$r(o);const g=null==d&&o.ngModule||void 0,v=void 0===g?o:g,C=-1!==c.indexOf(v);if(void 0!==g&&(d=$r(g)),null==d)return!1;if(null!=d.imports&&!C){let M;c.push(v);try{Hn(d.imports,U=>{this.processInjectorType(U,u,c)&&(void 0===M&&(M=[]),M.push(U))})}finally{}if(void 0!==M)for(let U=0;U<M.length;U++){const{ngModule:G,providers:X}=M[U];Hn(X,ye=>this.processProvider(ye,G,X||ct))}}this.injectorDefTypes.add(v);const I=Dr(v)||(()=>new v);this.records.set(v,yl(I,eh));const x=d.providers;if(null!=x&&!C){const M=o;Hn(x,U=>this.processProvider(U,M,x))}return void 0!==g&&void 0!==o.providers}processProvider(o,u,c){let d=th(o=re(o))?o:re(o&&o.provide);const g=function rS(s,o,u){return Pv(s)?yl(void 0,s.useValue):yl(PC(s),eh)}(o);if(th(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=yl(void 0,eh,!0),v.factory=()=>k(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,g)}hydrate(o,u){return u.value===eh&&(u.value=xv,u.value=u.factory()),"object"==typeof u.value&&u.value&&function oS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=re(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function ep(s){const o=Lt(s),u=null!==o?o.factory:Dr(s);if(null!==u)return u;if(s instanceof En)throw new Ne(204,!1);if(s instanceof Function)return function Nv(s){const o=s.length;if(o>0)throw function Ks(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Ne(204,!1);const u=function ii(s){const o=s&&(s[xi]||s[Gr]);if(o){const u=function wr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Ne(204,!1)}function PC(s,o,u){let c;if(th(s)){const d=re(s);return Dr(d)||ep(d)}if(Pv(s))c=()=>re(s.useValue);else if(function tp(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...k(s.deps||[]));else if(function iS(s){return!(!s||!s.useExisting)}(s))c=()=>T(re(s.useExisting));else{const d=re(s&&(s.useClass||s.provide));if(!function sS(s){return!!s.deps}(s))return Dr(d)||ep(d);c=()=>new d(...k(s.deps))}return c}function yl(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Pv(s){return null!==s&&"object"==typeof s&&pf in s}function th(s){return"function"==typeof s}let eo=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return Rv({name:""},c,u,"");{const g=null!==(d=u.name)&&void 0!==d?d:"";return Rv({name:g},u.parent,u.providers,g)}}}return s.THROW_IF_NOT_FOUND=uu,s.NULL=new MC,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>T(Av)}),s.__NG_ELEMENT_ID__=-1,s})();function uS(s,o){bd(jd(s)[1],_n())}function Gv(s){let o=function Jm(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Li(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ne(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=Xm(s.inputs),v.declaredInputs=Xm(s.declaredInputs),v.outputs=Xm(s.outputs);const C=d.hostBindings;C&&qv(s,C);const I=d.viewQuery,x=d.contentQueries;if(I&&cS(s,I),x&&e_(s,x),de(s.inputs,d.inputs),de(s.declaredInputs,d.declaredInputs),de(s.outputs,d.outputs),Li(d)&&d.data.animation){const M=s.data;M.animation=(M.animation||[]).concat(d.data.animation)}}const g=d.features;if(g)for(let v=0;v<g.length;v++){const C=g[v];C&&C.ngInherit&&C(s),C===Gv&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Wv(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=cn(d.hostAttrs,u=cn(u,d.hostAttrs))}}(c)}function Xm(s){return s===Mr?{}:s===ct?[]:s}function cS(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function e_(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,g)=>{o(c,d,g),u(c,d,g)}:o}function qv(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let vl=null;function xc(){if(!vl){const s=Vt.Symbol;if(s&&s.iterator)vl=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(vl=c)}}}return vl}function nh(s){return!!Kv(s)&&(Array.isArray(s)||!(s instanceof Map)&&xc()in s)}function Kv(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function pi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function n_(s,o,u,c){const d=Ae();return pi(d,Gs(),o)&&(Pt(),Ro(Dn(),d,s,o,u,c)),n_}function up(s,o,u,c,d,g,v,C){const I=Ae(),x=Pt(),M=s+20,U=x.firstCreatePass?function Qv(s,o,u,c,d,g,v,C,I){const x=o.consts,M=Kd(o,s,4,v||null,vi(x,C));wv(o,u,M,vi(x,I)),bd(o,M);const U=M.tViews=Bm(2,M,c,d,g,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,M),U.queries=o.queries.embeddedTView(M)),M}(M,x,I,o,u,c,d,g,v):x.data[M];li(U,!1);const G=I[11].createComment("");Vf(x,I,G,U),Xn(G,I),Jd(I,I[M]=st(G,I,G,U)),Fi(U)&&_v(x,I,U),null!=v&&CC(I,U,C)}function Xv(s){return function Bi(s,o){return s[o]}(function Hu(){return pt.lFrame.contextLView}(),20+s)}function kc(s,o=_t.Default){const u=Ae();return null===u?T(s,o):tu(_n(),u,re(s),o)}function iw(){throw new Error("invalid")}function d_(s,o,u){const c=Ae();return pi(c,Gs(),o)&&function Ts(s,o,u,c,d,g,v,C){const I=pr(o,u);let M,x=o.inputs;!C&&null!=x&&(M=x[c])?(Jf(s,u,M,c,d),ld(o)&&function KT(s,o){const u=gr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function zT(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,an(g)?g.setProperty(I,c,d):Yr(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}(Pt(),Dn(),c,s,o,c[11],u,!1),d_}function pp(s,o,u,c,d){const v=d?"class":"style";Jf(s,u,o.inputs[v],v,c)}function h_(s,o,u,c){const d=Ae(),g=Pt(),v=20+s,C=d[11],I=d[v]=qd(C,o,function Id(){return pt.lFrame.currentNamespace}()),x=g.firstCreatePass?function vS(s,o,u,c,d,g,v){const C=o.consts,x=Kd(o,s,2,d,vi(C,g));return wv(o,u,x,vi(C,v)),null!==x.attrs&&Xd(x,x.attrs,!1),null!==x.mergedAttrs&&Xd(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,g,d,0,o,u,c):g.data[v];li(x,!0);const M=x.mergedAttrs;null!==M&&xt(C,I,M);const U=x.classes;null!==U&&ov(C,I,U);const G=x.styles;return null!==G&&sv(C,I,G),64!=(64&x.flags)&&Vf(g,d,I,x),0===function Bu(){return pt.lFrame.elementDepthCount}()&&Xn(I,d),function Ha(){pt.lFrame.elementDepthCount++}(),Fi(x)&&(_v(g,d,x),function HT(s,o,u){if(Lu(o)){const d=o.directiveEnd;for(let g=o.directiveStart;g<d;g++){const v=s.data[g];v.contentQueries&&v.contentQueries(1,u[g],g)}}}(g,x,d)),null!==c&&CC(d,x),h_}function f_(){let s=_n();Ga()?function rc(){pt.lFrame.isParent=!1}():(s=s.parent,li(s,!1));const o=s;!function ec(){pt.lFrame.elementDepthCount--}();const u=Pt();return u.firstCreatePass&&(bd(u,s),Lu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Td(s){return 0!=(16&s.flags)}(o)&&pp(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Hg(s){return 0!=(32&s.flags)}(o)&&pp(u,o,Ae(),o.stylesWithoutHost,!1),f_}function lh(s,o,u,c){return h_(s,o,u,c),f_(),lh}function dh(){return Ae()}function sw(s){return!!s&&"function"==typeof s.then}function cr(s){return!!s&&"function"==typeof s.subscribe}const ow=cr;function aw(s,o,u,c){const d=Ae(),g=Pt(),v=_n();return function uw(s,o,u,c,d,g,v,C){const I=Fi(c),M=s.firstCreatePass&&Sv(s),U=o[8],G=Wm(o);let X=!0;if(3&c.type||C){const He=pr(c,o),Je=C?C(He):He,Te=G.length,mt=C?jt=>C(en(jt[c.index])):c.index;if(an(u)){let jt=null;if(!C&&I&&(jt=function wS(s,o,u,c){const d=s.cleanup;if(null!=d)for(let g=0;g<d.length-1;g+=2){const v=d[g];if(v===u&&d[g+1]===c){const C=o[7],I=d[g+2];return C.length>I?C[I]:null}"string"==typeof v&&(g+=2)}return null}(s,o,d,c.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=g,jt.__ngLastListenerFn__=g,X=!1;else{g=__(c,o,U,g,!1);const dn=u.listen(Je,d,g);G.push(g,dn),M&&M.push(d,mt,Te,Te+1)}}else g=__(c,o,U,g,!0),Je.addEventListener(d,g,v),G.push(g),M&&M.push(d,mt,Te,v)}else g=__(c,o,U,g,!1);const ye=c.outputs;let Fe;if(X&&null!==ye&&(Fe=ye[d])){const He=Fe.length;if(He)for(let Je=0;Je<He;Je+=2){const ls=o[Fe[Je]][Fe[Je+1]].subscribe(g),Vl=G.length;G.push(g,ls),M&&M.push(d,c.index,Vl,-(Vl+1))}}}(g,d,d[11],v,s,o,!!u,c),aw}function lw(s,o,u,c){try{return!1!==u(c)}catch(d){return xC(s,d),!1}}function __(s,o,u,c,d){return function g(v){if(v===Function)return c;const C=2&s.flags?gr(s.index,o):o;0==(32&o[2])&&bv(C);let I=lw(o,0,c,v),x=g.__ngNextListenerFn__;for(;x;)I=lw(o,0,x,v)&&I,x=x.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function mp(s=1){return function Hi(s){return(pt.lFrame.contextLView=function nf(s,o){for(;s>0;)o=o[15],s--;return o}(s,pt.lFrame.contextLView))[8]}(s)}function w_(s,o,u,c,d){const g=s[u+1],v=null===o;let C=c?Ao(g):ma(g),I=!1;for(;0!==C&&(!1===I||v);){const M=s[C+1];pw(s[C],o)&&(I=!0,s[C+1]=c?$f(M):dv(M)),C=c?Ao(M):ma(M)}I&&(s[u+1]=c?dv(g):$f(g))}function pw(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&zi(s,o)>=0}function Ep(s,o){return function ss(s,o,u,c){const d=Ae(),g=Pt(),v=function wi(s){const o=pt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);g.firstUpdatePass&&function Sr(s,o,u,c){const d=s.data;if(null===d[u+1]){const g=d[ar()],v=function yw(s,o){return o>=s.expandoStartIndex}(s,u);(function Me(s,o){return 0!=(s.flags&(o?16:32))})(g,c)&&null===o&&!v&&(o=!1),o=function fh(s,o,u,c){const d=function Ka(s){const o=pt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let g=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=Sn(u=Pe(null,s,o,u,c),o.attrs,c),g=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=Pe(d,s,o,u,c),null===g){let I=function bl(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==ma(c))return s[Ao(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=Pe(null,s,o,I[1],c),I=Sn(I,o.attrs,c),function vw(s,o,u,c){s[Ao(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else g=function CS(s,o,u){let c;const d=o.directiveEnd;for(let g=1+o.directiveStylingLast;g<d;g++)c=Sn(c,s[g].hostAttrs,u);return Sn(c,o.attrs,u)}(s,o,c)}return void 0!==g&&(c?o.residualClasses=g:o.residualStyles=g),u}(d,g,o,c),function rI(s,o,u,c,d,g){let v=g?o.classBindings:o.styleBindings,C=Ao(v),I=ma(v);s[c]=u;let M,x=!1;if(Array.isArray(u)){const U=u;M=U[1],(null===M||zi(U,M)>0)&&(x=!0)}else M=u;if(d)if(0!==I){const G=Ao(s[C+1]);s[c+1]=jf(G,C),0!==G&&(s[G+1]=Pm(s[G+1],c)),s[C+1]=function xT(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=jf(C,0),0!==C&&(s[C+1]=Pm(s[C+1],c)),C=c;else s[c+1]=jf(I,0),0===C?C=c:s[I+1]=Pm(s[I+1],c),I=c;x&&(s[c+1]=dv(s[c+1])),w_(s,M,c,!0),w_(s,M,c,!1),function iI(s,o,u,c,d){const g=d?s.residualClasses:s.residualStyles;null!=g&&"string"==typeof o&&zi(g,o)>=0&&(u[c+1]=$f(u[c+1]))}(o,M,s,c,g),v=jf(C,I),g?o.classBindings=v:o.styleBindings=v}(d,g,o,u,v,c)}}(g,s,v,c),o!==bt&&pi(d,v,o)&&function Dt(s,o,u,c,d,g,v,C){if(!(3&o.type))return;const I=s.data,x=I[C+1];Ge(function Hf(s){return 1==(1&s)}(x)?dI(I,o,u,d,ma(x),v):void 0)||(Ge(g)||function hC(s){return 2==(2&s)}(x)&&(g=dI(I,null,u,d,C,v)),function IT(s,o,u,c,d){const g=an(s);if(o)d?g?s.addClass(u,c):u.classList.add(c):g?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:A.DashCase;if(null==d)g?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),v|=A.Important),g?s.setStyle(u,c,d,v):u.style.setProperty(c,d,C?"important":"")}}}(c,v,$s(ar(),u),d,g))}(g,g.data[ar()],d,d[11],s,d[v+1]=function fe(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ue(Js(s)))),s}(o,u),c,v)}(s,o,null,!0),Ep}function Pe(s,o,u,c,d){let g=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(g=o[C],c=Sn(c,g.hostAttrs,d),g!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function Sn(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let g=0;g<o.length;g++){const v=o[g];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Jn(s,v,!!u||o[++g]))}return void 0===s?null:s}function dI(s,o,u,c,d,g){const v=null===o;let C;for(;d>0;){const I=s[d],x=Array.isArray(I),M=x?I[1]:I,U=null===M;let G=u[d+1];G===bt&&(G=U?ct:void 0);let X=U?Cs(G,c):M===c?G:void 0;if(x&&!Ge(X)&&(X=Cs(I,c)),Ge(X)&&(C=X,v))return C;const ye=s[d+1];d=v?Ao(ye):ma(ye)}if(null!==o){let I=g?o.residualClasses:o.residualStyles;null!=I&&(C=Cs(I,c))}return C}function Ge(s){return void 0!==s}function Ar(s,o=""){const u=Ae(),c=Pt(),d=s+20,g=c.firstCreatePass?Kd(c,d,1,o,null):c.data[d],v=u[d]=function ha(s,o){return an(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Vf(c,u,v,g),li(g,!1)}function I_(s){return b_("",s,""),I_}function b_(s,o,u){const c=Ae(),d=function Rc(s,o,u,c){return pi(s,Gs(),u)?o+ge(u)+c:bt}(c,s,o,u);return d!==bt&&va(c,ar(),d),b_}const Bc=void 0;var Dl=["en",[["a","p"],["AM","PM"],Bc],[["AM","PM"],Bc,Bc],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Bc,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Bc,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Bc,"{1} 'at' {0}",Bc],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Dp(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let gh={};function x_(s){const o=function jc(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=CI(o);if(u)return u;const c=o.split("-")[0];if(u=CI(c),u)return u;if("en"===c)return Dl;throw new Error(`Missing locale data for the locale "${s}".`)}function EI(s){return x_(s)[vt.PluralCase]}function CI(s){return s in gh||(gh[s]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[s]),gh[s]}var vt=(()=>((vt=vt||{})[vt.LocaleId=0]="LocaleId",vt[vt.DayPeriodsFormat=1]="DayPeriodsFormat",vt[vt.DayPeriodsStandalone=2]="DayPeriodsStandalone",vt[vt.DaysFormat=3]="DaysFormat",vt[vt.DaysStandalone=4]="DaysStandalone",vt[vt.MonthsFormat=5]="MonthsFormat",vt[vt.MonthsStandalone=6]="MonthsStandalone",vt[vt.Eras=7]="Eras",vt[vt.FirstDayOfWeek=8]="FirstDayOfWeek",vt[vt.WeekendRange=9]="WeekendRange",vt[vt.DateFormat=10]="DateFormat",vt[vt.TimeFormat=11]="TimeFormat",vt[vt.DateTimeFormat=12]="DateTimeFormat",vt[vt.NumberSymbols=13]="NumberSymbols",vt[vt.NumberFormats=14]="NumberFormats",vt[vt.CurrencyCode=15]="CurrencyCode",vt[vt.CurrencySymbol=16]="CurrencySymbol",vt[vt.CurrencyName=17]="CurrencyName",vt[vt.Currencies=18]="Currencies",vt[vt.Directionality=19]="Directionality",vt[vt.PluralCase=20]="PluralCase",vt[vt.ExtraData=21]="ExtraData",vt))();const Hc="en-US";let bI=Hc;function Bw(s,o,u,c,d){if(s=re(s),Array.isArray(s))for(let g=0;g<s.length;g++)Bw(s[g],o,u,c,d);else{const g=Pt(),v=Ae();let C=th(s)?s:re(s.provide),I=PC(s);const x=_n(),M=1048575&x.providerIndexes,U=x.directiveStart,G=x.providerIndexes>>20;if(th(s)||!s.multi){const X=new qu(I,d,kc),ye=yu(C,o,d?M:M+G,U);-1===ye?(ra(Xa(x,v),g,C),V_(g,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(X),v.push(X)):(u[ye]=X,v[ye]=X)}else{const X=yu(C,o,M+G,U),ye=yu(C,o,M,M+G),Fe=X>=0&&u[X],He=ye>=0&&u[ye];if(d&&!He||!d&&!Fe){ra(Xa(x,v),g,C);const Je=function Ih(s,o,u,c,d){const g=new qu(s,u,kc);return g.multi=[],g.index=o,g.componentProviders=0,Gc(g,d,c&&!u),g}(d?Wc:FI,u.length,d,c,I);!d&&He&&(u[ye].providerFactory=Je),V_(g,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(Je),v.push(Je)}else V_(g,s,X>-1?X:ye,Gc(u[d?ye:X],I,!d&&c));!d&&c&&He&&u[ye].componentProviders++}}}function V_(s,o,u,c){const d=th(o),g=function np(s){return!!s.useClass}(o);if(d||g){const I=(g?re(o.useClass):o).prototype.ngOnDestroy;if(I){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const M=x.indexOf(u);-1===M?x.push(u,[c,I]):x[M+1].push(c,I)}else x.push(u,I)}}}function Gc(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function yu(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function FI(s,o,u,c){return U_(this.multi,[])}function Wc(s,o,u,c){const d=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=Eo(u,u[1],this.providerFactory.index,c);g=C.slice(0,v),U_(d,g);for(let I=v;I<C.length;I++)g.push(C[I])}else g=[],U_(d,g);return g}function U_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function jw(s,o=[]){return u=>{u.providersResolver=(c,d)=>function US(s,o,u){const c=Pt();if(c.firstCreatePass){const d=Li(s);Bw(u,c.data,c.blueprint,d,!0),Bw(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class bh{}class B_{resolveComponentFactory(o){throw function BS(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let qc=(()=>{class s{}return s.NULL=new B_,s})();function UI(){return Dh(_n(),Ae())}function Dh(s,o){return new vu(pr(s,o))}let vu=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=UI,s})();function jS(s){return s instanceof vu?s.nativeElement:s}class zc{}let wu=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function jI(){const s=Ae(),u=gr(_n().index,s);return function BI(s){return s[11]}(Zr(u)?u:s)}(),s})(),HI=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class Kc{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const j_=new Kc("13.3.6"),Hw={};function qn(s,o,u,c,d=!1){for(;null!==u;){const g=o[u.index];if(null!==g&&c.push(en(g)),ki(g))for(let C=10;C<g.length;C++){const I=g[C],x=I[1].firstChild;null!==x&&qn(I[1],I,x,c)}const v=u.type;if(8&v)qn(s,o,u.child,c);else if(32&v){const C=Q(u,o);let I;for(;I=C();)c.push(I)}else if(16&v){const C=rv(o,u);if(Array.isArray(C))c.push(...C);else{const I=Ke(o[16]);qn(I[1],I,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Bt{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return qn(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ki(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(kf(o,c),Es(u,c))}this._attachedToViewContainer=!1}fa(this._lView[1],this._lView)}onDestroy(o){ya(this._lView[1],this._lView,null,o)}markForCheck(){bv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vr(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Xr(s,o,u){$u(!0);try{Vr(s,o,u)}finally{$u(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ne(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Im(s,o){Uf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ne(902,"");this._appRef=o}}class $I extends Bt{constructor(o){super(o),this._view=o}detectChanges(){Qf(this._view)}checkNoChanges(){!function ml(s){$u(!0);try{Qf(s)}finally{$u(!1)}}(this._view)}get context(){return null}}class $w extends qc{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=Zn(o);return new H_(u,this.ngModule)}}function Eu(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class H_ extends bh{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function ST(s){return s.map(Nm).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Eu(this.componentDef.inputs)}get outputs(){return Eu(this.componentDef.outputs)}create(o,u,c,d){const g=(d=d||this.ngModule)?function us(s,o){return{get:(u,c,d)=>{const g=s.get(u,Hw,d);return g!==Hw||c===Hw?g:o.get(u,c,d)}}}(o,d.injector):o,v=g.get(zc,Ua),C=g.get(HI,null),I=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",M=c?function yv(s,o,u){if(an(s))return s.selectRootElement(o,u===$t.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):qd(v.createRenderer(null,this.componentDef),x,function $S(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),U=this.componentDef.onPush?576:528,G=function VC(s,o){return{components:[],scheduler:s||wm,clean:AC,playerHandler:o||null,flags:0}}(),X=Bm(0,null,null,1,0,null,null,null,null,null),ye=qf(null,X,G,U,null,null,v,I,C,g);let Fe,He;Jo(ye);try{const Je=function LC(s,o,u,c,d,g){const v=u[1];u[20]=s;const I=Kd(v,20,2,"#host",null),x=I.mergedAttrs=o.hostAttrs;null!==x&&(Xd(I,x,!0),null!==s&&(xt(d,s,x),null!==I.classes&&ov(d,s,I.classes),null!==I.styles&&sv(d,s,I.styles)));const M=c.createRenderer(s,o),U=qf(u,$T(o),null,o.onPush?64:16,u[20],I,c,M,g||null,null);return v.firstCreatePass&&(ra(Xa(I,u),v,o.type),TC(v,I),$m(I,u.length,1)),Jd(u,U),u[20]=U}(M,this.componentDef,ye,v,I);if(M)if(c)xt(I,M,["ng-version",j_.full]);else{const{attrs:Te,classes:mt}=function AT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let g=s[c];if("string"==typeof g)2===d?""!==g&&o.push(g,s[++c]):8===d&&u.push(g);else{if(!To(d))break;d=g}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Te&&xt(I,M,Te),mt&&mt.length>0&&ov(I,M,mt.join(" "))}if(He=wn(X,20),void 0!==u){const Te=He.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const jt=u[mt];Te.push(null!=jt?Array.from(jt):null)}}Fe=function $v(s,o,u,c,d){const g=u[1],v=function QT(s,o,u){const c=_n();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),SC(s,c,o,Zd(s,o,1,null),u));const d=Eo(o,s,c.directiveStart,c);Xn(d,o);const g=pr(c,o);return g&&Xn(g,o),d}(g,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=_n();o.contentQueries(1,v,I.directiveStart)}const C=_n();return!g.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||($i(C.index),bC(u[1],C,0,C.directiveStart,C.directiveEnd,o),DC(o,v)),v}(Je,this.componentDef,ye,G,[uS]),zf(X,ye,null)}finally{ea()}return new Da(this.componentType,Fe,Dh(He,ye),ye,He)}}class Da extends class LI{}{constructor(o,u,c,d,g){super(),this.location=c,this._rootLView=d,this._tNode=g,this.instance=u,this.hostView=this.changeDetectorRef=new $I(d),this.componentType=o}get injector(){return new qs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ta{}class WI{}const Th=new Map;class Ww extends Ta{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new $w(this);const c=Yn(o);this._bootstrapComponents=ts(c.bootstrap),this._r3Injector=Xf(o,u,[{provide:Ta,useValue:this},{provide:qc,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=eo.THROW_IF_NOT_FOUND,c=_t.Default){return o===eo||o===Ta||o===Av?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class W_ extends WI{constructor(o){super(),this.moduleType=o,null!==Yn(o)&&function $_(s){const o=new Set;!function u(c){const d=Yn(c,!0),g=d.id;null!==g&&(function qI(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(g,Th.get(g),c),Th.set(g,c));const v=ts(d.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new Ww(this.moduleType,o)}}function Kw(s){return o=>{setTimeout(s,void 0,o)}}const Fo=class zw extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,g,v;let C=o,I=u||(()=>null),x=c;if(o&&"object"==typeof o){const U=o;C=null===(d=U.next)||void 0===d?void 0:d.bind(U),I=null===(g=U.error)||void 0===g?void 0:g.bind(U),x=null===(v=U.complete)||void 0===v?void 0:v.bind(U)}this.__isAsync&&(I=Kw(I),C&&(C=Kw(C)),x&&(x=Kw(x)));const M=super.subscribe({next:C,error:I,complete:x});return o instanceof ee.w0&&o.add(M),M}};function tb(){return this._results[xc()]()}class K_{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=xc(),c=K_.prototype;c[u]||(c[u]=tb)}get changes(){return this._changes||(this._changes=new Fo)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Ei(o);(this._changesDetected=!function Ad(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],g=o[c];if(u&&(d=u(d),g=u(g)),g!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Bp=(()=>{class s{}return s.__NG_ELEMENT_ID__=XS,s})();const nb=Bp,JS=class extends nb{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=qf(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const g=this._declarationLView[19];return null!==g&&(c[19]=g.createEmbeddedView(u)),zf(u,c,o),new Bt(c)}};function XS(){return Iu(_n(),Ae())}function Iu(s,o){return 4&s.type?new JS(o,s,Dh(s,o)):null}let bu=(()=>{class s{}return s.__NG_ELEMENT_ID__=eA,s})();function eA(){return ib(_n(),Ae())}const tA=bu,rb=class extends tA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Dh(this._hostTNode,this._hostLView)}get injector(){return new qs(this._hostTNode,this._hostLView)}get parentInjector(){const o=lr(this._hostTNode,this._hostLView);if(vo(o)){const u=Gt(o,this._hostLView),c=fn(o);return new qs(u[1].data[c+8],u)}return new qs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=Zw(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,g){const v=o&&!function zs(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const U=u||{};C=U.index,c=U.injector,d=U.projectableNodes,g=U.ngModuleRef}const I=v?o:new H_(Zn(o)),x=c||this.parentInjector;if(!g&&null==I.ngModule){const G=(v?x:this.parentInjector).get(Ta,null);G&&(g=G)}const M=I.create(x,d,void 0,g);return this.insert(M.hostView,C),M}insert(o,u){const c=o._lView,d=c[1];if(function ja(s){return ki(s[3])}(c)){const M=this.indexOf(o);if(-1!==M)this.detach(M);else{const U=c[3],G=new rb(U,U[6],U[3]);G.detach(G.indexOf(o))}}const g=this._adjustIndex(u),v=this._lContainer;!function dl(s,o,u,c){const d=10+c,g=u.length;c>0&&(u[d-1][4]=o),c<g-10?(o[4]=u[d],Do(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function bm(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(d,c,v,g);const C=Rm(g,v),I=c[11],x=Sm(I,v[7]);return null!==x&&function Of(s,o,u,c,d,g){c[0]=d,c[6]=o,Uf(s,c,u,1,d,g)}(d,v[6],I,c,x,C),o.attachToViewContainerRef(),Do(ri(v),g,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=Zw(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=kf(this._lContainer,u);c&&(Es(ri(this._lContainer),u),fa(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=kf(this._lContainer,u);return c&&null!=Es(ri(this._lContainer),u)?new Bt(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function Zw(s){return s[8]}function ri(s){return s[8]||(s[8]=[])}function ib(s,o){let u;const c=o[s.index];if(ki(c))u=c;else{let d;if(8&s.type)d=en(c);else{const g=o[11];d=g.createComment("");const v=pr(s,o);Sc(g,Sm(g,v),d,function ET(s,o){return an(s)?s.nextSibling(o):o.nextSibling}(g,v),!1)}o[s.index]=u=st(c,o,d,s),Jd(o,u)}return new rb(u,s,o)}class xh{constructor(o){this.queryList=o,this.matches=null}clone(){return new xh(this.queryList)}setDirty(){this.queryList.setDirty()}}class Z_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let g=0;g<c;g++){const v=u.getByIndex(g);d.push(this.queries[v.indexInDeclarationView].clone())}return new Z_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==e0(o,u).matches&&this.queries[u].setDirty()}}class ob{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Yw{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,g=this.getByIndex(c).embeddedTView(o,d);g&&(g.indexInDeclarationView=c,null!==u?u.push(g):u=[g])}return null!==u?new Yw(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Qw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Qw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const g=c[d];this.matchTNodeWithReadOption(o,u,rA(u,g)),this.matchTNodeWithReadOption(o,u,gn(u,o,g,!1,!1))}else c===Bp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,gn(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===vu||d===bu||d===Bp&&4&u.type)this.addMatch(u.index,-2);else{const g=gn(u,o,d,!1,!1);null!==g&&this.addMatch(u.index,g)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function rA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function sA(s,o,u,c){return-1===u?function iA(s,o){return 11&s.type?Dh(s,o):4&s.type?Iu(s,o):null}(o,s):-2===u?function oA(s,o,u){return u===vu?Dh(o,s):u===Bp?Iu(o,s):u===bu?ib(o,s):void 0}(s,o,c):Eo(s,s[1],u,o)}function ab(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const g=s.data,v=u.matches,C=[];for(let I=0;I<v.length;I+=2){const x=v[I];C.push(x<0?null:sA(o,g[x],v[I+1],u.metadata.read))}d.matches=C}return d.matches}function Jw(s,o,u,c){const d=s.queries.getByIndex(u),g=d.matches;if(null!==g){const v=ab(s,o,d,u);for(let C=0;C<g.length;C+=2){const I=g[C];if(I>0)c.push(v[C/2]);else{const x=g[C+1],M=o[-I];for(let U=10;U<M.length;U++){const G=M[U];G[17]===G[3]&&Jw(G[1],G,x,c)}if(null!==M[9]){const U=M[9];for(let G=0;G<U.length;G++){const X=U[G];Jw(X[1],X,x,c)}}}}}return c}function ub(s){const o=Ae(),u=Pt(),c=oc();Za(c+1);const d=e0(u,c);if(s.dirty&&go(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const g=d.crossesNgTemplate?Jw(u,o,c,[]):ab(u,o,d,c);s.reset(g,jS),s.notifyOnChanges()}return!0}return!1}function lb(s,o,u){const c=Pt();c.firstCreatePass&&(Xw(c,new ob(s,o,u),-1),2==(2&o)&&(c.staticViewQueries=!0)),hb(c,Ae(),o)}function cb(s,o,u,c){const d=Pt();if(d.firstCreatePass){const g=_n();Xw(d,new ob(o,u,c),g.index),function uA(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}hb(d,Ae(),u)}function db(){return function aA(s,o){return s[19].queries[o].queryList}(Ae(),oc())}function hb(s,o,u){const c=new K_(4==(4&u));ya(s,o,c,c.destroy),null===o[19]&&(o[19]=new Z_),o[19].queries.push(new xh(c))}function Xw(s,o,u){null===s.queries&&(s.queries=new Yw),s.queries.track(new Qw(o,u))}function e0(s,o){return s.queries.getByIndex(o)}function Aa(...s){}const Xc=new En("Application Initializer");let ey=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Aa,this.reject=Aa,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const g=this.appInits[d]();if(sw(g))u.push(g);else if(ow(g)){const v=new Promise((C,I)=>{g.subscribe({complete:C,error:I})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(T(Xc,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const Su=new En("AppId",{providedIn:"root",factory:function d0(){return`${h0()}${h0()}${h0()}`}});function h0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const bb=new En("Platform Initializer"),mA=new En("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Kp=new En("appBootstrapListener");let yA=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const f0=new En("LocaleId",{providedIn:"root",factory:()=>B(f0,_t.Optional|_t.SkipSelf)||function Db(){return"undefined"!=typeof $localize&&$localize.locale||Hc}()}),Tb=new En("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class Sb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let wA=(()=>{class s{compileModuleSync(u){return new W_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),g=ts(Yn(u).declarations).reduce((v,C)=>{const I=Zn(C);return I&&v.push(new H_(I)),v},[]);return new Sb(c,g)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const EA=(()=>Promise.resolve(0))();function Zp(s){"undefined"==typeof Zone?EA.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Lo{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fo(!1),this.onMicrotaskEmpty=new Fo(!1),this.onStable=new Fo(!1),this.onError=new Fo(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function jr(){let s=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function xb(s){const o=()=>{!function IA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Vt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,g0(s),s.isCheckStableRunning=!0,p0(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),g0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,g,v,C)=>{try{return Yp(s),u.invokeTask(d,g,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||s.shouldCoalesceRunChangeDetection)&&o(),Rb(s)}},onInvoke:(u,c,d,g,v,C,I)=>{try{return Yp(s),u.invoke(d,g,v,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Rb(s)}},onHasTask:(u,c,d,g)=>{u.hasTask(d,g),c===d&&("microTask"==g.change?(s._hasPendingMicrotasks=g.microTask,g0(s),p0(s)):"macroTask"==g.change&&(s.hasPendingMacrotasks=g.macroTask))},onHandleError:(u,c,d,g)=>(u.handleError(d,g),s.runOutsideAngular(()=>s.onError.emit(g)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lo.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Lo.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+d,o,CA,Aa,Aa);try{return g.runTask(v,u,c)}finally{g.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const CA={};function p0(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function g0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Yp(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Rb(s){s._nesting--,p0(s)}class Mb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fo,this.onMicrotaskEmpty=new Fo,this.onStable=new Fo,this.onError=new Fo}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let ny=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lo.assertNotInAngularZone(),Zp(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Zp(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let g=-1;c&&c>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:g,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(T(Lo))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),m0=(()=>{class s{constructor(){this._applications=new Map,Jp.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Jp.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class Qp{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function ry(s){Jp=s}let Jp=new Qp,Au=null;const _0=new En("AllowMultipleToken"),Nb=new En("PlatformOnDestroy");class DA{constructor(o,u){this.name=o,this.token=u}}function kb(s,o,u=[]){const c=`Platform: ${o}`,d=new En(c);return(g=[])=>{let v=kl();if(!v||v.injector.get(_0,!1)){const C=[...u,...g,{provide:d,useValue:!0}];s?s(C):function Ob(s){if(Au&&!Au.get(_0,!1))throw new Ne(400,"");Au=s;const o=s.get(iy),u=s.get(bb,null);u&&u.forEach(c=>c())}(function TA(s=[],o){return eo.create({name:o,providers:[{provide:_l,useValue:"platform"},{provide:Nb,useValue:()=>Au=null},...s]})}(C,c))}return function Fb(s){const o=kl();if(!o)throw new Ne(401,"");return o}()}}function kl(){var s;return null!==(s=null==Au?void 0:Au.get(iy))&&void 0!==s?s:null}let iy=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function sy(s,o){let u;return u="noop"===s?new Mb:("zone.js"===s?void 0:s)||new Lo({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Lo,useValue:C}];return C.run(()=>{const x=eo.create({providers:I,parent:this.injector,name:u.moduleType.name}),M=u.create(x),U=M.injector.get(ll,null);if(!U)throw new Ne(402,"");return C.runOutsideAngular(()=>{const G=C.onError.subscribe({next:X=>{U.handleError(X)}});M.onDestroy(()=>{w0(this._modules,M),G.unsubscribe()})}),function Lb(s,o,u){try{const c=u();return sw(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(U,C,()=>{const G=M.injector.get(ey);return G.runInitializers(),G.donePromise.then(()=>(function xr(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(bI=s.toLowerCase().replace(/_/g,"-"))}(M.injector.get(f0,Hc)||Hc),this._moduleDoBootstrap(M),M))})})}bootstrapModule(u,c=[]){const d=v0({},c);return function Pb(s,o,u){const c=new W_(u);return Promise.resolve(c)}(0,0,u).then(g=>this.bootstrapModuleFactory(g,d))}_moduleDoBootstrap(u){const c=u.injector.get(oy);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Ne(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ne(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(Nb,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(T(eo))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function v0(s,o){return Array.isArray(o)?o.reduce(v0,s):Object.assign(Object.assign({},s),o)}let oy=(()=>{class s{constructor(u,c,d,g){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=g,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new V.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new V.y(I=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Lo.assertNotInAngularZone(),Zp(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Lo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{x.unsubscribe(),M.unsubscribe()}});this.isStable=(0,ce.T)(v,C.pipe((0,ie.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Ne(405,"");let d;d=u instanceof bh?u:this._injector.get(qc).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const g=function y0(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ta),C=d.create(eo.NULL,[],c||d.selector,g),I=C.location.nativeElement,x=C.injector.get(ny,null),M=x&&C.injector.get(m0);return x&&M&&M.registerApplication(I,x),C.onDestroy(()=>{this.detachView(C.hostView),w0(this.components,C),M&&M.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ne(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;w0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(Kp,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(T(Lo),T(eo),T(ll),T(ey))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function w0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let uy=!0,E0=!1;function Vb(){return E0=!0,uy}function C0(){if(E0)throw new Error("Cannot enable prod mode after platform setup.");uy=!1}let b0=(()=>{class s{}return s.__NG_ELEMENT_ID__=D0,s})();function D0(s){return function T0(s,o,u){if(ld(s)&&!u){const c=gr(s.index,o);return new Bt(c,c)}return 47&s.type?new Bt(o[16],o):null}(_n(),Ae(),16==(16&s))}class fy{constructor(){}supports(o){return nh(o)}create(o){return new M0(o)}}const jb=(s,o)=>o;class M0{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||jb}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,g=null;for(;u||c;){const v=!c||u&&u.currentIndex<Hb(c,d,g)?u:c,C=Hb(v,d,g),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{g||(g=[]);const x=C-d,M=I-d;if(x!=M){for(let G=0;G<x;G++){const X=G<g.length?g[G]:g[G]=0,ye=X+G;M<=ye&&ye<x&&(g[G]=X+1)}g[v.previousIndex]=M-x}}C!==I&&o(v,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!nh(o))throw new Ne(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,g,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)g=o[C],v=this._trackByFn(C,g),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,g,v,C)),Object.is(u.item,g)||this._addIdentityChange(u,g)):(u=this._mismatch(u,g,v,C),c=!0),u=u._next}else d=0,function hS(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[xc()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let g;return null===o?g=this._itTail:(g=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,g,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,g,d)):o=this._addAfter(new N0(u,c),g,d),o}_verifyReinsertion(o,u,c,d){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==g?o=this._reinsertAfter(g,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,g=o._nextRemoved;return null===d?this._removalsHead=g:d._nextRemoved=g,null===g?this._removalsTail=d:g._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new P0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new P0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class N0{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Ll{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class P0{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new Ll,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Hb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class py{constructor(){}supports(o){return o instanceof Map||Kv(o)}create(){return new NA}}class NA{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Kv(o)))throw new Ne(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const g=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,g)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const g=d._prev,v=d._next;return g&&(g._next=v),v&&(v._prev=g),d._next=null,d._prev=null,d}const c=new O0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class O0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function $b(){return new ig([new fy])}let ig=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||$b()),deps:[[s,new Rt,new It]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Ne(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:$b}),s})();function gy(){return new my([new py])}let my=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||gy()),deps:[[s,new Rt,new It]]}}find(u){const c=this.factories.find(g=>g.supports(u));if(c)return c;throw new Ne(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:gy}),s})();const Gb=kb(null,"core",[]);let Wb=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(T(oy))},s.\u0275mod=Nt({type:s}),s.\u0275inj=zt({}),s})()},3942:(Qe,ve,L)=>{L.d(ve,{Z:()=>Ne});var m=L(2090),ee=L(4859),V=L(9681),ce=L(1877);class ie{constructor(ge,De){this._delegate=ge,this.firebase=De,(0,V._addComponent)(ge,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=ge.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ge){this._delegate.automaticDataCollectionEnabled=ge}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ge=>{this._delegate.checkDestroyed(),ge()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,V.deleteApp)(this._delegate)))}_getService(ge,De=V._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ze=this._delegate.container.getProvider(ge);return!Ze.isInitialized()&&"EXPLICIT"===(null===(qe=Ze.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ze.initialize(),Ze.getImmediate({identifier:De})}_removeServiceInstance(ge,De=V._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ge).clearInstance(De)}_addComponent(ge){(0,V._addComponent)(this._delegate,ge)}_addOrOverwriteComponent(ge){(0,V._addOrOverwriteComponent)(this._delegate,ge)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const de=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function pe(){const Ve=function ue(Ve){const ge={},De={__esModule:!0,initializeApp:function Se(Be,K={}){const we=V.initializeApp(Be,K);if((0,m.r3)(ge,we.name))return ge[we.name];const J=new Ve(we,De);return ge[we.name]=J,J},app:Ze,registerVersion:V.registerVersion,setLogLevel:V.setLogLevel,onLog:V.onLog,apps:null,SDK_VERSION:V.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const K=Be.name,we=K.replace("-compat","");if(V._registerComponent(Be)&&"PUBLIC"===Be.type){const J=(se=Ze())=>{if("function"!=typeof se[we])throw de.create("invalid-app-argument",{appName:K});return se[we]()};void 0!==Be.serviceProps&&(0,m.ZB)(J,Be.serviceProps),De[we]=J,Ve.prototype[we]=function(...se){return this._getService.bind(this,K).apply(this,Be.multipleInstances?se:[])}}return"PUBLIC"===Be.type?De[we]:null},removeApp:function qe(Be){delete ge[Be]},useAsService:function Ue(Be,K){return"serverAuth"===K?null:K},modularAPIs:V}};function Ze(Be){if(!(0,m.r3)(ge,Be=Be||V._DEFAULT_ENTRY_NAME))throw de.create("no-app",{appName:Be});return ge[Be]}return De.default=De,Object.defineProperty(De,"apps",{get:function Ee(){return Object.keys(ge).map(Be=>ge[Be])}}),Ze.App=Ve,De}(ie);return Ve.INTERNAL=Object.assign(Object.assign({},Ve.INTERNAL),{createFirebaseNamespace:pe,extendNamespace:function ge(De){(0,m.ZB)(Ve,De)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ve}(),z=new ce.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){z.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ve=self.firebase.SDK_VERSION;Ve&&Ve.indexOf("LITE")>=0&&z.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ne=W;!function Re(Ve){(0,V.registerVersion)("@firebase/app-compat","0.1.34",Ve)}()},9681:(Qe,ve,L)=>{L.r(ve),L.d(ve,{FirebaseError:()=>ce.ZR,SDK_VERSION:()=>xi,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>rn,_addOrOverwriteComponent:()=>Qt,_apps:()=>nn,_clearComponents:()=>Ai,_components:()=>xn,_getProvider:()=>zt,_registerComponent:()=>Rr,_removeServiceInstance:()=>Lt,deleteApp:()=>_t,getApp:()=>Gr,getApps:()=>_i,initializeApp:()=>ks,onLog:()=>Kn,registerVersion:()=>Rn,setLogLevel:()=>Ri});var m=L(5861),ee=L(4859),V=L(1877),ce=L(2090),ie=L(8766);class me{constructor(q){this.container=q}getPlatformInfoString(){return this.container.getProviders().map(Z=>{if(function de(H){const q=H.getComponent();return"VERSION"===(null==q?void 0:q.type)}(Z)){const xe=Z.getImmediate();return`${xe.library}/${xe.version}`}return null}).filter(Z=>Z).join(" ")}}const ue="@firebase/app",W=new V.Yd("@firebase/app"),Ft="[DEFAULT]",Ye={[ue]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},nn=new Map,xn=new Map;function rn(H,q){try{H.container.addComponent(q)}catch(Z){W.debug(`Component ${q.name} failed to register with FirebaseApp ${H.name}`,Z)}}function Qt(H,q){H.container.addOrOverwriteComponent(q)}function Rr(H){const q=H.name;if(xn.has(q))return W.debug(`There were multiple attempts to register component ${q}.`),!1;xn.set(q,H);for(const Z of nn.values())rn(Z,H);return!0}function zt(H,q){const Z=H.container.getProvider("heartbeat").getImmediate({optional:!0});return Z&&Z.triggerHeartbeat(),H.container.getProvider(q)}function Lt(H,q,Z=Ft){zt(H,q).clearInstance(Z)}function Ai(){xn.clear()}const wr=new ce.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class $r{constructor(q,Z,xe){this._isDeleted=!1,this._options=Object.assign({},q),this._config=Object.assign({},Z),this._name=Z.name,this._automaticDataCollectionEnabled=Z.automaticDataCollectionEnabled,this._container=xe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(q){this.checkDestroyed(),this._automaticDataCollectionEnabled=q}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(q){this._isDeleted=q}checkDestroyed(){if(this.isDeleted)throw wr.create("app-deleted",{appName:this._name})}}const xi="9.10.0";function ks(H,q={}){"object"!=typeof q&&(q={name:q});const Z=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},q),xe=Z.name;if("string"!=typeof xe||!xe)throw wr.create("bad-app-name",{appName:String(xe)});const Le=nn.get(xe);if(Le){if((0,ce.vZ)(H,Le.options)&&(0,ce.vZ)(Z,Le.config))return Le;throw wr.create("duplicate-app",{appName:xe})}const ot=new ee.H0(xe);for(const Kt of xn.values())ot.addComponent(Kt);const sn=new $r(H,Z,ot);return nn.set(xe,sn),sn}function Gr(H=Ft){const q=nn.get(H);if(!q)throw wr.create("no-app",{appName:H});return q}function _i(){return Array.from(nn.values())}function _t(H){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,m.Z)(function*(H){const q=H.name;nn.has(q)&&(nn.delete(q),yield Promise.all(H.container.getProviders().map(Z=>Z.delete())),H.isDeleted=!0)})).apply(this,arguments)}function Rn(H,q,Z){var xe;let Le=null!==(xe=Ye[H])&&void 0!==xe?xe:H;Z&&(Le+=`-${Z}`);const ot=Le.match(/\s|\//),sn=q.match(/\s|\//);if(ot||sn){const Kt=[`Unable to register library "${Le}" with version "${q}":`];return ot&&Kt.push(`library name "${Le}" contains illegal characters (whitespace or "/")`),ot&&sn&&Kt.push("and"),sn&&Kt.push(`version name "${q}" contains illegal characters (whitespace or "/")`),void W.warn(Kt.join(" "))}Rr(new ee.wA(`${Le}-version`,()=>({library:Le,version:q}),"VERSION"))}function Kn(H,q){if(null!==H&&"function"!=typeof H)throw wr.create("invalid-log-argument");(0,V.Am)(H,q)}function Ri(H){(0,V.Ub)(H)}const Un="firebase-heartbeat-store";let si=null;function uo(){return si||(si=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(H,q)=>{0===q&&H.createObjectStore(Un)}}).catch(H=>{throw wr.create("idb-open",{originalErrorMessage:H.message})})),si}function it(){return(it=(0,m.Z)(function*(H){var q;try{return(yield uo()).transaction(Un).objectStore(Un).get(oi(H))}catch(Z){if(Z instanceof ce.ZR)W.warn(Z.message);else{const xe=wr.create("idb-get",{originalErrorMessage:null===(q=Z)||void 0===q?void 0:q.message});W.warn(xe.message)}}})).apply(this,arguments)}function wt(H,q){return Er.apply(this,arguments)}function Er(){return(Er=(0,m.Z)(function*(H,q){var Z;try{const Le=(yield uo()).transaction(Un,"readwrite");return yield Le.objectStore(Un).put(q,oi(H)),Le.done}catch(xe){if(xe instanceof ce.ZR)W.warn(xe.message);else{const Le=wr.create("idb-set",{originalErrorMessage:null===(Z=xe)||void 0===Z?void 0:Z.message});W.warn(Le.message)}}})).apply(this,arguments)}function oi(H){return`${H.name}!${H.options.appId}`}class Cr{constructor(q){this.container=q,this._heartbeatsCache=null;const Z=this.container.getProvider("app").getImmediate();this._storage=new Ls(Z),this._heartbeatsCachePromise=this._storage.read().then(xe=>(this._heartbeatsCache=xe,xe))}triggerHeartbeat(){var q=this;return(0,m.Z)(function*(){const xe=q.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Le=Mr();if(null===q._heartbeatsCache&&(q._heartbeatsCache=yield q._heartbeatsCachePromise),q._heartbeatsCache.lastSentHeartbeatDate!==Le&&!q._heartbeatsCache.heartbeats.some(ot=>ot.date===Le))return q._heartbeatsCache.heartbeats.push({date:Le,agent:xe}),q._heartbeatsCache.heartbeats=q._heartbeatsCache.heartbeats.filter(ot=>{const sn=new Date(ot.date).valueOf();return Date.now()-sn<=2592e6}),q._storage.overwrite(q._heartbeatsCache)})()}getHeartbeatsHeader(){var q=this;return(0,m.Z)(function*(){if(null===q._heartbeatsCache&&(yield q._heartbeatsCachePromise),null===q._heartbeatsCache||0===q._heartbeatsCache.heartbeats.length)return"";const Z=Mr(),{heartbeatsToSend:xe,unsentEntries:Le}=function ct(H,q=1024){const Z=[];let xe=H.slice();for(const Le of H){const ot=Z.find(sn=>sn.agent===Le.agent);if(ot){if(ot.dates.push(Le.date),$(Z)>q){ot.dates.pop();break}}else if(Z.push({agent:Le.agent,dates:[Le.date]}),$(Z)>q){Z.pop();break}xe=xe.slice(1)}return{heartbeatsToSend:Z,unsentEntries:xe}}(q._heartbeatsCache.heartbeats),ot=(0,ce.L)(JSON.stringify({version:2,heartbeats:xe}));return q._heartbeatsCache.lastSentHeartbeatDate=Z,Le.length>0?(q._heartbeatsCache.heartbeats=Le,yield q._storage.overwrite(q._heartbeatsCache)):(q._heartbeatsCache.heartbeats=[],q._storage.overwrite(q._heartbeatsCache)),ot})()}}function Mr(){return(new Date).toISOString().substring(0,10)}class Ls{constructor(q){this.app=q,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,ce.hl)()&&(0,ce.eu)().then(()=>!0).catch(()=>!1)})()}read(){var q=this;return(0,m.Z)(function*(){return(yield q._canUseIndexedDBPromise)&&(yield function $t(H){return it.apply(this,arguments)}(q.app))||{heartbeats:[]}})()}overwrite(q){var Z=this;return(0,m.Z)(function*(){var xe;if(yield Z._canUseIndexedDBPromise){const ot=yield Z.read();return wt(Z.app,{lastSentHeartbeatDate:null!==(xe=q.lastSentHeartbeatDate)&&void 0!==xe?xe:ot.lastSentHeartbeatDate,heartbeats:q.heartbeats})}})()}add(q){var Z=this;return(0,m.Z)(function*(){var xe;if(yield Z._canUseIndexedDBPromise){const ot=yield Z.read();return wt(Z.app,{lastSentHeartbeatDate:null!==(xe=q.lastSentHeartbeatDate)&&void 0!==xe?xe:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...q.heartbeats]})}})()}}function $(H){return(0,ce.L)(JSON.stringify({version:2,heartbeats:H})).length}!function Y(H){Rr(new ee.wA("platform-logger",q=>new me(q),"PRIVATE")),Rr(new ee.wA("heartbeat",q=>new Cr(q),"PRIVATE")),Rn(ue,"0.7.33",H),Rn(ue,"0.7.33","esm2017"),Rn("fire-js","")}("")},4859:(Qe,ve,L)=>{L.d(ve,{H0:()=>ue,wA:()=>V,zt:()=>ie});var m=L(5861),ee=L(2090);class V{constructor(W,z,re){this.name=W,this.instanceFactory=z,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const ce="[DEFAULT]";class ie{constructor(W,z){this.name=W,this.container=z,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const z=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(z)){const re=new ee.BH;if(this.instancesDeferred.set(z,re),this.isInitialized(z)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:z});$e&&re.resolve($e)}catch($e){}}return this.instancesDeferred.get(z).promise}getImmediate(W){var z;const re=this.normalizeInstanceIdentifier(null==W?void 0:W.identifier),$e=null!==(z=null==W?void 0:W.optional)&&void 0!==z&&z;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Re){if($e)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function de(pe){return"EAGER"===pe.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:ce})}catch(z){}for(const[z,re]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(z);try{const Re=this.getOrInitializeService({instanceIdentifier:$e});re.resolve(Re)}catch(Re){}}}}clearInstance(W=ce){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,m.Z)(function*(){const z=Array.from(W.instances.values());yield Promise.all([...z.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...z.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=ce){return this.instances.has(W)}getOptions(W=ce){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:z={}}=W,re=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:re,options:z});for(const[Re,Ne]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Re)&&Ne.resolve($e);return $e}onInit(W,z){var re;const $e=this.normalizeInstanceIdentifier(z),Re=null!==(re=this.onInitCallbacks.get($e))&&void 0!==re?re:new Set;Re.add(W),this.onInitCallbacks.set($e,Re);const Ne=this.instances.get($e);return Ne&&W(Ne,$e),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,z){const re=this.onInitCallbacks.get(z);if(re)for(const $e of re)try{$e(W,z)}catch(Re){}}getOrInitializeService({instanceIdentifier:W,options:z={}}){let re=this.instances.get(W);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(pe=W,pe===ce?void 0:pe),options:z}),this.instances.set(W,re),this.instancesOptions.set(W,z),this.invokeOnInitCallbacks(re,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,re)}catch($e){}var pe;return re||null}normalizeInstanceIdentifier(W=ce){return this.component?this.component.multipleInstances?W:ce:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const z=this.getProvider(W.name);if(z.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);z.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const z=new ie(W,this);return this.providers.set(W,z),z}getProviders(){return Array.from(this.providers.values())}}},1877:(Qe,ve,L)=>{L.d(ve,{Am:()=>pe,Ub:()=>ue,Yd:()=>de,in:()=>ee});const m=[];var ee=(()=>{return(W=ee||(ee={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",ee;var W})();const V={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ce=ee.INFO,ie={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},me=(W,z,...re)=>{if(z<W.logLevel)return;const $e=(new Date).toISOString(),Re=ie[z];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${z})`);console[Re](`[${$e}]  ${W.name}:`,...re)};class de{constructor(z){this.name=z,this._logLevel=ce,this._logHandler=me,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(z){if(!(z in ee))throw new TypeError(`Invalid value "${z}" assigned to \`logLevel\``);this._logLevel=z}setLogLevel(z){this._logLevel="string"==typeof z?V[z]:z}get logHandler(){return this._logHandler}set logHandler(z){if("function"!=typeof z)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=z}get userLogHandler(){return this._userLogHandler}set userLogHandler(z){this._userLogHandler=z}debug(...z){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...z),this._logHandler(this,ee.DEBUG,...z)}log(...z){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...z),this._logHandler(this,ee.VERBOSE,...z)}info(...z){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...z),this._logHandler(this,ee.INFO,...z)}warn(...z){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...z),this._logHandler(this,ee.WARN,...z)}error(...z){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...z),this._logHandler(this,ee.ERROR,...z)}}function ue(W){m.forEach(z=>{z.setLogLevel(W)})}function pe(W,z){for(const re of m){let $e=null;z&&z.level&&($e=V[z.level]),re.userLogHandler=null===W?null:(Re,Ne,...Ve)=>{const ge=Ve.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(qe){return null}}).filter(De=>De).join(" ");Ne>=(null!=$e?$e:Re.logLevel)&&W({level:ee[Ne].toLowerCase(),message:ge,args:Ve,type:Re.name})}}}},8766:(Qe,ve,L)=>{L.d(ve,{Lj:()=>Se,X3:()=>Ze});var m=L(5861);let V,ce;const de=new WeakMap,ue=new WeakMap,pe=new WeakMap,W=new WeakMap,z=new WeakMap;let Re={get(K,we,J){if(K instanceof IDBTransaction){if("done"===we)return ue.get(K);if("objectStoreNames"===we)return K.objectStoreNames||pe.get(K);if("store"===we)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return De(K[we])},set:(K,we,J)=>(K[we]=J,!0),has:(K,we)=>K instanceof IDBTransaction&&("done"===we||"store"===we)||we in K};function ge(K){return"function"==typeof K?function Ve(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function me(){return ce||(ce=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...we){return K.apply(qe(this),we),De(de.get(this))}:function(...we){return De(K.apply(qe(this),we))}:function(we,...J){const se=K.call(qe(this),we,...J);return pe.set(se,we.sort?we.sort():[we]),De(se)}}(K):(K instanceof IDBTransaction&&function $e(K){if(ue.has(K))return;const we=new Promise((J,se)=>{const te=()=>{K.removeEventListener("complete",_e),K.removeEventListener("error",le),K.removeEventListener("abort",le)},_e=()=>{J(),te()},le=()=>{se(K.error||new DOMException("AbortError","AbortError")),te()};K.addEventListener("complete",_e),K.addEventListener("error",le),K.addEventListener("abort",le)});ue.set(K,we)}(K),((K,we)=>we.some(J=>K instanceof J))(K,function ie(){return V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,Re):K)}function De(K){if(K instanceof IDBRequest)return function re(K){const we=new Promise((J,se)=>{const te=()=>{K.removeEventListener("success",_e),K.removeEventListener("error",le)},_e=()=>{J(De(K.result)),te()},le=()=>{se(K.error),te()};K.addEventListener("success",_e),K.addEventListener("error",le)});return we.then(J=>{J instanceof IDBCursor&&de.set(J,K)}).catch(()=>{}),z.set(we,K),we}(K);if(W.has(K))return W.get(K);const we=ge(K);return we!==K&&(W.set(K,we),z.set(we,K)),we}const qe=K=>z.get(K);function Ze(K,we,{blocked:J,upgrade:se,blocking:te,terminated:_e}={}){const le=indexedDB.open(K,we),Oe=De(le);return se&&le.addEventListener("upgradeneeded",lt=>{se(De(le.result),lt.oldVersion,lt.newVersion,De(le.transaction))}),J&&le.addEventListener("blocked",()=>J()),Oe.then(lt=>{_e&&lt.addEventListener("close",()=>_e()),te&&lt.addEventListener("versionchange",()=>te())}).catch(()=>{}),Oe}function Se(K,{blocked:we}={}){const J=indexedDB.deleteDatabase(K);return we&&J.addEventListener("blocked",()=>we()),De(J).then(()=>{})}const Ee=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function Be(K,we){if(!(K instanceof IDBDatabase)||we in K||"string"!=typeof we)return;if(Ue.get(we))return Ue.get(we);const J=we.replace(/FromIndex$/,""),se=we!==J,te=Ie.includes(J);if(!(J in(se?IDBIndex:IDBObjectStore).prototype)||!te&&!Ee.includes(J))return;const _e=function(){var le=(0,m.Z)(function*(Oe,...lt){const Ht=this.transaction(Oe,te?"readwrite":"readonly");let Ft=Ht.store;return se&&(Ft=Ft.index(lt.shift())),(yield Promise.all([Ft[J](...lt),te&&Ht.done]))[0]});return function(lt){return le.apply(this,arguments)}}();return Ue.set(we,_e),_e}!function Ne(K){Re=K(Re)}(K=>tL(eL({},K),{get:(we,J,se)=>Be(we,J)||K.get(we,J,se),has:(we,J)=>!!Be(we,J)||K.has(we,J)}))},5861:(Qe,ve,L)=>{function m(V,ce,ie,me,de,ue,pe){try{var W=V[ue](pe),z=W.value}catch(re){return void ie(re)}W.done?ce(z):Promise.resolve(z).then(me,de)}function ee(V){return function(){var ce=this,ie=arguments;return new Promise(function(me,de){var ue=V.apply(ce,ie);function pe(z){m(ue,me,de,pe,W,"next",z)}function W(z){m(ue,me,de,pe,W,"throw",z)}pe(void 0)})}}L.d(ve,{Z:()=>ee})}},Qe=>{Qe(Qe.s=1559)}]);