"use strict";var NG=Object.defineProperty,PG=Object.defineProperties,kG=Object.getOwnPropertyDescriptors,yF=Object.getOwnPropertySymbols,OG=Object.prototype.hasOwnProperty,FG=Object.prototype.propertyIsEnumerable,vF=(Je,we,O)=>we in Je?NG(Je,we,{enumerable:!0,configurable:!0,writable:!0,value:O}):Je[we]=O,wF=(Je,we)=>{for(var O in we||(we={}))OG.call(we,O)&&vF(Je,O,we[O]);if(yF)for(var O of yF(we))FG.call(we,O)&&vF(Je,O,we[O]);return Je},EF=(Je,we)=>PG(Je,kG(we));(self.webpackChunkScadenzarioAngular=self.webpackChunkScadenzarioAngular||[]).push([[179],{2011:(Je,we,O)=>{O.d(we,{Dh:()=>ae,GT:()=>ge,cc:()=>xe,hO:()=>We,on:()=>G,pX:()=>re,xv:()=>he});var m=O(5e3),ee=O(127),F=O(5813);Je=O.hmd(Je);const le=["ngOnDestroy"],re=(be,qe,Ye,Te={})=>new Proxy(be,{get:(Ce,Ie)=>Ye.runOutsideAngular(()=>{var Be;if(be[Ie])return(null===(Be=null==Te?void 0:Te.spy)||void 0===Be?void 0:Be.get)&&Te.spy.get(Ie,be[Ie]),be[Ie];if(le.indexOf(Ie)>-1)return()=>{};const je=qe.toPromise().then($=>{const Ee=$&&$[Ie];return"function"==typeof Ee?Ee.bind($):Ee&&Ee.then?Ee.then(Y=>Ye.run(()=>Y)):Ye.run(()=>Ee)});return new Proxy(()=>{},{get:($,Ee)=>je[Ee],apply:($,Ee,Y)=>je.then(ie=>{var te;const me=ie&&ie(...Y);return(null===(te=null==Te?void 0:Te.spy)||void 0===te?void 0:te.apply)&&Te.spy.apply(Ie,Y,me),me})})})}),ge=(be,qe)=>{qe.forEach(Ye=>{Object.getOwnPropertyNames(Ye.prototype||Ye).forEach(Te=>{Object.defineProperty(be.prototype,Te,Object.getOwnPropertyDescriptor(Ye.prototype||Ye,Te))})})};class ce{constructor(qe){return qe}}const ae=new m.OlP("angularfire2.app.options"),he=new m.OlP("angularfire2.app.name");function G(be,qe,Ye){const Ce="object"==typeof Ye&&Ye||{};Ce.name=Ce.name||"string"==typeof Ye&&Ye||"[DEFAULT]";const Be=ee.Z.apps.filter(je=>je&&je.name===Ce.name)[0]||qe.runOutsideAngular(()=>ee.Z.initializeApp(be,Ce));try{JSON.stringify(be)!==JSON.stringify(Be.options)&&H("error",`${Be.name} Firebase App already initialized with different options${Je.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(je){}return new ce(Be)}const H=(be,...qe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[be](...qe)},ne={provide:ce,useFactory:G,deps:[ae,m.R0b,[new m.FiY,he]]};let We=(()=>{class be{constructor(Ye){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",m.q4F.full,Ye.toString())}static initializeApp(Ye,Te){return{ngModule:be,providers:[{provide:ae,useValue:Ye},{provide:he,useValue:Te}]}}}return be.\u0275fac=function(Ye){return new(Ye||be)(m.LFG(m.Lbi))},be.\u0275mod=m.oAB({type:be}),be.\u0275inj=m.cJS({providers:[ne]}),be})();function xe(be,qe,Ye,Te,Ce){const[,Ie,Be]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===be)||[];if(Ie)return function ke(be,qe){try{return be.toString()===qe.toString()}catch(Ye){return be===qe}}(Ce,Be)||(pe("error",`${qe} was already initialized on the ${Ye} Firebase App with different settings.${Ue?" You may need to reload as Firebase is not HMR aware.":""}`),pe("warn",{is:Ce,was:Be})),Ie;{const je=Te();return globalThis.\u0275AngularfireInstanceCache.push([be,je,Ce]),je}}const Ue=!!Je.hot,pe=(be,...qe)=>{(0,m.X6Q)()&&"undefined"!=typeof console&&console[be](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(Je,we,O)=>{O.d(we,{q4:()=>ea,iC:()=>ia,fc:()=>qs,HU:()=>su,vb:()=>Nd,JM:()=>Pg});var m=O(5e3),ee=O(5867),F=O(5861),le=O(9681),re=O(2090),ge=O(4859),ce=O(1877),ae=O(8766);const he="@firebase/installations",G="0.5.9",ne=`w:${G}`,We="FIS_v2",qe=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ye(b){return b instanceof re.ZR&&b.code.includes("request-failed")}function Te({projectId:b}){return`https://firebaseinstallations.googleapis.com/v1/projects/${b}/installations`}function Ce(b){return{token:b.token,requestStatus:2,expiresIn:ie(b.expiresIn),creationTime:Date.now()}}function Ie(b,T){return Be.apply(this,arguments)}function Be(){return(Be=(0,F.Z)(function*(b,T){const V=(yield T.json()).error;return qe.create("request-failed",{requestName:b,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function je({apiKey:b}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b})}function $(b,{refreshToken:T}){const M=je(b);return M.append("Authorization",function te(b){return`${We} ${b}`}(T)),M}function Ee(b){return Y.apply(this,arguments)}function Y(){return(Y=(0,F.Z)(function*(b){const T=yield b();return T.status>=500&&T.status<600?b():T})).apply(this,arguments)}function ie(b){return Number(b.replace("s","000"))}function me(b,T){return ue.apply(this,arguments)}function ue(){return(ue=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:T},{fid:M}){const V=Te(b),Q=je(b),se=T.getImmediate({optional:!0});if(se){const wt=yield se.getHeartbeatsHeader();wt&&Q.append("x-firebase-client",wt)}const He={method:"POST",headers:Q,body:JSON.stringify({fid:M,authVersion:We,appId:b.appId,sdkVersion:ne})},vt=yield Ee(()=>fetch(V,He));if(vt.ok){const wt=yield vt.json();return{fid:wt.fid||M,registrationStatus:2,refreshToken:wt.refreshToken,authToken:Ce(wt.authToken)}}throw yield Ie("Create Installation",vt)})).apply(this,arguments)}function Oe(b){return new Promise(T=>{setTimeout(T,b)})}const Ht=/^[cdef][\w-]{21}$/;function Qe(){try{const b=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(b),b[0]=112+b[0]%16;const M=function rn(b){return function at(b){return btoa(String.fromCharCode(...b)).replace(/\+/g,"-").replace(/\//g,"_")}(b).substr(0,22)}(b);return Ht.test(M)?M:""}catch(b){return""}}function kn(b){return`${b.appName}!${b.appId}`}const sn=new Map;function Qt(b,T){const M=kn(b);Lt(M,T),function qi(b,T){const M=function vr(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=b=>{Lt(b.data.key,b.data.fid)}),ci}();M&&M.postMessage({key:b,fid:T}),function kr(){0===sn.size&&ci&&(ci.close(),ci=null)}()}(M,T)}function Lt(b,T){const M=sn.get(b);if(M)for(const V of M)V(T)}let ci=null;const Jr="firebase-installations-store";let Ri=null;function mt(){return Ri||(Ri=(0,ae.X3)("firebase-installations-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(Jr)}})),Ri}function di(b,T){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,F.Z)(function*(b,T){const M=kn(b),Q=(yield mt()).transaction(Jr,"readwrite"),se=Q.objectStore(Jr),Pe=yield se.get(M);return yield se.put(T,M),yield Q.done,(!Pe||Pe.fid!==T.fid)&&Qt(b,T.fid),T})).apply(this,arguments)}function On(b){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,F.Z)(function*(b){const T=kn(b),V=(yield mt()).transaction(Jr,"readwrite");yield V.objectStore(Jr).delete(T),yield V.done})).apply(this,arguments)}function Xr(b,T){return nr.apply(this,arguments)}function nr(){return(nr=(0,F.Z)(function*(b,T){const M=kn(b),Q=(yield mt()).transaction(Jr,"readwrite"),se=Q.objectStore(Jr),Pe=yield se.get(M),He=T(Pe);return void 0===He?yield se.delete(M):yield se.put(He,M),yield Q.done,He&&(!Pe||Pe.fid!==He.fid)&&Qt(b,He.fid),He})).apply(this,arguments)}function Fn(b){return hi.apply(this,arguments)}function hi(){return(hi=(0,F.Z)(function*(b){let T;const M=yield Xr(b.appConfig,V=>{const Q=oo(V),se=$t(b,Q);return T=se.registrationPromise,se.installationEntry});return""===M.fid?{installationEntry:yield T}:{installationEntry:M,registrationPromise:T}})).apply(this,arguments)}function oo(b){return ao(b||{fid:Qe(),registrationStatus:0})}function $t(b,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(qe.create("app-offline"))};const M={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function rt(b,T){return yt.apply(this,arguments)}(b,M);return{installationEntry:M,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:wr(b)}:{installationEntry:T}}function yt(){return(yt=(0,F.Z)(function*(b,T){try{const M=yield me(b,T);return di(b.appConfig,M)}catch(M){throw Ye(M)&&409===M.customData.serverCode?yield On(b.appConfig):yield di(b.appConfig,{fid:T.fid,registrationStatus:0}),M}})).apply(this,arguments)}function wr(b){return fi.apply(this,arguments)}function fi(){return(fi=(0,F.Z)(function*(b){let T=yield Vt(b.appConfig);for(;1===T.registrationStatus;)yield Oe(100),T=yield Vt(b.appConfig);if(0===T.registrationStatus){const{installationEntry:M,registrationPromise:V}=yield Fn(b);return V||M}return T})).apply(this,arguments)}function Vt(b){return Xr(b,T=>{if(!T)throw qe.create("installation-not-found");return ao(T)})}function ao(b){return function Er(b){return 1===b.registrationStatus&&b.registrationTime+1e4<Date.now()}(b)?{fid:b.fid,registrationStatus:0}:b}function Cr(b,T){return B.apply(this,arguments)}function B(){return(B=(0,F.Z)(function*({appConfig:b,heartbeatServiceProvider:T},M){const V=q(b,M),Q=$(b,M),se=T.getImmediate({optional:!0});if(se){const wt=yield se.getHeartbeatsHeader();wt&&Q.append("x-firebase-client",wt)}const He={method:"POST",headers:Q,body:JSON.stringify({installation:{sdkVersion:ne,appId:b.appId}})},vt=yield Ee(()=>fetch(V,He));if(vt.ok)return Ce(yield vt.json());throw yield Ie("Generate Auth Token",vt)})).apply(this,arguments)}function q(b,{fid:T}){return`${Te(b)}/${T}/authTokens:generate`}function K(b){return De.apply(this,arguments)}function De(){return(De=(0,F.Z)(function*(b,T=!1){let M;const V=yield Xr(b.appConfig,se=>{if(!Dt(se))throw qe.create("not-registered");const Pe=se.authToken;if(!T&&pn(Pe))return se;if(1===Pe.requestStatus)return M=W(b,T),se;{if(!navigator.onLine)throw qe.create("app-offline");const He=qn(se);return M=Xe(b,He),He}});return M?yield M:V.authToken})).apply(this,arguments)}function W(b,T){return X.apply(this,arguments)}function X(){return(X=(0,F.Z)(function*(b,T){let M=yield Re(b.appConfig);for(;1===M.authToken.requestStatus;)yield Oe(100),M=yield Re(b.appConfig);const V=M.authToken;return 0===V.requestStatus?K(b,T):V})).apply(this,arguments)}function Re(b){return Xr(b,T=>{if(!Dt(T))throw qe.create("not-registered");return function Or(b){return 1===b.requestStatus&&b.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function Xe(b,T){return ct.apply(this,arguments)}function ct(){return(ct=(0,F.Z)(function*(b,T){try{const M=yield Cr(b,T),V=Object.assign(Object.assign({},T),{authToken:M});return yield di(b.appConfig,V),M}catch(M){if(!Ye(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield di(b.appConfig,V)}else yield On(b.appConfig);throw M}})).apply(this,arguments)}function Dt(b){return void 0!==b&&2===b.registrationStatus}function pn(b){return 2===b.requestStatus&&!function It(b){const T=Date.now();return T<b.creationTime||b.creationTime+b.expiresIn<T+36e5}(b)}function qn(b){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},b),{authToken:T})}function Na(){return(Na=(0,F.Z)(function*(b){const T=b,{installationEntry:M,registrationPromise:V}=yield Fn(T);return V?V.catch(console.error):K(T).catch(console.error),M.fid})).apply(this,arguments)}function Pa(){return(Pa=(0,F.Z)(function*(b,T=!1){const M=b;return yield zn(M),(yield K(M,T)).token})).apply(this,arguments)}function zn(b){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,F.Z)(function*(b){const{registrationPromise:T}=yield Fn(b);T&&(yield T)})).apply(this,arguments)}function Uo(b){return qe.create("missing-app-config-values",{valueName:b})}const ti="installations",st=b=>{const T=b.getProvider("app").getImmediate(),M=function dr(b){if(!b||!b.options)throw Uo("App Configuration");if(!b.name)throw Uo("App Name");const T=["projectId","apiKey","appId"];for(const M of T)if(!b.options[M])throw Uo(M);return{appName:b.name,projectId:b.options.projectId,apiKey:b.options.apiKey,appId:b.options.appId}}(T);return{app:T,appConfig:M,heartbeatServiceProvider:(0,le._getProvider)(T,"heartbeat"),_delete:()=>Promise.resolve()}},on=b=>{const T=b.getProvider("app").getImmediate(),M=(0,le._getProvider)(T,ti).getImmediate();return{getId:()=>function Nu(b){return Na.apply(this,arguments)}(M),getToken:Q=>function Pu(b){return Pa.apply(this,arguments)}(M,Q)}};(function ni(){(0,le._registerComponent)(new ge.wA(ti,st,"PUBLIC")),(0,le._registerComponent)(new ge.wA("installations-internal",on,"PRIVATE"))})(),(0,le.registerVersion)(he,G),(0,le.registerVersion)(he,G,"esm2017");const Ki="@firebase/remote-config",Ln=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Eg{constructor(T,M,V,Q){this.client=T,this.storage=M,this.storageCache=V,this.logger=Q}isCachedDataFresh(T,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-M,Q=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Q}.`),Q}fetch(T){var M=this;return(0,F.Z)(function*(){const[V,Q]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Q&&M.isCachedDataFresh(T.cacheMaxAgeMillis,V))return Q;T.eTag=Q&&Q.eTag;const se=yield M.client.fetch(T),Pe=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===se.status&&Pe.push(M.storage.setLastSuccessfulFetchResponse(se)),yield Promise.all(Pe),se})()}}function ld(b=navigator){return b.languages&&b.languages[0]||b.language}class br{constructor(T,M,V,Q,se,Pe){this.firebaseInstallations=T,this.sdkVersion=M,this.namespace=V,this.projectId=Q,this.apiKey=se,this.appId=Pe}fetch(T){var M=this;return(0,F.Z)(function*(){const[V,Q]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),Pe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,He={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},vt={sdk_version:M.sdkVersion,app_instance_id:V,app_instance_id_token:Q,app_id:M.appId,language_code:ld()},wt={method:"POST",headers:He,body:JSON.stringify(vt)},Bt=fetch(Pe,wt),Et=new Promise((Oi,$r)=>{T.signal.addEventListener(()=>{const nc=new Error("The operation was aborted.");nc.name="AbortError",$r(nc)})});let Hr;try{yield Promise.race([Bt,Et]),Hr=yield Bt}catch(Oi){let $r="fetch-client-network";throw"AbortError"===Oi.name&&($r="fetch-timeout"),Ln.create($r,{originalErrorMessage:Oi.message})}let ar=Hr.status;const sa=Hr.headers.get("ETag")||void 0;let vi,si;if(200===Hr.status){let Oi;try{Oi=yield Hr.json()}catch($r){throw Ln.create("fetch-client-parse",{originalErrorMessage:$r.message})}vi=Oi.entries,si=Oi.state}if("INSTANCE_STATE_UNSPECIFIED"===si?ar=500:"NO_CHANGE"===si?ar=304:("NO_TEMPLATE"===si||"EMPTY_CONFIG"===si)&&(vi={}),304!==ar&&200!==ar)throw Ln.create("fetch-status",{httpStatus:ar});return{status:ar,eTag:sa,config:vi}})()}}class Cg{constructor(T,M){this.client=T,this.storage=M}fetch(T){var M=this;return(0,F.Z)(function*(){const V=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:M,backoffCount:V}){var Q=this;return(0,F.Z)(function*(){yield function Fs(b,T){return new Promise((M,V)=>{const Q=Math.max(T-Date.now(),0),se=setTimeout(M,Q);b.addEventListener(()=>{clearTimeout(se),V(Ln.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,M);try{const se=yield Q.client.fetch(T);return yield Q.storage.deleteThrottleMetadata(),se}catch(se){if(!function cd(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}(se))throw se;const Pe={throttleEndTimeMillis:Date.now()+(0,re.$s)(V),backoffCount:V+1};return yield Q.storage.setThrottleMetadata(Pe),Q.attemptFetch(T,Pe)}})()}}class dd{constructor(T,M,V,Q,se){this.app=T,this._client=M,this._storageCache=V,this._storage=Q,this._logger=se,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ll(b,T){const M=b.target.error||void 0;return Ln.create(T,{originalErrorMessage:M&&M.message})}const Ls="app_namespace_store";class Tg{constructor(T,M,V,Q=function Dg(){return new Promise((b,T)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=V=>{T(Ll(V,"storage-open"))},M.onsuccess=V=>{b(V.target.result)},M.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(Ls,{keyPath:"compositeKey"})}}catch(M){T(Ln.create("storage-open",{originalErrorMessage:M}))}})}()){this.appId=T,this.appName=M,this.namespace=V,this.openDbPromise=Q}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var M=this;return(0,F.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Q,se)=>{const He=V.transaction([Ls],"readonly").objectStore(Ls),vt=M.createCompositeKey(T);try{const wt=He.get(vt);wt.onerror=Bt=>{se(Ll(Bt,"storage-get"))},wt.onsuccess=Bt=>{const Et=Bt.target.result;Q(Et?Et.value:void 0)}}catch(wt){se(Ln.create("storage-get",{originalErrorMessage:wt&&wt.message}))}})})()}set(T,M){var V=this;return(0,F.Z)(function*(){const Q=yield V.openDbPromise;return new Promise((se,Pe)=>{const vt=Q.transaction([Ls],"readwrite").objectStore(Ls),wt=V.createCompositeKey(T);try{const Bt=vt.put({compositeKey:wt,value:M});Bt.onerror=Et=>{Pe(Ll(Et,"storage-set"))},Bt.onsuccess=()=>{se()}}catch(Bt){Pe(Ln.create("storage-set",{originalErrorMessage:Bt&&Bt.message}))}})})()}delete(T){var M=this;return(0,F.Z)(function*(){const V=yield M.openDbPromise;return new Promise((Q,se)=>{const He=V.transaction([Ls],"readwrite").objectStore(Ls),vt=M.createCompositeKey(T);try{const wt=He.delete(vt);wt.onerror=Bt=>{se(Ll(Bt,"storage-delete"))},wt.onsuccess=()=>{Q()}}catch(wt){se(Ln.create("storage-delete",{originalErrorMessage:wt&&wt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class fd{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,F.Z)(function*(){const M=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),Q=T.storage.getActiveConfig(),se=yield M;se&&(T.lastFetchStatus=se);const Pe=yield V;Pe&&(T.lastSuccessfulFetchTimestampMillis=Pe);const He=yield Q;He&&(T.activeConfig=He)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function Lu(){return pd.apply(this,arguments)}function pd(){return(pd=(0,F.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}!function Bo(){(0,le._registerComponent)(new ge.wA("remote-config",function b(T,{instanceIdentifier:M}){const V=T.getProvider("app").getImmediate(),Q=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Ln.create("registration-window");if(!(0,re.hl)())throw Ln.create("indexed-db-unavailable");const{projectId:se,apiKey:Pe,appId:He}=V.options;if(!se)throw Ln.create("registration-project-id");if(!Pe)throw Ln.create("registration-api-key");if(!He)throw Ln.create("registration-app-id");const vt=new Tg(He,V.name,M=M||"firebase"),wt=new fd(vt),Bt=new ce.Yd(Ki);Bt.logLevel=ce.in.ERROR;const Et=new br(Q,le.SDK_VERSION,M,se,Pe,He),Hr=new Cg(Et,vt),ar=new Eg(Hr,vt,wt,Bt),sa=new dd(V,ar,wt,vt,Bt);return function an(b){const T=(0,re.m9)(b);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(sa),sa},"PUBLIC").setMultipleInstances(!0)),(0,le.registerVersion)(Ki,"0.3.8"),(0,le.registerVersion)(Ki,"0.3.8","esm2017")}();const gd="/firebase-messaging-sw.js",Dr="/firebase-cloud-messaging-push-scope",co="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",jo="google.c.a.c_id",md="google.c.a.c_l",ff="google.c.a.ts",_d="google.c.a.e";var Ho=(()=>{return(b=Ho||(Ho={})).PUSH_RECEIVED="push-received",b.NOTIFICATION_CLICKED="notification-clicked",Ho;var b})();function Lr(b){const T=new Uint8Array(b);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function yd(b){const M=(b+"=".repeat((4-b.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(M),Q=new Uint8Array(V.length);for(let se=0;se<V.length;++se)Q[se]=V.charCodeAt(se);return Q}const Vr="fcm_token_details_db",pi="fcm_token_object_Store";function Vl(b){return vd.apply(this,arguments)}function vd(){return vd=(0,F.Z)(function*(b){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(se=>se.name).includes(Vr))return null;let T=null;return(yield(0,ae.X3)(Vr,5,{upgrade:(V=(0,F.Z)(function*(Q,se,Pe,He){var vt;if(se<2||!Q.objectStoreNames.contains(pi))return;const wt=He.objectStore(pi),Bt=yield wt.index("fcmSenderId").get(b);if(yield wt.clear(),Bt)if(2===se){const Et=Bt;if(!Et.auth||!Et.p256dh||!Et.endpoint)return;T={token:Et.fcmToken,createTime:null!==(vt=Et.createTime)&&void 0!==vt?vt:Date.now(),subscriptionOptions:{auth:Et.auth,p256dh:Et.p256dh,endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:"string"==typeof Et.vapidKey?Et.vapidKey:Lr(Et.vapidKey)}}}else if(3===se){const Et=Bt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Lr(Et.auth),p256dh:Lr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Lr(Et.vapidKey)}}}else if(4===se){const Et=Bt;T={token:Et.fcmToken,createTime:Et.createTime,subscriptionOptions:{auth:Lr(Et.auth),p256dh:Lr(Et.p256dh),endpoint:Et.endpoint,swScope:Et.swScope,vapidKey:Lr(Et.vapidKey)}}}}),function(se,Pe,He,vt){return V.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Vr),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Ul(T)?T:null;var V}),vd.apply(this,arguments)}function Ul(b){if(!b||!b.subscriptionOptions)return!1;const{subscriptionOptions:T}=b;return"number"==typeof b.createTime&&b.createTime>0&&"string"==typeof b.token&&b.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const es="firebase-messaging-store";let pf=null;function un(){return pf||(pf=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(b,T)=>{0===T&&b.createObjectStore(es)}})),pf}function Va(b){return fo.apply(this,arguments)}function fo(){return(fo=(0,F.Z)(function*(b){const T=hr(b),V=yield(yield un()).transaction(es).objectStore(es).get(T);if(V)return V;{const Q=yield Vl(b.appConfig.senderId);if(Q)return yield tn(b,Q),Q}})).apply(this,arguments)}function tn(b,T){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,F.Z)(function*(b,T){const M=hr(b),Q=(yield un()).transaction(es,"readwrite");return yield Q.objectStore(es).put(T,M),yield Q.done,T})).apply(this,arguments)}function Vu(b){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(b){const T=hr(b),V=(yield un()).transaction(es,"readwrite");yield V.objectStore(es).delete(T),yield V.done})).apply(this,arguments)}function hr({appConfig:b}){return b.appId}const En=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ts(b,T){return fr.apply(this,arguments)}function fr(){return(fr=(0,F.Z)(function*(b,T){const M=yield Wo(b),V=qo(T),Q={method:"POST",headers:M,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(ns(b.appConfig),Q)).json()}catch(Pe){throw En.create("token-subscribe-failed",{errorInfo:Pe})}if(se.error)throw En.create("token-subscribe-failed",{errorInfo:se.error.message});if(!se.token)throw En.create("token-subscribe-no-token");return se.token})).apply(this,arguments)}function po(b,T){return ms.apply(this,arguments)}function ms(){return(ms=(0,F.Z)(function*(b,T){const M=yield Wo(b),V=qo(T.subscriptionOptions),Q={method:"PATCH",headers:M,body:JSON.stringify(V)};let se;try{se=yield(yield fetch(`${ns(b.appConfig)}/${T.token}`,Q)).json()}catch(Pe){throw En.create("token-update-failed",{errorInfo:Pe})}if(se.error)throw En.create("token-update-failed",{errorInfo:se.error.message});if(!se.token)throw En.create("token-update-no-token");return se.token})).apply(this,arguments)}function Ba(b,T){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,F.Z)(function*(b,T){const V={method:"DELETE",headers:yield Wo(b)};try{const se=yield(yield fetch(`${ns(b.appConfig)}/${T}`,V)).json();if(se.error)throw En.create("token-unsubscribe-failed",{errorInfo:se.error.message})}catch(Q){throw En.create("token-unsubscribe-failed",{errorInfo:Q})}})).apply(this,arguments)}function ns({projectId:b}){return`https://fcmregistrations.googleapis.com/v1/projects/${b}/registrations`}function Wo(b){return dt.apply(this,arguments)}function dt(){return(dt=(0,F.Z)(function*({appConfig:b,installations:T}){const M=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":b.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function qo({p256dh:b,auth:T,endpoint:M,vapidKey:V}){const Q={web:{endpoint:M,auth:T,p256dh:b}};return V!==co&&(Q.web.applicationPubKey=V),Q}const Uu=6048e5;function ja(b){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,F.Z)(function*(b){const T=yield _n(b.swRegistration,b.vapidKey),M={vapidKey:b.vapidKey,swScope:b.swRegistration.scope,endpoint:T.endpoint,auth:Lr(T.getKey("auth")),p256dh:Lr(T.getKey("p256dh"))},V=yield Va(b.firebaseDependencies);if(V){if(go(V.subscriptionOptions,M))return Date.now()>=V.createTime+Uu?Gl(b,{token:V.token,createTime:Date.now(),subscriptionOptions:M}):V.token;try{yield Ba(b.firebaseDependencies,V.token)}catch(Q){console.warn(Q)}return kt(b.firebaseDependencies,M)}return kt(b.firebaseDependencies,M)})).apply(this,arguments)}function Ha(b){return $l.apply(this,arguments)}function $l(){return($l=(0,F.Z)(function*(b){const T=yield Va(b.firebaseDependencies);T&&(yield Ba(b.firebaseDependencies,T.token),yield Vu(b.firebaseDependencies));const M=yield b.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Gl(b,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,F.Z)(function*(b,T){try{const M=yield po(b.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:M,createTime:Date.now()});return yield tn(b.firebaseDependencies,V),M}catch(M){throw yield Ha(b),M}})).apply(this,arguments)}function kt(b,T){return Bu.apply(this,arguments)}function Bu(){return(Bu=(0,F.Z)(function*(b,T){const V={token:yield ts(b,T),createTime:Date.now(),subscriptionOptions:T};return yield tn(b,V),V.token})).apply(this,arguments)}function _n(b,T){return zo.apply(this,arguments)}function zo(){return(zo=(0,F.Z)(function*(b,T){return(yield b.pushManager.getSubscription())||b.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:yd(T)})})).apply(this,arguments)}function go(b,T){return T.vapidKey===b.vapidKey&&T.endpoint===b.endpoint&&T.auth===b.auth&&T.p256dh===b.p256dh}function gi(b){const T={from:b.from,collapseKey:b.collapse_key,messageId:b.fcmMessageId};return function $a(b,T){if(!T.notification)return;b.notification={};const M=T.notification.title;M&&(b.notification.title=M);const V=T.notification.body;V&&(b.notification.body=V);const Q=T.notification.image;Q&&(b.notification.image=Q)}(T,b),function Wl(b,T){!T.data||(b.data=T.data)}(T,b),function Sg(b,T){if(!T.fcmOptions)return;b.fcmOptions={};const M=T.fcmOptions.link;M&&(b.fcmOptions.link=M);const V=T.fcmOptions.analytics_label;V&&(b.fcmOptions.analyticsLabel=V)}(T,b),T}function ju(b){return"object"==typeof b&&!!b&&jo in b}function Ga(b,T){const M=[];for(let V=0;V<b.length;V++)M.push(b.charAt(V)),V<T.length&&M.push(T.charAt(V));return M.join("")}function Vn(b){return En.create("missing-app-config-values",{valueName:b})}Ga("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ga("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class _s{constructor(T,M,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Q=function Hu(b){if(!b||!b.options)throw Vn("App Configuration Object");if(!b.name)throw Vn("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:M}=b;for(const V of T)if(!M[V])throw Vn(V);return{appName:b.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Q,installations:M,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Wa(b){return Us.apply(this,arguments)}function Us(){return(Us=(0,F.Z)(function*(b){try{b.swRegistration=yield navigator.serviceWorker.register(gd,{scope:Dr}),b.swRegistration.update().catch(()=>{})}catch(T){throw En.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function Pi(b,T){return ql.apply(this,arguments)}function ql(){return(ql=(0,F.Z)(function*(b,T){if(!T&&!b.swRegistration&&(yield Wa(b)),T||!b.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw En.create("invalid-sw-registration");b.swRegistration=T}})).apply(this,arguments)}function $u(b,T){return zl.apply(this,arguments)}function zl(){return(zl=(0,F.Z)(function*(b,T){T?b.vapidKey=T:b.vapidKey||(b.vapidKey=co)})).apply(this,arguments)}function qa(){return(qa=(0,F.Z)(function*(b,T){if(!navigator)throw En.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw En.create("permission-blocked");return yield $u(b,null==T?void 0:T.vapidKey),yield Pi(b,null==T?void 0:T.serviceWorkerRegistration),ja(b)})).apply(this,arguments)}function za(b,T,M){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,F.Z)(function*(b,T,M){const V=Ka(T);(yield b.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:M[jo],message_name:M[md],message_time:M[ff],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Ka(b){switch(b){case Ho.NOTIFICATION_CLICKED:return"notification_open";case Ho.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Zl(){return(Zl=(0,F.Z)(function*(b,T){const M=T.data;if(!M.isFirebaseMessaging)return;b.onMessageHandler&&M.messageType===Ho.PUSH_RECEIVED&&("function"==typeof b.onMessageHandler?b.onMessageHandler(gi(M)):b.onMessageHandler.next(gi(M)));const V=M.data;ju(V)&&"1"===V[_d]&&(yield za(b,M.messageType,V))})).apply(this,arguments)}const Ko="@firebase/messaging",wd=b=>{const T=new _s(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),b.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function Ag(b,T){return Zl.apply(this,arguments)}(T,M)),T},Zo=b=>{const T=b.getProvider("messaging").getImmediate();return{getToken:V=>function Gu(b,T){return qa.apply(this,arguments)}(T,V)}};function Yo(){return rs.apply(this,arguments)}function rs(){return(rs=(0,F.Z)(function*(){try{yield(0,re.eu)()}catch(b){return!1}return"undefined"!=typeof window&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ed(){(0,le._registerComponent)(new ge.wA("messaging",wd,"PUBLIC")),(0,le._registerComponent)(new ge.wA("messaging-internal",Zo,"PRIVATE")),(0,le.registerVersion)(Ko,"0.9.13"),(0,le.registerVersion)(Ko,"0.9.13","esm2017")}();const Cd="analytics",xg="firebase_id",ys="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qo="https://www.googletagmanager.com/gtag/js",sr=new ce.Yd("@firebase/analytics");function _f(b){return Promise.all(b.map(T=>T.catch(M=>M)))}function mo(b,T){const M=document.createElement("script");M.src=`${Qo}?l=${b}&id=${T}`,M.async=!0,document.head.appendChild(M)}function bd(b,T,M,V,Q,se){return qu.apply(this,arguments)}function qu(){return(qu=(0,F.Z)(function*(b,T,M,V,Q,se){const Pe=V[Q];try{if(Pe)yield T[Pe];else{const vt=(yield _f(M)).find(wt=>wt.measurementId===Q);vt&&(yield T[vt.appId])}}catch(He){sr.error(He)}b("config",Q,se)})).apply(this,arguments)}function zu(b,T,M,V,Q){return _o.apply(this,arguments)}function _o(){return(_o=(0,F.Z)(function*(b,T,M,V,Q){try{let se=[];if(Q&&Q.send_to){let Pe=Q.send_to;Array.isArray(Pe)||(Pe=[Pe]);const He=yield _f(M);for(const vt of Pe){const wt=He.find(Et=>Et.measurementId===vt),Bt=wt&&T[wt.appId];if(!Bt){se=[];break}se.push(Bt)}}0===se.length&&(se=Object.values(T)),yield Promise.all(se),b("event",V,Q||{})}catch(se){sr.error(se)}})).apply(this,arguments)}function Zn(){const b=window.document.getElementsByTagName("script");for(const T of Object.values(b))if(T.src&&T.src.includes(Qo))return T;return null}const An=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Qa=new class xn{constructor(T={},M=1e3){this.throttleMetadata=T,this.intervalMillis=M}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,M){this.throttleMetadata[T]=M}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Ja(b){return new Headers({Accept:"application/json","x-goog-api-key":b})}function Ur(b){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,F.Z)(function*(b){var T;const{appId:M,apiKey:V}=b,Q={method:"GET",headers:Ja(V)},se=ys.replace("{app-id}",M),Pe=yield fetch(se,Q);if(200!==Pe.status&&304!==Pe.status){let He="";try{const vt=yield Pe.json();(null===(T=vt.error)||void 0===T?void 0:T.message)&&(He=vt.error.message)}catch(vt){}throw An.create("config-fetch-failed",{httpStatus:Pe.status,responseMessage:He})}return Pe.json()})).apply(this,arguments)}function xt(b){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,F.Z)(function*(b,T=Qa,M){const{appId:V,apiKey:Q,measurementId:se}=b.options;if(!V)throw An.create("no-app-id");if(!Q){if(se)return{measurementId:se,appId:V};throw An.create("no-api-key")}const Pe=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},He=new Sd;return setTimeout((0,F.Z)(function*(){He.abort()}),void 0!==M?M:6e4),pt({appId:V,apiKey:Q,measurementId:se},Pe,He,T)})).apply(this,arguments)}function pt(b,T,M){return Td.apply(this,arguments)}function Td(){return(Td=(0,F.Z)(function*(b,{throttleEndTimeMillis:T,backoffCount:M},V,Q=Qa){const{appId:se,measurementId:Pe}=b;try{yield Ku(V,T)}catch(He){if(Pe)return sr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:se,measurementId:Pe};throw He}try{const He=yield Ur(b);return Q.deleteThrottleMetadata(se),He}catch(He){if(!Yl(He)){if(Q.deleteThrottleMetadata(se),Pe)return sr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Pe} provided in the "measurementId" field in the local Firebase config. [${He.message}]`),{appId:se,measurementId:Pe};throw He}const vt=503===Number(He.customData.httpStatus)?(0,re.$s)(M,Q.intervalMillis,30):(0,re.$s)(M,Q.intervalMillis),wt={throttleEndTimeMillis:Date.now()+vt,backoffCount:M+1};return Q.setThrottleMetadata(se,wt),sr.debug(`Calling attemptFetch again in ${vt} millis`),pt(b,wt,V,Q)}})).apply(this,arguments)}function Ku(b,T){return new Promise((M,V)=>{const Q=Math.max(T-Date.now(),0),se=setTimeout(M,Q);b.addEventListener(()=>{clearTimeout(se),V(An.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function Yl(b){if(!(b instanceof re.ZR&&b.customData))return!1;const T=Number(b.customData.httpStatus);return 429===T||500===T||503===T||504===T}class Sd{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function Ad(){return ss.apply(this,arguments)}function ss(){return(ss=(0,F.Z)(function*(){if(!(0,re.hl)())return sr.warn(An.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(b){return sr.warn(An.create("indexeddb-unavailable",{errorInfo:b}).message),!1}return!0})).apply(this,arguments)}function Bs(){return(Bs=(0,F.Z)(function*(b,T,M,V,Q,se,Pe){var He;const vt=xt(b);vt.then(ar=>{M[ar.measurementId]=ar.appId,b.options.measurementId&&ar.measurementId!==b.options.measurementId&&sr.warn(`The measurement ID in the local Firebase config (${b.options.measurementId}) does not match the measurement ID fetched from the server (${ar.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ar=>sr.error(ar)),T.push(vt);const wt=Ad().then(ar=>{if(ar)return V.getId()}),[Bt,Et]=yield Promise.all([vt,wt]);Zn()||mo(se,Bt.measurementId),Q("js",new Date);const Hr=null!==(He=null==Pe?void 0:Pe.config)&&void 0!==He?He:{};return Hr.origin="firebase",Hr.update=!0,null!=Et&&(Hr[xg]=Et),Q("config",Bt.measurementId,Hr),Bt.measurementId})).apply(this,arguments)}class vs{constructor(T){this.app=T}_delete(){return delete pr[this.app.options.appId],Promise.resolve()}}let pr={},xd=[];const os={};let Zu,ws,mi="dataLayer",Ut=!1;function Mg(b,T,M){!function js(){const b=[];if((0,re.ru)()&&b.push("This is a browser extension environment."),(0,re.zI)()||b.push("Cookies are not available."),b.length>0){const T=b.map((V,Q)=>`(${Q+1}) ${V}`).join(" "),M=An.create("invalid-analytics-context",{errorInfo:T});sr.warn(M.message)}}();const V=b.options.appId;if(!V)throw An.create("no-app-id");if(!b.options.apiKey){if(!b.options.measurementId)throw An.create("no-api-key");sr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${b.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=pr[V])throw An.create("already-exists",{id:V});if(!Ut){!function Wu(b){let T=[];Array.isArray(window[b])?T=window[b]:window[b]=T}(mi);const{wrappedGtag:se,gtagCore:Pe}=function Rg(b,T,M,V,Q){let se=function(...Pe){window[V].push(arguments)};return window[Q]&&"function"==typeof window[Q]&&(se=window[Q]),window[Q]=function Dd(b,T,M,V){function se(){return(se=(0,F.Z)(function*(Pe,He,vt){try{"event"===Pe?yield zu(b,T,M,He,vt):"config"===Pe?yield bd(b,T,M,V,He,vt):b("set",He)}catch(wt){sr.error(wt)}})).apply(this,arguments)}return function Q(Pe,He,vt){return se.apply(this,arguments)}}(se,b,T,M),{gtagCore:se,wrappedGtag:window[Q]}}(pr,xd,os,mi,"gtag");ws=se,Zu=Pe,Ut=!0}return pr[V]=function Br(b,T,M,V,Q,se,Pe){return Bs.apply(this,arguments)}(b,xd,os,T,Zu,mi,M),new vs(b)}function Qu(){return(Qu=(0,F.Z)(function*(b,T,M,V,Q){if(Q&&Q.global)b("event",M,V);else{const se=yield T;b("event",M,Object.assign(Object.assign({},V),{send_to:se}))}})).apply(this,arguments)}function iy(){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,F.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch(b){return!1}})).apply(this,arguments)}const ki="@firebase/analytics";!function Ng(){(0,le._registerComponent)(new ge.wA(Cd,(T,{options:M})=>Mg(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,le._registerComponent)(new ge.wA("analytics-internal",function b(T){try{const M=T.getProvider(Cd).getImmediate();return{logEvent:(V,Q,se)=>function k(b,T,M,V){b=(0,re.m9)(b),function Jo(b,T,M,V,Q){return Qu.apply(this,arguments)}(ws,pr[b.app.options.appId],T,M,V).catch(Q=>sr.error(Q))}(M,V,Q,se)}}catch(M){throw An.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,le.registerVersion)(ki,"0.7.9"),(0,le.registerVersion)(ki,"0.7.9","esm2017")}();var nu=O(4408),Yt=O(7565);const Cs=new class Xo extends Yt.v{}(class or extends nu.o{constructor(T,M){super(T,M),this.scheduler=T,this.work=M}schedule(T,M=0){return M>0?super.schedule(T,M):(this.delay=M,this.state=T,this.scheduler.flush(this),this)}execute(T,M){return M>0||this.closed?super.execute(T,M):this._execute(T,M)}requestAsyncId(T,M,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,M,V):T.flush(this)}});var ec=O(4986),_i=O(8505),jr=O(5363),ru=O(9468);const ea=new m.GfV("7.3.0"),Eo="__angularfire_symbol__analyticsIsSupportedValue",ta="__angularfire_symbol__analyticsIsSupported",Rn="__angularfire_symbol__remoteConfigIsSupportedValue",yi="__angularfire_symbol__remoteConfigIsSupported",iu="__angularfire_symbol__messagingIsSupportedValue",Md="__angularfire_symbol__messagingIsSupported";function Pg(b,T,M){if(T){if(1===T.length)return T[0];const se=T.filter(Pe=>Pe.app===M);if(1===se.length)return se[0]}return M.container.getProvider(b).getImmediate({optional:!0})}globalThis[ta]||(globalThis[ta]=iy().then(b=>globalThis[Eo]=b).catch(()=>globalThis[Eo]=!1)),globalThis[Md]||(globalThis[Md]=Yo().then(b=>globalThis[iu]=b).catch(()=>globalThis[iu]=!1)),globalThis[yi]||(globalThis[yi]=Lu().then(b=>globalThis[Rn]=b).catch(()=>globalThis[Rn]=!1));const Nd=(b,T)=>{const M=T?[T]:(0,ee.C6)(),V=[];return M.forEach(Q=>{Q.container.getProvider(b).instances.forEach(Pe=>{V.includes(Pe)||V.push(Pe)})}),V};function Ws(){}class Pd{constructor(T,M=Cs){this.zone=T,this.delegate=M}now(){return this.delegate.now()}schedule(T,M,V){const Q=this.zone;return this.delegate.schedule(function(Pe){Q.runGuarded(()=>{T.apply(this,[Pe])})},M,V)}}class tc{constructor(T){this.zone=T,this.task=null}call(T,M){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ws,{},Ws,Ws)),M.pipe((0,_i.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let su=(()=>{class b{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new Pd(Zone.current)),this.insideAngular=M.run(()=>new Pd(Zone.current,ec.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return b.\u0275fac=function(M){return new(M||b)(m.LFG(m.R0b))},b.\u0275prov=m.Yz7({token:b,factory:b.\u0275fac,providedIn:"root"}),b})();function as(){const b=globalThis.\u0275AngularFireScheduler;if(!b)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return b}function qs(b){return b.pipe((0,jr.Q)(as().outsideAngular))}function ia(b){return as(),function ou(b){return function(M){return(M=M.lift(new tc(b.ngZone))).pipe((0,ru.R)(b.outsideAngular),(0,jr.Q)(b.insideAngular))}}(as())(b)}},2090:(Je,we,O)=>{O.d(we,{$s:()=>Vt,BH:()=>We,DV:()=>qt,Dv:()=>Ns,G6:()=>je,GJ:()=>Qt,L:()=>ae,LL:()=>ue,Mn:()=>Ie,Pz:()=>Ft,Sg:()=>xe,UG:()=>pe,UI:()=>qi,US:()=>ge,Wj:()=>Fn,Yr:()=>Be,ZB:()=>H,ZR:()=>me,b$:()=>Ye,cI:()=>Ht,d:()=>Te,dS:()=>oo,eu:()=>Ee,g5:()=>F,gK:()=>Xr,gQ:()=>Jr,h$:()=>ce,hl:()=>$,hu:()=>ee,jU:()=>be,lb:()=>hi,m9:()=>Cr,ne:()=>Ri,p$:()=>G,pd:()=>Ms,r3:()=>Pr,ru:()=>qe,tV:()=>he,uI:()=>Ue,ug:()=>$t,vZ:()=>ci,w1:()=>Ce,w9:()=>sn,xO:()=>kr,xb:()=>Lt,z$:()=>ke,zI:()=>Y,zd:()=>zi});const ee=function(B,q){if(!B)throw F(q)},F=function(B){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+B)},le=function(B){const q=[];let K=0;for(let De=0;De<B.length;De++){let W=B.charCodeAt(De);W<128?q[K++]=W:W<2048?(q[K++]=W>>6|192,q[K++]=63&W|128):55296==(64512&W)&&De+1<B.length&&56320==(64512&B.charCodeAt(De+1))?(W=65536+((1023&W)<<10)+(1023&B.charCodeAt(++De)),q[K++]=W>>18|240,q[K++]=W>>12&63|128,q[K++]=W>>6&63|128,q[K++]=63&W|128):(q[K++]=W>>12|224,q[K++]=W>>6&63|128,q[K++]=63&W|128)}return q},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,q){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=q?this.byteToCharMapWebSafe_:this.byteToCharMap_,De=[];for(let W=0;W<B.length;W+=3){const X=B[W],Re=W+1<B.length,Xe=Re?B[W+1]:0,ct=W+2<B.length,Dt=ct?B[W+2]:0;let qn=(15&Xe)<<2|Dt>>6,Or=63&Dt;ct||(Or=64,Re||(qn=64)),De.push(K[X>>2],K[(3&X)<<4|Xe>>4],K[qn],K[Or])}return De.join("")},encodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?btoa(B):this.encodeByteArray(le(B),q)},decodeString(B,q){return this.HAS_NATIVE_SUPPORT&&!q?atob(B):function(B){const q=[];let K=0,De=0;for(;K<B.length;){const W=B[K++];if(W<128)q[De++]=String.fromCharCode(W);else if(W>191&&W<224){const X=B[K++];q[De++]=String.fromCharCode((31&W)<<6|63&X)}else if(W>239&&W<365){const ct=((7&W)<<18|(63&B[K++])<<12|(63&B[K++])<<6|63&B[K++])-65536;q[De++]=String.fromCharCode(55296+(ct>>10)),q[De++]=String.fromCharCode(56320+(1023&ct))}else{const X=B[K++],Re=B[K++];q[De++]=String.fromCharCode((15&W)<<12|(63&X)<<6|63&Re)}}return q.join("")}(this.decodeStringToByteArray(B,q))},decodeStringToByteArray(B,q){this.init_();const K=q?this.charToByteMapWebSafe_:this.charToByteMap_,De=[];for(let W=0;W<B.length;){const X=K[B.charAt(W++)],Xe=W<B.length?K[B.charAt(W)]:0;++W;const Dt=W<B.length?K[B.charAt(W)]:64;++W;const It=W<B.length?K[B.charAt(W)]:64;if(++W,null==X||null==Xe||null==Dt||null==It)throw Error();De.push(X<<2|Xe>>4),64!==Dt&&(De.push(Xe<<4&240|Dt>>2),64!==It&&De.push(Dt<<6&192|It))}return De},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},ce=function(B){const q=le(B);return ge.encodeByteArray(q,!0)},ae=function(B){return ce(B).replace(/\./g,"")},he=function(B){try{return ge.decodeString(B,!0)}catch(q){console.error("base64Decode failed: ",q)}return null};function G(B){return H(void 0,B)}function H(B,q){if(!(q instanceof Object))return q;switch(q.constructor){case Date:return new Date(q.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return q}for(const K in q)!q.hasOwnProperty(K)||!ne(K)||(B[K]=H(B[K],q[K]));return B}function ne(B){return"__proto__"!==B}class We{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((q,K)=>{this.resolve=q,this.reject=K})}wrapCallback(q){return(K,De)=>{K?this.reject(K):this.resolve(De),"function"==typeof q&&(this.promise.catch(()=>{}),1===q.length?q(K):q(K,De))}}}function xe(B,q){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const De=q||"demo-project",W=B.iat||0,X=B.sub||B.user_id;if(!X)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Re=Object.assign({iss:`https://securetoken.google.com/${De}`,aud:De,iat:W,exp:W+3600,auth_time:W,sub:X,user_id:X,firebase:{sign_in_provider:"custom",identities:{}}},B);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Re)),""].join(".")}function ke(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ue(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ke())}function pe(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(B){return!1}}function be(){return"object"==typeof self&&self.self===self}function qe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function Ye(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Te(){return ke().indexOf("Electron/")>=0}function Ce(){const B=ke();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ie(){return ke().indexOf("MSAppHost/")>=0}function Be(){return!1}function je(){return!pe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function $(){return"object"==typeof indexedDB}function Ee(){return new Promise((B,q)=>{try{let K=!0;const De="validate-browser-context-for-indexeddb-analytics-module",W=self.indexedDB.open(De);W.onsuccess=()=>{W.result.close(),K||self.indexedDB.deleteDatabase(De),B(!0)},W.onupgradeneeded=()=>{K=!1},W.onerror=()=>{var X;q((null===(X=W.error)||void 0===X?void 0:X.message)||"")}}catch(K){q(K)}})}function Y(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class me extends Error{constructor(q,K,De){super(K),this.code=q,this.customData=De,this.name="FirebaseError",Object.setPrototypeOf(this,me.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ue.prototype.create)}}class ue{constructor(q,K,De){this.service=q,this.serviceName=K,this.errors=De}create(q,...K){const De=K[0]||{},W=`${this.service}/${q}`,X=this.errors[q],Re=X?function Oe(B,q){return B.replace(at,(K,De)=>{const W=q[De];return null!=W?String(W):`<${De}?>`})}(X,De):"Error";return new me(W,`${this.serviceName}: ${Re} (${W}).`,De)}}const at=/\{\$([^}]+)}/g;function Ht(B){return JSON.parse(B)}function Ft(B){return JSON.stringify(B)}const Qe=function(B){let q={},K={},De={},W="";try{const X=B.split(".");q=Ht(he(X[0])||""),K=Ht(he(X[1])||""),W=X[2],De=K.d||{},delete K.d}catch(X){}return{header:q,claims:K,data:De,signature:W}},sn=function(B){const K=Qe(B).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Qt=function(B){const q=Qe(B).claims;return"object"==typeof q&&!0===q.admin};function Pr(B,q){return Object.prototype.hasOwnProperty.call(B,q)}function qt(B,q){if(Object.prototype.hasOwnProperty.call(B,q))return B[q]}function Lt(B){for(const q in B)if(Object.prototype.hasOwnProperty.call(B,q))return!1;return!0}function qi(B,q,K){const De={};for(const W in B)Object.prototype.hasOwnProperty.call(B,W)&&(De[W]=q.call(K,B[W],W,B));return De}function ci(B,q){if(B===q)return!0;const K=Object.keys(B),De=Object.keys(q);for(const W of K){if(!De.includes(W))return!1;const X=B[W],Re=q[W];if(vr(X)&&vr(Re)){if(!ci(X,Re))return!1}else if(X!==Re)return!1}for(const W of De)if(!K.includes(W))return!1;return!0}function vr(B){return null!==B&&"object"==typeof B}function kr(B){const q=[];for(const[K,De]of Object.entries(B))Array.isArray(De)?De.forEach(W=>{q.push(encodeURIComponent(K)+"="+encodeURIComponent(W))}):q.push(encodeURIComponent(K)+"="+encodeURIComponent(De));return q.length?"&"+q.join("&"):""}function zi(B){const q={};return B.replace(/^\?/,"").split("&").forEach(De=>{if(De){const[W,X]=De.split("=");q[decodeURIComponent(W)]=decodeURIComponent(X)}}),q}function Ms(B){const q=B.indexOf("?");if(!q)return"";const K=B.indexOf("#",q);return B.substring(q,K>0?K:void 0)}class Jr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let q=1;q<this.blockSize;++q)this.pad_[q]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(q,K){K||(K=0);const De=this.W_;if("string"==typeof q)for(let It=0;It<16;It++)De[It]=q.charCodeAt(K)<<24|q.charCodeAt(K+1)<<16|q.charCodeAt(K+2)<<8|q.charCodeAt(K+3),K+=4;else for(let It=0;It<16;It++)De[It]=q[K]<<24|q[K+1]<<16|q[K+2]<<8|q[K+3],K+=4;for(let It=16;It<80;It++){const qn=De[It-3]^De[It-8]^De[It-14]^De[It-16];De[It]=4294967295&(qn<<1|qn>>>31)}let Dt,pn,W=this.chain_[0],X=this.chain_[1],Re=this.chain_[2],Xe=this.chain_[3],ct=this.chain_[4];for(let It=0;It<80;It++){It<40?It<20?(Dt=Xe^X&(Re^Xe),pn=1518500249):(Dt=X^Re^Xe,pn=1859775393):It<60?(Dt=X&Re|Xe&(X|Re),pn=2400959708):(Dt=X^Re^Xe,pn=3395469782);const qn=(W<<5|W>>>27)+Dt+ct+pn+De[It]&4294967295;ct=Xe,Xe=Re,Re=4294967295&(X<<30|X>>>2),X=W,W=qn}this.chain_[0]=this.chain_[0]+W&4294967295,this.chain_[1]=this.chain_[1]+X&4294967295,this.chain_[2]=this.chain_[2]+Re&4294967295,this.chain_[3]=this.chain_[3]+Xe&4294967295,this.chain_[4]=this.chain_[4]+ct&4294967295}update(q,K){if(null==q)return;void 0===K&&(K=q.length);const De=K-this.blockSize;let W=0;const X=this.buf_;let Re=this.inbuf_;for(;W<K;){if(0===Re)for(;W<=De;)this.compress_(q,W),W+=this.blockSize;if("string"==typeof q){for(;W<K;)if(X[Re]=q.charCodeAt(W),++Re,++W,Re===this.blockSize){this.compress_(X),Re=0;break}}else for(;W<K;)if(X[Re]=q[W],++Re,++W,Re===this.blockSize){this.compress_(X),Re=0;break}}this.inbuf_=Re,this.total_+=K}digest(){const q=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let W=this.blockSize-1;W>=56;W--)this.buf_[W]=255&K,K/=256;this.compress_(this.buf_);let De=0;for(let W=0;W<5;W++)for(let X=24;X>=0;X-=8)q[De]=this.chain_[W]>>X&255,++De;return q}}function Ri(B,q){const K=new mt(B,q);return K.subscribe.bind(K)}class mt{constructor(q,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{q(this)}).catch(De=>{this.error(De)})}next(q){this.forEachObserver(K=>{K.next(q)})}error(q){this.forEachObserver(K=>{K.error(q)}),this.close(q)}complete(){this.forEachObserver(q=>{q.complete()}),this.close()}subscribe(q,K,De){let W;if(void 0===q&&void 0===K&&void 0===De)throw new Error("Missing Observer.");W=function Tn(B,q){if("object"!=typeof B||null===B)return!1;for(const K of q)if(K in B&&"function"==typeof B[K])return!0;return!1}(q,["next","error","complete"])?q:{next:q,error:K,complete:De},void 0===W.next&&(W.next=On),void 0===W.error&&(W.error=On),void 0===W.complete&&(W.complete=On);const X=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?W.error(this.finalError):W.complete()}catch(Re){}}),this.observers.push(W),X}unsubscribeOne(q){void 0===this.observers||void 0===this.observers[q]||(delete this.observers[q],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(q){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,q)}sendOne(q,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[q])try{K(this.observers[q])}catch(De){"undefined"!=typeof console&&console.error&&console.error(De)}})}close(q){this.finalized||(this.finalized=!0,void 0!==q&&(this.finalError=q),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function On(){}const Ns=function(B,q,K,De){let W;if(De<q?W="at least "+q:De>K&&(W=0===K?"none":"no more than "+K),W)throw new Error(B+" failed: Was called with "+De+(1===De?" argument.":" arguments.")+" Expects "+W+".")};function Xr(B,q){return`${B} failed: ${q} argument `}function Fn(B,q,K,De){if((!De||K)&&"function"!=typeof K)throw new Error(Xr(B,q)+"must be a valid function.")}function hi(B,q,K,De){if((!De||K)&&("object"!=typeof K||null===K))throw new Error(Xr(B,q)+"must be a valid context object.")}const oo=function(B){const q=[];let K=0;for(let De=0;De<B.length;De++){let W=B.charCodeAt(De);if(W>=55296&&W<=56319){const X=W-55296;De++,ee(De<B.length,"Surrogate pair missing trail surrogate."),W=65536+(X<<10)+(B.charCodeAt(De)-56320)}W<128?q[K++]=W:W<2048?(q[K++]=W>>6|192,q[K++]=63&W|128):W<65536?(q[K++]=W>>12|224,q[K++]=W>>6&63|128,q[K++]=63&W|128):(q[K++]=W>>18|240,q[K++]=W>>12&63|128,q[K++]=W>>6&63|128,q[K++]=63&W|128)}return q},$t=function(B){let q=0;for(let K=0;K<B.length;K++){const De=B.charCodeAt(K);De<128?q++:De<2048?q+=2:De>=55296&&De<=56319?(q+=4,K++):q+=3}return q};function Vt(B,q=1e3,K=2){const De=q*Math.pow(K,B),W=Math.round(.5*De*(Math.random()-.5)*2);return Math.min(144e5,De+W)}function Cr(B){return B&&B._delegate?B._delegate:B}},5368:(Je,we,O)=>{var m=O(5e3);let ee=null;function F(){return ee}const ce=new m.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function he(){return(0,m.LFG)(H)}()},providedIn:"platform"}),n})();const G=new m.OlP("Location Initialized");let H=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function We(){return new H((0,m.LFG)(ce))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function ke(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ue(n){return n&&"?"!==n[0]?"?"+n:n}let pe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:function(){return function be(n){const e=(0,m.LFG)(ce).location;return new Ye((0,m.LFG)(ae),e&&e.origin||"")}()},providedIn:"root"}),n})();const qe=new m.OlP("appBaseHref");let Ye=(()=>{class n extends pe{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+Ue(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+Ue(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae),m.LFG(qe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Te=(()=>{class n extends pe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+Ue(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ae),m.LFG(qe,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new m.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=ke(je(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Ue(r))}normalize(t){return n.stripTrailingSlash(function Be(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ue(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=Ue,n.joinWithSlash=xe,n.stripTrailingSlash=ke,n.\u0275fac=function(t){return new(t||n)(m.LFG(pe),m.LFG(ae))},n.\u0275prov=m.Yz7({token:n,factory:function(){return function Ie(){return new Ce((0,m.LFG)(pe),(0,m.LFG)(ae))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}let ps=(()=>{class n{constructor(t,r,i,a){this._iterableDiffers=t,this._keyValueDiffers=r,this._ngEl=i,this._renderer=a,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,m.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),t.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,m.AaK)(r.item)}`);this._toggleClass(r.item,!0)}),t.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!0)):Object.keys(t).forEach(r=>this._toggleClass(r,!!t[r])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(r=>this._toggleClass(r,!1)):Object.keys(t).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(t,r){(t=t.trim())&&t.split(/\s+/g).forEach(i=>{r?this._renderer.addClass(this._ngEl.nativeElement,i):this._renderer.removeClass(this._ngEl.nativeElement,i)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.ZZ4),m.Y36(m.aQg),m.Y36(m.SBq),m.Y36(m.Qsj))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),n})();class ks{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rr=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new ks(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),lo(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{lo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.s_b),m.Y36(m.Rgc),m.Y36(m.ZZ4))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function lo(n,e){n.context.$implicit=e.item}let _d=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function $o(n){return"server"===n}let Ul=(()=>{class n{}return n.\u0275prov=(0,m.Yz7)({token:n,providedIn:"root",factory:()=>new Go((0,m.LFG)(ce),window)}),n})();class Go{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function es(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Bl(this.window.history)||Bl(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Bl(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class fo extends class Va extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){ee||(ee=n)}(new fo)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ua(){return tn=tn||document.querySelector("base"),tn?tn.getAttribute("href"):null}();return null==t?null:function Vs(n){Vu=Vu||document.createElement("a"),Vu.setAttribute("href",n);const e=Vu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){tn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Oa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let Vu,tn=null;const hr=new m.OlP("TRANSITION_ID"),En=[{provide:m.ip1,useFactory:function jl(n,e,t){return()=>{t.get(m.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hr,ce,m.zs3],multi:!0}];class ts{static init(){(0,m.VLi)(new ts)}addToWindow(e){m.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},m.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),m.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),m.dqk.frameworkStabilizers||(m.dqk.frameworkStabilizers=[]),m.dqk.frameworkStabilizers.push(r=>{const i=m.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let fr=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const po=new m.OlP("EventManagerPlugins");let ms=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(po),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class Ba{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ni=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),ns=(()=>{class n extends Ni{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Wo),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Wo))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function Wo(n){F().remove(n)}const dt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},qo=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(qo,n),t.push(i))}return t}function kt(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let _n=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new zo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case m.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new $a(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case m.ifc.ShadowDom:return new Wl(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ms),m.LFG(ns),m.LFG(m.AFp))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();class zo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(dt[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=dt[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=dt[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(m.JOm.DashCase|m.JOm.Important)?e.style.setProperty(t,r,i&m.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&m.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,kt(r)):this.eventManager.addEventListener(e,t,kt(r))}}class $a extends zo{constructor(e,t,r,i){super(e),this.component=r;const a=Se(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function $l(n){return"_ngcontent-%COMP%".replace(qo,n)}(i+"-"+r.id),this.hostAttr=function Gl(n){return"_nghost-%COMP%".replace(qo,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Wl extends zo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Se(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Sg=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const ju=["alt","control","meta","shift"],Hu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},_s={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Wa=(()=>{class n extends Ba{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(ju.forEach(_=>{const E=r.indexOf(_);E>-1&&(r.splice(E,1),l+=_+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Us(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&Vn.hasOwnProperty(e)&&(e=Vn[e]))}return Hu[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ju.forEach(a=>{a!=i&&_s[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(ce))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const Gu=(0,m.eFA)(m._c5,"browser",[{provide:m.Lbi,useValue:"browser"},{provide:m.g9A,useValue:function Pi(){fo.makeCurrent(),ts.init()},multi:!0},{provide:ce,useFactory:function $u(){return(0,m.RDi)(document),document},deps:[]}]),qa=[{provide:m.zSh,useValue:"root"},{provide:m.qLn,useFactory:function ql(){return new m.qLn},deps:[]},{provide:po,useClass:Sg,multi:!0,deps:[ce,m.R0b,m.Lbi]},{provide:po,useClass:Wa,multi:!0,deps:[ce]},{provide:_n,useClass:_n,deps:[ms,ns,m.AFp]},{provide:m.FYo,useExisting:_n},{provide:Ni,useExisting:ns},{provide:ns,useClass:ns,deps:[ce]},{provide:m.dDg,useClass:m.dDg,deps:[m.R0b]},{provide:ms,useClass:ms,deps:[po,m.R0b]},{provide:class un{},useClass:fr,deps:[]}];let za=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:m.AFp,useValue:t.appId},{provide:hr,useExisting:m.AFp},En]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(n,12))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:qa,imports:[_d,m.hGG]}),n})();"undefined"!=typeof window&&window;var Zn=O(2011),yo=O(7579),An=O(7669),Jt=O(8996);function ft(...n){const e=(0,An.yG)(n);return(0,Jt.D)(n,e)}var xn=O(8306),Qa=O(6451),Ja=O(5363),Ur=O(8421),Yn=O(4482),xt=O(5403);function Cn(n,e){return(0,Yn.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,xt.x)(r,_=>{null==i||i.unsubscribe();let E=0;const D=a++;(0,Ur.Xf)(n(_,D)).subscribe(i=(0,xt.x)(r,S=>r.next(e?e(_,S,D,E++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var pt=O(4004),Td=O(6063);class Ku extends yo.x{constructor(e=1/0,t=1/0,r=Td.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)h=_;h&&r.splice(0,h+1)}}}var Yl=O(3099);function Sd(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=null!=n?n:1/0,(0,Yl.B)({connector:()=>new Ku(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const ss=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Br(n,e){return(0,Yn.e)((t,r)=>{let i=0;t.subscribe((0,xt.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var Bs=O(5698);function vs(n){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,xt.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function pr(n=xd){return(0,Yn.e)((e,t)=>{let r=!1;e.subscribe((0,xt.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function xd(){return new ss}var os=O(4671);function mi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):os.y,(0,Bs.q)(1),t?vs(e):pr(()=>new ss))}var vo=O(576);function Zu(n,e){return(0,vo.m)(e)?Cn(()=>n,e):Cn(()=>n)}var ws=O(9468),Ut=O(5813);O(5867);var _e=O(5861),ii=O(9681),Es=O(4859),k=O(2090),ki=O(1877);const Xl=new Map,Ng={activated:!1,tokenObservers:[]},nu={initialized:!1,enabled:!1};function or(n){return Xl.get(n)||Ng}function Yt(n,e){Xl.set(n,e)}function Xo(){return nu}class ea{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,_e.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function Eo(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Rn=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function iu(n){if(!or(n).activated)throw Rn.create("use-before-activation",{appName:n.name})}function ra(n,e){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,_e.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Rn.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Rn.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Rn.create("fetch-parse-error",{originalErrorMessage:S.message})}const _=h.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw Rn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const E=1e3*Number(_[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+E,issuedAtTimeMillis:D}})).apply(this,arguments)}function Ws(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const su="firebase-app-check-store";let Co=null;function us(){return Co||(Co=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Rn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(su,{keyPath:"compositeKey"})}}catch(t){e(Rn.create("storage-open",{originalErrorMessage:t.message}))}}),Co)}function el(){return(el=(0,_e.Z)(function*(n,e){const r=(yield us()).transaction(su,"readwrite"),a=r.objectStore(su).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var E;h(Rn.create("storage-set",{originalErrorMessage:null===(E=_.target.error)||void 0===E?void 0:E.message}))}})})).apply(this,arguments)}const V=new ki.Yd("@firebase/app-check");function Pe(n,e){return(0,k.hl)()?function oy(n,e){return function Io(n,e){return el.apply(this,arguments)}(function M(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{V.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function wt(){return Xo().enabled}function Bt(){return Et.apply(this,arguments)}function Et(){return(Et=(0,_e.Z)(function*(){const n=Xo();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ar={error:"UNKNOWN_ERROR"};function sa(n){return k.US.encodeString(JSON.stringify(n),!1)}function vi(n){return si.apply(this,arguments)}function si(){return(si=(0,_e.Z)(function*(n,e=!1){const t=n.app;iu(t);const r=or(t);let a,i=r.token;if(!i){const _=yield r.cachedTokenPromise;_&&oa(_)&&(i=_)}if(!e&&i&&oa(i))return{token:i.token};let h,l=!1;if(wt()){r.exchangeTokenPromise||(r.exchangeTokenPromise=ra(Ws(t,yield Bt()),n.heartbeatServiceProvider).then(E=>(r.exchangeTokenPromise=void 0,E)),l=!0);const _=yield r.exchangeTokenPromise;return yield Pe(t,_),Yt(t,Object.assign(Object.assign({},r),{token:_})),{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(_=>(r.exchangeTokenPromise=void 0,_)),l=!0),i=yield r.exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?V.warn(_.message):V.error(_),a=_}return i?(h={token:i.token},Yt(t,Object.assign(Object.assign({},r),{token:i})),yield Pe(t,i)):h=kg(a),l&&rc(t,h),h})).apply(this,arguments)}function $r(n,e){const t=or(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Yt(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function nc(n){const{app:e}=n,t=or(e);let r=t.tokenRefresher;r||(r=function yf(n){const{app:e}=n;return new ea((0,_e.Z)(function*(){let r;if(r=or(e).token?yield vi(n,!0):yield vi(n),r.error)throw r.error}),()=>!0,()=>{const t=or(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),Yt(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function rc(n,e){const t=or(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function oa(n){return n.expireTimeMillis-Date.now()>0}function kg(n){return{token:sa(ar),error:n}}class Og{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=or(this.app);for(const t of e)$r(this.app,t.next);return Promise.resolve()}}const jg="app-check-internal";!function aa(){(0,ii._registerComponent)(new Es.wA("app-check",n=>function vf(n,e){return new Og(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(jg).initialize()})),(0,ii._registerComponent)(new Es.wA(jg,n=>function tl(n){return{getToken:e=>vi(n,e),addTokenListener:e=>function Oi(n,e,t,r){const{app:i}=n,a=or(i),l={next:t,error:r,type:e};if(Yt(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&oa(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),nc(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>nc(n))}(n,"INTERNAL",e),removeTokenListener:e=>$r(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ii.registerVersion)("@firebase/app-check","0.5.8")}();class sl{constructor(){return(0,Ut.vb)("app-check")}}"undefined"!=typeof window&&window;var ac=O(127);const Ld=new m.OlP("angularfire2.auth.use-emulator"),Wg=new m.OlP("angularfire2.auth.settings"),Vd=new m.OlP("angularfire2.auth.tenant-id"),qg=new m.OlP("angularfire2.auth.langugage-code"),uc=new m.OlP("angularfire2.auth.use-device-language"),au=new m.OlP("angularfire.auth.persistence"),lc=(n,e,t,r,i,a,l,h)=>(0,Zn.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[E,D]of Object.entries(l))_.settings[E]=D;return h&&_.setPersistence(h),_},[t,r,i,a,l,h]);let Ud=(()=>{class n{constructor(t,r,i,a,l,h,_,E,D,S,P,U){const z=new yo.x,ye=ft(void 0).pipe((0,Ja.Q)(l.outsideAngular),Cn(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,8775)))),(0,pt.U)(()=>(0,Zn.on)(t,a,r)),(0,pt.U)(Ne=>lc(Ne,a,h,E,D,S,_,P)),Sd({bufferSize:1,refCount:!1}));if($o(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ft(null);else{ye.pipe(mi()).subscribe();const _t=ye.pipe(Cn(it=>it.getRedirectResult().then(Pt=>Pt,()=>null)),Ut.iC,Sd({bufferSize:1,refCount:!1})),ht=ye.pipe(Cn(it=>new xn.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>it.onAuthStateChanged(Zt=>Pt.next(Zt),Zt=>Pt.error(Zt),()=>Pt.complete()))})))),ot=ye.pipe(Cn(it=>new xn.y(Pt=>({unsubscribe:a.runOutsideAngular(()=>it.onIdTokenChanged(Zt=>Pt.next(Zt),Zt=>Pt.error(Zt),()=>Pt.complete()))}))));this.authState=_t.pipe(Zu(ht),(0,ws.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular)),this.user=_t.pipe(Zu(ot),(0,ws.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular)),this.idToken=this.user.pipe(Cn(it=>it?(0,Jt.D)(it.getIdToken()):ft(null))),this.idTokenResult=this.user.pipe(Cn(it=>it?(0,Jt.D)(it.getIdTokenResult()):ft(null))),this.credential=(0,Qa.T)(_t,z,this.authState.pipe(Br(it=>!it))).pipe((0,pt.U)(it=>(null==it?void 0:it.user)?it:null),(0,ws.R)(l.outsideAngular),(0,Ja.Q)(l.insideAngular))}return(0,Zn.pX)(this,ye,a,{spy:{apply:(Ne,_t,ht)=>{(Ne.startsWith("signIn")||Ne.startsWith("createUser"))&&ht.then(ot=>z.next(ot))}}})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zn.Dh),m.LFG(Zn.xv,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(Ld,8),m.LFG(Wg,8),m.LFG(Vd,8),m.LFG(qg,8),m.LFG(uc,8),m.LFG(au,8),m.LFG(sl,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),jE=(()=>{class n{constructor(){ac.Z.registerVersion("angularfire",Ut.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[Ud]}),n})();var Bd=O(4986),jd=O(3942);const Hd="firebasestorage.googleapis.com",zg="storageBucket";class bn extends k.ZR{constructor(e,t){super(cc(e),`Firebase Storage: ${t} (${cc(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,bn.prototype)}_codeEquals(e){return cc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function cc(n){return"storage/"+n}function bf(){return new bn("unknown","An unknown error occurred, please check the error payload for server response.")}function Zg(){return new bn("canceled","User canceled the upload/download.")}function Iy(){return new bn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Qn(n){return new bn("invalid-argument",n)}function $d(){return new bn("app-deleted","The Firebase app was deleted.")}function Sf(n){return new bn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function uu(n,e){return new bn("invalid-format","String does not match format '"+n+"': "+e)}function Un(n){throw new bn("internal-error","Internal error: "+n)}class Bn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Bn.makeFromUrl(e,t)}catch(i){return new Bn(e,"")}if(""===r.path)return r;throw function Cy(n){return new bn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function E(it){it.path_=decodeURIComponent(it.path)}const S=t.replace(/[.]/g,"\\."),ot=[{regex:h,indices:{bucket:1,path:3},postModify:function a(it){"/"===it.path.charAt(it.path.length-1)&&(it.path_=it.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:E},{regex:new RegExp(`^https?://${t===Hd?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:E}];for(let it=0;it<ot.length;it++){const Pt=ot[it],Zt=Pt.regex.exec(e);if(Zt){let Mu=Zt[Pt.indices.path];Mu||(Mu=""),r=new Bn(Zt[Pt.indices.bucket],Mu),Pt.postModify(r);break}}if(null==r)throw function Ey(n){return new bn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class Gd{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function fc(n){return"string"==typeof n||n instanceof String}function xf(n){return pc()&&n instanceof Blob}function pc(){return"undefined"!=typeof Blob}function gc(n,e,t,r){if(r<e)throw Qn(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Qn(`Invalid value for '${n}'. Expected ${t} or less.`)}function Is(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Rf(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var la=(()=>{return(n=la||(la={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",la;var n})();class zs{constructor(e,t,r,i,a,l,h,_,E,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=_,this.timeout_=E,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(h,h.getResponse());!function Yg(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==h){const _=bf();_.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,_):_)}else l(i.canceled?this.appDelete_?$d():Zg():function wy(){return new bn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new mc(!1,null,!0)):this.backoffId_=function Dy(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function _(){return 2===h}let E=!1;function D(...Ne){E||(E=!0,e.apply(null,Ne))}function S(Ne){i=setTimeout(()=>{i=null,n(U,_())},Ne)}function P(){a&&clearTimeout(a)}function U(Ne,..._t){if(E)return void P();if(Ne)return P(),void D.call(null,Ne,..._t);if(_()||l)return P(),void D.call(null,Ne,..._t);let ot;r<64&&(r*=2),1===h?(h=2,ot=0):ot=1e3*(r+Math.random()),S(ot)}let z=!1;function ye(Ne){z||(z=!0,P(),!E&&(null!==i?(Ne||(h=2),clearTimeout(i),S(0)):Ne||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ye(!0)},t),ye}((r,i)=>{if(i)return void r(!1,new mc(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===la.NO_ERROR,_=a.getStatus();if(!h||this.isRetryStatusCode_(_)){const D=a.getErrorCode()===la.ABORT;return void r(!1,new mc(!1,null,D))}const E=-1!==this.successCodes_.indexOf(_);r(!0,new mc(E,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Af(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class mc{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Nf(...n){const e=function Mf(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(pc())return new Blob(n);throw new bn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Sr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qd{constructor(e,t){this.data=e,this.contentType=t||null}}function zd(n,e){switch(n){case Sr.RAW:return new qd(Xg(e));case Sr.BASE64:case Sr.BASE64URL:return new qd(em(n,e));case Sr.DATA_URL:return new qd(function ll(n){const e=new tm(n);return e.base64?em(Sr.BASE64,e.rest):function Pf(n){let e;try{e=decodeURIComponent(n)}catch(t){throw uu(Sr.DATA_URL,"Malformed data URL.")}return Xg(e)}(e.rest)}(e),function Ks(n){return new tm(n).contentType}(e))}throw bf()}function Xg(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function em(n,e){switch(n){case Sr.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw uu(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Sr.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw uu(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function To(n){return atob(n)}(e)}catch(i){throw uu(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class tm{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw uu(Sr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function y(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class f{constructor(e,t){let r=0,i="";xf(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(xf(this.data_)){const i=function Jg(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new f(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new f(r,!0)}}static getBlob(...e){if(pc()){const t=e.map(r=>r instanceof f?r.data_:r);return new f(Nf.apply(null,t))}{const t=e.map(l=>fc(l)?zd(Sr.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new f(i,!0)}}uploadData(){return this.data_}}function g(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function ul(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function N(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Z(n,e){return e}class oe{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Z}}let Le=null;function ut(){if(Le)return Le;const n=[];n.push(new oe("bucket")),n.push(new oe("generation")),n.push(new oe("metageneration")),n.push(new oe("name","fullPath",!0));const t=new oe("name");t.xform=function e(a,l){return function Ke(n){return!fc(n)||n.length<2?n:N(n)}(l)},n.push(t);const i=new oe("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new oe("timeCreated")),n.push(new oe("updated")),n.push(new oe("md5Hash",null,!0)),n.push(new oe("cacheControl",null,!0)),n.push(new oe("contentDisposition",null,!0)),n.push(new oe("contentEncoding",null,!0)),n.push(new oe("contentLanguage",null,!0)),n.push(new oe("contentType",null,!0)),n.push(new oe("metadata","customMetadata",!0)),Le=n,Le}function Ei(n,e,t){const r=g(e);return null===r?null:function Gn(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function lt(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Bn(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function kf(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const So="prefixes";class Li{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function bs(n){if(!n)throw bf()}function cl(n,e){return function t(r,i){const a=Ei(n,i,e);return bs(null!==a),a}}function ca(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Df(){return new bn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function vy(){return new bn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function yy(n){return new bn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Tf(n){return new bn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function vc(n){const e=ca(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function Mn(n){return new bn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function xy(n,e,t){const i=Is(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Li(i,"GET",cl(n,t),l);return h.errorHandler=vc(e),h}function Ry(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=Is(e.bucketOnlyServerUrl(),n.host,n._protocol),E=n.maxOperationRetryTime,D=new Li(h,"GET",function nm(n,e){return function t(r,i){const a=function Ff(n,e,t){const r=g(t);return null===r?null:function Of(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[So])for(const i of t[So]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Bn(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Bn(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return bs(null!==a),a}}(n,e.bucket),E);return D.urlParams=a,D.errorHandler=ca(e),D}function Py(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function HE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Lf{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function rm(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){bs(!1)}return bs(!!t&&-1!==(e||["active"]).indexOf(t)),t}const WE={STATE_CHANGED:"state_changed"},Ci={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Vf(n){switch(n){case"running":case"pausing":case"canceling":return Ci.RUNNING;case"paused":return Ci.PAUSED;case"success":return Ci.SUCCESS;case"canceled":return Ci.CANCELED;default:return Ci.ERROR}}class qE{constructor(e,t,r){if(function Fi(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function lu(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class ky extends class zE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=la.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=la.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=la.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Un("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Un("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Un("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Un("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Un("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Zs(){return new ky}class ZE{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=ut(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function kT(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Py(e,r,i),h={name:l.fullPath},_=Is(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=kf(l,t),z=new Li(_,"POST",function U(ye){let Ne;rm(ye);try{Ne=ye.getResponseHeader("X-Goog-Upload-URL")}catch(_t){bs(!1)}return bs(fc(Ne)),Ne},n.maxUploadRetryTime);return z.urlParams=h,z.headers=D,z.body=S,z.errorHandler=ca(e),z}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function im(n,e,t,r){const _=new Li(t,"POST",function a(E){const D=rm(E,["active","final"]);let S=null;try{S=E.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){bs(!1)}S||bs(!1);const P=Number(S);return bs(!isNaN(P)),new Lf(P,r.size(),"final"===D)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=ca(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Zs,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Lf(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function GE(n,e,t,r,i,a,l,h){const _=new Lf(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function by(){return new bn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const E=_.total-_.current;let D=E;i>0&&(D=Math.min(D,i));const S=_.current,z={"X-Goog-Upload-Command":D===E?"upload, finalize":"upload","X-Goog-Upload-Offset":`${_.current}`},ye=r.slice(S,S+D);if(null===ye)throw Iy();const ot=new Li(t,"POST",function Ne(it,Pt){const Zt=rm(it,["active","final"]),Qr=_.current+D,Mu=r.size();let JR;return JR="final"===Zt?cl(e,a)(it,Pt):null,new Lf(Qr,Mu,"final"===Zt,JR)},e.maxUploadRetryTime);return ot.headers=z,ot.body=ye.uploadData(),ot.progressCallback=h||null,ot.errorHandler=ca(n),ot}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const h=this._ref.storage._makeRequest(l,Zs,i,a);this._request=h,h.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=xy(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function dl(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function h(){let ot="";for(let it=0;it<2;it++)ot+=Math.random().toString().slice(2);return ot}();l["Content-Type"]="multipart/related; boundary="+_;const E=Py(e,r,i),D=kf(E,t),U=f.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+_+"\r\nContent-Type: "+E.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw Iy();const z={name:E.fullPath},ye=Is(a,n.host,n._protocol),_t=n.maxUploadRetryTime,ht=new Li(ye,"POST",cl(n,t),_t);return ht.urlParams=z,ht.headers=l,ht.body=U.uploadData(),ht.errorHandler=ca(e),ht}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Zs,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Zg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Vf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new qE(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Vf(this._state)){case Ci.SUCCESS:lu(this._resolve.bind(null,this.snapshot))();break;case Ci.CANCELED:case Ci.ERROR:lu(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Vf(this._state)){case Ci.RUNNING:case Ci.PAUSED:e.next&&lu(e.next.bind(e,this.snapshot))();break;case Ci.SUCCESS:e.complete&&lu(e.complete.bind(e))();break;default:e.error&&lu(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class wc{constructor(e,t){this._service=e,this._location=t instanceof Bn?t:Bn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new wc(e,t)}get root(){const e=new Bn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return N(this._location.path)}get storage(){return this._service}get parent(){const e=function w(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Bn(this._location.bucket,e);return new wc(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Sf(e)}}function Vy(n,e,t){return Uy.apply(this,arguments)}function Uy(){return(Uy=(0,_e.Z)(function*(n,e,t){const i=yield JE(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Vy(n,e,i.nextPageToken))})).apply(this,arguments)}function JE(n,e){null!=e&&"number"==typeof e.maxResults&&gc("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=Ry(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Zs)}function XE(n){n._throwIfRoot("getDownloadURL");const e=function Ny(n,e,t){const i=Is(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new Li(i,"GET",function Ay(n,e){return function t(r,i){const a=Ei(n,i,e);return bs(null!==a),function _c(n,e,t,r){const i=g(e);if(null===i||!fc(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(E=>{const S=n.fullPath;return Is("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+Rf({alt:"media",token:E})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=vc(e),h}(n.storage,n._location,ut());return n.storage.makeRequestWithTokens(e,Zs).then(t=>{if(null===t)throw function hc(){return new bn("no-download-url","The given file does not have any download URLs.")}();return t})}function eC(n,e){const t=function A(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Bn(n._location.bucket,t);return new wc(n.storage,r)}function By(n,e){if(n instanceof At){const t=n;if(null==t._bucket)throw function dc(){return new bn("no-default-bucket","No default bucket found. Did you set the '"+zg+"' property when initializing the app?")}();const r=new wc(t,t._bucket);return null!=e?By(r,e):r}return void 0!==e?eC(n,e):n}function jT(n,e){if(e&&function UT(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof At)return function BT(n,e){return new wc(n,e)}(n,e);throw Qn("To use ref(service, url), the first argument must be a Storage instance.")}return By(n,e)}function tC(n,e){const t=null==e?void 0:e[zg];return null==t?null:Bn.makeFromBucketSpec(t,n)}class At{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Hd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Bn.makeFromBucketSpec(i,this._host):tC(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Bn.makeFromBucketSpec(this._url,e):tC(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){gc("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){gc("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,_e.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,_e.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new wc(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new Gd($d());{const a=function wi(n,e,t,r,i,a){const l=Rf(n.urlParams),h=n.url+l,_=Object.assign({},n.headers);return function Sy(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function Ty(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function Wd(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(_,a),function Qg(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new zs(h,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,_e.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const jy="@firebase/storage";function Ky(n,e){return jT(n=(0,k.m9)(n),e)}function Yy(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new At(t,r,i,e,ii.SDK_VERSION)}!function nM(){(0,ii._registerComponent)(new Es.wA("storage",Yy,"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(jy,"0.9.6",""),(0,ii.registerVersion)(jy,"0.9.6","esm2017")}();class om{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class sC{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new om(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new om(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new om(l,this,this._ref)):{next:t.next?l=>t.next(new om(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class oC{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new du(e,this._service))}get items(){return this._delegate.items.map(e=>new du(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class du{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function tM(n,e){return eC(n,e)}(this._delegate,e);return new du(t,this.storage)}get root(){return new du(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new du(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new sC(function GT(n,e,t){return function XR(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new ZE(n,new f(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Sr.RAW,r){this._throwIfRoot("putString");const i=zd(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new sC(new ZE(this._delegate,new f(i.data,!0),a),this)}listAll(){return function nC(n){return function FT(n){const e={prefixes:[],items:[]};return Vy(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new oC(e,this.storage))}list(e){return function qy(n,e){return JE(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new oC(t,this.storage))}getMetadata(){return function Wy(n){return function Ao(n){n._throwIfRoot("getMetadata");const e=xy(n.storage,n._location,ut());return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function cu(n,e){return function LT(n,e){n._throwIfRoot("updateMetadata");const t=function NT(n,e,t,r){const a=Is(e.fullServerUrl(),n.host,n._protocol),h=kf(t,r),E=n.maxOperationRetryTime,D=new Li(a,"PATCH",cl(n,r),E);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=vc(e),D}(n.storage,n._location,e,ut());return n.storage.makeRequestWithTokens(t,Zs)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function zy(n){return XE(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function eM(n){return function VT(n){n._throwIfRoot("deleteObject");const e=function PT(n,e){const r=Is(e.fullServerUrl(),n.host,n._protocol),h=new Li(r,"DELETE",function l(_,E){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=vc(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Zs)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Sf(e)}}class Qy{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(WT(e))throw Qn("ref() expected a child path but got a URL, use refFromURL instead.");return new du(Ky(this._delegate,e),this)}refFromURL(e){if(!WT(e))throw Qn("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Bn.makeFromUrl(e,this._delegate.host)}catch(t){throw Qn("refFromUrl() expected a valid full URL but got an invalid one.")}return new du(Ky(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function sm(n,e,t,r={}){!function HT(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function WT(n){return/^[A-Za-z]+:\/\//.test(n)}function uC(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new Qy(t,r)}function KT(n){const e=function Jy(n){return new xn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function _y(n,e=Bd.z){return(0,Yn.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const E=a;a=null,r.next(E)}};function _(){const E=l+n,D=e.now();if(D<E)return i=this.schedule(void 0,E-D),void r.add(i);h()}t.subscribe((0,xt.x)(r,E=>{a=E,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,pt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Xy(n){return{getDownloadURL:()=>ft(void 0).pipe(Ut.fc,Cn(()=>n.getDownloadURL()),Ut.iC),getMetadata:()=>ft(void 0).pipe(Ut.fc,Cn(()=>n.getMetadata()),Ut.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>Xy(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>KT(n.put(e,t)),putString:(e,t,r)=>KT(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function zT(n){const e={TaskState:Ci,TaskEvent:WE,StringFormat:Sr,Storage:Qy,Reference:du};n.INTERNAL.registerComponent(new Es.wA("storage-compat",uC,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.14")}(jd.Z);const iM=new m.OlP("angularfire2.storageBucket"),sM=new m.OlP("angularfire2.storage.maxUploadRetryTime"),oM=new m.OlP("angularfire2.storage.maxOperationRetryTime"),aM=new m.OlP("angularfire2.storage.use-emulator");let uM=(()=>{class n{constructor(t,r,i,a,l,h,_,E,D,S){const P=(0,Zn.on)(t,l,r);this.storage=(0,Zn.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),z=D;return z&&U.useEmulator(...z),_&&U.setMaxUploadRetryTime(_),E&&U.setMaxOperationRetryTime(E),U},[_,E])}ref(t){return Xy(this.storage.ref(t))}refFromURL(t){return Xy(this.storage.refFromURL(t))}upload(t,r,i){return Xy(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zn.Dh),m.LFG(Zn.xv,8),m.LFG(iM,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(sM,8),m.LFG(oM,8),m.LFG(aM,8),m.LFG(sl,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),lM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),cM=(()=>{class n{constructor(){ac.Z.registerVersion("angularfire",Ut.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[uM],imports:[lM]}),n})();var xo=O(8189);function tv(...n){return function ev(){return(0,xo.J)(1)}()((0,Jt.D)(n,(0,An.yG)(n)))}function jf(...n){const e=(0,An.yG)(n);return(0,Yn.e)((t,r)=>{(e?tv(n,t,e):tv(n,t)).subscribe(r)})}function Hf(){return(0,Yn.e)((n,e)=>{let t,r=!1;n.subscribe((0,xt.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function lC(n,e,t,r,i){return(a,l)=>{let h=t,_=e,E=0;a.subscribe((0,xt.x)(l,D=>{const S=E++;_=h?n(_,D,S):(h=!0,D),r&&l.next(_)},i&&(()=>{h&&l.next(_),l.complete()})))}}function hu(n,e){return(0,Yn.e)(lC(n,e,arguments.length>=2,!0))}function cC(n,e=os.y){return n=null!=n?n:hl,(0,Yn.e)((t,r)=>{let i,a=!0;t.subscribe((0,xt.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function hl(n,e){return n===e}O(8775);var tt,YT="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ro={},am=am||{},Rt=YT||self;function um(){}function Ec(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function ha(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var fl="closure_uid_"+(1e9*Math.random()>>>0),$f=0;function Kd(n,e,t){return n.call.apply(n.bind,arguments)}function QT(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Gr(n,e,t){return(Gr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Kd:QT).apply(null,arguments)}function Gf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Ar(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function fa(){this.s=this.s,this.o=this.o}var lm={};fa.prototype.s=!1,fa.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function nv(n){return Object.prototype.hasOwnProperty.call(n,fl)&&n[fl]||(n[fl]=++$f)}(this);delete lm[n]}},fa.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const hC=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},rv=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function iv(n){return Array.prototype.concat.apply([],arguments)}function cm(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function dm(n){return/^[\s\xa0]*$/.test(n)}var yn,sv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Vi(n,e){return-1!=n.indexOf(e)}function ov(n,e){return n<e?-1:n>e?1:0}e:{var fC=Rt.navigator;if(fC){var pC=fC.userAgent;if(pC){yn=pC;break e}}yn=""}function gC(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function JT(n){const e={};for(const t in n)e[t]=n[t];return e}var av="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function XT(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<av.length;a++)t=av[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function uv(n){return uv[" "](n),n}uv[" "]=um;var hm,n,mC=Vi(yn,"Opera"),Zd=Vi(yn,"Trident")||Vi(yn,"MSIE"),_C=Vi(yn,"Edge"),cv=_C||Zd,dv=Vi(yn,"Gecko")&&!(Vi(yn.toLowerCase(),"webkit")&&!Vi(yn,"Edge"))&&!(Vi(yn,"Trident")||Vi(yn,"MSIE"))&&!Vi(yn,"Edge"),eS=Vi(yn.toLowerCase(),"webkit")&&!Vi(yn,"Edge");function hv(){var n=Rt.document;return n?n.documentMode:void 0}e:{var fv="",fm=(n=yn,dv?/rv:([^\);]+)(\)|;)/.exec(n):_C?/Edge\/([\d\.]+)/.exec(n):Zd?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):eS?/WebKit\/(\S+)/.exec(n):mC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(fm&&(fv=fm?fm[1]:""),Zd){var pm=hv();if(null!=pm&&pm>parseFloat(fv)){hm=String(pm);break e}}hm=fv}var tS={};var nS=Rt.document&&Zd&&(hv()||parseInt(hm,10))||void 0,hM=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",um,e),Rt.removeEventListener("test",um,e)}catch(t){}return n}();function oi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function qf(n,e){if(oi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(dv){e:{try{uv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:rS[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&qf.Z.h.call(this)}}oi.prototype.h=function(){this.defaultPrevented=!0},Ar(qf,oi);var rS={2:"touch",3:"pen",4:"mouse"};qf.prototype.h=function(){qf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var zf="closure_listenable_"+(1e6*Math.random()|0),pv=0;function iS(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++pv,this.ca=this.fa=!1}function gm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function Cc(n){this.src=n,this.g={},this.h=0}function Kf(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=hC(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(gm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function gv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}Cc.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=gv(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new iS(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var Zf="closure_lm_"+(1e6*Math.random()|0),Yf={};function mv(n,e,t,r,i){if(r&&r.once)return mm(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)mv(n,e[a],t,r,i);return null}return t=vm(t),n&&n[zf]?n.N(e,t,ha(r)?!!r.capture:!!r,i):vC(n,e,t,!1,r,i)}function vC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=ha(i)?!!i.capture:!!i,h=_m(n);if(h||(n[Zf]=h=new Cc(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function sS(){var e=wC;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)hM||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(yv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function mm(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)mm(n,e[a],t,r,i);return null}return t=vm(t),n&&n[zf]?n.O(e,t,ha(r)?!!r.capture:!!r,i):vC(n,e,t,!0,r,i)}function oS(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)oS(n,e[a],t,r,i);else r=ha(r)?!!r.capture:!!r,t=vm(t),n&&n[zf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=gv(a=n.g[e],t,r,i))&&(gm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=_m(n))&&(e=n.g[e.toString()],n=-1,e&&(n=gv(e,t,r,i)),(t=-1<n?e[n]:null)&&_v(t))}function _v(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[zf])Kf(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(yv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=_m(e))?(Kf(t,n),0==t.h&&(t.src=null,e[Zf]=null)):gm(n)}}}function yv(n){return n in Yf?Yf[n]:Yf[n]="on"+n}function wC(n,e){if(n.ca)n=!0;else{e=new qf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&_v(n),n=t.call(r,e)}return n}function _m(n){return(n=n[Zf])instanceof Cc?n:null}var ym="__closure_events_fn_"+(1e9*Math.random()>>>0);function vm(n){return"function"==typeof n?n:(n[ym]||(n[ym]=function(e){return n.handleEvent(e)}),n[ym])}function Dn(){fa.call(this),this.i=new Cc(this),this.P=this,this.I=null}function gr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new oi(e,n);else if(e instanceof oi)e.target=e.target||n;else{var i=e;XT(e=new oi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=wm(l,r,!0,e)&&i}if(i=wm(l=e.g=n,r,!0,e)&&i,i=wm(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=wm(l=e.g=t[a],r,!1,e)&&i}function wm(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,_=l.ia||l.src;l.fa&&Kf(n.i,l),i=!1!==h.call(_,r)&&i}}return i&&!r.defaultPrevented}Ar(Dn,fa),Dn.prototype[zf]=!0,Dn.prototype.removeEventListener=function(n,e,t,r){oS(this,n,e,t,r)},Dn.prototype.M=function(){if(Dn.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)gm(t[r]);delete n.g[e],n.h--}}this.I=null},Dn.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Dn.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var vv=Rt.JSON.stringify;function fM(){var n=bv;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Jf,Ev=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Cv,n=>n.reset());class Cv{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qf(n){Rt.setTimeout(()=>{throw n},0)}function Iv(n,e){Jf||function EC(){var n=Rt.Promise.resolve(void 0);Jf=function(){n.then(aS)}}(),Em||(Jf(),Em=!0),bv.add(n,e)}var Em=!1,bv=new class wv{constructor(){this.h=this.g=null}add(e,t){const r=Ev.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function aS(){for(var n;n=fM();){try{n.h.call(n.g)}catch(t){Qf(t)}var e=Ev;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Em=!1}function Yd(n,e){Dn.call(this),this.h=n||1,this.g=e||Rt,this.j=Gr(this.kb,this),this.l=Date.now()}function Dv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Tv(n,e,t){if("function"==typeof n)t&&(n=Gr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Gr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function Sv(n){n.g=Tv(()=>{n.g=null,n.i&&(n.i=!1,Sv(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ar(Yd,Dn),(tt=Yd.prototype).da=!1,tt.S=null,tt.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),gr(this,"tick"),this.da&&(Dv(this),this.start()))}},tt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},tt.M=function(){Yd.Z.M.call(this),Dv(this),delete this.g};class Qd extends fa{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Sv(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Jd(n){fa.call(this),this.h=n,this.g={}}Ar(Jd,fa);var CC=[];function IC(n,e,t,r){Array.isArray(t)||(t&&(CC[0]=t.toString()),t=CC);for(var i=0;i<t.length;i++){var a=mv(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Ic(n){gC(n.g,function(e,t){this.g.hasOwnProperty(t)&&_v(e)},n),n.g={}}function Cm(){this.g=!0}function Xd(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Av(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return vv(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}Jd.prototype.M=function(){Jd.Z.M.call(this),Ic(this)},Jd.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Cm.prototype.Aa=function(){this.g=!1},Cm.prototype.info=function(){};var pl={},xv=null;function Xf(){return xv=xv||new Dn}function Rv(n){oi.call(this,pl.Ma,n)}function ep(n){const e=Xf();gr(e,new Rv(e,n))}function bC(n,e){oi.call(this,pl.STAT_EVENT,n),this.stat=e}function Ui(n){const e=Xf();gr(e,new bC(e,n))}function DC(n,e){oi.call(this,pl.Na,n),this.size=e}function eh(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}pl.Ma="serverreachability",Ar(Rv,oi),pl.STAT_EVENT="statevent",Ar(bC,oi),pl.Na="timingevent",Ar(DC,oi);var Mv={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Nv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Pv(){}function cS(){}Pv.prototype.h=null;var bm,Im={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function tp(){oi.call(this,"d")}function kv(){oi.call(this,"c")}function np(){}function Dm(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new Jd(this),this.P=pM,this.W=new Yd(n=cv?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ys}function Ys(){this.i=null,this.g="",this.h=!1}Ar(tp,oi),Ar(kv,oi),Ar(np,Pv),np.prototype.g=function(){return new XMLHttpRequest},np.prototype.i=function(){return{}},bm=new np;var pM=45e3,SC={},rp={};function Tm(n,e,t){n.K=1,n.v=Sc(fu(e)),n.s=t,n.U=!0,Ov(n,null)}function Ov(n,e){n.F=Date.now(),bc(n),n.A=fu(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),jv(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Ys,n.g=_S(n.l,t?e:null,!n.s),0<n.O&&(n.L=new Qd(Gr(n.Ia,n,n.g),n.O)),IC(n.V,n.g,"readystatechange",n.gb),e=n.H?JT(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),ep(1),function uS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),_=0;_<h.length;_++){var E=h[_].split("=");if(1<E.length){var D=E[0];E=E[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+E+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function AC(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function dS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=xC(n,t),i==rp){4==e&&(n.o=4,Ui(14),r=!1),Xd(n.j,n.m,null,"[Incomplete Response]");break}if(i==SC){n.o=4,Ui(15),Xd(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Xd(n.j,n.m,i,null),Fv(n,i)}AC(n)&&i!=rp&&i!=SC&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Ui(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),Nc(e),e.L=!0,Ui(11))):(Xd(n.j,n.m,t,"[Invalid Chunked Response]"),Dc(n),ip(n))}function xC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?rp:(t=Number(e.substring(t,r)),isNaN(t)?SC:(r+=1)+t>e.length?rp:(e=e.substr(r,t),n.C=r+t,e))}function bc(n){n.Y=Date.now()+n.P,RC(n,n.P)}function RC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=eh(Gr(n.eb,n),e)}function th(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function ip(n){0==n.l.G||n.I||Om(n.l,n)}function Dc(n){th(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Dv(n.W),Ic(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Fv(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Gv(t.i,n)))if(t.I=n.N,!n.J&&Gv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(E){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=eh(Gr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;ch(t),Mm(t)}qC(t),Ui(18)}if(1>=$v(t.i)&&t.ka){try{t.ka()}catch(E){}t.ka=void 0}}else va(t,11)}else if((n.J||t.g==n)&&ch(t),!dm(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let E=i[e];if(t.U=E[0],E=E[1],2==t.G)if("c"==E[0]){t.J=E[1],t.la=E[2];const D=E[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=E[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=E[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const z=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(z){var a=r.i;!a.g&&(Vi(z,"spdy")||Vi(z,"quic")||Vi(z,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Sm(a,a.h),a.h=null))}if(r.D){const ye=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ye&&(r.sa=ye,ln(r.F,r.D,ye))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Fm(r,r.H?r.la:null,r.W),l.J){Wv(r.i,l);var h=l,_=r.K;_&&h.setTimeout(_),h.B&&(th(h),bc(h)),r.g=l}else WC(r);0<t.l.length&&lp(t)}else"stop"!=E[0]&&"close"!=E[0]||va(t,7);else 3==t.G&&("stop"==E[0]||"close"==E[0]?"stop"==E[0]?va(t,7):Jv(t):"noop"!=E[0]&&t.j&&t.j.wa(E),t.A=0)}ep(4)}catch(E){}}function Lv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Ec(n)||"string"==typeof n)rv(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(Ec(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function hS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(Ec(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function nh(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof nh)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function rh(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Qs(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Qs(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Qs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(tt=Dm.prototype).setTimeout=function(n){this.P=n},tt.gb=function(n){n=n.target;const e=this.L;e&&3==Xs(n)?e.l():this.Ia(n)},tt.Ia=function(n){try{if(n==this.g)e:{const D=Xs(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||cv||this.g&&(this.h.h||this.g.ga()||jC(this.g)))){this.I||4!=D||7==e||ep(8==e||0>=S?3:2),th(this);var t=this.g.ba();this.N=t;t:if(AC(this)){var r=jC(this.g);n="";var i=r.length,a=4==Xs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Dc(this),ip(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function lS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,_=this.g;if((h=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!dm(h)){var E=h;break t}}E=null}if(!(t=E)){this.i=!1,this.o=3,Ui(12),Dc(this),ip(this);break e}Xd(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Fv(this,t)}this.U?(dS(this,D,l),cv&&this.i&&3==D&&(IC(this.V,this.W,"tick",this.fb),this.W.start())):(Xd(this.j,this.m,l,null),Fv(this,l)),4==D&&Dc(this),this.i&&!this.I&&(4==D?Om(this.l,this):(this.i=!1,bc(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Ui(12)):(this.o=0,Ui(13)),Dc(this),ip(this)}}}catch(D){}},tt.fb=function(){if(this.g){var n=Xs(this.g),e=this.g.ga();this.C<e.length&&(th(this),dS(this,n,e),this.i&&4!=n&&bc(this))}},tt.cancel=function(){this.I=!0,Dc(this)},tt.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function ga(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(ep(3),Ui(17)),Dc(this),this.o=2,ip(this)):RC(this,this.Y-n)},(tt=nh.prototype).R=function(){rh(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},tt.T=function(){return rh(this),this.g.concat()},tt.get=function(n,e){return Qs(this.h,n)?this.h[n]:e},tt.set=function(n,e){Qs(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},tt.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var MC=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Tc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Tc){this.g=void 0!==e?e:n.g,ih(this,n.j),this.s=n.s,Ds(this,n.i),gl(this,n.m),this.l=n.l,e=n.h;var t=new ya;t.i=e.i,e.g&&(t.g=new nh(e.g),t.h=e.h),ai(this,t),this.o=n.o}else n&&(t=String(n).match(MC))?(this.g=!!e,ih(this,t[1]||"",!0),this.s=ma(t[2]||""),Ds(this,t[3]||"",!0),gl(this,t[4]),this.l=ma(t[5]||"",!0),ai(this,t[6]||"",!0),this.o=ma(t[7]||"")):(this.g=!!e,this.h=new ya(null,this.g))}function fu(n){return new Tc(n)}function ih(n,e,t){n.j=t?ma(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ds(n,e,t){n.i=t?ma(e,!0):e}function gl(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function ai(n,e,t){e instanceof ya?(n.h=e,function NC(n,e){e&&!n.j&&(pu(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Uv(this,r),jv(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=_a(e,uh)),n.h=new ya(e,n.g))}function ln(n,e,t){n.h.set(e,t)}function Sc(n){return ln(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function ma(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function _a(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,sh),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function sh(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Tc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(_a(e,Ac,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(_a(e,Ac,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(_a(t,"/"==t.charAt(0)?ah:oh,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",_a(t,lh)),n.join("")};var Ac=/[#\/\?@]/g,oh=/[#\?:]/g,ah=/[#\?]/g,uh=/[#\?@]/g,lh=/#/g;function ya(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function pu(n){n.g||(n.g=new nh,n.h=0,n.i&&function sp(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Uv(n,e){pu(n),e=xc(n,e),Qs(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Qs((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&rh(n)))}function Bv(n,e){return pu(n),e=xc(n,e),Qs(n.g.h,e)}function jv(n,e,t){Uv(n,e),0<t.length&&(n.i=null,n.g.set(xc(n,e),cm(t)),n.h+=t.length)}function xc(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Hv(n){this.l=n||kC,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(tt=ya.prototype).add=function(n,e){pu(this),this.i=null,n=xc(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},tt.forEach=function(n,e){pu(this),this.g.forEach(function(t,r){rv(t,function(i){n.call(e,i,r,this)},this)},this)},tt.T=function(){pu(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},tt.R=function(n){pu(this);var e=[];if("string"==typeof n)Bv(this,n)&&(e=iv(e,this.g.get(xc(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=iv(e,n[t])}return e},tt.set=function(n,e){return pu(this),this.i=null,Bv(this,n=xc(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},tt.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},tt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var kC=10;function OC(n){return!!n.h||!!n.g&&n.g.size>=n.j}function $v(n){return n.h?1:n.g?n.g.size:0}function Gv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Sm(n,e){n.g?n.g.add(e):n.h=e}function Wv(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function FC(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return cm(n.i)}function qv(){}function LC(){this.g=new qv}function fS(n,e,t){const r=t||"";try{Lv(n,function(i,a){let l=i;ha(i)&&(l=vv(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Am(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function op(n){this.l=n.$b||null,this.j=n.ib||!1}function zv(n,e){Dn.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Kv,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hv.prototype.cancel=function(){if(this.i=FC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},qv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Ar(op,Pv),op.prototype.g=function(){return new zv(this.l,this.j)},op.prototype.i=function(n){return function(){return n}}({}),Ar(zv,Dn);var Kv=0;function xm(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Rc(n){n.readyState=4,n.l=null,n.j=null,n.A=null,ap(n)}function ap(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(tt=zv.prototype).open=function(n,e){if(this.readyState!=Kv)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,ap(this)},tt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},tt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rc(this)),this.readyState=Kv},tt.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,ap(this)),this.g&&(this.readyState=3,ap(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xm(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},tt.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rc(this):ap(this),3==this.readyState&&xm(this)}},tt.Ua=function(n){this.g&&(this.response=this.responseText=n,Rc(this))},tt.Ta=function(n){this.g&&(this.response=n,Rc(this))},tt.ha=function(){this.g&&Rc(this)},tt.setRequestHeader=function(n,e){this.v.append(n,e)},tt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},tt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zv.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var gM=Rt.JSON.parse;function xr(n){Dn.call(this),this.headers=new nh,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=pS,this.K=this.L=!1}Ar(xr,Dn);var pS="",gS=/^https?$/i,UC=["POST","PUT"];function mS(n){return"content-type"==n.toLowerCase()}function Mc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,BC(n),Rm(n)}function BC(n){n.D||(n.D=!0,gr(n,"complete"),gr(n,"error"))}function Zv(n){if(n.h&&void 0!==am&&(!n.C[1]||4!=Xs(n)||2!=n.ba()))if(n.v&&4==Xs(n))Tv(n.Fa,0,n);else if(gr(n,"readystatechange"),4==Xs(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(MC)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!gS.test(i?i.toLowerCase():"")}t=r}if(t)gr(n,"complete"),gr(n,"success");else{n.m=6;try{var l=2<Xs(n)?n.g.statusText:""}catch(_){l=""}n.j=l+" ["+n.ba()+"]",BC(n)}}finally{Rm(n)}}}function Rm(n,e){if(n.g){Yv(n);const t=n.g,r=n.C[0]?um:null;n.g=null,n.C=null,e||gr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function Yv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function Xs(n){return n.g?n.g.readyState:0}function jC(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case pS:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Qv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function HC(n){let e="";return gC(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ln(n,e,t))}function up(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function $C(n){this.za=0,this.l=[],this.h=new Cm,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=up("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=up("baseRetryDelayMs",5e3,n),this.$a=up("retryDelaySeedMs",1e4,n),this.Ya=up("forwardChannelMaxRetries",2,n),this.ra=up("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new Hv(n&&n.concurrentRequestLimit),this.Ca=new LC,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Jv(n){if(Xv(n),3==n.G){var e=n.V++,t=fu(n.F);ln(t,"SID",n.J),ln(t,"RID",e),ln(t,"TYPE","terminate"),Pm(n,t),(e=new Dm(n,n.h,e,void 0)).K=2,e.v=Sc(fu(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=_S(e.l,null),e.g.ea(e.v)),e.F=Date.now(),bc(e)}cp(n)}function Mm(n){n.g&&(Nc(n),n.g.cancel(),n.g=null)}function Xv(n){Mm(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),ch(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function ew(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&lp(n)}function lp(n){OC(n.i)||n.m||(n.m=!0,Iv(n.Ha,n),n.C=0)}function Nm(n,e){var t;t=e?e.m:n.V++;const r=fu(n.F);ln(r,"SID",n.J),ln(r,"RID",t),ln(r,"AID",n.U),Pm(n,r),n.o&&n.s&&Qv(r,n.o,n.s),t=new Dm(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=km(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Sm(n.i,t),Tm(t,r,e)}function Pm(n,e){n.j&&Lv({},function(t,r){ln(e,r,t)})}function km(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Gr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let _=0;_<t;_++){let E=i[_].h;const D=i[_].g;if(E-=a,0>E)a=Math.max(0,i[_].h-100),h=!1;else try{fS(D,l,"req"+E+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function WC(n){n.g||n.u||(n.Y=1,Iv(n.Ga,n),n.A=0)}function qC(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=eh(Gr(n.Ga,n),zC(n,n.A)),n.A++,0))}function Nc(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function tw(n){n.g=new Dm(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fu(n.oa);ln(e,"RID","rpc"),ln(e,"SID",n.J),ln(e,"CI",n.N?"0":"1"),ln(e,"AID",n.U),Pm(n,e),ln(e,"TYPE","xmlhttp"),n.o&&n.s&&Qv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=Sc(fu(e)),t.s=null,t.U=!0,Ov(t,n)}function ch(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Om(n,e){var t=null;if(n.g==e){ch(n),Nc(n),n.g=null;var r=2}else{if(!Gv(n.i,e))return;t=e.D,Wv(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;gr(r=Xf(),new DC(r,t,e,i)),lp(n)}else WC(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function GC(n,e){return!($v(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=eh(Gr(n.Ha,n,e),zC(n,n.C)),n.C++,0)))}(n,e)||2==r&&qC(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:va(n,5);break;case 4:va(n,10);break;case 3:va(n,6);break;default:va(n,2)}}function zC(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function va(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Gr(n.jb,n);t||(t=new Tc("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||ih(t,"https"),Sc(t)),function VC(n,e){const t=new Cm;if(Rt.Image){const r=new Image;r.onload=Gf(Am,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Gf(Am,t,r,"TestLoadImage: error",!1,e),r.onabort=Gf(Am,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Gf(Am,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Ui(2);n.G=0,n.j&&n.j.va(e),cp(n),Xv(n)}function cp(n){n.G=0,n.I=-1,n.j&&((0!=FC(n.i).length||0!=n.l.length)&&(n.i.i.length=0,cm(n.l),n.l.length=0),n.j.ua())}function Fm(n,e,t){let r=function Js(n){return n instanceof Tc?fu(n):new Tc(n,void 0)}(t);if(""!=r.i)e&&Ds(r,e+"."+r.i),gl(r,r.m);else{const i=Rt.location;r=function Vv(n,e,t,r){var i=new Tc(null,void 0);return n&&ih(i,n),e&&Ds(i,e),t&&gl(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&gC(n.aa,function(i,a){ln(r,a,i)}),t=n.sa,(e=n.D)&&t&&ln(r,e,t),ln(r,"VER",n.ma),Pm(n,r),r}function _S(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new xr(t&&n.Ba&&!n.qa?new op({ib:!0}):n.qa)).L=n.H,e}function KC(){}function dh(){if(Zd&&!(10<=Number(nS)))throw Error("Environmental error: no available transport.")}function Bi(n,e){Dn.call(this),this.g=new $C(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!dm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!dm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ml(this)}function nw(n){tp.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function rw(){kv.call(this),this.status=1}function ml(n){this.g=n}(tt=xr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():bm.g(),this.C=function TC(n){return n.h||(n.h=n.i())}(this.u?this.u:bm),this.g.onreadystatechange=Gr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void Mc(this,a)}n=t||"";const i=new nh(this.headers);r&&Lv(r,function(a,l){i.set(l,a)}),r=function dM(n){e:{var e=mS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=hC(UC,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Yv(this),0<this.B&&((this.K=function mM(n){return Zd&&function pa(){return function lv(n){var e=tS;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=sv(String(hm)).split("."),t=sv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=ov(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||ov(0==i[2].length,0==a[2].length)||ov(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Gr(this.pa,this)):this.A=Tv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){Mc(this,a)}},tt.pa=function(){void 0!==am&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,gr(this,"timeout"),this.abort(8))},tt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,gr(this,"complete"),gr(this,"abort"),Rm(this))},tt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rm(this,!0)),xr.Z.M.call(this)},tt.Fa=function(){this.s||(this.F||this.v||this.l?Zv(this):this.cb())},tt.cb=function(){Zv(this)},tt.ba=function(){try{return 2<Xs(this)?this.g.status:-1}catch(n){return-1}},tt.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},tt.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),gM(e)}},tt.Da=function(){return this.m},tt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(tt=$C.prototype).ma=8,tt.G=1,tt.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},tt.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Dm(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=JT(a),XT(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=km(this,i,e),ln(t=fu(this.F),"RID",n),ln(t,"CVER",22),this.D&&ln(t,"X-HTTP-Session-Id",this.D),Pm(this,t),this.o&&a&&Qv(t,this.o,a),Sm(this.i,i),this.Ra&&ln(t,"TYPE","init"),this.ja?(ln(t,"$req",e),ln(t,"SID","null"),i.$=!0,Tm(i,t,null)):Tm(i,t,e),this.G=2}}else 3==this.G&&(n?Nm(this,n):0==this.l.length||OC(this.i)||Nm(this))},tt.Ga=function(){if(this.u=null,tw(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=eh(Gr(this.bb,this),n)}},tt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ui(10),Mm(this),tw(this))},tt.ab=function(){null!=this.v&&(this.v=null,Mm(this),qC(this),Ui(19))},tt.jb=function(n){n?(this.h.info("Successfully pinged google.com"),Ui(2)):(this.h.info("Failed to ping google.com"),Ui(1))},(tt=KC.prototype).xa=function(){},tt.wa=function(){},tt.va=function(){},tt.ua=function(){},tt.Oa=function(){},dh.prototype.g=function(n,e){return new Bi(n,e)},Ar(Bi,Dn),Bi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Iv(Gr(n.hb,n,e))),Ui(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Fm(n,null,n.W),lp(n)},Bi.prototype.close=function(){Jv(this.g)},Bi.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,ew(this.g,e)}else this.v?((e={}).__data__=vv(n),ew(this.g,e)):ew(this.g,n)},Bi.prototype.M=function(){this.g.j=null,delete this.j,Jv(this.g),delete this.g,Bi.Z.M.call(this)},Ar(nw,tp),Ar(rw,kv),Ar(ml,KC),ml.prototype.xa=function(){gr(this.g,"a")},ml.prototype.wa=function(n){gr(this.g,new nw(n))},ml.prototype.va=function(n){gr(this.g,new rw(n))},ml.prototype.ua=function(){gr(this.g,"b")},dh.prototype.createWebChannel=dh.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,Mv.NO_ERROR=0,Mv.TIMEOUT=8,Mv.HTTP_ERROR=6,Nv.COMPLETE="complete",cS.EventType=Im,Im.OPEN="a",Im.CLOSE="b",Im.ERROR="c",Im.MESSAGE="d",Dn.prototype.listen=Dn.prototype.N,xr.prototype.listenOnce=xr.prototype.O,xr.prototype.getLastError=xr.prototype.La,xr.prototype.getLastErrorCode=xr.prototype.Da,xr.prototype.getStatus=xr.prototype.ba,xr.prototype.getResponseJson=xr.prototype.Qa,xr.prototype.getResponseText=xr.prototype.ga,xr.prototype.send=xr.prototype.ea;var ZC=Ro.createWebChannelTransport=function(){return new dh},YC=Ro.getStatEventTarget=function(){return Xf()},dp=Ro.ErrorCode=Mv,QC=Ro.EventType=Nv,yS=Ro.Event=pl,iw=Ro.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},JC=Ro.FetchXmlHttpFactory=op,hh=Ro.WebChannel=cS,XC=Ro.XhrIo=xr;const eI="@firebase/firestore";class ui{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ui.UNAUTHENTICATED=new ui(null),ui.GOOGLE_CREDENTIALS=new ui("google-credentials-uid"),ui.FIRST_PARTY=new ui("first-party-uid"),ui.MOCK_USER=new ui("mock-user");let fh="9.8.0";const gu=new ki.Yd("@firebase/firestore");function hp(){return gu.logLevel}function Fe(n,...e){if(gu.logLevel<=ki.in.DEBUG){const t=e.map(Lm);gu.debug(`Firestore (${fh}): ${n}`,...t)}}function ur(n,...e){if(gu.logLevel<=ki.in.ERROR){const t=e.map(Lm);gu.error(`Firestore (${fh}): ${n}`,...t)}}function ph(n,...e){if(gu.logLevel<=ki.in.WARN){const t=e.map(Lm);gu.warn(`Firestore (${fh}): ${n}`,...t)}}function Lm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${fh}) INTERNAL ASSERTION FAILED: `+n;throw ur(e),new Error(e)}function Tt(n,e){n||nt()}function Ze(n,e){return n}const de={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Rr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rI{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Mr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ui.UNAUTHENTICATED))}shutdown(){}}class iI{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class vS{constructor(e){this.t=e,this.currentUser=ui.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=E=>this.i!==i?(i=this.i,t(E)):Promise.resolve();let l=new Rr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Rr,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const E=l;e.enqueueRetryable((0,_e.Z)(function*(){yield E.promise,yield a(r.currentUser)}))},_=E=>{Fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(E=>_(E)),setTimeout(()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?_(E):(Fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Rr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Tt("string"==typeof r.accessToken),new rI(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Tt(null===e||"string"==typeof e),new ui(e)}}class wS{constructor(e,t,r){this.type="FirstParty",this.user=ui.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class sI{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new wS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ui.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oI{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aI{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Tt("string"==typeof t.token),this.p=t.token,new oI(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class Wr{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function CS(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}Wr.A=-1;class uI{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=CS(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Mt(n,e){return n<e?-1:n>e?1:0}function gh(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function sw(n){return n+"\0"}class mr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(de.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(de.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return mr.fromMillis(Date.now())}static fromDate(e){return mr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new mr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Mt(this.nanoseconds,e.nanoseconds):Mt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new mr(0,0))}static max(){return new bt(new mr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Vm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ii(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function lI(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class fp{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===fp.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fp?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Nt extends fp{construct(e,t,r){return new Nt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new Nt(t)}static emptyPath(){return new Nt([])}}const Mo=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fn extends fp{construct(e,t,r){return new fn(e,t,r)}static isValidIdentifier(e){return Mo.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new fn(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(de.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(de.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Me(de.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Me(de.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fn(t)}static emptyPath(){return new fn([])}}class Pc{constructor(e){this.fields=e,e.sort(fn.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return gh(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Nr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Nr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Nr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Mt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Nr.EMPTY_BYTE_STRING=new Nr("");const IS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function _l(n){if(Tt(!!n),"string"==typeof n){let e=0;const t=IS.exec(n);if(Tt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Jn(n.seconds),nanos:Jn(n.nanos)}}function Jn(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function mu(n){return"string"==typeof n?Nr.fromBase64String(n):Nr.fromUint8Array(n)}function kc(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function dI(n){const e=n.mapValue.fields.__previous_value__;return kc(e)?dI(e):e}function mh(n){const e=_l(n.mapValue.fields.__local_write_time__.timestampValue);return new mr(e.seconds,e.nanos)}class bS{constructor(e,t,r,i,a,l,h,_){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=_}}class wa{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new wa("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof wa&&e.projectId===this.projectId&&e.database===this.database}}function _h(n){return null==n}function yl(n){return 0===n&&1/n==-1/0}function hI(n){return"number"==typeof n&&Number.isInteger(n)&&!yl(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Ge{constructor(e){this.path=e}static fromPath(e){return new Ge(Nt.fromString(e))}static fromName(e){return new Ge(Nt.fromString(e).popFirst(5))}static empty(){return new Ge(Nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Nt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ge(new Nt(e.slice()))}}const _u={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},yh={nullValue:"NULL_VALUE"};function Ea(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?kc(n)?4:gI(n)?9007199254740991:10:nt()}function No(n,e){if(n===e)return!0;const t=Ea(n);if(t!==Ea(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mh(n).isEqual(mh(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=_l(r.timestampValue),l=_l(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,mu(n.bytesValue).isEqual(mu(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Jn(r.geoPointValue.latitude)===Jn(i.geoPointValue.latitude)&&Jn(r.geoPointValue.longitude)===Jn(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Jn(r.integerValue)===Jn(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Jn(r.doubleValue),l=Jn(i.doubleValue);return a===l?yl(a)===yl(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return gh(n.arrayValue.values||[],e.arrayValue.values||[],No);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Vm(a)!==Vm(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!No(a[h],l[h])))return!1;return!0}(n,e);default:return nt()}var i}function vh(n,e){return void 0!==(n.values||[]).find(t=>No(t,e))}function yu(n,e){if(n===e)return 0;const t=Ea(n),r=Ea(e);if(t!==r)return Mt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Mt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Jn(i.integerValue||i.doubleValue),h=Jn(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return ow(n.timestampValue,e.timestampValue);case 4:return ow(mh(n),mh(e));case 5:return Mt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=mu(i),h=mu(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let _=0;_<l.length&&_<h.length;_++){const E=Mt(l[_],h[_]);if(0!==E)return E}return Mt(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Mt(Jn(i.latitude),Jn(a.latitude));return 0!==l?l:Mt(Jn(i.longitude),Jn(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let _=0;_<l.length&&_<h.length;++_){const E=yu(l[_],h[_]);if(E)return E}return Mt(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===_u.mapValue&&a===_u.mapValue)return 0;if(i===_u.mapValue)return 1;if(a===_u.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),_=a.fields||{},E=Object.keys(_);h.sort(),E.sort();for(let D=0;D<h.length&&D<E.length;++D){const S=Mt(h[D],E[D]);if(0!==S)return S;const P=yu(l[h[D]],_[E[D]]);if(0!==P)return P}return Mt(h.length,E.length)}(n.mapValue,e.mapValue);default:throw nt()}}function ow(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Mt(n,e);const t=_l(n),r=_l(e),i=Mt(t.seconds,r.seconds);return 0!==i?i:Mt(t.nanos,r.nanos)}function Oc(n){return Um(n)}function Um(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=_l(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?mu(n.bytesValue).toBase64():"referenceValue"in n?Ge.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Um(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Um(r.fields[h])}`;return a+"}"}(n.mapValue):nt();var e}function vl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Bm(n){return!!n&&"integerValue"in n}function pp(n){return!!n&&"arrayValue"in n}function fI(n){return!!n&&"nullValue"in n}function pI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jm(n){return!!n&&"mapValue"in n}function gp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ii(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=gp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=gp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function gI(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function DS(n){return"nullValue"in n?yh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?vl(wa.empty(),Ge.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function TS(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?vl(wa.empty(),Ge.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?_u:nt()}function mI(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function _I(n,e){const t=yu(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class bi{constructor(e){this.value=e}static empty(){return new bi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jm(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=gp(t)}setAll(e){let t=fn.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=gp(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());jm(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return No(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ii(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new bi(gp(this.value))}}function yI(n){const e=[];return Ii(n.fields,(t,r)=>{const i=new fn([t]);if(jm(r)){const a=yI(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new Pc(e)}class Nn{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Nn(e,0,bt.min(),bt.min(),bi.empty(),0)}static newFoundDocument(e,t,r){return new Nn(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new Nn(e,2,t,bt.min(),bi.empty(),0)}static newUnknownDocument(e,t){return new Nn(e,3,t,bt.min(),bi.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=bi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=bi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Nn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Hm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function aw(n){return n.fields.find(e=>2===e.kind)}function Fc(n){return n.fields.filter(e=>2!==e.kind)}Hm.UNKNOWN_ID=-1;class $m{constructor(e,t){this.fieldPath=e,this.kind=t}}class mp{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new mp(0,eo.min())}}function uw(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=bt.fromTimestamp(1e9===r?new mr(t+1,0):new mr(t,r));return new eo(i,Ge.empty(),e)}function vI(n){return new eo(n.readTime,n.key,-1)}class eo{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new eo(bt.min(),Ge.empty(),-1)}static max(){return new eo(bt.max(),Ge.empty(),-1)}}function lw(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ge.comparator(n.documentKey,e.documentKey),0!==t?t:Mt(n.largestBatchId,e.largestBatchId))}class Xn{constructor(e,t){this.comparator=e,this.root=t||qr.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qr.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _p(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _p(this.root,e,this.comparator,!1)}getReverseIterator(){return new _p(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _p(this.root,e,this.comparator,!0)}}class _p{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qr{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:qr.RED,this.left=null!=i?i:qr.EMPTY,this.right=null!=a?a:qr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new qr(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return qr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return qr.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}qr.EMPTY=null,qr.RED=!0,qr.BLACK=!1,qr.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new qr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class vn{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cw(this.data.getIterator())}getIteratorFrom(e){return new cw(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof vn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new vn(this.comparator);return t.data=e,t}}class cw{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Lc(n){return n.hasNext()?n.getNext():void 0}class wI{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function wl(n,e=null,t=[],r=[],i=null,a=null,l=null){return new wI(n,e,t,r,i,a,l)}function Vc(n){const e=Ze(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+Oc(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),_h(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Oc(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Oc(r)).join(",")),e.P=t}return e.P}function Ca(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!yM(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!No(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!CI(n.startAt,e.startAt)&&CI(n.endAt,e.endAt)}function dw(n){return Ge.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function wh(n,e){return n.filters.filter(t=>t instanceof zr&&t.field.isEqual(e))}function AS(n,e,t){let r=yh,i=!0;for(const a of wh(n,e)){let l=yh,h=!0;switch(a.op){case"<":case"<=":l=DS(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,h=!1;break;case"!=":case"not-in":l=yh}mI({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];mI({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function hw(n,e,t){let r=_u,i=!0;for(const a of wh(n,e)){let l=_u,h=!0;switch(a.op){case">=":case">":l=TS(a.value),h=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,h=!1;break;case"!=":case"not-in":l=_u}_I({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];_I({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class zr extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.V(e,t,r):new _M(e,t,r):"array-contains"===t?new RS(e,r):"in"===t?new Gm(e,r):"not-in"===t?new MS(e,r):"array-contains-any"===t?new Wm(e,r):new zr(e,t,r)}static V(e,t,r){return"in"===t?new Ct(e,r):new xS(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(yu(t,this.value)):null!==t&&Ea(this.value)===Ea(t)&&this.v(yu(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _M extends zr{constructor(e,t,r){super(e,t,r),this.key=Ge.fromName(r.referenceValue)}matches(e){const t=Ge.comparator(e.key,this.key);return this.v(t)}}class Ct extends zr{constructor(e,t){super(e,"in",t),this.keys=EI(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xS extends zr{constructor(e,t){super(e,"not-in",t),this.keys=EI(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function EI(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ge.fromName(r.referenceValue))}class RS extends zr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return pp(t)&&vh(t.arrayValue,this.value)}}class Gm extends zr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&vh(this.value.arrayValue,t)}}class MS extends zr{constructor(e,t){super(e,"not-in",t)}matches(e){if(vh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!vh(this.value.arrayValue,t)}}class Wm extends zr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!pp(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>vh(this.value.arrayValue,r))}}class Po{constructor(e,t){this.position=e,this.inclusive=t}}class wn{constructor(e,t="asc"){this.field=e,this.dir=t}}function yM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function fw(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ge.comparator(Ge.fromName(l.referenceValue),t.key):yu(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function CI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!No(n.position[t],e.position[t]))return!1;return!0}class vu{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=_,this.D=null,this.C=null}}function pw(n,e,t,r,i,a,l,h){return new vu(n,e,t,r,i,a,l,h)}function Uc(n){return new vu(n)}function qm(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function gw(n){for(const e of n.filters)if(e.S())return e.field;return null}function mw(n){return null!==n.collectionGroup}function Eh(n){const e=Ze(n);if(null===e.D){e.D=[];const t=gw(e),r=qm(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new wn(t)),e.D.push(new wn(fn.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new wn(fn.keyField(),a))}}}return e.D}function Di(n){const e=Ze(n);if(!e.C)if("F"===e.limitType)e.C=wl(e.path,e.collectionGroup,Eh(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Eh(e))t.push(new wn(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Po(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Po(e.startAt.position,e.startAt.inclusive):null;e.C=wl(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function bI(n,e,t){return new vu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function yp(n,e){return Ca(Di(n),Di(e))&&n.limitType===e.limitType}function DI(n){return`${Vc(Di(n))}|lt:${n.limitType}`}function Ch(n){return`Query(target=${function SS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${Oc(r.value)}`;var r}).join(", ")}]`),_h(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Oc(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Oc(t)).join(",")),`Target(${e})`}(Di(n))}; limitType=${n.limitType})`}function zm(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ge.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=fw(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,Eh(t),r)||t.endAt&&!function(i,a,l){const h=fw(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,Eh(t),r)));var t,r}function _w(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function yw(n){return(e,t)=>{let r=!1;for(const i of Eh(n)){const a=NS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function NS(n,e,t){const r=n.field.isKeyField()?Ge.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),_=l.data.field(i);return null!==h&&null!==_?yu(h,_):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}function Ih(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:yl(e)?"-0":e}}function bh(n){return{integerValue:""+n}}function TI(n,e){return hI(e)?bh(e):Ih(n,e)}class Km{constructor(){this._=void 0}}function PS(n,e,t){return n instanceof Bc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof jc?ww(n,e):n instanceof Hc?AI(n,e):function(r,i){const a=vw(r,i),l=kS(a)+kS(r.k);return Bm(a)&&Bm(r.k)?bh(l):Ih(r.M,l)}(n,e)}function SI(n,e,t){return n instanceof jc?ww(n,e):n instanceof Hc?AI(n,e):t}function vw(n,e){return n instanceof vp?Bm(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Bc extends Km{}class jc extends Km{constructor(e){super(),this.elements=e}}function ww(n,e){const t=OS(e);for(const r of n.elements)t.some(i=>No(i,r))||t.push(r);return{arrayValue:{values:t}}}class Hc extends Km{constructor(e){super(),this.elements=e}}function AI(n,e){let t=OS(e);for(const r of n.elements)t=t.filter(i=>!No(i,r));return{arrayValue:{values:t}}}class vp extends Km{constructor(e,t){super(),this.M=e,this.k=t}}function kS(n){return Jn(n.integerValue||n.doubleValue)}function OS(n){return pp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Zm{constructor(e,t){this.field=e,this.transform=t}}class Ym{constructor(e,t){this.version=e,this.transformResults=t}}class _r{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new _r}static exists(e){return new _r(void 0,e)}static updateTime(e){return new _r(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qm(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wp{}function Ep(n,e,t){n instanceof Cp?function(r,i,a){const l=r.value.clone(),h=PI(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof El?function(r,i,a){if(!Qm(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=PI(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(NI(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ew(n,e,t){var i;n instanceof Cp?function(r,i,a){if(!Qm(r.precondition,i))return;const l=r.value.clone(),h=$c(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(MI(i),l).setHasLocalMutations()}(n,e,t):n instanceof El?function(r,i,a){if(!Qm(r.precondition,i))return;const l=$c(r.fieldTransforms,a,i),h=i.data;h.setAll(NI(r)),h.setAll(l),i.convertToFoundDocument(MI(i),h).setHasLocalMutations()}(n,e,t):Qm(n.precondition,i=e)&&i.convertToNoDocument(bt.min())}function FS(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=vw(r.transform,i||null);null!=a&&(null==t&&(t=bi.empty()),t.set(r.field,a))}return t||null}function RI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&gh(t,r,(i,a)=>function xI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jc&&r instanceof jc||t instanceof Hc&&r instanceof Hc?gh(t.elements,r.elements,No):t instanceof vp&&r instanceof vp?No(t.k,r.k):t instanceof Bc&&r instanceof Bc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function MI(n){return n.isFoundDocument()?n.version:bt.min()}class Cp extends wp{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class El extends wp{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function NI(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function PI(n,e,t){const r=new Map;Tt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,SI(l,h,t[i]))}return r}function $c(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,PS(a,l,e))}return r}class Ip extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Jm extends wp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class LS{constructor(e){this.count=e}}var lr,Xt;function Cw(n){switch(n){default:return nt();case de.CANCELLED:case de.UNKNOWN:case de.DEADLINE_EXCEEDED:case de.RESOURCE_EXHAUSTED:case de.INTERNAL:case de.UNAVAILABLE:case de.UNAUTHENTICATED:return!1;case de.INVALID_ARGUMENT:case de.NOT_FOUND:case de.ALREADY_EXISTS:case de.PERMISSION_DENIED:case de.FAILED_PRECONDITION:case de.ABORTED:case de.OUT_OF_RANGE:case de.UNIMPLEMENTED:case de.DATA_LOSS:return!0}}function kI(n){if(void 0===n)return ur("GRPC error has no .code"),de.UNKNOWN;switch(n){case lr.OK:return de.OK;case lr.CANCELLED:return de.CANCELLED;case lr.UNKNOWN:return de.UNKNOWN;case lr.DEADLINE_EXCEEDED:return de.DEADLINE_EXCEEDED;case lr.RESOURCE_EXHAUSTED:return de.RESOURCE_EXHAUSTED;case lr.INTERNAL:return de.INTERNAL;case lr.UNAVAILABLE:return de.UNAVAILABLE;case lr.UNAUTHENTICATED:return de.UNAUTHENTICATED;case lr.INVALID_ARGUMENT:return de.INVALID_ARGUMENT;case lr.NOT_FOUND:return de.NOT_FOUND;case lr.ALREADY_EXISTS:return de.ALREADY_EXISTS;case lr.PERMISSION_DENIED:return de.PERMISSION_DENIED;case lr.FAILED_PRECONDITION:return de.FAILED_PRECONDITION;case lr.ABORTED:return de.ABORTED;case lr.OUT_OF_RANGE:return de.OUT_OF_RANGE;case lr.UNIMPLEMENTED:return de.UNIMPLEMENTED;case lr.DATA_LOSS:return de.DATA_LOSS;default:return nt()}}(Xt=lr||(lr={}))[Xt.OK=0]="OK",Xt[Xt.CANCELLED=1]="CANCELLED",Xt[Xt.UNKNOWN=2]="UNKNOWN",Xt[Xt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xt[Xt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xt[Xt.NOT_FOUND=5]="NOT_FOUND",Xt[Xt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xt[Xt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xt[Xt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xt[Xt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xt[Xt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xt[Xt.ABORTED=10]="ABORTED",Xt[Xt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xt[Xt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xt[Xt.INTERNAL=13]="INTERNAL",Xt[Xt.UNAVAILABLE=14]="UNAVAILABLE",Xt[Xt.DATA_LOSS=15]="DATA_LOSS";class Ia{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ii(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return lI(this.inner)}size(){return this.innerSize}}const VS=new Xn(Ge.comparator);function Ts(){return VS}const OI=new Xn(Ge.comparator);function Iw(...n){let e=OI;for(const t of n)e=e.insert(t.key,t);return e}function bp(){return new Ia(n=>n.toString(),(n,e)=>n.isEqual(e))}const US=new Xn(Ge.comparator),bw=new vn(Ge.comparator);function cn(...n){let e=bw;for(const t of n)e=e.add(t);return e}const FI=new vn(Mt);function Xm(){return FI}class Dp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,Tp.createSynthesizedTargetChangeForCurrentChange(e,t)),new Dp(bt.min(),r,Xm(),Ts(),cn())}}class Tp{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Tp(Nr.EMPTY_BYTE_STRING,t,cn(),cn(),cn())}}class e_{constructor(e,t,r,i){this.O=e,this.removedTargetIds=t,this.key=r,this.F=i}}class LI{constructor(e,t){this.targetId=e,this.$=t}}class VI{constructor(e,t,r=Nr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class UI{constructor(){this.B=0,this.L=Tw(),this.U=Nr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=cn(),t=cn(),r=cn();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new Tp(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=Tw()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class BS{constructor(e){this.nt=e,this.st=new Map,this.it=Ts(),this.rt=Dw(),this.ot=new vn(Mt)}ut(e){for(const t of e.O)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.$.count,i=this.wt(t);if(i){const a=i.target;if(dw(a))if(0===r){const l=new Ge(a.path);this.ct(t,l,Nn.newNoDocument(l,bt.min()))}else Tt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&dw(h.target)){const _=new Ge(h.target.path);null!==this.it.get(_)||this.It(l,_)||this.ct(l,_,Nn.newNoDocument(_,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=cn();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(_=>{const E=this.wt(_);return!E||2===E.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new Dp(e,t,this.ot,this.it,r);return this.it=Ts(),this.rt=Dw(),this.ot=new vn(Mt),i}at(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Tt(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new UI,this.st.set(e,t)),t}Tt(e){let t=this.rt.get(e);return t||(t=new vn(Mt),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Fe("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Et(e)}dt(e){this.st.set(e,new UI),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Dw(){return new Xn(Ge.comparator)}function Tw(){return new Xn(Ge.comparator)}const jS={asc:"ASCENDING",desc:"DESCENDING"},HS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class BI{constructor(e,t){this.databaseId=e,this.N=t}}function Sp(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jI(n,e){return n.N?e.toBase64():e.toUint8Array()}function $S(n,e){return Sp(n,e.toTimestamp())}function yr(n){return Tt(!!n),bt.fromTimestamp(function(e){const t=_l(e);return new mr(t.seconds,t.nanos)}(n))}function Ap(n,e){return(t=n,new Nt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Sw(n){const e=Nt.fromString(n);return Tt(i_(e)),e}function Gc(n,e){return Ap(n.databaseId,e.path)}function ba(n,e){const t=Sw(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(de.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ge(xw(t))}function Aw(n,e){return Ap(n.databaseId,e)}function t_(n){const e=Sw(n);return 4===e.length?Nt.emptyPath():xw(e)}function xp(n){return new Nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function xw(n){return Tt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function HI(n,e,t){return{name:Gc(n,e),fields:t.value.mapValue.fields}}function Rw(n,e,t){const r=ba(n,e.name),i=yr(e.updateTime),a=new bi({mapValue:{fields:e.fields}}),l=Nn.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function n_(n,e){let t;if(e instanceof Cp)t={update:HI(n,e.key,e.value)};else if(e instanceof Ip)t={delete:Gc(n,e.key)};else if(e instanceof El)t={update:HI(n,e.key,e.data),updateMask:zI(e.fieldMask)};else{if(!(e instanceof Jm))return nt();t={verify:Gc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Bc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof jc)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hc)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vp)return{fieldPath:a.field.canonicalString(),increment:l.k};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:$S(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function Mw(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?_r.updateTime(yr(i.updateTime)):void 0!==i.exists?_r.exists(i.exists):_r.none():_r.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Tt("REQUEST_TIME"===l.setToServerValue),h=new Bc):"appendMissingElements"in l?h=new jc(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Hc(l.removeAllFromArray.values||[]):"increment"in l?h=new vp(a,l.increment):nt();const _=fn.fromServerFormat(l.fieldPath);return new Zm(_,h)}(n,i)):[];var i;if(e.update){const i=ba(n,e.update.name),a=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new Pc((e.updateMask.fieldPaths||[]).map(E=>fn.fromServerFormat(E)));return new El(i,a,l,t,r)}return new Cp(i,a,t,r)}if(e.delete){const i=ba(n,e.delete);return new Ip(i,t)}if(e.verify){const i=ba(n,e.verify);return new Jm(i,t)}return nt()}function GI(n,e){return{documents:[Aw(n,e.path)]}}function Wc(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=Aw(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Aw(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0===_.length)return;const E=_.map(D=>function(S){if("=="===S.op){if(pI(S.value))return{unaryFilter:{field:Th(S.field),op:"IS_NAN"}};if(fI(S.value))return{unaryFilter:{field:Th(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(pI(S.value))return{unaryFilter:{field:Th(S.field),op:"IS_NOT_NAN"}};if(fI(S.value))return{unaryFilter:{field:Th(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Th(S.field),op:zS(S.op),value:S.value}}}(D));return 1===E.length?E[0]:{compositeFilter:{op:"AND",filters:E}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(E=>{return{field:Th((D=E).field),direction:WI(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(E=e.limit,n.N||_h(E)?E:{value:E});var E,h,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function Dh(n){let e=t_(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Tt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=qS(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new wn(Sh((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,_h(S)?null:S}(t.limit));let _=null;var D;t.startAt&&(_=new Po((D=t.startAt).values||[],!!D.before));let E=null;return t.endAt&&(E=function(D){return new Po(D.values||[],!D.before)}(t.endAt)),pw(e,i,l,a,h,"F",_,E)}function qS(n){return n?void 0!==n.unaryFilter?[qI(n)]:void 0!==n.fieldFilter?[KS(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>qS(e)).reduce((e,t)=>e.concat(t)):nt():[]}function WI(n){return jS[n]}function zS(n){return HS[n]}function Th(n){return{fieldPath:n.canonicalString()}}function Sh(n){return fn.fromServerFormat(n.fieldPath)}function KS(n){return zr.create(Sh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(n.fieldFilter.op),n.fieldFilter.value)}function qI(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Sh(n.unaryFilter.field);return zr.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Sh(n.unaryFilter.field);return zr.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Sh(n.unaryFilter.field);return zr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Sh(n.unaryFilter.field);return zr.create(i,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}function zI(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function i_(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Kr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=KI(e)),e=Rp(n.get(t),e);return KI(e)}function Rp(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function KI(n){return n+"\x01\x01"}function ko(n){const e=n.length;if(Tt(e>=2),2===e)return Tt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Nt.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let _;0===i.length?_=h:(i+=h,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:nt()}a=l+2}return new Nt(r)}const Nw=["userId","batchId"];function s_(n,e){return[n,Kr(e)]}function ZI(n,e,t){return[n,Kr(e),t]}const Pw={},ZS=["prefixPath","collectionGroup","readTime","documentId"],vM=["prefixPath","collectionGroup","documentId"],YS=["collectionGroup","readTime","prefixPath","documentId"],QS=["canonicalId","targetId"],Ah=["targetId","path"],YI=["path","targetId"],xh=["collectionId","parent"],wM=["indexId","uid"],QI=["uid","sequenceNumber"],JS=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],EM=["indexId","uid","orderedDocumentKey"],JI=["userId","collectionPath","documentId"],CM=["userId","collectionPath","largestBatchId"],XI=["userId","collectionGroup","largestBatchId"],o_=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],XS=[...o_,"documentOverlays"],eb=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],eA=[...eb,"indexConfiguration","indexState","indexEntries"],tb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class fe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new fe((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof fe?t:fe.resolve(t)}catch(t){return fe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):fe.reject(t)}static resolve(e){return new fe((t,r)=>{t(e)})}static reject(e){return new fe((t,r)=>{r(e)})}static waitFor(e){return new fe((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=fe.resolve(!1);for(const r of e)t=t.next(i=>i?fe.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class a_{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new Rr,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new Mp(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=u_(r.target.error);this.At.reject(new Mp(e,i))}}static open(e,t,r,i){try{return new a_(t,e.transaction(i,r))}catch(a){throw new Mp(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Fe("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new rb(t)}}class Oo{constructor(e,t,r){this.name=e,this.version=t,this.Pt=r,12.2===Oo.Vt((0,k.z$)())&&ur("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Fe("SimpleDb","Removing database:",e),Cl(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,k.hl)())return!1;if(Oo.St())return!0;const e=(0,k.z$)(),t=Oo.Vt(e),r=0<t&&t<10,i=Oo.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,t){return e.store(t)}static Vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}Nt(e){var t=this;return(0,_e.Z)(function*(){return t.db||(Fe("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new Mp(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(de.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(de.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Mp(e,h))},a.onupgradeneeded=l=>{Fe("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.Pt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Fe("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Mt&&(t.db.onversionchange=r=>t.Mt(r)),t.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,_e.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.Nt(e);const _=a_.open(a.db,e,l?"readonly":"readwrite",r),E=i(_).next(D=>(_.bt(),D)).catch(D=>(_.abort(D),fe.reject(D))).toPromise();return E.catch(()=>{}),yield _.Rt,E}catch(_){const E="FirebaseError"!==_.name&&h<3;if(Fe("SimpleDb","Transaction failed with error:",_.message,"Retrying:",E),a.close(),!E)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class tA{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Cl(this.Ft.delete())}}class Mp extends Me{constructor(e,t){super(de.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Fo(n){return"IndexedDbTransactionError"===n.name}class rb{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Fe("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Fe("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Cl(r)}add(e){return Fe("SimpleDb","ADD",this.store.name,e,e),Cl(this.store.add(e))}get(e){return Cl(this.store.get(e)).next(t=>(void 0===t&&(t=null),Fe("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Fe("SimpleDb","DELETE",this.store.name,e),Cl(this.store.delete(e))}count(){return Fe("SimpleDb","COUNT",this.store.name),Cl(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new fe((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new fe((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}Qt(e,t){Fe("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Wt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}zt(e){const t=this.cursor({});return new fe((r,i)=>{t.onerror=a=>{const l=u_(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new fe((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const _=new tA(h),E=t(h.primaryKey,h.value,_);if(E instanceof fe){const D=E.catch(S=>(_.done(),fe.reject(S)));r.push(D)}_.isDone?i():null===_.Lt?h.continue():h.continue(_.Lt)}}).next(()=>fe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Cl(n){return new fe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=u_(r.target.error);t(i)}})}let kw=!1;function u_(n){const e=Oo.Vt((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return kw||(kw=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ow extends nb{constructor(e,t){super(),this.Ht=e,this.currentSequenceNumber=t}}function Zr(n,e){const t=Ze(n);return Oo.xt(t.Ht,e)}class Fw{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&Ep(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ew(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ew(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cn())}isEqual(e){return this.batchId===e.batchId&&gh(this.mutations,e.mutations,(t,r)=>RI(t,r))&&gh(this.baseMutations,e.baseMutations,(t,r)=>RI(t,r))}}class Lw{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Tt(e.mutations.length===r.length);let i=US;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Lw(e,t,r,i)}}class Vw{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Il{constructor(e,t,r,i,a=bt.min(),l=bt.min(),h=Nr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Il(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Il(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class ib{constructor(e){this.Jt=e}}function Rh(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:l_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Gc(i=n.Jt,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Sp(i,a.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:wu(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:wu(e.version)}}var i,a;return r}function l_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function wu(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Ti(n){const e=new mr(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Mh(n,e){const t=(e.baseMutations||[]).map(a=>Mw(n.Jt,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>Mw(n.Jt,a)),i=mr.fromMillis(e.localWriteTimeMs);return new Fw(e.batchId,i,t,r)}function qc(n){const e=Ti(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Ti(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(Tt(1===(i=n.query).documents.length),r=Di(Uc(t_(i.documents[0])))):r=Di(Dh(n.query)),new Il(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Nr.fromBase64String(n.resumeToken))}function Nh(n,e){const t=wu(e.snapshotVersion),r=wu(e.lastLimboFreeSnapshotVersion);let i;i=dw(e.target)?GI(n.Jt,e.target):Wc(n.Jt,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Vc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Uw(n){const e=Dh({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?bI(e,e.limit,"L"):e}function Bw(n,e){return new Vw(e.largestBatchId,Mw(n.Jt,e.overlayMutation))}function sb(n,e){const t=e.path.lastSegment();return[n,Kr(e.path.popLast()),t]}class c_{getBundleMetadata(e,t){return Np(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Ti(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return Np(e).put({bundleId:(r=t).id,createTime:wu(yr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return ob(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Uw(i.bundledQuery),readTime:Ti(i.readTime)};var i})}saveNamedQuery(e,t){return ob(e).put({name:(r=t).name,readTime:wu(yr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function Np(n){return Zr(n,"bundles")}function ob(n){return Zr(n,"namedQueries")}class jw{constructor(e,t){this.M=e,this.userId=t}static Yt(e,t){return new jw(e,t.uid||"")}getOverlay(e,t){return Ph(e).get(sb(this.userId,t)).next(r=>r?Bw(this.M,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const h=new Vw(t,l);i.push(this.Xt(e,h))}),fe.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Kr(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Ph(e).Qt("collectionPathOverlayIndex",h))}),fe.waitFor(a)}getOverlaysForCollection(e,t,r){const i=bp(),a=Kr(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Ph(e).qt("collectionPathOverlayIndex",l).next(h=>{for(const _ of h){const E=Bw(this.M,_);i.set(E.getKey(),E)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=bp();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ph(e).Wt({index:"collectionGroupOverlayIndex",range:h},(_,E,D)=>{const S=Bw(this.M,E);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Xt(e,t){return Ph(e).put(function(r,i,a){const[l,h,_]=sb(i,a.mutation.key);return{userId:i,collectionPath:h,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:n_(r.Jt,a.mutation)}}(this.M,this.userId,t))}}function Ph(n){return Zr(n,"documentOverlays")}class bl{constructor(){}Zt(e,t){this.te(e,t),t.ee()}te(e,t){if("nullValue"in e)this.ne(t,5);else if("booleanValue"in e)this.ne(t,10),t.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(t,15),t.se(Jn(e.integerValue));else if("doubleValue"in e){const r=Jn(e.doubleValue);isNaN(r)?this.ne(t,13):(this.ne(t,15),yl(r)?t.se(0):t.se(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ne(t,20),"string"==typeof r?t.ie(r):(t.ie(`${r.seconds||""}`),t.se(r.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,t),this.oe(t);else if("bytesValue"in e)this.ne(t,30),t.ue(mu(e.bytesValue)),this.oe(t);else if("referenceValue"in e)this.ae(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ne(t,45),t.se(r.latitude||0),t.se(r.longitude||0)}else"mapValue"in e?gI(e)?this.ne(t,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,t),this.oe(t)):"arrayValue"in e?(this.he(e.arrayValue,t),this.oe(t)):nt()}re(e,t){this.ne(t,25),this.le(e,t)}le(e,t){t.ie(e)}ce(e,t){const r=e.fields||{};this.ne(t,55);for(const i of Object.keys(r))this.re(i,t),this.te(r[i],t)}he(e,t){const r=e.values||[];this.ne(t,50);for(const i of r)this.te(i,t)}ae(e,t){this.ne(t,37),Ge.fromName(e).path.forEach(r=>{this.ne(t,60),this.le(r,t)})}ne(e,t){e.se(t)}oe(e){e.se(2)}}function Hw(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $w(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=Hw(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}bl.fe=new bl;class rA{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this._e(r.value),r=t.next();this.we()}me(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.ge(r.value),r=t.next();this.ye()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this._e(r);else if(r<2048)this._e(960|r>>>6),this._e(128|63&r);else if(t<"\ud800"||"\udbff"<t)this._e(480|r>>>12),this._e(128|63&r>>>6),this._e(128|63&r);else{const i=t.codePointAt(0);this._e(240|i>>>18),this._e(128|63&i>>>12),this._e(128|63&i>>>6),this._e(128|63&i)}}this.we()}Ie(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.ge(r);else if(r<2048)this.ge(960|r>>>6),this.ge(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.ge(480|r>>>12),this.ge(128|63&r>>>6),this.ge(128|63&r);else{const i=t.codePointAt(0);this.ge(240|i>>>18),this.ge(128|63&i>>>12),this.ge(128|63&i>>>6),this.ge(128|63&i)}}this.ye()}Te(e){const t=this.Ee(e),r=$w(t);this.Ae(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Re(e){const t=this.Ee(e),r=$w(t);this.Ae(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}_e(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}ge(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class iA{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class IM{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class zc{constructor(){this.De=new rA,this.Ce=new iA(this.De),this.xe=new IM(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class Eu{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Eu(this.indexId,this.documentKey,this.arrayValue,r)}}function Dl(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=d_(n.arrayValue,e.arrayValue),0!==t?t:(t=d_(n.directionalValue,e.directionalValue),0!==t?t:Ge.comparator(n.documentKey,e.documentKey)))}function d_(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Gw{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const t of e.filters){const r=t;r.S()?this.Fe=r:this.Oe.push(r)}}$e(e){const t=aw(e);if(void 0!==t&&!this.Be(t))return!1;const r=Fc(e);let i=0,a=0;for(;i<r.length&&this.Be(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Fe){const l=r[i];if(!this.Le(this.Fe,l)||!this.Ue(this.Me[a++],l))return!1;++i}for(;i<r.length;++i){const l=r[i];if(a>=this.Me.length||!this.Ue(this.Me[a++],l))return!1}return!0}Be(e){for(const t of this.Oe)if(this.Le(t,e))return!0;return!1}Le(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class sA{constructor(){this.qe=new Ww}addToCollectionParentIndex(e,t){return this.qe.add(t),fe.resolve()}getCollectionParents(e,t){return fe.resolve(this.qe.getEntries(t))}addFieldIndex(e,t){return fe.resolve()}deleteFieldIndex(e,t){return fe.resolve()}getDocumentsMatchingTarget(e,t){return fe.resolve(null)}getIndexType(e,t){return fe.resolve(0)}getFieldIndexes(e,t){return fe.resolve([])}getNextCollectionGroupToUpdate(e){return fe.resolve(null)}getMinOffset(e,t){return fe.resolve(eo.min())}updateCollectionGroup(e,t,r){return fe.resolve()}updateIndexEntries(e,t){return fe.resolve()}}class Ww{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new vn(Nt.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new vn(Nt.comparator)).toArray()}}const h_=new Uint8Array(0);class oA{constructor(e,t){this.user=e,this.databaseId=t,this.Ke=new Ww,this.Ge=new Ia(r=>Vc(r),(r,i)=>Ca(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Ke.add(t)});const a={collectionId:r,parent:Kr(i)};return qw(e).put(a)}return fe.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[sw(t),""],!1,!0);return qw(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(ko(l.parent))}return r})}addFieldIndex(e,t){const r=Pp(e),i={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Pp(e),i=f_(e),a=Kc(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Kc(e);let i=!0;const a=new Map;return fe.forEach(this.Qe(t),l=>this.je(e,l).next(h=>{i&&(i=!!h),a.set(l,h)})).next(()=>{if(i){let l=cn();const h=[];return fe.forEach(a,(_,E)=>{var D;Fe("IndexedDbIndexManager",`Using index ${D=_,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(ot=>`${ot.fieldPath}:${ot.kind}`).join(",")}`} to execute ${Vc(t)}`);const S=function(ot,it){const Pt=aw(it);if(void 0===Pt)return null;for(const Zt of wh(ot,Pt.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(E,_),P=function(ot,it){const Pt=new Map;for(const Zt of Fc(it))for(const Qr of wh(ot,Zt.fieldPath))switch(Qr.op){case"==":case"in":Pt.set(Zt.fieldPath.canonicalString(),Qr.value);break;case"not-in":case"!=":return Pt.set(Zt.fieldPath.canonicalString(),Qr.value),Array.from(Pt.values())}return null}(E,_),U=function(ot,it){const Pt=[];let Zt=!0;for(const Qr of Fc(it)){const Mu=0===Qr.kind?AS(ot,Qr.fieldPath,ot.startAt):hw(ot,Qr.fieldPath,ot.startAt);Pt.push(Mu.value),Zt&&(Zt=Mu.inclusive)}return new Po(Pt,Zt)}(E,_),z=function(ot,it){const Pt=[];let Zt=!0;for(const Qr of Fc(it)){const Mu=0===Qr.kind?hw(ot,Qr.fieldPath,ot.endAt):AS(ot,Qr.fieldPath,ot.endAt);Pt.push(Mu.value),Zt&&(Zt=Mu.inclusive)}return new Po(Pt,Zt)}(E,_),ye=this.We(_,E,U),Ne=this.We(_,E,z),_t=this.ze(_,E,P),ht=this.He(_.indexId,S,ye,U.inclusive,Ne,z.inclusive,_t);return fe.forEach(ht,ot=>r.Gt(ot,t.limit).next(it=>{it.forEach(Pt=>{const Zt=Ge.fromSegments(Pt.documentKey);l.has(Zt)||(l=l.add(Zt),h.push(Zt))})}))}).next(()=>h)}return fe.resolve(null)})}Qe(e){let t=this.Ge.get(e);return t||(t=[e],this.Ge.set(e,t),t)}He(e,t,r,i,a,l,h){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),E=_/(null!=t?t.length:1),D=[];for(let S=0;S<_;++S){const P=t?this.Je(t[S/E]):h_,U=this.Ye(e,P,r[S%E],i),z=this.Xe(e,P,a[S%E],l),ye=h.map(Ne=>this.Ye(e,P,Ne,!0));D.push(...this.createRange(U,z,ye))}return D}Ye(e,t,r,i){const a=new Eu(e,Ge.empty(),t,r);return i?a:a.ke()}Xe(e,t,r,i){const a=new Eu(e,Ge.empty(),t,r);return i?a.ke():a}je(e,t){const r=new Gw(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const h of a)r.$e(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;return fe.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?0!==r&&a.fields.length<function(l){let h=new vn(fn.comparator),_=!1;for(const E of l.filters){const D=E;D.field.isKeyField()||("array-contains"===D.op||"array-contains-any"===D.op?_=!0:h=h.add(D.field))}for(const E of l.orderBy)E.field.isKeyField()||(h=h.add(E.field));return h.size+(_?1:0)}(i)&&(r=1):r=0})).next(()=>r)}Ze(e,t){const r=new zc;for(const i of Fc(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);bl.fe.Zt(a,l)}return r.Se()}Je(e){const t=new zc;return bl.fe.Zt(e,t.Ne(0)),t.Se()}tn(e,t){const r=new zc;return bl.fe.Zt(vl(this.databaseId,t),r.Ne(function(i){const a=Fc(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Se()}ze(e,t,r){if(null===r)return[];let i=[];i.push(new zc);let a=0;for(const l of Fc(e)){const h=r[a++];for(const _ of i)if(this.en(t,l.fieldPath)&&pp(h))i=this.nn(i,l,h);else{const E=_.Ne(l.kind);bl.fe.Zt(h,E)}}return this.sn(i)}We(e,t,r){return this.ze(e,t,r.position)}sn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Se();return t}nn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const h of i){const _=new zc;_.seed(h.Se()),bl.fe.Zt(l,_.Ne(t.kind)),a.push(_)}return a}en(e,t){return!!e.filters.find(r=>r instanceof zr&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=Pp(e),i=f_(e);return(t?r.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return fe.forEach(a,h=>i.get([h.indexId,this.uid]).next(_=>{l.push(function(E,D){const S=D?new mp(D.sequenceNumber,new eo(Ti(D.readTime),new Ge(ko(D.documentKey)),D.largestBatchId)):mp.empty(),P=E.fields.map(([U,z])=>new $m(fn.fromServerFormat(U),z));return new Hm(E.indexId,E.collectionGroup,P,S)}(h,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:Mt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Pp(e),a=f_(e);return this.rn(e).next(l=>i.qt("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>fe.forEach(h,_=>{return a.put({indexId:_.indexId,uid:this.user.uid||"",sequenceNumber:l,readTime:wu((P=r).readTime),documentKey:Kr(P.documentKey.path),largestBatchId:P.largestBatchId});var P})))}updateIndexEntries(e,t){const r=new Map;return fe.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?fe.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),fe.forEach(h,_=>this.on(e,i,_).next(E=>{const D=this.un(a,_);return E.isEqual(D)?fe.resolve():this.an(e,a,_,E,D)}))))})}cn(e,t,r,i){return Kc(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.tn(r,t.key),documentKey:t.key.path.toArray()})}hn(e,t,r,i){return Kc(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.tn(r,t.key),t.key.path.toArray()])}on(e,t,r){const i=Kc(e);let a=new vn(Dl);return i.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.tn(r,t)])},(l,h)=>{a=a.add(new Eu(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}un(e,t){let r=new vn(Dl);const i=this.Ze(t,e);if(null==i)return r;const a=aw(t);if(null!=a){const l=e.data.field(a.fieldPath);if(pp(l))for(const h of l.arrayValue.values||[])r=r.add(new Eu(t.indexId,e.key,this.Je(h),i))}else r=r.add(new Eu(t.indexId,e.key,h_,i));return r}an(e,t,r,i,a){Fe("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,_,E,D,S){const P=h.getIterator(),U=_.getIterator();let z=Lc(P),ye=Lc(U);for(;z||ye;){let Ne=!1,_t=!1;if(z&&ye){const ht=E(z,ye);ht<0?_t=!0:ht>0&&(Ne=!0)}else null!=z?_t=!0:Ne=!0;Ne?(D(ye),ye=Lc(U)):_t?(S(z),z=Lc(P)):(z=Lc(P),ye=Lc(U))}}(i,a,Dl,h=>{l.push(this.cn(e,t,r,h))},h=>{l.push(this.hn(e,t,r,h))}),fe.waitFor(l)}rn(e){let t=1;return f_(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>Dl(l,h)).filter((l,h,_)=>!h||0!==Dl(l,_[h-1]));const i=[];i.push(e);for(const l of r){const h=Dl(l,e),_=Dl(l,t);if(0===h)i[0]=e.ke();else if(h>0&&_<0)i.push(l),i.push(l.ke());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2)a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,h_,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,h_,[]]));return a}getMinOffset(e,t){let r;return fe.forEach(this.Qe(t),i=>this.je(e,i).next(a=>{a?(!r||lw(a.indexState.offset,r)<0)&&(r=a.indexState.offset):r=eo.min()})).next(()=>r)}}function qw(n){return Zr(n,"collectionParents")}function Kc(n){return Zr(n,"indexEntries")}function Pp(n){return Zr(n,"indexConfiguration")}function f_(n){return Zr(n,"indexState")}const zw={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ji{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ji(e,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ab(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const _=r.Wt({range:l},(D,S,P)=>(h++,P.delete()));a.push(_.next(()=>{Tt(1===h)}));const E=[];for(const D of t.mutations){const S=ZI(e,D.key.path,t.batchId);a.push(i.delete(S)),E.push(D.key)}return fe.waitFor(a).next(()=>E)}function kp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}ji.DEFAULT_COLLECTION_PERCENTILE=10,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ji.DEFAULT=new ji(41943040,ji.DEFAULT_COLLECTION_PERCENTILE,ji.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ji.DISABLED=new ji(-1,0,0);class p_{constructor(e,t,r,i){this.userId=e,this.M=t,this.indexManager=r,this.referenceDelegate=i,this.ln={}}static Yt(e,t,r,i){Tt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new p_(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).Wt({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=kh(e),l=Cu(e);return l.add({}).next(h=>{Tt("number"==typeof h);const _=new Fw(h,t,r,i),E=function(P,U,z){const ye=z.baseMutations.map(_t=>n_(P.Jt,_t)),Ne=z.mutations.map(_t=>n_(P.Jt,_t));return{userId:U,batchId:z.batchId,localWriteTimeMs:z.localWriteTime.toMillis(),baseMutations:ye,mutations:Ne}}(this.M,this.userId,_),D=[];let S=new vn((P,U)=>Mt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=ZI(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(l.put(E)),D.push(a.put(U,Pw))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.ln[h]=_.keys()}),fe.waitFor(D).next(()=>_)})}lookupMutationBatch(e,t){return Cu(e).get(t).next(r=>r?(Tt(r.userId===this.userId),Mh(this.M,r)):null)}fn(e,t){return this.ln[t]?fe.resolve(this.ln[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.ln[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Cu(e).Wt({index:"userMutationsIndex",range:i},(l,h,_)=>{h.userId===this.userId&&(Tt(h.batchId>=r),a=Mh(this.M,h)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Cu(e).Wt({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Cu(e).qt("userMutationsIndex",t).next(r=>r.map(i=>Mh(this.M,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=s_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return kh(e).Wt({range:i},(l,h,_)=>{const[E,D,S]=l,P=ko(D);if(E===this.userId&&t.path.isEqual(P))return Cu(e).get(S).next(U=>{if(!U)throw nt();Tt(U.userId===this.userId),a.push(Mh(this.M,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);const i=[];return t.forEach(a=>{const l=s_(this.userId,a.path),h=IDBKeyRange.lowerBound(l),_=kh(e).Wt({range:h},(E,D,S)=>{const[P,U,z]=E,ye=ko(U);P===this.userId&&a.path.isEqual(ye)?r=r.add(z):S.done()});i.push(_)}),fe.waitFor(i).next(()=>this.dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=s_(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new vn(Mt);return kh(e).Wt({range:l},(_,E,D)=>{const[S,P,U]=_,z=ko(P);S===this.userId&&r.isPrefixOf(z)?z.length===i&&(h=h.add(U)):D.done()}).next(()=>this.dn(e,h))}dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Cu(e).get(a).next(l=>{if(null===l)throw nt();Tt(l.userId===this.userId),r.push(Mh(this.M,l))}))}),fe.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return ab(e.Ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this._n(t.batchId)}),fe.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}_n(e){delete this.ln[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return fe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return kh(e).Wt({range:r},(a,l,h)=>{if(a[0]===this.userId){const _=ko(a[1]);i.push(_)}else h.done()}).next(()=>{Tt(0===i.length)})})}containsKey(e,t){return ub(e,this.userId,t)}wn(e){return Si(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ub(n,e,t){const r=s_(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return kh(n).Wt({range:a,jt:!0},(h,_,E)=>{const[D,S,P]=h;D===e&&S===i&&(l=!0),E.done()}).next(()=>l)}function Cu(n){return Zr(n,"mutations")}function kh(n){return Zr(n,"documentMutations")}function Si(n){return Zr(n,"mutationQueues")}class to{constructor(e){this.mn=e}next(){return this.mn+=2,this.mn}static gn(){return new to(0)}static yn(){return new to(-1)}}class aA{constructor(e,t){this.referenceDelegate=e,this.M=t}allocateTargetId(e){return this.pn(e).next(t=>{const r=new to(t.highestTargetId);return t.highestTargetId=r.next(),this.In(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.pn(e).next(t=>bt.fromTimestamp(new mr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.pn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.pn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.In(e,i)))}addTargetData(e,t){return this.Tn(e,t).next(()=>this.pn(e).next(r=>(r.targetCount+=1,this.En(t,r),this.In(e,r))))}updateTargetData(e,t){return this.Tn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Oh(e).delete(t.targetId)).next(()=>this.pn(e)).next(r=>(Tt(r.targetCount>0),r.targetCount-=1,this.In(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Oh(e).Wt((l,h)=>{const _=qc(h);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>fe.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Oh(e).Wt((r,i)=>{const a=qc(i);t(a)})}pn(e){return uA(e).get("targetGlobalKey").next(t=>(Tt(null!==t),t))}In(e,t){return uA(e).put("targetGlobalKey",t)}Tn(e,t){return Oh(e).put(Nh(this.M,t))}En(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.pn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Vc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Oh(e).Wt({range:i,index:"queryTargetsIndex"},(l,h,_)=>{const E=qc(h);Ca(t,E.target)&&(a=E,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=no(e);return t.forEach(l=>{const h=Kr(l.path);i.push(a.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),fe.waitFor(i)}removeMatchingKeys(e,t,r){const i=no(e);return fe.forEach(t,a=>{const l=Kr(a.path);return fe.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=no(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=no(e);let a=cn();return i.Wt({range:r,jt:!0},(l,h,_)=>{const E=ko(l[1]),D=new Ge(E);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Kr(t.path),i=IDBKeyRange.bound([r],[sw(r)],!1,!0);let a=0;return no(e).Wt({index:"documentTargetsIndex",jt:!0,range:i},([l,h],_,E)=>{0!==l&&(a++,E.done())}).next(()=>a>0)}Et(e,t){return Oh(e).get(t).next(r=>r?qc(r):null)}}function Oh(n){return Zr(n,"targets")}function uA(n){return Zr(n,"targetGlobal")}function no(n){return Zr(n,"targetDocuments")}function Zc(n){return Op.apply(this,arguments)}function Op(){return Op=(0,_e.Z)(function*(n){if(n.code!==de.FAILED_PRECONDITION||n.message!==tb)throw n;Fe("LocalStore","Unexpectedly lost primary lease")}),Op.apply(this,arguments)}function lb([n,e],[t,r]){const i=Mt(n,t);return 0===i?Mt(e,r):i}class cb{constructor(e){this.An=e,this.buffer=new vn(lb),this.Rn=0}bn(){return++this.Rn}Pn(e){const t=[e,this.bn()];if(this.buffer.size<this.An)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();lb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lA{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.Vn=!1,this.vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Sn(e)}stop(){this.vn&&(this.vn.cancel(),this.vn=null)}get started(){return null!==this.vn}Sn(e){var t=this;const r=this.Vn?3e5:6e4;Fe("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,_e.Z)(function*(){t.vn=null,t.Vn=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){Fo(i)?Fe("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Zc(i)}yield t.Sn(e)}))}}class cA{constructor(e,t){this.Dn=e,this.params=t}calculateTargetCount(e,t){return this.Dn.Cn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return fe.resolve(Wr.A);const r=new cb(t);return this.Dn.forEachTarget(e,i=>r.Pn(i.sequenceNumber)).next(()=>this.Dn.xn(e,i=>r.Pn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Dn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Dn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector","Garbage collection skipped; disabled"),fe.resolve(zw)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),zw):this.Nn(e,t))}getCacheSize(e){return this.Dn.getCacheSize(e)}Nn(e,t){let r,i,a,l,h,_,E;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(E=Date.now(),hp()<=ki.in.DEBUG&&Fe("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(_-h)+`ms\n\tRemoved ${S} documents in `+(E-_)+`ms\nTotal Duration: ${E-D}ms`),fe.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class Kw{constructor(e,t){this.db=e,this.garbageCollector=new cA(this,t)}Cn(e){const t=this.kn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}kn(e){let t=0;return this.xn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}xn(e,t){return this.Mn(e,(r,i)=>t(i))}addReference(e,t,r){return Fp(e,r)}removeReference(e,t,r){return Fp(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Fp(e,t)}On(e,t){return function(r,i){let a=!1;return Si(r).zt(l=>ub(r,l,i).next(h=>(h&&(a=!0),fe.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Mn(e,(l,h)=>{if(h<=t){const _=this.On(e,l).next(E=>{if(!E)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,bt.min()),no(e).delete([0,Kr(l.path)])))});i.push(_)}}).next(()=>fe.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Fp(e,t)}Mn(e,t){const r=no(e);let i,a=Wr.A;return r.Wt({index:"documentTargetsIndex"},([l,h],{path:_,sequenceNumber:E})=>{0===l?(a!==Wr.A&&t(new Ge(ko(i)),a),a=E,i=_):a=Wr.A}).next(()=>{a!==Wr.A&&t(new Ge(ko(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fp(n,e){return no(n).put((r=n.currentSequenceNumber,{targetId:0,path:Kr(e.path),sequenceNumber:r}));var r}class Zw{constructor(){this.changes=new Ia(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Nn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?fe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class g_{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Tl(e).put(r)}removeEntry(e,t,r){return Tl(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],l_(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Fn(e,r)))}getEntry(e,t){let r=Nn.newInvalidDocument(t);return Tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lp(t))},(i,a)=>{r=this.$n(t,a)}).next(()=>r)}Bn(e,t){let r={size:0,document:Nn.newInvalidDocument(t)};return Tl(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Lp(t))},(i,a)=>{r={document:this.$n(t,a),size:kp(a)}}).next(()=>r)}getEntries(e,t){let r=Ts();return this.Ln(e,t,(i,a)=>{const l=this.$n(i,a);r=r.insert(i,l)}).next(()=>r)}Un(e,t){let r=Ts(),i=new Xn(Ge.comparator);return this.Ln(e,t,(a,l)=>{const h=this.$n(a,l);r=r.insert(a,h),i=i.insert(a,kp(l))}).next(()=>({documents:r,qn:i}))}Ln(e,t,r){if(t.isEmpty())return fe.resolve();let i=new vn(Vp);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(Lp(i.first()),Lp(i.last())),l=i.getIterator();let h=l.getNext();return Tl(e).Wt({index:"documentKeyIndex",range:a},(_,E,D)=>{const S=Ge.fromSegments([...E.prefixPath,E.collectionGroup,E.documentId]);for(;h&&Vp(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,E),h=l.hasNext()?l.getNext():null),h?D.Ut(Lp(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),l_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Tl(e).qt(IDBKeyRange.bound(i,a,!0)).next(l=>{let h=Ts();for(const _ of l){const E=this.$n(Ge.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);h=h.insert(E.key,E)}return h})}getAllFromCollectionGroup(e,t,r,i){let a=Ts();const l=Qw(t,r),h=Qw(t,eo.max());return Tl(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(_,E,D)=>{const S=this.$n(Ge.fromSegments(E.prefixPath.concat(E.collectionGroup,E.documentId)),E);a=a.insert(S.key,S),a.size===i&&D.done()}).next(()=>a)}newChangeBuffer(e){return new Yw(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return dA(e).get("remoteDocumentGlobalKey").next(t=>(Tt(!!t),t))}Fn(e,t){return dA(e).put("remoteDocumentGlobalKey",t)}$n(e,t){if(t){const r=function nA(n,e){let t;if(e.document)t=Rw(n.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ge.fromSegments(e.noDocument.path),i=Ti(e.noDocument.readTime);t=Nn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ge.fromSegments(e.unknownDocument.path),i=Ti(e.unknownDocument.version);t=Nn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new mr(r[0],r[1]);return bt.fromTimestamp(i)}(e.readTime)),t}(this.M,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return Nn.newInvalidDocument(e)}}class Yw extends Zw{constructor(e,t){super(),this.Kn=e,this.trackRemovals=t,this.Gn=new Ia(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new vn((a,l)=>Mt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.Gn.get(a);if(t.push(this.Kn.removeEntry(e,a,h.readTime)),l.isValidDocument()){const _=Rh(this.Kn.M,l);i=i.add(a.path.popLast()),r+=kp(_)-h.size,t.push(this.Kn.addEntry(e,a,_))}else if(r-=h.size,this.trackRemovals){const _=Rh(this.Kn.M,l.convertToNoDocument(bt.min()));t.push(this.Kn.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.Kn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Kn.updateMetadata(e,r)),fe.waitFor(t)}getFromCache(e,t){return this.Kn.Bn(e,t).next(r=>(this.Gn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Kn.Un(e,t).next(({documents:r,qn:i})=>(i.forEach((a,l)=>{this.Gn.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function dA(n){return Zr(n,"remoteDocumentGlobal")}function Tl(n){return Zr(n,"remoteDocumentsV14")}function Lp(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function Qw(n,e){const t=e.documentKey.path.toArray();return[n,l_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Vp(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=Mt(t[a],r[a]),i)return i;return i=Mt(t.length,r.length),i||(i=Mt(t[t.length-2],r[r.length-2]),i||Mt(t[t.length-1],r[r.length-1]))}class db{constructor(e){this.M=e}kt(e,t,r,i){const a=new a_("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nw,{unique:!0}),h.createObjectStore("documentMutations"),hb(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=fe.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),hb(e)),l=l.next(()=>function(h){const _=h.store("targetGlobal"),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:bt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",E)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,_){return _.store("mutations").qt().next(E=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Nw,{unique:!0});const D=_.store("mutations"),S=E.map(P=>D.put(P));return fe.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Qn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.jn(a)))),r<7&&i>=7&&(l=l.next(()=>this.Wn(a))),r<8&&i>=8&&(l=l.next(()=>this.zn(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.Hn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const _=h.createObjectStore("documentOverlays",{keyPath:JI});_.createIndex("collectionPathOverlayIndex",CM,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",XI,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const _=h.createObjectStore("remoteDocumentsV14",{keyPath:ZS});_.createIndex("documentKeyIndex",vM),_.createIndex("collectionGroupIndex",YS)}(e)).next(()=>this.Jn(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>{!function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:wM}).createIndex("sequenceNumberIndex",QI,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:JS}).createIndex("documentKeyIndex",EM,{unique:!1})}(e)})),l}jn(e){let t=0;return e.store("remoteDocuments").Wt((r,i)=>{t+=kp(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Qn(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.qt().next(i=>fe.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt("userMutationsIndex",l).next(h=>fe.forEach(h,_=>{Tt(_.userId===a.userId);const E=Mh(this.M,_);return ab(e,a.userId,E).next(()=>{})}))}))}Wn(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.Wt((l,h)=>{const _=new Nt(l),E=[0,Kr(_)];a.push(t.get(E).next(D=>D?fe.resolve():t.put({targetId:0,path:Kr(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>fe.waitFor(a))})}zn(e,t){e.createObjectStore("collectionParents",{keyPath:xh});const r=t.store("collectionParents"),i=new Ww,a=l=>{if(i.add(l)){const h=l.lastSegment(),_=l.popLast();return r.put({collectionId:h,parent:Kr(_)})}};return t.store("remoteDocuments").Wt({jt:!0},(l,h)=>{const _=new Nt(l);return a(_.popLast())}).next(()=>t.store("documentMutations").Wt({jt:!0},([l,h,_],E)=>{const D=ko(h);return a(D.popLast())}))}Hn(e){const t=e.store("targets");return t.Wt((r,i)=>{const a=qc(i),l=Nh(this.M,a);return t.put(l)})}Jn(e,t){const r=t.store("remoteDocuments"),i=[];return r.Wt((a,l)=>{const h=t.store("remoteDocumentsV14"),_=(E=l,E.document?new Ge(Nt.fromString(E.document.name).popFirst(5)):E.noDocument?Ge.fromSegments(E.noDocument.path):E.unknownDocument?Ge.fromSegments(E.unknownDocument.path):nt()).path.toArray();var E;const D={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>fe.waitFor(i))}}function hb(n){n.createObjectStore("targetDocuments",{keyPath:Ah}).createIndex("documentTargetsIndex",YI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",QS,{unique:!0}),n.createObjectStore("targetGlobal")}const Up="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Bp{constructor(e,t,r,i,a,l,h,_,E,D,S=13){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Yn=a,this.window=l,this.document=h,this.Xn=E,this.Zn=D,this.ts=S,this.es=null,this.ns=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ss=null,this.inForeground=!1,this.rs=null,this.os=null,this.us=Number.NEGATIVE_INFINITY,this.cs=P=>Promise.resolve(),!Bp.vt())throw new Me(de.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Kw(this,i),this.hs=t+"main",this.M=new ib(_),this.ls=new Oo(this.hs,this.ts,new db(this.M)),this.fs=new aA(this.referenceDelegate,this.M),this.ds=new g_(this.M),this._s=new c_,this.window&&this.window.localStorage?this.ws=this.window.localStorage:(this.ws=null,!1===D&&ur("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gs().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,Up);return this.ys(),this.ps(),this.Is(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.fs.getHighestSequenceNumber(e))}).then(e=>{this.es=new Wr(e,this.Xn)}).then(()=>{this.ns=!0}).catch(e=>(this.ls&&this.ls.close(),Promise.reject(e)))}Ts(e){var t=this;return this.cs=function(){var r=(0,_e.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ls.Ot(function(){var t=(0,_e.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Yn.enqueueAndForget((0,_e.Z)(function*(){t.started&&(yield t.gs())})))}gs(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>__(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Es(e).next(t=>{t||(this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)))})}).next(()=>this.As(e)).next(t=>this.isPrimary&&!t?this.Rs(e).next(()=>!1):!!t&&this.bs(e).next(()=>!0))).catch(e=>{if(Fo(e))return Fe("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Fe("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Yn.enqueueRetryable(()=>this.cs(e)),this.isPrimary=e})}Es(e){return m_(e).get("owner").next(t=>fe.resolve(this.Ps(t)))}Vs(e){return __(e).delete(this.clientId)}vs(){var e=this;return(0,_e.Z)(function*(){if(e.isPrimary&&!e.Ss(e.us,18e5)){e.us=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Zr(r,"clientMetadata");return i.qt().next(a=>{const l=e.Ds(a,18e5),h=a.filter(_=>-1===l.indexOf(_));return fe.forEach(h,_=>i.delete(_.clientId)).next(()=>h)})}).catch(()=>[]);if(e.ws)for(const r of t)e.ws.removeItem(e.Cs(r.clientId))}})()}Is(){this.os=this.Yn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gs().then(()=>this.vs()).then(()=>this.Is()))}Ps(e){return!!e&&e.ownerId===this.clientId}As(e){return this.Zn?fe.resolve(!0):m_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)){if(this.Ps(t)&&this.networkEnabled)return!0;if(!this.Ps(t)){if(!t.allowTabSynchronization)throw new Me(de.FAILED_PRECONDITION,Up);return!1}}return!(!this.networkEnabled||!this.inForeground)||__(e).qt().next(r=>void 0===this.Ds(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Fe("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,_e.Z)(function*(){e.ns=!1,e.Ns(),e.os&&(e.os.cancel(),e.os=null),e.ks(),e.Ms(),yield e.ls.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Ow(t,Wr.A);return e.Rs(r).next(()=>e.Vs(r))}),e.ls.close(),e.Os()})()}Ds(e,t){return e.filter(r=>this.Ss(r.updateTimeMs,t)&&!this.xs(r.clientId))}Fs(){return this.runTransaction("getActiveClients","readonly",e=>__(e).qt().next(t=>this.Ds(t,18e5).map(r=>r.clientId)))}get started(){return this.ns}getMutationQueue(e,t){return p_.Yt(e,this.M,t,this.referenceDelegate)}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getIndexManager(e){return new oA(e,this.M.Jt.databaseId)}getDocumentOverlayCache(e){return jw.Yt(this.M,e)}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=14===(l=this.ts)?eA:13===l?eb:12===l?XS:11===l?o_:void nt();var l;let h;return this.ls.runTransaction(e,i,a,_=>(h=new Ow(_,this.es?this.es.next():Wr.A),"readwrite-primary"===t?this.Es(h).next(E=>!!E||this.As(h)).next(E=>{if(!E)throw ur(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Yn.enqueueRetryable(()=>this.cs(!1)),new Me(de.FAILED_PRECONDITION,tb);return r(h)}).next(E=>this.bs(h).next(()=>E)):this.$s(h).next(()=>r(h)))).then(_=>(h.raiseOnCommittedEvent(),_))}$s(e){return m_(e).get("owner").next(t=>{if(null!==t&&this.Ss(t.leaseTimestampMs,5e3)&&!this.xs(t.ownerId)&&!this.Ps(t)&&!(this.Zn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(de.FAILED_PRECONDITION,Up)})}bs(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return m_(e).put("owner",t)}static vt(){return Oo.vt()}Rs(e){const t=m_(e);return t.get("owner").next(r=>this.Ps(r)?(Fe("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):fe.resolve())}Ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(ur(`Detected an update time that is in the future: ${e} > ${r}`),1))}ys(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.rs=()=>{this.Yn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gs()))},this.document.addEventListener("visibilitychange",this.rs),this.inForeground="visible"===this.document.visibilityState)}ks(){this.rs&&(this.document.removeEventListener("visibilitychange",this.rs),this.rs=null)}ps(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ss=()=>{this.Ns(),(0,k.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Yn.enterRestrictedMode(!0),this.Yn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ss))}Ms(){this.ss&&(this.window.removeEventListener("pagehide",this.ss),this.ss=null)}xs(e){var t;try{const r=null!==(null===(t=this.ws)||void 0===t?void 0:t.getItem(this.Cs(e)));return Fe("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return ur("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ns(){if(this.ws)try{this.ws.setItem(this.Cs(this.clientId),String(Date.now()))}catch(e){ur("Failed to set zombie client id.",e)}}Os(){if(this.ws)try{this.ws.removeItem(this.Cs(this.clientId))}catch(e){}}Cs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function m_(n){return Zr(n,"owner")}function __(n){return Zr(n,"clientMetadata")}function Jw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fb{constructor(e,t,r){this.ds=e,this.Bs=t,this.indexManager=r}Ls(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.Us(e,t,r))}Us(e,t,r){return this.ds.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}qs(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Ks(e,t){return this.ds.getEntries(e,t).next(r=>this.Gs(e,r).next(()=>r))}Gs(e,t){return this.Bs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.qs(t,r))}Qs(e,t,r){return Ge.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.js(e,t.path):mw(t)?this.Ws(e,t,r):this.zs(e,t,r);var i}js(e,t){return this.Ls(e,new Ge(t)).next(r=>{let i=Iw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ws(e,t,r){const i=t.collectionGroup;let a=Iw();return this.indexManager.getCollectionParents(e,i).next(l=>fe.forEach(l,h=>{const _=(E=t,D=h.child(i),new vu(D,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt));var E,D;return this.zs(e,_,r).next(E=>{E.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}zs(e,t,r){let i;return this.ds.getAllFromCollection(e,t.path,r).next(a=>(i=a,this.Bs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const _=h.key;let E=i.get(_);null==E&&(E=Nn.newInvalidDocument(_),i=i.insert(_,E)),Ew(h,E,l.localWriteTime),E.isFoundDocument()||(i=i.remove(_))}}).next(()=>(i.forEach((a,l)=>{zm(t,l)||(i=i.remove(a))}),i))}}class y_{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Hs=r,this.Js=i}static Ys(e,t){let r=cn(),i=cn();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new y_(e,t.fromCache,r,i)}}class pb{constructor(){this.Xs=!1}initialize(e,t){this.Zs=e,this.indexManager=t,this.Xs=!0}Qs(e,t,r,i){return this.ti(e,t).next(a=>a||this.ei(e,t,i,r)).next(a=>a||this.ni(e,t))}ti(e,t){return fe.resolve(null)}ei(e,t,r,i){return function II(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}(t)||i.isEqual(bt.min())?this.ni(e,t):this.Zs.Ks(e,r).next(a=>{const l=this.si(t,a);return this.ii(t,l,r,i)?this.ni(e,t):(hp()<=ki.in.DEBUG&&Fe("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ch(t)),this.ri(e,l,t,uw(i,-1)))})}si(e,t){let r=new vn(yw(e));return t.forEach((i,a)=>{zm(e,a)&&(r=r.add(a))}),r}ii(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}ni(e,t){return hp()<=ki.in.DEBUG&&Fe("QueryEngine","Using full collection scan to execute query:",Ch(t)),this.Zs.Qs(e,t,eo.min())}ri(e,t,r,i){return this.Zs.Qs(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class gb{constructor(e,t,r,i){this.persistence=e,this.oi=t,this.M=i,this.ui=new Xn(Mt),this.ai=new Ia(a=>Vc(a),Ca),this.ci=new Map,this.hi=e.getRemoteDocumentCache(),this.fs=e.getTargetCache(),this._s=e.getBundleCache(),this.li(r)}li(e){this.indexManager=this.persistence.getIndexManager(e),this.Bs=this.persistence.getMutationQueue(e,this.indexManager),this.fi=new fb(this.hi,this.Bs,this.indexManager),this.hi.setIndexManager(this.indexManager),this.oi.initialize(this.fi,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ui))}}function Xw(n,e,t,r){return new gb(n,e,t,r)}function mb(n,e){return e0.apply(this,arguments)}function e0(){return e0=(0,_e.Z)(function*(n,e){const t=Ze(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.Bs.getAllMutationBatches(r).next(a=>(i=a,t.li(e),t.Bs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let _=cn();for(const E of i){l.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}for(const E of a){h.push(E.batchId);for(const D of E.mutations)_=_.add(D.key)}return t.fi.Ks(r,_).next(E=>({di:E,removedBatchIds:l,addedBatchIds:h}))})})}),e0.apply(this,arguments)}function _b(n,e){const t=Ze(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.hi.newChangeBuffer({trackRemovals:!0});return function(l,h,_,E){const D=_.batch,S=D.keys();let P=fe.resolve();return S.forEach(U=>{P=P.next(()=>E.getEntry(h,U)).next(z=>{const ye=_.docVersions.get(U);Tt(null!==ye),z.version.compareTo(ye)<0&&(D.applyToRemoteDocument(z,_),z.isValidDocument()&&(z.setReadTime(_.commitVersion),E.addEntry(z)))})}),P.next(()=>l.Bs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.Bs.performConsistencyCheck(r)).next(()=>t.fi.Ks(r,i))})}function yb(n){const e=Ze(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.fs.getLastRemoteSnapshotVersion(t))}function vb(n,e){const t=Ze(n),r=e.snapshotVersion;let i=t.ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.hi.newChangeBuffer({trackRemovals:!0});i=t.ui;const h=[];e.targetChanges.forEach((E,D)=>{const S=i.get(D);if(!S)return;h.push(t.fs.removeMatchingKeys(a,E.removedDocuments,D).next(()=>t.fs.addMatchingKeys(a,E.addedDocuments,D)));let P=S.withSequenceNumber(a.currentSequenceNumber);var U,z,ye;e.targetMismatches.has(D)?P=P.withResumeToken(Nr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,r)),i=i.insert(D,P),z=P,ye=E,(0===(U=S).resumeToken.approximateByteSize()||z.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ye.addedDocuments.size+ye.modifiedDocuments.size+ye.removedDocuments.size>0)&&h.push(t.fs.updateTargetData(a,P))});let _=Ts();if(e.documentUpdates.forEach(E=>{e.resolvedLimboDocuments.has(E)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,E))}),h.push(t0(a,l,e.documentUpdates).next(E=>{_=E})),!r.isEqual(bt.min())){const E=t.fs.getLastRemoteSnapshotVersion(a).next(D=>t.fs.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(E)}return fe.waitFor(h).next(()=>l.apply(a)).next(()=>t.fi.Gs(a,_)).next(()=>_)}).then(a=>(t.ui=i,a))}function t0(n,e,t){let r=cn();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=Ts();return t.forEach((l,h)=>{const _=i.get(l);h.isNoDocument()&&h.version.isEqual(bt.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!_.isValidDocument()||h.version.compareTo(_.version)>0||0===h.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Fe("LocalStore","Ignoring outdated watch update for ",l,". Current version:",_.version," Watch version:",h.version)}),a})}function wb(n,e){const t=Ze(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.Bs.getNextMutationBatchAfterBatchId(r,e)))}function Yc(n,e){const t=Ze(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.fs.getTargetData(r,e).next(a=>a?(i=a,fe.resolve(i)):t.fs.allocateTargetId(r).next(l=>(i=new Il(e,l,0,r.currentSequenceNumber),t.fs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.ui=t.ui.insert(r.targetId,r),t.ai.set(e,r.targetId)),r})}function Fh(n,e,t){return n0.apply(this,arguments)}function n0(){return n0=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=r.ui.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Fo(l))throw l;Fe("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.ui=r.ui.remove(e),r.ai.delete(i.target)}),n0.apply(this,arguments)}function r0(n,e,t){const r=Ze(n);let i=bt.min(),a=cn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,_,E){const D=Ze(h),S=D.ai.get(E);return void 0!==S?fe.resolve(D.ui.get(S)):D.fs.getTargetData(_,E)}(r,l,Di(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.fs.getMatchingKeysForTargetId(l,h.targetId).next(_=>{a=_})}).next(()=>r.oi.Qs(l,e,t?i:bt.min(),t?a:cn())).next(h=>(fA(r,_w(e),h),{documents:h,_i:a})))}function s0(n,e){const t=Ze(n),r=Ze(t.fs),i=t.ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Et(a,e).next(l=>l?l.target:null))}function hA(n,e){const t=Ze(n),r=t.ci.get(e)||bt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.hi.getAllFromCollectionGroup(i,e,uw(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(fA(t,e,i),i))}function fA(n,e,t){let r=bt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.ci.set(e,r)}function Eb(){return Eb=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);let a=cn(),l=Ts();for(const E of t){const D=e.wi(E.metadata.name);E.document&&(a=a.add(D));const S=e.mi(E);S.setReadTime(e.gi(E.metadata.readTime)),l=l.insert(D,S)}const h=i.hi.newChangeBuffer({trackRemovals:!0}),_=yield Yc(i,(E=r,Di(Uc(Nt.fromString(`__bundle__/docs/${E}`)))));var E;return i.persistence.runTransaction("Apply bundle documents","readwrite",E=>t0(E,h,l).next(D=>(h.apply(E),D)).next(D=>i.fs.removeMatchingKeysForTargetId(E,_.targetId).next(()=>i.fs.addMatchingKeys(E,a,_.targetId)).next(()=>i.fi.Gs(E,D)).next(()=>D)))}),Eb.apply(this,arguments)}function DM(n,e){return Cb.apply(this,arguments)}function Cb(){return Cb=(0,_e.Z)(function*(n,e,t=cn()){const r=yield Yc(n,Di(Uw(e.bundledQuery))),i=Ze(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=yr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i._s.saveNamedQuery(a,e);const h=r.withResumeToken(Nr.EMPTY_BYTE_STRING,l);return i.ui=i.ui.insert(h.targetId,h),i.fs.updateTargetData(a,h).next(()=>i.fs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.fs.addMatchingKeys(a,t,r.targetId)).next(()=>i._s.saveNamedQuery(a,e))})}),Cb.apply(this,arguments)}class TM{constructor(e){this.M=e,this.yi=new Map,this.pi=new Map}getBundleMetadata(e,t){return fe.resolve(this.yi.get(t))}saveBundleMetadata(e,t){var r;return this.yi.set(t.id,{id:(r=t).id,version:r.version,createTime:yr(r.createTime)}),fe.resolve()}getNamedQuery(e,t){return fe.resolve(this.pi.get(t))}saveNamedQuery(e,t){return this.pi.set(t.name,{name:(r=t).name,query:Uw(r.bundledQuery),readTime:yr(r.readTime)}),fe.resolve();var r}}class SM{constructor(){this.overlays=new Xn(Ge.comparator),this.Ii=new Map}getOverlay(e,t){return fe.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.Xt(e,t,a)}),fe.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Ii.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Ii.delete(r)),fe.resolve()}getOverlaysForCollection(e,t,r){const i=bp(),a=t.length+1,l=new Ge(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const _=h.getNext().value,E=_.getKey();if(!t.isPrefixOf(E.path))break;E.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return fe.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Xn((E,D)=>E-D);const l=this.overlays.getIterator();for(;l.hasNext();){const E=l.getNext().value;if(E.getKey().getCollectionGroup()===t&&E.largestBatchId>r){let D=a.get(E.largestBatchId);null===D&&(D=bp(),a=a.insert(E.largestBatchId,D)),D.set(E.getKey(),E)}}const h=bp(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((E,D)=>h.set(E,D)),!(h.size()>=i)););return fe.resolve(h)}Xt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);if(null!==i){const l=this.Ii.get(i.largestBatchId).delete(r.key);this.Ii.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Vw(t,r));let a=this.Ii.get(t);void 0===a&&(a=cn(),this.Ii.set(t,a)),this.Ii.set(t,a.add(r.key))}}class Lh{constructor(){this.Ti=new vn(li.Ei),this.Ai=new vn(li.Ri)}isEmpty(){return this.Ti.isEmpty()}addReference(e,t){const r=new li(e,t);this.Ti=this.Ti.add(r),this.Ai=this.Ai.add(r)}bi(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Pi(new li(e,t))}Vi(e,t){e.forEach(r=>this.removeReference(r,t))}vi(e){const t=new Ge(new Nt([])),r=new li(t,e),i=new li(t,e+1),a=[];return this.Ai.forEachInRange([r,i],l=>{this.Pi(l),a.push(l.key)}),a}Si(){this.Ti.forEach(e=>this.Pi(e))}Pi(e){this.Ti=this.Ti.delete(e),this.Ai=this.Ai.delete(e)}Di(e){const t=new Ge(new Nt([])),r=new li(t,e),i=new li(t,e+1);let a=cn();return this.Ai.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new li(e,0),r=this.Ti.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class li{constructor(e,t){this.key=e,this.Ci=t}static Ei(e,t){return Ge.comparator(e.key,t.key)||Mt(e.Ci,t.Ci)}static Ri(e,t){return Mt(e.Ci,t.Ci)||Ge.comparator(e.key,t.key)}}class Ib{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.Bs=[],this.xi=1,this.Ni=new vn(li.Ei)}checkEmpty(e){return fe.resolve(0===this.Bs.length)}addMutationBatch(e,t,r,i){const a=this.xi;this.xi++;const l=new Fw(a,t,r,i);this.Bs.push(l);for(const h of i)this.Ni=this.Ni.add(new li(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return fe.resolve(l)}lookupMutationBatch(e,t){return fe.resolve(this.ki(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.Mi(t+1),a=i<0?0:i;return fe.resolve(this.Bs.length>a?this.Bs[a]:null)}getHighestUnacknowledgedBatchId(){return fe.resolve(0===this.Bs.length?-1:this.xi-1)}getAllMutationBatches(e){return fe.resolve(this.Bs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new li(t,0),i=new li(t,Number.POSITIVE_INFINITY),a=[];return this.Ni.forEachInRange([r,i],l=>{const h=this.ki(l.Ci);a.push(h)}),fe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new vn(Mt);return t.forEach(i=>{const a=new li(i,0),l=new li(i,Number.POSITIVE_INFINITY);this.Ni.forEachInRange([a,l],h=>{r=r.add(h.Ci)})}),fe.resolve(this.Oi(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ge.isDocumentKey(a)||(a=a.child(""));const l=new li(new Ge(a),0);let h=new vn(Mt);return this.Ni.forEachWhile(_=>{const E=_.key.path;return!!r.isPrefixOf(E)&&(E.length===i&&(h=h.add(_.Ci)),!0)},l),fe.resolve(this.Oi(h))}Oi(e){const t=[];return e.forEach(r=>{const i=this.ki(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Tt(0===this.Fi(t.batchId,"removed")),this.Bs.shift();let r=this.Ni;return fe.forEach(t.mutations,i=>{const a=new li(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Ni=r})}_n(e){}containsKey(e,t){const r=new li(t,0),i=this.Ni.firstAfterOrEqual(r);return fe.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return fe.resolve()}Fi(e,t){return this.Mi(e)}Mi(e){return 0===this.Bs.length?0:e-this.Bs[0].batchId}ki(e){const t=this.Mi(e);return t<0||t>=this.Bs.length?null:this.Bs[t]}}class o0{constructor(e){this.$i=e,this.docs=new Xn(Ge.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.$i(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return fe.resolve(r?r.document.mutableCopy():Nn.newInvalidDocument(t))}getEntries(e,t){let r=Ts();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():Nn.newInvalidDocument(i))}),fe.resolve(r)}getAllFromCollection(e,t,r){let i=Ts();const a=new Ge(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:_}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||lw(vI(_),r)<=0||(i=i.insert(_.key,_.mutableCopy()))}return fe.resolve(i)}getAllFromCollectionGroup(e,t,r,i){nt()}Bi(e,t){return fe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bb(this)}getSize(e){return fe.resolve(this.size)}}class bb extends Zw{constructor(e){super(),this.Kn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Kn.addEntry(e,i)):this.Kn.removeEntry(r)}),fe.waitFor(t)}getFromCache(e,t){return this.Kn.getEntry(e,t)}getAllFromCache(e,t){return this.Kn.getEntries(e,t)}}class Db{constructor(e){this.persistence=e,this.Li=new Ia(t=>Vc(t),Ca),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.Ui=0,this.qi=new Lh,this.targetCount=0,this.Ki=to.gn()}forEachTarget(e,t){return this.Li.forEach((r,i)=>t(i)),fe.resolve()}getLastRemoteSnapshotVersion(e){return fe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return fe.resolve(this.Ui)}allocateTargetId(e){return this.highestTargetId=this.Ki.next(),fe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ui&&(this.Ui=t),fe.resolve()}Tn(e){this.Li.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ki=new to(t),this.highestTargetId=t),e.sequenceNumber>this.Ui&&(this.Ui=e.sequenceNumber)}addTargetData(e,t){return this.Tn(t),this.targetCount+=1,fe.resolve()}updateTargetData(e,t){return this.Tn(t),fe.resolve()}removeTargetData(e,t){return this.Li.delete(t.target),this.qi.vi(t.targetId),this.targetCount-=1,fe.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.Li.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Li.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),fe.waitFor(a).next(()=>i)}getTargetCount(e){return fe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Li.get(t)||null;return fe.resolve(r)}addMatchingKeys(e,t,r){return this.qi.bi(t,r),fe.resolve()}removeMatchingKeys(e,t,r){this.qi.Vi(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),fe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.qi.vi(t),fe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.qi.Di(t);return fe.resolve(r)}containsKey(e,t){return fe.resolve(this.qi.containsKey(t))}}class AM{constructor(e,t){this.Gi={},this.overlays={},this.es=new Wr(0),this.ns=!1,this.ns=!0,this.referenceDelegate=e(this),this.fs=new Db(this),this.indexManager=new sA,this.ds=new o0(r=>this.referenceDelegate.Qi(r)),this.M=new ib(t),this._s=new TM(this.M)}start(){return Promise.resolve()}shutdown(){return this.ns=!1,Promise.resolve()}get started(){return this.ns}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Gi[e.toKey()];return r||(r=new Ib(t,this.referenceDelegate),this.Gi[e.toKey()]=r),r}getTargetCache(){return this.fs}getRemoteDocumentCache(){return this.ds}getBundleCache(){return this._s}runTransaction(e,t,r){Fe("MemoryPersistence","Starting transaction:",e);const i=new a0(this.es.next());return this.referenceDelegate.ji(),r(i).next(a=>this.referenceDelegate.Wi(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}zi(e,t){return fe.or(Object.values(this.Gi).map(r=>()=>r.containsKey(e,t)))}}class a0 extends nb{constructor(e){super(),this.currentSequenceNumber=e}}class v_{constructor(e){this.persistence=e,this.Hi=new Lh,this.Ji=null}static Yi(e){return new v_(e)}get Xi(){if(this.Ji)return this.Ji;throw nt()}addReference(e,t,r){return this.Hi.addReference(r,t),this.Xi.delete(r.toString()),fe.resolve()}removeReference(e,t,r){return this.Hi.removeReference(r,t),this.Xi.add(r.toString()),fe.resolve()}markPotentiallyOrphaned(e,t){return this.Xi.add(t.toString()),fe.resolve()}removeTarget(e,t){this.Hi.vi(t.targetId).forEach(i=>this.Xi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Xi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}ji(){this.Ji=new Set}Wi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return fe.forEach(this.Xi,r=>{const i=Ge.fromPath(r);return this.Zi(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.Ji=null,t.apply(e)))}updateLimboDocument(e,t){return this.Zi(e,t).next(r=>{r?this.Xi.delete(t.toString()):this.Xi.add(t.toString())})}Qi(e){return 0}Zi(e,t){return fe.or([()=>fe.resolve(this.Hi.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.zi(e,t)])}}function Tb(n,e){return`firestore_clients_${n}_${e}`}function u0(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Sb(n,e){return`firestore_targets_${n}_${e}`}class w_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static tr(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new w_(e,t,i.state,a):(ur("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jp{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static tr(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new jp(e,r.state,i):(ur("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}er(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static tr(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Xm();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=hI(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new Vh(e,a):(ur("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class l0{constructor(e,t){this.clientId=e,this.onlineState=t}static tr(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new l0(t.clientId,t.onlineState):(ur("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ab{constructor(){this.activeTargetIds=Xm()}nr(e){this.activeTargetIds=this.activeTargetIds.add(e)}sr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}er(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class xb{constructor(e,t,r,i,a){this.window=e,this.Yn=t,this.persistenceKey=r,this.ir=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.rr=this.ur.bind(this),this.ar=new Xn(Mt),this.started=!1,this.cr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.hr=Tb(this.persistenceKey,this.ir),this.lr=`firestore_sequence_number_${this.persistenceKey}`,this.ar=this.ar.insert(this.ir,new Ab),this.dr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this._r=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.wr=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.mr=`firestore_online_state_${this.persistenceKey}`,this.gr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.rr)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,_e.Z)(function*(){const t=yield e.syncEngine.Fs();for(const i of t){if(i===e.ir)continue;const a=e.getItem(Tb(e.persistenceKey,i));if(a){const l=Vh.tr(i,a);l&&(e.ar=e.ar.insert(l.clientId,l))}}e.yr();const r=e.storage.getItem(e.mr);if(r){const i=e.pr(r);i&&e.Ir(i)}for(const i of e.cr)e.ur(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.lr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Tr(this.ar)}isActiveQueryTarget(e){let t=!1;return this.ar.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Er(e,"pending")}updateMutationState(e,t,r){this.Er(e,t,r),this.Ar(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Sb(this.persistenceKey,e));if(r){const i=jp.tr(e,r);i&&(t=i.state)}}return this.Rr.nr(e),this.yr(),t}removeLocalQueryTarget(e){this.Rr.sr(e),this.yr()}isLocalQueryTarget(e){return this.Rr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Sb(this.persistenceKey,e))}updateQueryState(e,t,r){this.br(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ar(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Pr(e)}notifyBundleLoaded(e){this.Vr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.rr),this.removeItem(this.hr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Fe("SharedClientState","READ",e,t),t}setItem(e,t){Fe("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Fe("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ur(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Fe("SharedClientState","EVENT",r.key,r.newValue),r.key===this.hr)return void ur("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Yn.enqueueRetryable((0,_e.Z)(function*(){if(t.started){if(null!==r.key)if(t.dr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Sr(i,null)}{const i=t.Dr(r.key,r.newValue);if(i)return t.Sr(i.clientId,i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Cr(r.key,r.newValue);if(i)return t.Nr(i)}}else if(t.wr.test(r.key)){if(null!==r.newValue){const i=t.kr(r.key,r.newValue);if(i)return t.Mr(i)}}else if(r.key===t.mr){if(null!==r.newValue){const i=t.pr(r.newValue);if(i)return t.Ir(i)}}else if(r.key===t.lr){const i=function(a){let l=Wr.A;if(null!=a)try{const h=JSON.parse(a);Tt("number"==typeof h),l=h}catch(h){ur("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Wr.A&&t.sequenceNumberHandler(i)}else if(r.key===t.gr){const i=t.Or(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Fr(a)))}}else t.cr.push(r)}))}}get Rr(){return this.ar.get(this.ir)}yr(){this.setItem(this.hr,this.Rr.er())}Er(e,t,r){const i=new w_(this.currentUser,e,t,r),a=u0(this.persistenceKey,this.currentUser,e);this.setItem(a,i.er())}Ar(e){const t=u0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Pr(e){this.storage.setItem(this.mr,JSON.stringify({clientId:this.ir,onlineState:e}))}br(e,t,r){const i=Sb(this.persistenceKey,e),a=new jp(e,t,r);this.setItem(i,a.er())}Vr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.gr,t)}vr(e){const t=this.dr.exec(e);return t?t[1]:null}Dr(e,t){const r=this.vr(e);return Vh.tr(r,t)}Cr(e,t){const r=this._r.exec(e),i=Number(r[1]);return w_.tr(new ui(void 0!==r[2]?r[2]:null),i,t)}kr(e,t){const r=this.wr.exec(e),i=Number(r[1]);return jp.tr(i,t)}pr(e){return l0.tr(e)}Or(e){return JSON.parse(e)}Nr(e){var t=this;return(0,_e.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.$r(e.batchId,e.state,e.error);Fe("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Mr(e){return this.syncEngine.Br(e.targetId,e.state,e.error)}Sr(e,t){const r=t?this.ar.insert(e,t):this.ar.remove(e),i=this.Tr(this.ar),a=this.Tr(r),l=[],h=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||h.push(_)}),this.syncEngine.Lr(l,h).then(()=>{this.ar=r})}Ir(e){this.ar.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Tr(e){let t=Xm();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class pA{constructor(){this.Ur=new Ab,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Ur.nr(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Ur.sr(e)}isLocalQueryTarget(e){return this.Ur.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Ur.activeTargetIds}isActiveQueryTarget(e){return this.Ur.activeTargetIds.has(e)}start(){return this.Ur=new Ab,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class gA{Kr(e){}shutdown(){}}class Rb{constructor(){this.Gr=()=>this.Qr(),this.jr=()=>this.Wr(),this.zr=[],this.Hr()}Kr(e){this.zr.push(e)}shutdown(){window.removeEventListener("online",this.Gr),window.removeEventListener("offline",this.jr)}Hr(){window.addEventListener("online",this.Gr),window.addEventListener("offline",this.jr)}Qr(){Fe("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.zr)e(0)}Wr(){Fe("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.zr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const mA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class xM{constructor(e){this.Jr=e.Jr,this.Yr=e.Yr}Xr(e){this.Zr=e}eo(e){this.no=e}onMessage(e){this.so=e}close(){this.Yr()}send(e){this.Jr(e)}io(){this.Zr()}ro(e){this.no(e)}oo(e){this.so(e)}}class _A extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.uo=(e.ssl?"https":"http")+"://"+e.host,this.ao="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}co(e,t,r,i,a){const l=this.ho(e,t);Fe("RestConnection","Sending: ",l,r);const h={};return this.lo(h,i,a),this.fo(e,l,h,r).then(_=>(Fe("RestConnection","Received: ",_),_),_=>{throw ph("RestConnection",`${e} failed with error: `,_,"url: ",l,"request:",r),_})}_o(e,t,r,i,a){return this.co(e,t,r,i,a)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+fh,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}ho(e,t){return`${this.uo}/v1/${t}:${mA[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((a,l)=>{const h=new XC;h.listenOnce(QC.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case dp.NO_ERROR:const E=h.getResponseJson();Fe("Connection","XHR received:",JSON.stringify(E)),a(E);break;case dp.TIMEOUT:Fe("Connection",'RPC "'+e+'" timed out'),l(new Me(de.DEADLINE_EXCEEDED,"Request time out"));break;case dp.HTTP_ERROR:const D=h.getStatus();if(Fe("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(U){const z=U.toLowerCase().replace(/_/g,"-");return Object.values(de).indexOf(z)>=0?z:de.UNKNOWN}(S.status);l(new Me(P,S.message))}else l(new Me(de.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(de.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Fe("Connection",'RPC "'+e+'" completed.')}});const _=JSON.stringify(i);h.send(t,"POST",_,r,15)})}wo(e,t,r){const i=[this.uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=ZC(),l=YC(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new JC({})),this.lo(h.initMessageHeaders,t,r),(0,k.uI)()||(0,k.b$)()||(0,k.d)()||(0,k.w1)()||(0,k.Mn)()||(0,k.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const _=i.join("");Fe("Connection","Creating WebChannel: "+_,h);const E=a.createWebChannel(_,h);let D=!1,S=!1;const P=new xM({Jr:z=>{S?Fe("Connection","Not sending because WebChannel is closed:",z):(D||(Fe("Connection","Opening WebChannel transport."),E.open(),D=!0),Fe("Connection","WebChannel sending:",z),E.send(z))},Yr:()=>E.close()}),U=(z,ye,Ne)=>{z.listen(ye,_t=>{try{Ne(_t)}catch(ht){setTimeout(()=>{throw ht},0)}})};return U(E,hh.EventType.OPEN,()=>{S||Fe("Connection","WebChannel transport opened.")}),U(E,hh.EventType.CLOSE,()=>{S||(S=!0,Fe("Connection","WebChannel transport closed"),P.ro())}),U(E,hh.EventType.ERROR,z=>{S||(S=!0,ph("Connection","WebChannel transport errored:",z),P.ro(new Me(de.UNAVAILABLE,"The operation could not be completed")))}),U(E,hh.EventType.MESSAGE,z=>{var ye;if(!S){const Ne=z.data[0];Tt(!!Ne);const _t=Ne,ht=_t.error||(null===(ye=_t[0])||void 0===ye?void 0:ye.error);if(ht){Fe("Connection","WebChannel received error:",ht);const ot=ht.status;let it=function(Zt){const Qr=lr[Zt];if(void 0!==Qr)return kI(Qr)}(ot),Pt=ht.message;void 0===it&&(it=de.INTERNAL,Pt="Unknown error status: "+ot+" with message "+ht.message),S=!0,P.ro(new Me(it,Pt)),E.close()}else Fe("Connection","WebChannel received:",Ne),P.oo(Ne)}}),U(l,yS.STAT_EVENT,z=>{z.stat===iw.PROXY?Fe("Connection","Detected buffering proxy"):z.stat===iw.NOPROXY&&Fe("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.io()},0),P}}function E_(){return"undefined"!=typeof window?window:null}function C_(){return"undefined"!=typeof document?document:null}function Hi(n){return new BI(n,!0)}class c0{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Yn=e,this.timerId=t,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&Fe("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Yn.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class I_{constructor(e,t,r,i,a,l,h,_){this.Yn=e,this.Vo=r,this.vo=i,this.So=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=_,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new c0(e,t)}ko(){return 1===this.state||5===this.state||this.Mo()}Mo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,_e.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Mo()&&null===this.Co&&(this.Co=this.Yn.enqueueAfterDelay(this.Vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,_e.Z)(function*(){if(e.Mo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var r=this;return(0,_e.Z)(function*(){r.Uo(),r.qo(),r.No.cancel(),r.Do++,4!==e?r.No.reset():t&&t.code===de.RESOURCE_EXHAUSTED?(ur(t.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),r.No.Ao()):t&&t.code===de.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Ko(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.eo(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Do===t&&this.Qo(r,i)},r=>{e(()=>{const i=new Me(de.UNKNOWN,"Fetching auth token failed: "+r.message);return this.jo(i)})})}Qo(e,t){const r=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Xr(()=>{r(()=>(this.state=2,this.xo=this.Yn.enqueueAfterDelay(this.vo,1e4,()=>(this.Mo()&&(this.state=3),Promise.resolve())),this.listener.Xr()))}),this.stream.eo(i=>{r(()=>this.jo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.No.Ro((0,_e.Z)(function*(){e.state=0,e.start()}))}jo(e){return Fe("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Yn.enqueueAndForget(()=>this.Do===e?t():(Fe("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yA extends I_{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.M=a}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function $I(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:nt(),i=e.targetChange.targetIds||[],a=function(_,E){return _.N?(Tt(void 0===E||"string"==typeof E),Nr.fromBase64String(E||"")):(Tt(void 0===E||E instanceof Uint8Array),Nr.fromUint8Array(E||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(_){const E=void 0===_.code?de.UNKNOWN:kI(_.code);return new Me(E,_.message||"")}(l);t=new VI(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=ba(n,r.document.name),a=yr(r.document.updateTime),l=new bi({mapValue:{fields:r.document.fields}}),h=Nn.newFoundDocument(i,a,l);t=new e_(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=ba(n,r.document),a=r.readTime?yr(r.readTime):bt.min(),l=Nn.newNoDocument(i,a);t=new e_([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ba(n,r.document);t=new e_([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,a=new LS(r.count||0);t=new LI(r.targetId,a)}}var _;return t}(this.M,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?yr(a.readTime):bt.min()}(e);return this.listener.zo(t,r)}Ho(e){const t={};t.database=xp(this.M),t.addTarget=function(i,a){let l;const h=a.target;return l=dw(h)?{documents:GI(i,h)}:{query:Wc(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=jI(i,a.resumeToken):a.snapshotVersion.compareTo(bt.min())>0&&(l.readTime=Sp(i,a.snapshotVersion.toTimestamp())),l}(this.M,e);const r=function WS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return nt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Lo(t)}Jo(e){const t={};t.database=xp(this.M),t.removeTarget=e,this.Lo(t)}}class vA extends I_{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.M=a,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(Tt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function r_(n,e){return n&&n.length>0?(Tt(void 0!==e),n.map(t=>function(r,i){let a=yr(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=yr(i)),new Ym(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=yr(e.commitTime);return this.listener.tu(r,t)}return Tt(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=xp(this.M),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>n_(this.M,r))};this.Lo(t)}}class d0 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=r,this.M=i,this.su=!1}iu(){if(this.su)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}co(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So.co(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}_o(e,t,r){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.So._o(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===de.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(de.UNKNOWN,i.toString())})}terminate(){this.su=!0}}class Mb{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}au(){0===this.ru&&(this.cu("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.cu("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(ur(t),this.uu=!1):Fe("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class Nb{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=a,this.gu.Kr(h=>{r.enqueueAndForget((0,_e.Z)(function*(){var _;Jc(l)&&(Fe("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,_e.Z)(function*(E){const D=Ze(E);D.wu.add(4),yield Uh(D),D.yu.set("Unknown"),D.wu.delete(4),yield Hp(D)}),function(E){return _.apply(this,arguments)})(l))}))}),this.yu=new Mb(r,i)}}function Hp(n){return b_.apply(this,arguments)}function b_(){return b_=(0,_e.Z)(function*(n){if(Jc(n))for(const e of n.mu)yield e(!0)}),b_.apply(this,arguments)}function Uh(n){return h0.apply(this,arguments)}function h0(){return h0=(0,_e.Z)(function*(n){for(const e of n.mu)yield e(!1)}),h0.apply(this,arguments)}function D_(n,e){const t=Ze(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),p0(t)?T_(t):$p(t).Mo()&&Iu(t,e))}function Qc(n,e){const t=Ze(n),r=$p(t);t._u.delete(e),r.Mo()&&f0(t,e),0===t._u.size&&(r.Mo()?r.$o():Jc(t)&&t.yu.set("Unknown"))}function Iu(n,e){n.pu.Z(e.targetId),$p(n).Ho(e)}function f0(n,e){n.pu.Z(e),$p(n).Jo(e)}function T_(n){n.pu=new BS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>n._u.get(e)||null}),$p(n).start(),n.yu.au()}function p0(n){return Jc(n)&&!$p(n).ko()&&n._u.size>0}function Jc(n){return 0===Ze(n).wu.size}function Pb(n){n.pu=void 0}function wA(n){return g0.apply(this,arguments)}function g0(){return g0=(0,_e.Z)(function*(n){n._u.forEach((e,t)=>{Iu(n,e)})}),g0.apply(this,arguments)}function kb(n,e){return m0.apply(this,arguments)}function m0(){return m0=(0,_e.Z)(function*(n,e){Pb(n),p0(n)?(n.yu.lu(e),T_(n)):n.yu.set("Unknown")}),m0.apply(this,arguments)}function EA(n,e,t){return Ob.apply(this,arguments)}function Ob(){return Ob=(0,_e.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof VI&&2===e.state&&e.cause)try{yield(r=(0,_e.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i._u.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i._u.delete(h),i.pu.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Fe("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Bh(n,r)}else if(e instanceof e_?n.pu.ut(e):e instanceof LI?n.pu._t(e):n.pu.ht(e),!t.isEqual(bt.min()))try{const r=yield yb(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.pu.yt(a);return l.targetChanges.forEach((h,_)=>{if(h.resumeToken.approximateByteSize()>0){const E=i._u.get(_);E&&i._u.set(_,E.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const _=i._u.get(h);if(!_)return;i._u.set(h,_.withResumeToken(Nr.EMPTY_BYTE_STRING,_.snapshotVersion)),f0(i,h);const E=new Il(_.target,h,1,_.sequenceNumber);Iu(i,E)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Fe("RemoteStore","Failed to raise snapshot:",r),yield Bh(n,r)}var r}),Ob.apply(this,arguments)}function Bh(n,e,t){return S_.apply(this,arguments)}function S_(){return S_=(0,_e.Z)(function*(n,e,t){if(!Fo(e))throw e;n.wu.add(1),yield Uh(n),n.yu.set("Offline"),t||(t=()=>yb(n.localStore)),n.asyncQueue.enqueueRetryable((0,_e.Z)(function*(){Fe("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Hp(n)}))}),S_.apply(this,arguments)}function Fb(n,e){return e().catch(t=>Bh(n,t,e))}function jh(n){return A_.apply(this,arguments)}function A_(){return A_=(0,_e.Z)(function*(n){const e=Ze(n),t=Xc(e);let r=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;_0(e);)try{const i=yield wb(e.localStore,r);if(null===i){0===e.du.length&&t.$o();break}r=i.batchId,y0(e,i)}catch(i){yield Bh(e,i)}v0(e)&&Lb(e)}),A_.apply(this,arguments)}function _0(n){return Jc(n)&&n.du.length<10}function y0(n,e){n.du.push(e);const t=Xc(n);t.Mo()&&t.Xo&&t.Zo(e.mutations)}function v0(n){return Jc(n)&&!Xc(n).ko()&&n.du.length>0}function Lb(n){Xc(n).start()}function Vb(n){return x_.apply(this,arguments)}function x_(){return x_=(0,_e.Z)(function*(n){Xc(n).nu()}),x_.apply(this,arguments)}function CA(n){return w0.apply(this,arguments)}function w0(){return w0=(0,_e.Z)(function*(n){const e=Xc(n);for(const t of n.du)e.Zo(t.mutations)}),w0.apply(this,arguments)}function RM(n,e,t){return Ub.apply(this,arguments)}function Ub(){return Ub=(0,_e.Z)(function*(n,e,t){const r=n.du.shift(),i=Lw.from(r,e,t);yield Fb(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield jh(n)}),Ub.apply(this,arguments)}function Bb(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,_e.Z)(function*(n,e){var t;e&&Xc(n).Xo&&(yield(t=(0,_e.Z)(function*(r,i){if(Cw(a=i.code)&&a!==de.ABORTED){const l=r.du.shift();Xc(r).Fo(),yield Fb(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield jh(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),v0(n)&&Lb(n)}),E0.apply(this,arguments)}function jb(n,e){return C0.apply(this,arguments)}function C0(){return C0=(0,_e.Z)(function*(n,e){const t=Ze(n);t.asyncQueue.verifyOperationInProgress(),Fe("RemoteStore","RemoteStore received new credentials");const r=Jc(t);t.wu.add(3),yield Uh(t),r&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Hp(t)}),C0.apply(this,arguments)}function Hb(n,e){return $b.apply(this,arguments)}function $b(){return $b=(0,_e.Z)(function*(n,e){const t=Ze(n);e?(t.wu.delete(2),yield Hp(t)):e||(t.wu.add(2),yield Uh(t),t.yu.set("Unknown"))}),$b.apply(this,arguments)}function $p(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ze(e);return i.iu(),new yA(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:wA.bind(null,n),eo:kb.bind(null,n),zo:EA.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Iu.Fo(),p0(n)?T_(n):n.yu.set("Unknown")):(yield n.Iu.stop(),Pb(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function Xc(n){return n.Tu||(n.Tu=function(e,t,r){const i=Ze(e);return i.iu(),new vA(t,i.So,i.authCredentials,i.appCheckCredentials,i.M,r)}(n.datastore,n.asyncQueue,{Xr:Vb.bind(null,n),eo:Bb.bind(null,n),eu:CA.bind(null,n),tu:RM.bind(null,n)}),n.mu.push(function(){var e=(0,_e.Z)(function*(t){t?(n.Tu.Fo(),yield jh(n)):(yield n.Tu.stop(),n.du.length>0&&(Fe("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class Gb{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new Gb(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(de.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hh(n,e){if(ur("AsyncQueue",`${e}: ${n}`),Fo(n))return new Me(de.UNAVAILABLE,`${e}: ${n}`);throw n}class bu{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ge.comparator(t.key,r.key):(t,r)=>Ge.comparator(t.key,r.key),this.keyedMap=Iw(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new bu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bu)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new bu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Wb{constructor(){this.Eu=new Xn(Ge.comparator)}track(e){const t=e.doc.key,r=this.Eu.get(t);r?0!==e.type&&3===r.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==r.type?this.Eu=this.Eu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Eu=this.Eu.remove(t):1===e.type&&2===r.type?this.Eu=this.Eu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):nt():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,r)=>{e.push(r)}),e}}class $h{constructor(e,t,r,i,a,l,h,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=_}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new $h(e,t,bu.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class qb{constructor(){this.Ru=void 0,this.listeners=[]}}class ed{constructor(){this.queries=new Ia(e=>DI(e),yp),this.onlineState="Unknown",this.bu=new Set}}function R_(n,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new qb),i)try{a.Ru=yield t.onListen(r)}catch(l){const h=Hh(l,`Initialization of query '${Ch(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.Pu(t.onlineState),a.Ru&&e.Vu(a.Ru)&&Gh(t)}),Gp.apply(this,arguments)}function Wp(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),I0.apply(this,arguments)}function b0(n,e){const t=Ze(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.Vu(i)&&(r=!0);l.Ru=i}}r&&Gh(t)}function D0(n,e,t){const r=Ze(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Gh(n){n.bu.forEach(e=>{e.next()})}class zb{constructor(e,t,r){this.query=e,this.vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=r||{}}Vu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new $h(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.Su?this.Cu(e)&&(this.vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||!(this.options.ku&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=$h.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.Su=!0,this.vu.next(e)}}class MM{constructor(e,t){this.payload=e,this.byteLength=t}Mu(){return"metadata"in this.payload}}class IA{constructor(e){this.M=e}wi(e){return ba(this.M,e)}mi(e){return e.metadata.exists?Rw(this.M,e.document,!1):Nn.newNoDocument(this.wi(e.metadata.name),this.gi(e.metadata.readTime))}gi(e){return yr(e)}}class NM{constructor(e,t,r){this.Ou=e,this.localStore=t,this.M=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=T0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const r=Nt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new IA(this.M);for(const i of e)if(i.metadata.queries){const a=r.wi(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||cn()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,_e.Z)(function*(){const t=yield function bM(n,e,t,r){return Eb.apply(this,arguments)}(e.localStore,new IA(e.M),e.documents,e.Ou.id),r=e.$u(e.documents);for(const i of e.queries)yield DM(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function T0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Kb{constructor(e){this.key=e}}class Zb{constructor(e){this.key=e}}class Yb{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.current=!1,this.Ku=cn(),this.mutatedKeys=cn(),this.Gu=yw(e),this.Qu=new bu(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new Wb,i=t?t.Qu:this.Qu;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,E="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),U=zm(this.query,S)?S:null,z=!!P&&this.mutatedKeys.has(P.key),ye=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let Ne=!1;P&&U?P.data.isEqual(U.data)?z!==ye&&(r.track({type:3,doc:U}),Ne=!0):this.Hu(P,U)||(r.track({type:2,doc:U}),Ne=!0,(_&&this.Gu(U,_)>0||E&&this.Gu(U,E)<0)&&(h=!0)):!P&&U?(r.track({type:0,doc:U}),Ne=!0):P&&!U&&(r.track({type:1,doc:P}),Ne=!0,(_||E)&&(h=!0)),Ne&&(U?(l=l.add(U),a=ye?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{Qu:l,zu:r,ii:h,mutatedKeys:a}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const a=e.zu.Au();a.sort((E,D)=>function(S,P){const U=z=>{switch(z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return U(S)-U(P)}(E.type,D.type)||this.Gu(E.doc,D.doc)),this.Ju(r);const l=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,_=h!==this.qu;return this.qu=h,0!==a.length||_?{snapshot:new $h(this.query,e.Qu,i,a,e.mutatedKeys,0===h,_,!1),Xu:l}:{Xu:l}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Wb,mutatedKeys:this.mutatedKeys,ii:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=cn(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new Zb(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new Kb(r))}),t}ta(e){this.Uu=e._i,this.Ku=cn();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ea(){return $h.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu)}}class bA{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class Qb{constructor(e){this.key=e,this.na=!1}}class Jb{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.sa={},this.ia=new Ia(h=>DI(h),yp),this.ra=new Map,this.oa=new Set,this.ua=new Xn(Ge.comparator),this.aa=new Map,this.ca=new Lh,this.ha={},this.la=new Map,this.fa=to.yn(),this.onlineState="Unknown",this.da=void 0}get isPrimaryClient(){return!0===this.da}}function Xb(n,e){return S0.apply(this,arguments)}function S0(){return S0=(0,_e.Z)(function*(n,e){const t=Du(n);let r,i;const a=t.ia.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.ea();else{const l=yield Yc(t.localStore,Di(e));t.isPrimaryClient&&D_(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield A0(t,e,r,"current"===h)}return i}),S0.apply(this,arguments)}function A0(n,e,t,r){return M_.apply(this,arguments)}function M_(){return M_=(0,_e.Z)(function*(n,e,t,r){n._a=(D,S,P)=>{return(U=(0,_e.Z)(function*(z,ye,Ne,_t){let ht=ye.view.Wu(Ne);ht.ii&&(ht=yield r0(z.localStore,ye.query,!1).then(({documents:Pt})=>ye.view.Wu(Pt,ht)));const ot=_t&&_t.targetChanges.get(ye.targetId),it=ye.view.applyChanges(ht,z.isPrimaryClient,ot);return aD(z,ye.targetId,it.Xu),it.snapshot}),function(z,ye,Ne,_t){return U.apply(this,arguments)})(n,D,S,P);var U};const i=yield r0(n.localStore,e,!0),a=new Yb(e,i._i),l=a.Wu(i.documents),h=Tp.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),_=a.applyChanges(l,n.isPrimaryClient,h);aD(n,t,_.Xu);const E=new bA(e,t,a);return n.ia.set(e,E),n.ra.has(t)?n.ra.get(t).push(e):n.ra.set(t,[e]),_.snapshot}),M_.apply(this,arguments)}function x0(n,e){return eD.apply(this,arguments)}function eD(){return eD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=t.ia.get(e),i=t.ra.get(r.targetId);if(i.length>1)return t.ra.set(r.targetId,i.filter(a=>!yp(a,e))),void t.ia.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Qc(t.remoteStore,r.targetId),zp(t,r.targetId)}).catch(Zc))):(zp(t,r.targetId),yield Fh(t.localStore,r.targetId,!0))}),eD.apply(this,arguments)}function qp(){return qp=(0,_e.Z)(function*(n,e,t){const r=Kp(n);try{const i=yield function(a,l){const h=Ze(a),_=mr.now(),E=l.reduce((S,P)=>S.add(P.key),cn());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.fi.Ks(S,E).next(P=>{D=P;const U=[];for(const z of l){const ye=FS(z,D.get(z.key));null!=ye&&U.push(new El(z.key,ye,yI(ye.value.mapValue),_r.exists(!0)))}return h.Bs.addMutationBatch(S,_,U,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let _=a.ha[a.currentUser.toKey()];_||(_=new Xn(Mt)),_=_.insert(l,h),a.ha[a.currentUser.toKey()]=_}(r,i.batchId,t),yield u(r,i.changes),yield jh(r.remoteStore)}catch(i){const a=Hh(i,"Failed to persist write");t.reject(a)}}),qp.apply(this,arguments)}function nD(n,e){return R0.apply(this,arguments)}function R0(){return R0=(0,_e.Z)(function*(n,e){const t=Ze(n);try{const r=yield vb(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.aa.get(a);l&&(Tt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.na=!0:i.modifiedDocuments.size>0?Tt(l.na):i.removedDocuments.size>0&&(Tt(l.na),l.na=!1))}),yield u(t,r,e)}catch(r){yield Zc(r)}}),R0.apply(this,arguments)}function DA(n,e,t){const r=Ze(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ia.forEach((a,l)=>{const h=l.view.Pu(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=Ze(a);h.onlineState=l;let _=!1;h.queries.forEach((E,D)=>{for(const S of D.listeners)S.Pu(l)&&(_=!0)}),_&&Gh(h)}(r.eventManager,e),i.length&&r.sa.zo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function PM(n,e,t){return M0.apply(this,arguments)}function M0(){return M0=(0,_e.Z)(function*(n,e,t){const r=Ze(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.aa.get(e),a=i&&i.key;if(a){let l=new Xn(Ge.comparator);l=l.insert(a,Nn.newNoDocument(a,bt.min()));const h=cn().add(a),_=new Dp(bt.min(),new Map,new vn(Mt),l,h);yield nD(r,_),r.ua=r.ua.remove(a),r.aa.delete(e),o(r)}else yield Fh(r.localStore,e,!1).then(()=>zp(r,e,t)).catch(Zc)}),M0.apply(this,arguments)}function TA(n,e){return rD.apply(this,arguments)}function rD(){return rD=(0,_e.Z)(function*(n,e){const t=Ze(n),r=e.batch.batchId;try{const i=yield _b(t.localStore,e);oD(t,r,null),N0(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield u(t,i)}catch(i){yield Zc(i)}}),rD.apply(this,arguments)}function kM(n,e,t){return iD.apply(this,arguments)}function iD(){return iD=(0,_e.Z)(function*(n,e,t){const r=Ze(n);try{const i=yield function(a,l){const h=Ze(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let E;return h.Bs.lookupMutationBatch(_,l).next(D=>(Tt(null!==D),E=D.keys(),h.Bs.removeMutationBatch(_,D))).next(()=>h.Bs.performConsistencyCheck(_)).next(()=>h.fi.Ks(_,E))})}(r.localStore,e);oD(r,e,t),N0(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield u(r,i)}catch(i){yield Zc(i)}}),iD.apply(this,arguments)}function sD(){return sD=(0,_e.Z)(function*(n,e){const t=Ze(n);Jc(t.remoteStore)||Fe("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Ze(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.Bs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.la.get(r)||[];i.push(e),t.la.set(r,i)}catch(r){const i=Hh(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),sD.apply(this,arguments)}function N0(n,e){(n.la.get(e)||[]).forEach(t=>{t.resolve()}),n.la.delete(e)}function oD(n,e,t){const r=Ze(n);let i=r.ha[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.ha[r.currentUser.toKey()]=i}}function zp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.ra.get(e))n.ia.delete(r),t&&n.sa.wa(r,t);n.ra.delete(e),n.isPrimaryClient&&n.ca.vi(e).forEach(r=>{n.ca.containsKey(r)||SA(n,r)})}function SA(n,e){n.oa.delete(e.path.canonicalString());const t=n.ua.get(e);null!==t&&(Qc(n.remoteStore,t),n.ua=n.ua.remove(e),n.aa.delete(t),o(n))}function aD(n,e,t){for(const r of t)r instanceof Kb?(n.ca.addReference(r.key,e),s(n,r)):r instanceof Zb?(Fe("SyncEngine","Document no longer in limbo: "+r.key),n.ca.removeReference(r.key,e),n.ca.containsKey(r.key)||SA(n,r.key)):nt()}function s(n,e){const t=e.key,r=t.path.canonicalString();n.ua.get(t)||n.oa.has(r)||(Fe("SyncEngine","New document in limbo: "+t),n.oa.add(r),o(n))}function o(n){for(;n.oa.size>0&&n.ua.size<n.maxConcurrentLimboResolutions;){const e=n.oa.values().next().value;n.oa.delete(e);const t=new Ge(Nt.fromString(e)),r=n.fa.next();n.aa.set(r,new Qb(t)),n.ua=n.ua.insert(t,r),D_(n.remoteStore,new Il(Di(Uc(t.path)),r,2,Wr.A))}}function u(n,e,t){return c.apply(this,arguments)}function c(){return c=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[],l=[];var h;r.ia.isEmpty()||(r.ia.forEach((h,_)=>{l.push(r._a(_,e,t).then(E=>{if(E){r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,E.fromCache?"not-current":"current"),i.push(E);const D=y_.Ys(_.targetId,E);a.push(D)}}))}),yield Promise.all(l),r.sa.zo(i),yield(h=(0,_e.Z)(function*(_,E){const D=Ze(_);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>fe.forEach(E,P=>fe.forEach(P.Hs,U=>D.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>fe.forEach(P.Js,U=>D.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!Fo(S))throw S;Fe("LocalStore","Failed to update sequence numbers: "+S)}for(const S of E){const P=S.targetId;if(!S.fromCache){const U=D.ui.get(P),ye=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);D.ui=D.ui.insert(P,ye)}}}),function(_,E){return h.apply(this,arguments)})(r.localStore,a))}),c.apply(this,arguments)}function d(n,e){return p.apply(this,arguments)}function p(){return p=(0,_e.Z)(function*(n,e){const t=Ze(n);if(!t.currentUser.isEqual(e)){Fe("SyncEngine","User change. New user:",e.toKey());const r=yield mb(t.localStore,e);t.currentUser=e,(i=t).la.forEach(l=>{l.forEach(h=>{h.reject(new Me(de.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.la.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield u(t,r.di)}var i}),p.apply(this,arguments)}function v(n,e){const t=Ze(n),r=t.aa.get(e);if(r&&r.na)return cn().add(r.key);{let i=cn();const a=t.ra.get(e);if(!a)return i;for(const l of a){const h=t.ia.get(l);i=i.unionWith(h.view.ju)}return i}}function C(n,e){return I.apply(this,arguments)}function I(){return I=(0,_e.Z)(function*(n,e){const t=Ze(n),r=yield r0(t.localStore,e.query,!0),i=e.view.ta(r);return t.isPrimaryClient&&aD(t,e.targetId,i.Xu),i}),I.apply(this,arguments)}function x(n,e){return R.apply(this,arguments)}function R(){return R=(0,_e.Z)(function*(n,e){const t=Ze(n);return hA(t.localStore,e).then(r=>u(t,r))}),R.apply(this,arguments)}function L(n,e,t,r){return j.apply(this,arguments)}function j(){return j=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n),a=yield function(l,h){const _=Ze(l),E=Ze(_.Bs);return _.persistence.runTransaction("Lookup mutation documents","readonly",D=>E.fn(D,h).next(S=>S?_.fi.Ks(D,S):fe.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield jh(i.remoteStore):"acknowledged"===t||"rejected"===t?(oD(i,e,r||null),N0(i,e),h=e,Ze(Ze(i.localStore).Bs)._n(h)):nt(),yield u(i,a)):Fe("SyncEngine","Cannot apply mutation batch with id: "+e)}),j.apply(this,arguments)}function ve(){return ve=(0,_e.Z)(function*(n,e){const t=Ze(n);if(Du(t),Kp(t),!0===e&&!0!==t.da){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield Ve(t,r.toArray());t.da=!0,yield Hb(t.remoteStore,!0);for(const a of i)D_(t.remoteStore,a)}else if(!1===e&&!1!==t.da){const r=[];let i=Promise.resolve();t.ra.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(zp(t,l),Fh(t.localStore,l,!0))),Qc(t.remoteStore,l)}),yield i,yield Ve(t,r),function(a){const l=Ze(a);l.aa.forEach((h,_)=>{Qc(l.remoteStore,_)}),l.ca.Si(),l.aa=new Map,l.ua=new Xn(Ge.comparator)}(t),t.da=!1,yield Hb(t.remoteStore,!1)}}),ve.apply(this,arguments)}function Ve(n,e,t){return $e.apply(this,arguments)}function $e(){return $e=(0,_e.Z)(function*(n,e,t){const r=Ze(n),i=[],a=[];for(const l of e){let h;const _=r.ra.get(l);if(_&&0!==_.length){h=yield Yc(r.localStore,Di(_[0]));for(const E of _){const D=r.ia.get(E),S=yield C(r,D);S.snapshot&&a.push(S.snapshot)}}else{const E=yield s0(r.localStore,l);h=yield Yc(r.localStore,E),yield A0(r,et(E),l,!1)}i.push(h)}return r.sa.zo(a),i}),$e.apply(this,arguments)}function et(n){return pw(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Ae(n){const e=Ze(n);return Ze(Ze(e.localStore).persistence).Fs()}function gt(n,e,t,r){return jt.apply(this,arguments)}function jt(){return jt=(0,_e.Z)(function*(n,e,t,r){const i=Ze(n);if(i.da)return void Fe("SyncEngine","Ignoring unexpected query state notification.");const a=i.ra.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield hA(i.localStore,_w(a[0])),h=Dp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield u(i,l,h);break}case"rejected":yield Fh(i.localStore,e,!0),zp(i,e,r);break;default:nt()}}),jt.apply(this,arguments)}function dn(n,e,t){return $i.apply(this,arguments)}function $i(){return $i=(0,_e.Z)(function*(n,e,t){const r=Du(n);if(r.da){for(const i of e){if(r.ra.has(i)){Fe("SyncEngine","Adding an already active target "+i);continue}const a=yield s0(r.localStore,i),l=yield Yc(r.localStore,a);yield A0(r,et(a),l.targetId,!1),D_(r.remoteStore,l)}for(const i of t)r.ra.has(i)&&(yield Fh(r.localStore,i,!1).then(()=>{Qc(r.remoteStore,i),zp(r,i)}).catch(Zc))}}),$i.apply(this,arguments)}function Du(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=nD.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=v.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=PM.bind(null,e),e.sa.zo=b0.bind(null,e.eventManager),e.sa.wa=D0.bind(null,e.eventManager),e}function Kp(n){const e=Ze(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=TA.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kM.bind(null,e),e}class N_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,_e.Z)(function*(){t.M=Hi(e.databaseInfo.databaseId),t.sharedClientState=t.ga(e),t.persistence=t.ya(e),yield t.persistence.start(),t.gcScheduler=t.pa(e),t.localStore=t.Ia(e)})()}pa(e){return null}Ia(e){return Xw(this.persistence,new pb,e.initialUser,this.M)}ya(e){return new AM(v_.Yi,this.M)}ga(e){return new pA}terminate(){var e=this;return(0,_e.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class P_ extends N_{constructor(e,t,r){super(),this.Ta=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e),yield r.Ta.initialize(r,e),yield Kp(r.Ta.syncEngine),yield jh(r.Ta.remoteStore),yield r.persistence.Ts(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Ia(e){return Xw(this.persistence,new pb,e.initialUser,this.M)}pa(e){return new lA(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}ya(e){const t=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ji.withCacheSize(this.cacheSizeBytes):ji.DEFAULT;return new Bp(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,E_(),C_(),this.M,this.sharedClientState,!!this.forceOwnership)}ga(e){return new pA}}class k0 extends P_{constructor(e,t){super(e,t,!1),this.Ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,_e.Z)(function*(){yield t().call(r,e);const i=r.Ta.syncEngine;r.sharedClientState instanceof xb&&(r.sharedClientState.syncEngine={$r:L.bind(null,i),Br:gt.bind(null,i),Lr:dn.bind(null,i),Fs:Ae.bind(null,i),Fr:x.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ts(function(){var a=(0,_e.Z)(function*(l){yield function J(n,e){return ve.apply(this,arguments)}(r.Ta.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}ga(e){const t=E_();if(!xb.vt(t))throw new Me(de.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=Jw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new xb(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Zp{initialize(e,t){var r=this;return(0,_e.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>DA(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=d.bind(null,r.syncEngine),yield Hb(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ed}createDatastore(e){const t=Hi(e.databaseInfo.databaseId),r=new _A(e.databaseInfo);return new d0(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>DA(this.syncEngine,h,0),l=Rb.vt()?new Rb:new gA,new Nb(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,_,E){const D=new Jb(r,i,a,l,h,_);return E&&(D.da=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,_e.Z)(function*(t){const r=Ze(t);Fe("RemoteStore","RemoteStore shutting down."),r.wu.add(5),yield Uh(r),r.gu.shutdown(),r.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function k_(n,e=10240){let t=0;return{read:()=>(0,_e.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,_e.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Wh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ea(this.observer.next,e)}error(e){this.observer.error?this.Ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Aa(){this.muted=!0}Ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class O0{constructor(e,t){this.Ra=e,this.M=t,this.metadata=new Rr,this.buffer=new Uint8Array,this.ba=new TextDecoder("utf-8"),this.Pa().then(r=>{r&&r.Mu()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Ra.cancel()}getMetadata(){var e=this;return(0,_e.Z)(function*(){return e.metadata.promise})()}ma(){var e=this;return(0,_e.Z)(function*(){return yield e.getMetadata(),e.Pa()})()}Pa(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Va();if(null===t)return null;const r=e.ba.decode(t),i=Number(r);isNaN(i)&&e.va(`length string (${r}) is not valid number`);const a=yield e.Sa(i);return new MM(JSON.parse(a),t.length+i)})()}Da(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Va(){var e=this;return(0,_e.Z)(function*(){for(;e.Da()<0&&!(yield e.Ca()););if(0===e.buffer.length)return null;const t=e.Da();t<0&&e.va("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Sa(e){var t=this;return(0,_e.Z)(function*(){for(;t.buffer.length<e;)(yield t.Ca())&&t.va("Reached the end of bundle when more is expected.");const r=t.ba.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}va(e){throw this.Ra.cancel(),new Error(`Invalid bundle format: ${e}`)}Ca(){var e=this;return(0,_e.Z)(function*(){const t=yield e.Ra.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class IF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,_e.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(de.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,_e.Z)(function*(a,l){const h=Ze(a),_=xp(h.M)+"/documents",E={documents:l.map(U=>Gc(h.M,U))},D=yield h._o("BatchGetDocuments",_,E),S=new Map;D.forEach(U=>{const z=function GS(n,e){return"found"in e?function(t,r){Tt(!!r.found);const i=ba(t,r.found.name),a=yr(r.found.updateTime),l=new bi({mapValue:{fields:r.found.fields}});return Nn.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Tt(!!r.missing),Tt(!!r.readTime);const i=ba(t,r.missing),a=yr(r.readTime);return Nn.newNoDocument(i,a)}(n,e):nt()}(h.M,U);S.set(z.key.toString(),z)});const P=[];return l.forEach(U=>{const z=S.get(U.toString());Tt(!!z),P.push(z)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ip(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,_e.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ge.fromPath(i);e.mutations.push(new Jm(a,e.precondition(a)))}),yield(r=(0,_e.Z)(function*(i,a){const l=Ze(i),h=xp(l.M)+"/documents",_={writes:a.map(E=>n_(l.M,E))};yield l.co("Commit",h,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(de.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?_r.updateTime(t):_r.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Me(de.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return _r.updateTime(t)}return _r.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class bF{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.xa=r.maxAttempts,this.No=new c0(this.asyncQueue,"transaction_retry")}run(){this.xa-=1,this.Na()}Na(){var e=this;this.No.Ro((0,_e.Z)(function*(){const t=new IF(e.datastore),r=e.ka(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Ma(a)}))}).catch(i=>{e.Ma(i)})}))}ka(e){try{const t=this.updateFunction(e);return!_h(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ma(e){this.xa>0&&this.Oa(e)?(this.xa-=1,this.asyncQueue.enqueueAndForget(()=>(this.Na(),Promise.resolve()))):this.deferred.reject(e)}Oa(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Cw(t)}return!1}}class DF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=ui.UNAUTHENTICATED,this.clientId=uI.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,_e.Z)(function*(h){Fe("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Fe("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,_e.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(de.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Hh(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function FM(n,e){return AA.apply(this,arguments)}function AA(){return AA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Fe("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,_e.Z)(function*(a){r.isEqual(a)||(yield mb(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),AA.apply(this,arguments)}function LM(n,e){return xA.apply(this,arguments)}function xA(){return xA=(0,_e.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield RA(n);Fe("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>jb(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>jb(e.remoteStore,a)),n.onlineComponents=e}),xA.apply(this,arguments)}function RA(n){return MA.apply(this,arguments)}function MA(){return MA=(0,_e.Z)(function*(n){return n.offlineComponents||(Fe("FirestoreClient","Using default OfflineComponentProvider"),yield FM(n,new N_)),n.offlineComponents}),MA.apply(this,arguments)}function uD(n){return NA.apply(this,arguments)}function NA(){return NA=(0,_e.Z)(function*(n){return n.onlineComponents||(Fe("FirestoreClient","Using default OnlineComponentProvider"),yield LM(n,new Zp)),n.onlineComponents}),NA.apply(this,arguments)}function VM(n){return RA(n).then(e=>e.persistence)}function PA(n){return RA(n).then(e=>e.localStore)}function UM(n){return uD(n).then(e=>e.remoteStore)}function kA(n){return uD(n).then(e=>e.syncEngine)}function O_(n){return OA.apply(this,arguments)}function OA(){return OA=(0,_e.Z)(function*(n){const e=yield uD(n),t=e.eventManager;return t.onListen=Xb.bind(null,e.syncEngine),t.onUnlisten=x0.bind(null,e.syncEngine),t}),OA.apply(this,arguments)}function BM(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const E=new Wh({next:S=>{a.enqueueAndForget(()=>Wp(i,D));const P=S.docs.has(l);!P&&S.fromCache?_.reject(new Me(de.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new zb(Uc(l.path),E,{includeMetadataChanges:!0,ku:!0});return R_(i,D)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}function jM(n,e,t={}){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function(i,a,l,h,_){const E=new Wh({next:S=>{a.enqueueAndForget(()=>Wp(i,D)),S.fromCache&&"server"===h.source?_.reject(new Me(de.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),D=new zb(l,E,{includeMetadataChanges:!0,ku:!0});return R_(i,D)}(yield O_(n),n.asyncQueue,e,t,r)})),r.promise}const HM=new Map;function FA(n,e,t){if(!t)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $M(n,e,t,r){if(!0===e&&!0===r)throw new Me(de.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function GM(n){if(!Ge.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function WM(n){if(Ge.isDocumentKey(n))throw new Me(de.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function lD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function nn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(de.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=lD(n);throw new Me(de.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function qM(n,e){if(e<=0)throw new Me(de.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class zM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(de.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(de.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zM({}),this._settingsFrozen=!1,e instanceof wa?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(de.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new wa(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(de.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Mr;switch(t.type){case"gapi":const r=t.client;return Tt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new sI(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(de.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=HM.get(e);t&&(Fe("ComponentProvider","Removing Datastore"),HM.delete(e),t.terminate())}(this),Promise.resolve()}}class Wn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ls{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ls(this.firestore,e,this._query)}}class Sl extends ls{constructor(e,t,r){super(e,t,Uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Ge(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function KM(n,e,...t){if(n=(0,k.m9)(n),FA("collection","path",e),n instanceof F0){const r=Nt.fromString(e,...t);return WM(r),new Sl(n,null,r)}{if(!(n instanceof Wn||n instanceof Sl))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return WM(r),new Sl(n.firestore,null,r)}}function cD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=uI.R()),FA("doc","path",e),n instanceof F0){const r=Nt.fromString(e,...t);return GM(r),new Wn(n,null,new Ge(r))}{if(!(n instanceof Wn||n instanceof Sl))throw new Me(de.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(Nt.fromString(e,...t));return GM(r),new Wn(n.firestore,n instanceof Sl?n.converter:null,new Ge(r))}}function ZM(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Wn||n instanceof Sl)&&(e instanceof Wn||e instanceof Sl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function YM(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof ls&&e instanceof ls&&n.firestore===e.firestore&&yp(n._query,e._query)&&n.converter===e.converter}class FF{constructor(){this.Fa=Promise.resolve(),this.$a=[],this.Ba=!1,this.La=[],this.Ua=null,this.qa=!1,this.Ka=!1,this.Ga=[],this.No=new c0(this,"async_queue_retry"),this.Qa=()=>{const t=C_();t&&Fe("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=C_();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Qa)}get isShuttingDown(){return this.Ba}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ja(),this.Wa(e)}enterRestrictedMode(e){if(!this.Ba){this.Ba=!0,this.Ka=e||!1;const t=C_();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Qa)}}enqueue(e){if(this.ja(),this.Ba)return new Promise(()=>{});const t=new Rr;return this.Wa(()=>this.Ba&&this.Ka?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.$a.push(e),this.za()))}za(){var e=this;return(0,_e.Z)(function*(){if(0!==e.$a.length){try{yield e.$a[0](),e.$a.shift(),e.No.reset()}catch(t){if(!Fo(t))throw t;Fe("AsyncQueue","Operation failed with retryable error: "+t)}e.$a.length>0&&e.No.Ro(()=>e.za())}})()}Wa(e){const t=this.Fa.then(()=>(this.qa=!0,e().catch(r=>{throw this.Ua=r,this.qa=!1,ur("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.qa=!1,r))));return this.Fa=t,t}enqueueAfterDelay(e,t,r){this.ja(),this.Ga.indexOf(e)>-1&&(t=0);const i=Gb.createAndSchedule(this,e,t,r,a=>this.Ha(a));return this.La.push(i),i}ja(){this.Ua&&nt()}verifyOperationInProgress(){}Ja(){var e=this;return(0,_e.Z)(function*(){let t;do{t=e.Fa,yield t}while(t!==e.Fa)})()}Ya(e){for(const t of this.La)if(t.timerId===e)return!0;return!1}Xa(e){return this.Ja().then(()=>{this.La.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.La)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Ja()})}Za(e){this.Ga.push(e)}Ha(e){const t=this.La.indexOf(e);this.La.splice(t,1)}}function LA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class LF{constructor(){this._progressObserver={},this._taskCompletionResolver=new Rr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class er extends F0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new FF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||QM(this),this._firestoreClient.terminate()}}function Yr(n){return n._firestoreClient||QM(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function QM(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bS(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new DF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function JM(n,e,t){const r=new Rr;return n.asyncQueue.enqueue((0,_e.Z)(function*(){try{yield FM(n,t),yield LM(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===de.FAILED_PRECONDITION||a.code===de.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function XM(n){if(n._initialized||n._terminated)throw new Me(de.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class td{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(de.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Al{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Al(Nr.fromBase64String(e))}catch(t){throw new Me(de.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Al(Nr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yp{constructor(e){this._methodName=e}}class dD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(de.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(de.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Mt(this._lat,e._lat)||Mt(this._long,e._long)}}const zF=/^__.*__$/;class KF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new El(e,this.data,this.fieldMask,t,this.fieldTransforms):new Cp(e,this.data,t,this.fieldTransforms)}}class eN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new El(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function tN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class hD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.M=r,this.ignoreUndefinedProperties=i,void 0===a&&this.tc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ec(){return this.settings.ec}nc(e){return new hD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}sc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.rc(e),i}oc(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.nc({path:r,ic:!1});return i.tc(),i}uc(e){return this.nc({path:void 0,ic:!0})}ac(e){return gD(e,this.settings.methodName,this.settings.cc||!1,this.path,this.settings.hc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}tc(){if(this.path)for(let e=0;e<this.path.length;e++)this.rc(this.path.get(e))}rc(e){if(0===e.length)throw this.ac("Document fields must not be empty");if(tN(this.ec)&&zF.test(e))throw this.ac('Document fields cannot begin and end with "__"')}}class ZF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.M=r||Hi(e)}lc(e,t,r,i=!1){return new hD({ec:e,methodName:t,hc:r,path:fn.emptyPath(),ic:!1,cc:i},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Qp(n){const e=n._freezeSettings(),t=Hi(n._databaseId);return new ZF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function fD(n,e,t,r,i,a={}){const l=n.lc(a.merge||a.mergeFields?2:0,e,t,i);jA("Data must be an object, but it was:",l,r);const h=iN(r,l);let _,E;if(a.merge)_=new Pc(l.fieldMask),E=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=HA(e,S,t);if(!l.contains(P))throw new Me(de.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);oN(D,P)||D.push(P)}_=new Pc(D),E=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,E=l.fieldTransforms;return new KF(new bi(h),_,E)}class L0 extends Yp{_toFieldTransform(e){if(2!==e.ec)throw e.ac(1===e.ec?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof L0}}function nN(n,e,t){return new hD({ec:3,hc:e.settings.hc,methodName:n._methodName,ic:t},e.databaseId,e.M,e.ignoreUndefinedProperties)}class VA extends Yp{_toFieldTransform(e){return new Zm(e.path,new Bc)}isEqual(e){return e instanceof VA}}class YF extends Yp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=nN(this,e,!0),r=this.fc.map(a=>Jp(a,t)),i=new jc(r);return new Zm(e.path,i)}isEqual(e){return this===e}}class QF extends Yp{constructor(e,t){super(e),this.fc=t}_toFieldTransform(e){const t=nN(this,e,!0),r=this.fc.map(a=>Jp(a,t)),i=new Hc(r);return new Zm(e.path,i)}isEqual(e){return this===e}}class JF extends Yp{constructor(e,t){super(e),this.dc=t}_toFieldTransform(e){const t=new vp(e.M,TI(e.M,this.dc));return new Zm(e.path,t)}isEqual(e){return this===e}}function UA(n,e,t,r){const i=n.lc(1,e,t);jA("Data must be an object, but it was:",i,r);const a=[],l=bi.empty();Ii(r,(_,E)=>{const D=pD(e,_,t);E=(0,k.m9)(E);const S=i.oc(D);if(E instanceof L0)a.push(D);else{const P=Jp(E,S);null!=P&&(a.push(D),l.set(D,P))}});const h=new Pc(a);return new eN(l,h,i.fieldTransforms)}function BA(n,e,t,r,i,a){const l=n.lc(1,e,t),h=[HA(e,r,t)],_=[i];if(a.length%2!=0)throw new Me(de.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(HA(e,a[P])),_.push(a[P+1]);const E=[],D=bi.empty();for(let P=h.length-1;P>=0;--P)if(!oN(E,h[P])){const U=h[P];let z=_[P];z=(0,k.m9)(z);const ye=l.oc(U);if(z instanceof L0)E.push(U);else{const Ne=Jp(z,ye);null!=Ne&&(E.push(U),D.set(U,Ne))}}const S=new Pc(E);return new eN(D,S,l.fieldTransforms)}function rN(n,e,t,r=!1){return Jp(t,n.lc(r?4:3,e))}function Jp(n,e){if(sN(n=(0,k.m9)(n)))return jA("Unsupported field value:",e,n),iN(n,e);if(n instanceof Yp)return function(t,r){if(!tN(r.ec))throw r.ac(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ac(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.ic&&4!==e.ec)throw e.ac("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Jp(l,r.uc(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return TI(r.M,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=mr.fromDate(t);return{timestampValue:Sp(r.M,i)}}if(t instanceof mr){const i=new mr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Sp(r.M,i)}}if(t instanceof dD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Al)return{bytesValue:jI(r.M,t._byteString)};if(t instanceof Wn){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.ac(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Ap(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ac(`Unsupported field value: ${lD(t)}`)}(n,e)}function iN(n,e){const t={};return lI(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ii(n,(r,i)=>{const a=Jp(i,e.sc(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function sN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof mr||n instanceof dD||n instanceof Al||n instanceof Wn||n instanceof Yp)}function jA(n,e,t){if(!sN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=lD(t);throw e.ac("an object"===r?n+" a custom object":n+" "+r)}var r}function HA(n,e,t){if((e=(0,k.m9)(e))instanceof td)return e._internalPath;if("string"==typeof e)return pD(n,e);throw gD("Field path arguments must be of type string or ",n,!1,void 0,t)}const XF=new RegExp("[~\\*/\\[\\]]");function pD(n,e,t){if(e.search(XF)>=0)throw gD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new td(...e.split("."))._internalPath}catch(r){throw gD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Me(de.INVALID_ARGUMENT,h+n+_)}function oN(n,e){return n.some(t=>t.isEqual(e))}class V0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new eL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class eL extends V0{data(){return super.data()}}function mD(n,e){return"string"==typeof e?pD(n,e):e instanceof td?e._internalPath:e._delegate._internalPath}class Xp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nd extends V0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new U0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(mD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class U0 extends nd{data(e={}){return super.data(e)}}class qh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Xp(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new U0(this._firestore,this._userDataWriter,r.key,r,new Xp(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(de.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new U0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new U0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Xp(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,E=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),E=a.indexOf(l.doc.key)),{type:tL(l.type),doc:h,oldIndex:_,newIndex:E}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function tL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function aN(n,e){return n instanceof nd&&e instanceof nd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof qh&&e instanceof qh&&n._firestore===e._firestore&&YM(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function uN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Me(de.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class B0{}function zh(n,...e){for(const t of e)n=t._apply(n);return n}class nL extends B0{constructor(e,t,r){super(),this._c=e,this.wc=t,this.mc=r,this.type="where"}_apply(e){const t=Qp(e.firestore),r=function(i,a,l,h,_,E,D){let S;if(_.isKeyField()){if("array-contains"===E||"array-contains-any"===E)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if("in"===E||"not-in"===E){pN(D,E);const U=[];for(const z of D)U.push(fN(h,i,z));S={arrayValue:{values:U}}}else S=fN(h,i,D)}else"in"!==E&&"not-in"!==E&&"array-contains-any"!==E||pN(D,E),S=rN(l,"where",D,"in"===E||"not-in"===E);const P=zr.create(_,E,S);return function(U,z){if(z.S()){const Ne=gw(U);if(null!==Ne&&!Ne.isEqual(z.field))throw new Me(de.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Ne.toString()}' and '${z.field.toString()}'`);const _t=qm(U);null!==_t&&gN(0,z.field,_t)}const ye=function(Ne,_t){for(const ht of Ne.filters)if(_t.indexOf(ht.op)>=0)return ht.op;return null}(U,function(Ne){switch(Ne){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(z.op));if(null!==ye)throw new Me(de.INVALID_ARGUMENT,ye===z.op?`Invalid query. You cannot use more than one '${z.op.toString()}' filter.`:`Invalid query. You cannot use '${z.op.toString()}' filters with '${ye.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this._c,this.wc,this.mc);return new ls(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new vu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class iL extends B0{constructor(e,t){super(),this._c=e,this.gc=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(de.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new wn(i,a);return function(h,_){if(null===qm(h)){const E=gw(h);null!==E&&gN(0,E,_.field)}}(r,l),l}(e._query,this._c,this.gc);return new ls(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new vu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class lN extends B0{constructor(e,t,r){super(),this.type=e,this.yc=t,this.Ic=r}_apply(e){return new ls(e.firestore,e.converter,bI(e._query,this.yc,this.Ic))}}class cN extends B0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=hN(e,this.type,this.Tc,this.Ec);return new ls(e.firestore,e.converter,(i=t,new vu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class dN extends B0{constructor(e,t,r){super(),this.type=e,this.Tc=t,this.Ec=r}_apply(e){const t=hN(e,this.type,this.Tc,this.Ec);return new ls(e.firestore,e.converter,(i=t,new vu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function hN(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof V0)return function(i,a,l,h,_){if(!h)throw new Me(de.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const E=[];for(const D of Eh(i))if(D.field.isKeyField())E.push(vl(a,h.key));else{const S=h.data.field(D.field);if(kc(S))throw new Me(de.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Me(de.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}E.push(S)}return new Po(E,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Qp(n.firestore);return function(a,l,h,_,E,D){const S=a.explicitOrderBy;if(E.length>S.length)throw new Me(de.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<E.length;U++){const z=E[U];if(S[U].field.isKeyField()){if("string"!=typeof z)throw new Me(de.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof z}`);if(!mw(a)&&-1!==z.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${z}' contains a slash.`);const ye=a.path.child(Nt.fromString(z));if(!Ge.isDocumentKey(ye))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${ye}' is not because it contains an odd number of segments.`);const Ne=new Ge(ye);P.push(vl(l,Ne))}else{const ye=rN(h,_,z);P.push(ye)}}return new Po(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function fN(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Me(de.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mw(e)&&-1!==t.indexOf("/"))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(Nt.fromString(t));if(!Ge.isDocumentKey(r))throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return vl(n,new Ge(r))}if(t instanceof Wn)return vl(n,t._key);throw new Me(de.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${lD(t)}.`)}function pN(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(de.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function gN(n,e,t){if(!t.isEqual(e))throw new Me(de.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}const hL={maxAttempts:5};class $A{convertValue(e,t="none"){switch(Ea(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Jn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mu(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){const r={};return Ii(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new dD(Jn(e.latitude),Jn(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=dI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mh(e));default:return null}}convertTimestamp(e){const t=_l(e);return new mr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=Nt.fromString(e);Tt(i_(r));const i=new wa(r.get(1),r.get(3)),a=new Ge(r.popFirst(5));return i.isEqual(t)||ur(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function _D(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class fL extends $A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}class mN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Qp(e)}set(e,t,r){this._verifyNotCommitted();const i=Kh(e,this._firestore),a=_D(i.converter,t,r),l=fD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,_r.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=Kh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof td?BA(this._dataReader,"WriteBatch.update",a._key,t,r,i):UA(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,_r.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Kh(e,this._firestore);return this._mutations=this._mutations.concat(new Ip(t._key,_r.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(de.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Kh(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Me(de.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class eg extends $A{constructor(e){super(),this.firestore=e}convertBytes(e){return new Al(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,t)}}function _N(n,e,t){n=nn(n,Wn);const r=nn(n.firestore,er),i=_D(n.converter,e,t);return F_(r,[fD(Qp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,_r.none())])}function yN(n,e,t,...r){n=nn(n,Wn);const i=nn(n.firestore,er),a=Qp(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof td?BA(a,"updateDoc",n._key,e,t,r):UA(a,"updateDoc",n._key,e),F_(i,[l.toMutation(n._key,_r.exists(!0))])}function vN(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||LA(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(LA(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,E,D;if(n instanceof Wn)E=nn(n.firestore,er),D=Uc(n._key.path),_={next:S=>{e[l]&&e[l](GA(E,n,S))},error:e[l+1],complete:e[l+2]};else{const S=nn(n,ls);E=nn(S.firestore,er),D=S._query;const P=new eg(E);_={next:U=>{e[l]&&e[l](new qh(E,P,S,U))},error:e[l+1],complete:e[l+2]},uN(n._query)}return function(S,P,U,z){const ye=new Wh(z),Ne=new zb(P,ye,U);return S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return R_(yield O_(S),Ne)})),()=>{ye.Aa(),S.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return Wp(yield O_(S),Ne)}))}}(Yr(E),D,h,_)}function F_(n,e){return function(t,r){const i=new Rr;return t.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function tD(n,e,t){return qp.apply(this,arguments)}(yield kA(t),r,i)})),i.promise}(Yr(n),e)}function GA(n,e,t){const r=t.docs.get(e._key),i=new eg(n);return new nd(n,i,e._key,r,new Xp(t.hasPendingWrites,t.fromCache),e.converter)}class IL extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Qp(e)}get(e){const t=Kh(e,this._firestore),r=new fL(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new V0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new V0(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=Kh(e,this._firestore),a=_D(i.converter,t,r),l=fD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=Kh(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof td?BA(this._dataReader,"Transaction.update",a._key,t,r,i):UA(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=Kh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Kh(e,this._firestore),r=new eg(this._firestore);return super.get(e).then(i=>new nd(this._firestore,r,t._key,i._document,new Xp(!1,!1),t.converter))}}function WA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function EN(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function CN(){if(!function cI(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){fh=ii.SDK_VERSION,(0,ii._registerComponent)(new Es.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new er(i,new vS(t.getProvider("auth-internal")),new aI(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,ii.registerVersion)(eI,"3.4.9",n),(0,ii.registerVersion)(eI,"3.4.9","esm2017")}();class j0{constructor(e){this._delegate=e}static fromBase64String(e){return CN(),new j0(Al.fromBase64String(e))}static fromUint8Array(e){return EN(),new j0(Al.fromUint8Array(e))}toBase64(){return CN(),this._delegate.toBase64()}toUint8Array(){return EN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function qA(n){return function NL(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class PL{enableIndexedDbPersistence(e,t){return function UF(n,e){XM(n=nn(n,er));const t=Yr(n),r=n._freezeSettings(),i=new Zp;return JM(t,i,new P_(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function BF(n){XM(n=nn(n,er));const e=Yr(n),t=n._freezeSettings(),r=new Zp;return JM(e,r,new k0(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function jF(n){if(n._initialized&&!n._terminated)throw new Me(de.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Rr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,_e.Z)(function*(){try{yield(t=(0,_e.Z)(function*(r){if(!Oo.vt())return Promise.resolve();const i=r+"main";yield Oo.delete(i)}),function(r){return t.apply(this,arguments)})(Jw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class IN{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof wa||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ph("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function kF(n,e,t,r={}){var i;const a=(n=nn(n,F0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&ph("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=ui.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const _=r.mockUserToken.sub||r.mockUserToken.user_id;if(!_)throw new Me(de.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new ui(_)}n._authCredentials=new iI(new rI(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function $F(n){return function TF(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield VM(n),t=yield UM(n);return e.setNetworkEnabled(!0),function(r){const i=Ze(r);return i.wu.delete(0),Hp(i)}(t)}))}(Yr(n=nn(n,er)))}(this._delegate)}disableNetwork(){return function GF(n){return function SF(n){return n.asyncQueue.enqueue((0,_e.Z)(function*(){const e=yield VM(n),t=yield UM(n);return e.setNetworkEnabled(!1),(r=(0,_e.Z)(function*(i){const a=Ze(i);a.wu.add(0),yield Uh(a),a.yu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Yr(n=nn(n,er)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$M("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function HF(n){return function(e){const t=new Rr;return e.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return function OM(n,e){return sD.apply(this,arguments)}(yield kA(e),t)})),t.promise}(Yr(n=nn(n,er)))}(this._delegate)}onSnapshotsInSync(e){return function CL(n,e){return function RF(n,e){const t=new Wh(e);return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield O_(n),i=t,Ze(r).bu.add(i),void i.next();var r,i})),()=>{t.Aa(),n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return r=yield O_(n),i=t,void Ze(r).bu.delete(i);var r,i}))}}(Yr(n=nn(n,er)),LA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new L_(this,KM(this._delegate,e))}catch(t){throw Ss(t,"collection()","Firestore.collection()")}}doc(e){try{return new Da(this,cD(this._delegate,e))}catch(t){throw Ss(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new As(this,function OF(n,e){if(n=nn(n,F0),FA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(de.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ls(n,null,(t=e,new vu(Nt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ss(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function bL(n,e,t){n=nn(n,er);const r=Object.assign(Object.assign({},hL),t);return function(i){if(i.maxAttempts<1)throw new Me(de.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function MF(n,e,t){const r=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){const i=yield(a=n,uD(a).then(l=>l.datastore));var a;new bF(n.asyncQueue,i,t,e,r).run()})),r.promise}(Yr(n),i=>e(new IL(n,i)),r)}(this._delegate,t=>e(new bN(this,t)))}batch(){return Yr(this._delegate),new DN(new mN(this._delegate,e=>F_(this._delegate,e)))}loadBundle(e){return function WF(n,e){const t=Yr(n=nn(n,er)),r=new LF;return function NF(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,_=function(_,E){if(_ instanceof Uint8Array)return k_(_,E);if(_ instanceof ArrayBuffer)return k_(new Uint8Array(_),E);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new O0(_,l);var _}(t,Hi(e));n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){!function P0(n,e,t){const r=Ze(n);var i;(i=(0,_e.Z)(function*(a,l,h){try{const _=yield l.getMetadata();if(yield function(P,U){const z=Ze(P),ye=yr(U.createTime);return z.persistence.runTransaction("hasNewerBundle","readonly",Ne=>z._s.getBundleMetadata(Ne,U.id)).then(Ne=>!!Ne&&Ne.createTime.compareTo(ye)>=0)}(a.localStore,_))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);h._updateProgress(T0(_));const E=new NM(_,a.localStore,l.M);let D=yield l.ma();for(;D;){const P=yield E.Fu(D);P&&h._updateProgress(P),D=yield l.ma()}const S=yield E.complete();return yield u(a,S.Lu,void 0),yield function(P,U){const z=Ze(P);return z.persistence.runTransaction("Save bundle","readwrite",ye=>z._s.saveBundleMetadata(ye,U))}(a.localStore,_),h._completeWith(S.progress),Promise.resolve(S.Bu)}catch(_){return ph("SyncEngine",`Loading bundle failed with ${_}`),h._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kA(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function qF(n,e){return function PF(n,e){return n.asyncQueue.enqueue((0,_e.Z)(function*(){return function(t,r){const i=Ze(t);return i.persistence.runTransaction("Get named query","readonly",a=>i._s.getNamedQuery(a,r))}(yield PA(n),e)}))}(Yr(n=nn(n,er)),e).then(t=>t?new ls(n,null,t.query):null)}(this._delegate,e).then(t=>t?new As(this,t):null)}}class yD extends $A{constructor(e){super(),this.firestore=e}convertBytes(e){return new j0(new Al(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Da.forKey(t,this.firestore,null)}}class bN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}get(e){const t=ng(e);return this._delegate.get(t).then(r=>new H0(this._firestore,new nd(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=ng(e);return r?(WA("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ng(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ng(e);return this._delegate.delete(t),this}}class DN{constructor(e){this._delegate=e}set(e,t,r){const i=ng(e);return r?(WA("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=ng(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=ng(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class tg{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new U0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new $0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=tg.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new tg(e,new yD(e),t),i.set(t,a)),a}}tg.INSTANCES=new WeakMap;class Da{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Da(t,new Wn(t._delegate,r,new Ge(e)))}static forKey(e,t,r){return new Da(t,new Wn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new L_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new L_(this.firestore,KM(this._delegate,e))}catch(t){throw Ss(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Wn&&ZM(this._delegate,e)}set(e,t){t=WA("DocumentReference.set",t);try{return t?_N(this._delegate,e,t):_N(this._delegate,e)}catch(r){throw Ss(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?yN(this._delegate,e):yN(this._delegate,e,t,...r)}catch(i){throw Ss(i,"updateDoc()","DocumentReference.update()")}}delete(){return function wL(n){return F_(nn(n.firestore,er),[new Ip(n._key,_r.none())])}(this._delegate)}onSnapshot(...e){const t=TN(e),r=SN(e,i=>new H0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return vN(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function gL(n){n=nn(n,Wn);const e=nn(n.firestore,er),t=Yr(e),r=new eg(e);return function AF(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield function(_,E){const D=Ze(_);return D.persistence.runTransaction("read document","readonly",S=>D.fi.Ls(S,E))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(de.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const _=Hh(h,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield PA(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nd(e,r,n._key,i,new Xp(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function mL(n){n=nn(n,Wn);const e=nn(n.firestore,er);return BM(Yr(e),n._key,{source:"server"}).then(t=>GA(e,n,t))}(this._delegate):function pL(n){n=nn(n,Wn);const e=nn(n.firestore,er);return BM(Yr(e),n._key).then(t=>GA(e,n,t))}(this._delegate),t.then(r=>new H0(this.firestore,new nd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Da(this.firestore,this._delegate.withConverter(e?tg.getInstance(this.firestore,e):null))}}function Ss(n,e,t){return n.message=n.message.replace(e,t),n}function TN(n){for(const e of n)if("object"==typeof e&&!qA(e))return e;return{}}function SN(n,e){var t,r;let i;return i=qA(n[0])?n[0]:qA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class H0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Da(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return aN(this._delegate,e._delegate)}}class $0 extends H0{data(e){const t=this._delegate.data(e);return function nI(n,e){n||nt()}(void 0!==t),t}}class As{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new yD(e)}where(e,t,r){try{return new As(this.firestore,zh(this._delegate,function rL(n,e,t){const r=e,i=mD("where",n);return new nL(i,r,t)}(e,t,r)))}catch(i){throw Ss(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new As(this.firestore,zh(this._delegate,function sL(n,e="asc"){const t=e,r=mD("orderBy",n);return new iL(r,t)}(e,t)))}catch(r){throw Ss(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new As(this.firestore,zh(this._delegate,function oL(n){return qM("limit",n),new lN("limit",n,"F")}(e)))}catch(t){throw Ss(t,"limit()","Query.limit()")}}limitToLast(e){try{return new As(this.firestore,zh(this._delegate,function aL(n){return qM("limitToLast",n),new lN("limitToLast",n,"L")}(e)))}catch(t){throw Ss(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new As(this.firestore,zh(this._delegate,function uL(...n){return new cN("startAt",n,!0)}(...e)))}catch(t){throw Ss(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new As(this.firestore,zh(this._delegate,function lL(...n){return new cN("startAfter",n,!1)}(...e)))}catch(t){throw Ss(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new As(this.firestore,zh(this._delegate,function cL(...n){return new dN("endBefore",n,!1)}(...e)))}catch(t){throw Ss(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new As(this.firestore,zh(this._delegate,function dL(...n){return new dN("endAt",n,!0)}(...e)))}catch(t){throw Ss(t,"endAt()","Query.endAt()")}}isEqual(e){return YM(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function yL(n){n=nn(n,ls);const e=nn(n.firestore,er),t=Yr(e),r=new eg(e);return function xF(n,e){const t=new Rr;return n.asyncQueue.enqueueAndForget((0,_e.Z)(function*(){return(r=(0,_e.Z)(function*(i,a,l){try{const h=yield r0(i,a,!0),_=new Yb(a,h._i),E=_.Wu(h.documents),D=_.applyChanges(E,!1);l.resolve(D.snapshot)}catch(h){const _=Hh(h,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield PA(n),e,t);var r})),t.promise}(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function vL(n){n=nn(n,ls);const e=nn(n.firestore,er),t=Yr(e),r=new eg(e);return jM(t,n._query,{source:"server"}).then(i=>new qh(e,r,n,i))}(this._delegate):function _L(n){n=nn(n,ls);const e=nn(n.firestore,er),t=Yr(e),r=new eg(e);return uN(n._query),jM(t,n._query).then(i=>new qh(e,r,n,i))}(this._delegate),t.then(r=>new zA(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=TN(e),r=SN(e,i=>new zA(this.firestore,new qh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return vN(this._delegate,t,r)}withConverter(e){return new As(this.firestore,this._delegate.withConverter(e?tg.getInstance(this.firestore,e):null))}}class OL{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new $0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class zA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new As(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new $0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new OL(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new $0(this._firestore,r))})}isEqual(e){return aN(this._delegate,e._delegate)}}class L_ extends As{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Da(this.firestore,e):null}doc(e){try{return new Da(this.firestore,void 0===e?cD(this._delegate):cD(this._delegate,e))}catch(t){throw Ss(t,"doc()","CollectionReference.doc()")}}add(e){return function EL(n,e){const t=nn(n.firestore,er),r=cD(n),i=_D(n.converter,e);return F_(t,[fD(Qp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,_r.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Da(this.firestore,t))}isEqual(e){return ZM(this._delegate,e._delegate)}withConverter(e){return new L_(this.firestore,this._delegate.withConverter(e?tg.getInstance(this.firestore,e):null))}}function ng(n){return nn(n,Wn)}class KA{constructor(...e){this._delegate=new td(...e)}static documentId(){return new KA(fn.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof td&&this._delegate._internalPath.isEqual(e._internalPath)}}class rg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function TL(){return new VA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new rg(e)}static delete(){const e=function DL(){return new L0("deleteField")}();return e._methodName="FieldValue.delete",new rg(e)}static arrayUnion(...e){const t=function SL(...n){return new YF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new rg(t)}static arrayRemove(...e){const t=function AL(...n){return new QF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new rg(t)}static increment(e){const t=function xL(n){return new JF("increment",n)}(e);return t._methodName="FieldValue.increment",new rg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const FL={Firestore:IN,GeoPoint:dD,Timestamp:mr,Blob:j0,Transaction:bN,WriteBatch:DN,DocumentReference:Da,DocumentSnapshot:H0,Query:As,QueryDocumentSnapshot:$0,QuerySnapshot:zA,CollectionReference:L_,FieldPath:KA,FieldValue:rg,setLogLevel:function kL(n){!function tI(n){gu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function AN(n,e){return function UL(n,e=Bd.z){return new xn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function ZA(n,e){return AN(n,e).pipe((0,pt.U)(t=>({payload:t,type:"query"})))}function vD(n,e){return ZA(n,e).pipe(jf(void 0),Hf(),(0,pt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const _=i.find(D=>D.doc.ref.isEqual(l.ref)),E=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&E&&JSON.stringify(E.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function xN(n,e,t){return vD(n,t).pipe(hu((r,i)=>function jL(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function HL(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return YA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return YA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return YA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),cC(),(0,pt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function YA(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function RN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function VL(n){(function LL(n,e){n.INTERNAL.registerComponent(new Es.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},FL)))})(n,(e,t)=>new IN(e,t,new PL)),n.registerVersion("@firebase/firestore-compat","0.1.18")}(jd.Z);class MN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=vD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(jf(void 0),Hf(),Br(([r,i])=>i.length>0||!r),(0,pt.U)(([r,i])=>i),Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(hu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RN(e);return xN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return ZA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Ut.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Ut.iC)}add(e){return this.ref.add(e)}doc(e){return new NN(this.ref.doc(e),this.afs)}}class NN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=ON(r,t);return new MN(i,a,this.afs)}snapshotChanges(){return function BL(n,e){return AN(n,e).pipe(jf(void 0),Hf(),(0,pt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(Ut.iC)}}class $L{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?vD(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),Br(t=>t.length>0),Ut.iC):vD(this.query,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}auditTrail(e){return this.stateChanges(e).pipe(hu((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=RN(e);return xN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ut.iC)}valueChanges(e={}){return ZA(this.query,this.afs.schedulers.outsideAngular).pipe((0,pt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Ut.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(Ut.iC)}}const PN=new m.OlP("angularfire2.enableFirestorePersistence"),kN=new m.OlP("angularfire2.firestore.persistenceSettings"),GL=new m.OlP("angularfire2.firestore.settings"),WL=new m.OlP("angularfire2.firestore.use-emulator");function ON(n,e=(t=>t)){return{query:e(n),ref:n}}let FN=(()=>{class n{constructor(t,r,i,a,l,h,_,E,D,S,P,U,z,ye,Ne,_t,ht){this.schedulers=_;const ot=(0,Zn.on)(t,h,r),it=D;S&&lc(ot,h,P,z,ye,Ne,U,_t),[this.firestore,this.persistenceEnabled$]=(0,Zn.cc)(`${ot.name}.firestore`,"AngularFirestore",ot.name,()=>{const Pt=h.runOutsideAngular(()=>ot.firestore());if(a&&Pt.settings(a),it&&Pt.useEmulator(...it),i&&!$o(l)){const Zt=()=>{try{return(0,Jt.D)(Pt.enablePersistence(E||void 0).then(()=>!0,()=>!1))}catch(Qr){return"undefined"!=typeof console&&console.warn(Qr),ft(!1)}};return[Pt,h.runOutsideAngular(Zt)]}return[Pt,ft(!1)]},[a,it,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=ON(i,r),h=this.schedulers.ngZone.run(()=>a);return new MN(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new $L(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new NN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zn.Dh),m.LFG(Zn.xv,8),m.LFG(PN,8),m.LFG(GL,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(kN,8),m.LFG(WL,8),m.LFG(Ud,8),m.LFG(Ld,8),m.LFG(Wg,8),m.LFG(Vd,8),m.LFG(qg,8),m.LFG(uc,8),m.LFG(au,8),m.LFG(sl,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),qL=(()=>{class n{constructor(){ac.Z.registerVersion("angularfire",Ut.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:PN,useValue:!0},{provide:kN,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[FN]}),n})();var zL=O(5032);const LN="@firebase/database";let QA="";function UN(n){QA=n}class YL{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class QL{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const BN=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YL(e)}}catch(e){}return new QL},ig=BN("localStorage"),JA=BN("sessionStorage"),V_=new ki.Yd("@firebase/database"),jN=function(){let n=1;return function(){return n++}}(),HN=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},G0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=G0.apply(null,r):e+="object"==typeof r?(0,k.Pz)(r):r,e+=" "}return e};let sg=null,$N=!0;const GN=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(V_.logLevel=ki.in.VERBOSE,sg=V_.log.bind(V_),e&&JA.set("logging_enabled",!0)):"function"==typeof n?sg=n:(sg=null,JA.remove("logging_enabled"))},Ai=function(...n){if(!0===$N&&($N=!1,null===sg&&!0===JA.get("logging_enabled")&&GN(!0)),sg){const e=G0.apply(null,n);sg(e)}},W0=function(n){return function(...e){Ai(n,...e)}},XA=function(...n){const e="FIREBASE INTERNAL ERROR: "+G0(...n);V_.error(e)},xl=function(...n){const e=`FIREBASE FATAL ERROR: ${G0(...n)}`;throw V_.error(e),new Error(e)},cs=function(...n){const e="FIREBASE WARNING: "+G0(...n);V_.warn(e)},wD=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},rd="[MIN_NAME]",Rl="[MAX_NAME]",og=function(n,e){if(n===e)return 0;if(n===rd||e===Rl)return-1;if(e===rd||n===Rl)return 1;{const t=ED(n),r=ED(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},eV=function(n,e){return n===e?0:n<e?-1:1},q0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Pz)(e))},ex=function(n){if("object"!=typeof n||null===n)return(0,k.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Pz)(e[r]),t+=":",t+=ex(n[e[r]]);return t+="}",t},WN=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function xi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const qN=function(n){(0,k.hu)(!wD(n),"Invalid JSON number");const r=1023;let i,a,l,h,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const E=[];for(_=52;_;_-=1)E.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)E.push(a%2?1:0),a=Math.floor(a/2);E.push(i?1:0),E.reverse();const D=E.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(D.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},iV=new RegExp("^-?(0*)\\d{1,10}$"),zN=-2147483648,tx=2147483647,ED=function(n){if(iV.test(n)){const e=Number(n);if(e>=zN&&e<=tx)return e}return null},U_=function(n){try{n()}catch(e){setTimeout(()=>{throw cs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},z0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class oV{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){cs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class aV{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Ai("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',cs(e)}}let K0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const JN=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,tP="websocket",nP="long_polling";class rx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ig.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ig.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function rP(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===tP)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==nP)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function uV(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return xi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class lV{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const ix={},sx={};function ox(n){const e=n.toString();return ix[e]||(ix[e]=new lV),ix[e]}class dV{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&U_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Zh{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=W0(e),this.stats_=ox(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),rP(t,nP,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new dV(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ax((...a)=>{const[l,h,_,E,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&JN.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Zh.forceAllow_=!0}static forceDisallow(){Zh.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!Zh.forceAllow_&&(Zh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=WN(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ax{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=jN(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ax.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Ai("frame writing exception"),h.stack&&Ai(h.stack),Ai(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ai("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Ai("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let ID=null;"undefined"!=typeof MozWebSocket?ID=MozWebSocket:"undefined"!=typeof WebSocket&&(ID=WebSocket);let B_=(()=>{class n{constructor(t,r,i,a,l,h,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=W0(this.connId),this.stats_=ox(r),this.connURL=n.connectionURL_(r,h,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const h={v:"5"};return!(0,k.Yr)()&&"undefined"!=typeof location&&location.hostname&&JN.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),a&&(h.ac=a),l&&(h.p=l),rP(t,tP,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ig.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){const l={headers:{"User-Agent":`Firebase/5/${QA}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(l.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(l.headers["X-Firebase-AppCheck"]=this.appCheckToken);const h=process.env,_=0===this.connURL.indexOf("wss://")?h.HTTPS_PROXY||h.https_proxy:h.HTTP_PROXY||h.http_proxy;_&&(l.proxy={origin:_})}this.mySock=new ID(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==ID&&!n.forceDisallow_}static previouslyFailed(){return ig.isInMemoryStorage||!0===ig.get("previous_websocket_failure")}markConnectionHealthy(){ig.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=WN(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),cP=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Zh,B_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=B_&&B_.isAvailable();let i=r&&!B_.previouslyFailed();if(t.webSocketOnly&&(r||cs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[B_];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class _P{constructor(e,t,r,i,a,l,h,_,E,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=_,this.onKill_=E,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=W0("c:"+this.id+":"),this.transportManager_=new cP(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=z0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=q0("t",e),r=q0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=q0("t",e),r=q0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=q0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?XA("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):XA("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&cs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),z0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ig.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class yP{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class vP{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class bD extends vP{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new bD}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class mn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function hn(){return new mn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Yh(n){return n.pieces_.length-n.pieceNum_}function Pn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new mn(n.pieces_,e)}function lx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Z0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function CP(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new mn(e,0)}function tr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof mn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new mn(t,0)}function Wt(n){return n.pieceNum_>=n.pieces_.length}function xs(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return xs(Pn(n),Pn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function PV(n,e){const t=Z0(n,0),r=Z0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=og(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function cx(n,e){if(Yh(n)!==Yh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ta(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Yh(n)>Yh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class kV{constructor(e,t){this.errorPrefix_=t,this.parts_=Z0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);IP(this)}}function IP(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+ag(n))}function ag(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class dx extends vP{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new dx}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Y0=1e3;let TD,ug=(()=>{class n extends yP{constructor(t,r,i,a,l,h,_,E){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=_,this.authOverride_=E,this.id=n.nextPersistentConnectionId_++,this.log_=W0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Y0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,E&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");dx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&bD.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Pz)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const _=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,_,!1,null),r.resolve(_)):r.reject(_)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const E=_.d,D=_.s;n.warnOnListenWarnings_(E,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,E))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();cs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):XA("Unrecognized action received from server: "+(0,k.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Y0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,_e.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let _=!1,E=null;const D=function(){E?E.close():(_=!0,a())};t.realtime_={close:D,sendRequest:function(U){(0,k.hu)(E,"sendRequest call when we're not connected not allowed."),E.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,z]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?Ai("getToken() completed but was canceled"):(Ai("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=z&&z.token,E=new _P(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ye=>{cs(ye+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&cs(U),D())}}})()}interrupt(t){Ai("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Ai("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Y0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>ex(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new mn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Ai("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Ai("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+QA.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=bD.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class DD{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(rd,e),i=new zt(rd,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class TP extends DD{static get __EMPTY_NODE(){return TD}static set __EMPTY_NODE(e){TD=e}compare(e,t){return og(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(Rl,TD)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,TD)}toString(){return".key"}}const Ml=new TP;class SD{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let fx,Tu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:ro.EMPTY_NODE,this.right=null!=l?l:ro.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return ro.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ro.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ro{constructor(e,t=ro.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ro(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Tu.BLACK,null,null))}remove(e){return new ro(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Tu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new SD(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new SD(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new SD(this.root_,null,this.comparator_,!0,e)}}function $V(n,e){return og(n.name,e.name)}function hx(n,e){return og(n,e)}ro.EMPTY_NODE=new class HV{copy(e,t,r,i,a){return this}insert(e,t,r){return new Tu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const SP=function(n){return"number"==typeof n?"number:"+qN(n):"string:"+n},AP=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===fx||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===fx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xP,RP,MP,j_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AP(this.priorityNode_)}static set __childrenNodeConstructor(t){xP=t}static get __childrenNodeConstructor(){return xP}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Wt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Yh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Pn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+SP(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?qN(this.value_):this.value_,this.lazyHash_=HN(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const jn=new class zV extends DD{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?og(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(Rl,new j_("[PRIORITY-POST]",MP))}makePost(e,t){const r=RP(e);return new zt(t,new j_("[PRIORITY-POST]",r))}toString(){return".priority"}},KV=Math.log(2);class ZV{constructor(e){this.count=parseInt(Math.log(e+1)/KV,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const AD=function(n,e,t,r){n.sort(e);const i=function(_,E){const D=E-_;let S,P;if(0===D)return null;if(1===D)return S=n[_],P=t?t(S):S,new Tu(P,S.node,Tu.BLACK,null,null);{const U=parseInt(D/2,10)+_,z=i(_,U),ye=i(U+1,E);return S=n[U],P=t?t(S):S,new Tu(P,S.node,Tu.BLACK,z,ye)}},h=function(_){let E=null,D=null,S=n.length;const P=function(z,ye){const Ne=S-z,_t=S;S-=z;const ht=i(Ne+1,_t),ot=n[Ne],it=t?t(ot):ot;U(new Tu(it,ot.node,ye,null,ht))},U=function(z){E?(E.left=z,E=z):(D=z,E=z)};for(let z=0;z<_.count;++z){const ye=_.nextBitIsOne(),Ne=Math.pow(2,_.count-(z+1));ye?P(Ne,Tu.BLACK):(P(Ne,Tu.BLACK),P(Ne,Tu.RED))}return D}(new ZV(n.length));return new ro(r||e,h)};let px;const H_={};class id{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(H_&&jn,"ChildrenNode.ts has not been loaded"),px=px||new id({".priority":H_},{".priority":jn}),px}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ro?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Ml,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(zt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?AD(r,e.getCompare()):H_;const _=e.toString(),E=Object.assign({},this.indexSet_);E[_]=e;const D=Object.assign({},this.indexes_);return D[_]=h,new id(D,E)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===H_){if(l.isDefinedOn(e.node)){const h=[],_=t.getIterator(zt.Wrap);let E=_.getNext();for(;E;)E.name!==e.name&&h.push(E),E=_.getNext();return h.push(e),AD(h,l.getCompare())}return H_}{const h=t.get(e.name);let _=i;return h&&(_=_.remove(new zt(e.name,h))),_.insert(e,e.node)}});return new id(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===H_)return i;{const a=t.get(e.name);return a?i.remove(new zt(e.name,a)):i}});return new id(r,this.indexSet_)}}let Q0,Ot=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&AP(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Q0||(Q0=new n(new ro(hx),null,id.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Q0}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?Q0:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Pn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Q0:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Gt(t)||1===Yh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Pn(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(jn,(h,_)=>{r[h]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const _ in r)h[_]=r[_];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+SP(this.getPriority().val())+":"),this.forEachChild(jn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":HN(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new zt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===J0?-1:0}withIndex(t){if(t===Ml||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Ml||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(jn),a=r.getIterator(jn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===Ml?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const J0=new class YV extends Ot{constructor(){super(new ro(hx),Ot.EMPTY_NODE,id.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Ot.EMPTY_NODE}isEmpty(){return!1}};function cr(n,e=null){if(null===n)return Ot.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new j_(n,cr(e));if(n instanceof Array){let t=Ot.EMPTY_NODE;return xi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=cr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(cr(e))}{const t=[];let r=!1;if(xi(n,(l,h)=>{if("."!==l.substring(0,1)){const _=cr(h);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new zt(l,_)))}}),0===t.length)return Ot.EMPTY_NODE;const a=AD(t,$V,l=>l.name,hx);if(r){const l=AD(t,jn.getCompare());return new Ot(a,cr(e),new id({".priority":l},{".priority":jn}))}return new Ot(a,cr(e),id.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(rd,Ot.EMPTY_NODE)},MAX:{value:new zt(Rl,J0)}}),TP.__EMPTY_NODE=Ot.EMPTY_NODE,j_.__childrenNodeConstructor=Ot,function GV(n){fx=n}(J0),function qV(n){MP=n}(J0),function WV(n){RP=n}(cr);class gx extends DD{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!Wt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?og(e.name,t.name):a}makePost(e,t){const r=cr(e),i=Ot.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Ot.EMPTY_NODE.updateChild(this.indexPath_,J0);return new zt(Rl,e)}toString(){return Z0(this.indexPath_,0).join("/")}}const mx=new class JV extends DD{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?og(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=cr(e);return new zt(t,r)}toString(){return".value"}},$_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",XV=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=$_.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=$_.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),kP=function(n){if(n===""+tx)return"-";const e=ED(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Rl;const a=$_.charAt($_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},OP=function(n){if(n===""+zN)return rd;const e=ED(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+tx:(delete t[t.length-1],t.join("")):(t[t.length-1]=$_.charAt($_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function FP(n){return{type:"value",snapshotNode:n}}function G_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function X0(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function eE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class yx{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(X0(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(G_(t,r)):l.trackChildChange(eE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(jn,(i,a)=>{t.hasChild(i)||r.trackChildChange(X0(i,a))}),t.isLeafNode()||t.forEachChild(jn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(eE(i,a,l))}else r.trackChildChange(G_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Ot.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class tE{constructor(e){this.indexedFilter_=new yx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=tE.getStartPost_(e),this.endPost_=tE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new zt(t,r))||(r=Ot.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Ot.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Ot.EMPTY_NODE);const a=this;return t.forEachChild(jn,(l,h)=>{a.matches(new zt(l,h))||(i=i.updateImmediateChild(l,Ot.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class tU{constructor(e){this.rangedFilter_=new tE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new zt(t,r))||(r=Ot.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Ot.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Ot.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let _;if(_=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!_)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,_;if(i=t.withIndex(this.index_),i=i.updatePriority(Ot.EMPTY_NODE),this.reverse_){_=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(P,U)=>S(U,P)}else _=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let E=0,D=!1;for(;_.hasNext();){const S=_.getNext();!D&&h(a,S)<=0&&(D=!0),D&&E<this.limit_&&h(S,l)<=0?E++:i=i.updateImmediateChild(S.name,Ot.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const _=new zt(t,r),E=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(_);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,E,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,_);if(D&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(eE(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(X0(t,S));const ye=h.updateImmediateChild(t,Ot.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(G_(P.name,P.node)),ye.updateImmediateChild(P.name,P.node)):ye}}return r.isEmpty()?e:D&&l(E,_)>=0?(null!=a&&(a.trackChildChange(X0(E.name,E.node)),a.trackChildChange(G_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(E.name,Ot.EMPTY_NODE)):e}}class xD{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:rd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Rl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===jn}copy(){const e=new xD;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function wx(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function RD(n,e){const t=n.copy();return t.index_=e,t}function LP(n){const e={};if(n.isDefault())return e;let t;return n.index_===jn?t="$priority":n.index_===mx?t="$value":n.index_===Ml?t="$key":((0,k.hu)(n.index_ instanceof gx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Pz)(t),n.startSet_&&(e.startAt=(0,k.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,k.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,k.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,k.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function VP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==jn&&(e.i=n.index_.toString()),e}class MD extends yP{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=W0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=MD.getListenId_(e,r),h={};this.listens_[l]=h;const _=LP(e._queryParams);this.restRequest_(a+".json",_,(E,D)=>{let S=D;if(404===E&&(S=null,E=null),null===E&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===h){let P;P=E?401===E?"permission_denied":"rest_error:"+E:"ok",i(P,null)}})}unlisten(e,t){const r=MD.getListenId_(e,t);delete this.listens_[r]}get(e){const t=LP(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let _=null;if(h.status>=200&&h.status<300){try{_=(0,k.cI)(h.responseText)}catch(E){cs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,_)}else 401!==h.status&&404!==h.status&&cs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class aU{constructor(){this.rootNode_=Ot.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function ND(){return{value:null,children:new Map}}function W_(n,e,t){if(Wt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,ND()),W_(n.children.get(r),e=Pn(e),t)}}function Ex(n,e){if(Wt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(jn,(r,i)=>{W_(n,new mn(r),i)}),Ex(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Pn(e),n.children.has(t)&&Ex(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Cx(n,e,t){null!==n.value?t(e,n.value):function uU(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Cx(i,new mn(e.toString()+"/"+r),t)})}class lU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&xi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class hU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new lU(e);const r=1e4+2e4*Math.random();z0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;xi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),z0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Sa=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Sa||(Sa={})),Sa))();function Dx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class PD{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Sa.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Wt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new mn(e));return new PD(hn(),t,this.revert)}}return(0,k.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new PD(Pn(this.path),this.affectedTree,this.revert)}}class nE{constructor(e,t){this.source=e,this.path=t,this.type=Sa.LISTEN_COMPLETE}operationForChild(e){return Wt(this.path)?new nE(this.source,hn()):new nE(this.source,Pn(this.path))}}class lg{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Sa.OVERWRITE}operationForChild(e){return Wt(this.path)?new lg(this.source,hn(),this.snap.getImmediateChild(e)):new lg(this.source,Pn(this.path),this.snap)}}class q_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Sa.MERGE}operationForChild(e){if(Wt(this.path)){const t=this.children.subtree(new mn(e));return t.isEmpty()?null:t.value?new lg(this.source,hn(),t.value):new q_(this.source,hn(),t)}return(0,k.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new q_(this.source,Pn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Qh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Wt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class fU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function rE(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,_)=>function mU(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,_)),l.forEach(h=>{const _=function gU(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(E=>{E.respondsTo(h.type)&&e.push(E.createEvent(_,n.query_))})})}function kD(n,e){return{eventCache:n,serverCache:e}}function iE(n,e,t,r){return kD(new Qh(e,t,r),n.serverCache)}function BP(n,e,t,r){return kD(n.eventCache,new Qh(e,t,r))}function OD(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function cg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Tx;class Hn{constructor(e,t=(()=>(Tx||(Tx=new ro(eV)),Tx))()){this.value=e,this.children=t}static fromObject(e){let t=new Hn(null);return xi(e,(r,i)=>{t=t.set(new mn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:hn(),value:this.value};if(Wt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Pn(e),t);return null!=a?{path:tr(new mn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Wt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Pn(e)):new Hn(null)}}set(e,t){if(Wt(e))return new Hn(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new Hn(null)).set(Pn(e),t),l=this.children.insert(r,a);return new Hn(this.value,l)}}remove(e){if(Wt(e))return this.children.isEmpty()?new Hn(null):new Hn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Pn(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Hn(null):new Hn(this.value,a)}return this}}get(e){if(Wt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Pn(e)):null}}setTree(e,t){if(Wt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new Hn(null)).setTree(Pn(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Hn(this.value,l)}}fold(e){return this.fold_(hn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(tr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,hn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Wt(e))return null;{const a=Gt(e),l=this.children.get(a);return l?l.findOnPath_(Pn(e),tr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,hn(),t)}foreachOnPath_(e,t,r){if(Wt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Pn(e),tr(t,i),r):new Hn(null)}}foreach(e){this.foreach_(hn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(tr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Su{constructor(e){this.writeTree_=e}static empty(){return new Su(new Hn(null))}}function sE(n,e,t){if(Wt(e))return new Su(new Hn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=xs(i,e);return a=a.updateChild(l,t),new Su(n.writeTree_.set(i,a))}{const i=new Hn(t),a=n.writeTree_.setTree(e,i);return new Su(a)}}}function Sx(n,e,t){let r=n;return xi(t,(i,a)=>{r=sE(r,tr(e,i),a)}),r}function jP(n,e){if(Wt(e))return Su.empty();{const t=n.writeTree_.setTree(e,new Hn(null));return new Su(t)}}function Ax(n,e){return null!=dg(n,e)}function dg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(xs(t.path,e)):null}function HP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(jn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function Jh(n,e){if(Wt(e))return n;{const t=dg(n,e);return new Su(null!=t?new Hn(t):n.writeTree_.subtree(e))}}function xx(n){return n.writeTree_.isEmpty()}function z_(n,e){return $P(hn(),n.writeTree_,e)}function $P(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=$P(tr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(tr(n,".priority"),r)),t}}function FD(n,e){return KP(e,n)}function CU(n,e){if(n.snap)return Ta(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ta(tr(n.path,t),e))return!0;return!1}function bU(n){return n.visible}function GP(n,e,t){let r=Su.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)Ta(t,l)?(h=xs(t,l),r=sE(r,h,a.snap)):Ta(l,t)&&(h=xs(l,t),r=sE(r,hn(),a.snap.getChild(h)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ta(t,l))h=xs(t,l),r=Sx(r,h,a.children);else if(Ta(l,t))if(h=xs(l,t),Wt(h))r=Sx(r,hn(),a.children);else{const _=(0,k.DV)(a.children,Gt(h));if(_){const E=_.getChild(Pn(h));r=sE(r,hn(),E)}}}}}return r}function WP(n,e,t,r,i){if(r||i){const a=Jh(n.visibleWrites,e);return!i&&xx(a)?t:i||null!=t||Ax(a,hn())?z_(GP(n.allWrites,function(E){return(E.visible||i)&&(!r||!~r.indexOf(E.writeId))&&(Ta(E.path,e)||Ta(e,E.path))},e),t||Ot.EMPTY_NODE):null}{const a=dg(n.visibleWrites,e);if(null!=a)return a;{const l=Jh(n.visibleWrites,e);return xx(l)?t:null!=t||Ax(l,hn())?z_(l,t||Ot.EMPTY_NODE):null}}}function LD(n,e,t,r){return WP(n.writeTree,n.treePath,e,t,r)}function Rx(n,e){return function DU(n,e,t){let r=Ot.EMPTY_NODE;const i=dg(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(jn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Jh(n.visibleWrites,e);return t.forEachChild(jn,(l,h)=>{const _=z_(Jh(a,new mn(l)),h);r=r.updateImmediateChild(l,_)}),HP(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return HP(Jh(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function qP(n,e,t,r){return function TU(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=tr(e,t);if(Ax(n.visibleWrites,a))return null;{const l=Jh(n.visibleWrites,a);return xx(l)?i.getChild(t):z_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function VD(n,e){return function AU(n,e){return dg(n.visibleWrites,e)}(n.writeTree,tr(n.treePath,e))}function Mx(n,e,t){return function SU(n,e,t,r){const i=tr(e,t),a=dg(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?z_(Jh(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function zP(n,e){return KP(tr(n.treePath,e),n.writeTree)}function KP(n,e){return{treePath:n,writeTree:e}}class NU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,eE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,X0(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,G_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,eE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const ZP=new class PU{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Nx{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Qh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Mx(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:cg(this.viewCache_),a=function MU(n,e,t,r,i,a){return function xU(n,e,t,r,i,a,l){let h;const _=Jh(n.visibleWrites,e),E=dg(_,hn());if(null!=E)h=E;else{if(null==t)return[];h=z_(_,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=P.getNext();for(;U&&D.length<i;)0!==S(U,r)&&D.push(U),U=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function YP(n,e,t,r,i,a){const l=e.eventCache;if(null!=VD(r,t))return e;{let h,_;if(Wt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const E=cg(e),S=Rx(r,E instanceof Ot?E:Ot.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const E=LD(r,cg(e));h=n.filter.updateFullNode(e.eventCache.getNode(),E,a)}else{const E=Gt(t);if(".priority"===E){(0,k.hu)(1===Yh(t),"Can't have a priority with additional path components");const D=l.getNode();_=e.serverCache.getNode();const S=qP(r,t,D,_);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Pn(t);let S;if(l.isCompleteForChild(E)){_=e.serverCache.getNode();const P=qP(r,t,l.getNode(),_);S=null!=P?l.getNode().getImmediateChild(E).updateChild(D,P):l.getNode().getImmediateChild(E)}else S=Mx(r,E,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),E,S,D,i,a):l.getNode()}}return iE(e,h,l.isFullyInitialized()||Wt(t),n.filter.filtersNodes())}}function UD(n,e,t,r,i,a,l,h){const _=e.serverCache;let E;const D=l?n.filter:n.filter.getIndexedFilter();if(Wt(t))E=D.updateFullNode(_.getNode(),r,null);else if(D.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);E=D.updateFullNode(_.getNode(),U,null)}else{const U=Gt(t);if(!_.isCompleteForPath(t)&&Yh(t)>1)return e;const z=Pn(t),Ne=_.getNode().getImmediateChild(U).updateChild(z,r);E=".priority"===U?D.updatePriority(_.getNode(),Ne):D.updateChild(_.getNode(),U,Ne,z,ZP,null)}const S=BP(e,E,_.isFullyInitialized()||Wt(t),D.filtersNodes());return YP(n,S,t,i,new Nx(i,S,a),h)}function Px(n,e,t,r,i,a,l){const h=e.eventCache;let _,E;const D=new Nx(i,e,a);if(Wt(t))E=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=iE(e,E,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)E=n.filter.updatePriority(e.eventCache.getNode(),r),_=iE(e,E,h.isFullyInitialized(),h.isFiltered());else{const P=Pn(t),U=h.getNode().getImmediateChild(S);let z;if(Wt(P))z=r;else{const ye=D.getCompleteChild(S);z=null!=ye?".priority"===lx(P)&&ye.getChild(CP(P)).isEmpty()?ye:ye.updateChild(P,r):Ot.EMPTY_NODE}_=U.equals(z)?e:iE(e,n.filter.updateChild(h.getNode(),S,z,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return _}function QP(n,e){return n.eventCache.isCompleteForChild(e)}function JP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function kx(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let E,_=e;E=Wt(t)?r:new Hn(null).setTree(t,r);const D=e.serverCache.getNode();return E.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const z=JP(0,e.serverCache.getNode().getImmediateChild(S),P);_=UD(n,_,new mn(S),z,i,a,l,h)}}),E.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!U){const ye=JP(0,e.serverCache.getNode().getImmediateChild(S),P);_=UD(n,_,new mn(S),ye,i,a,l,h)}}),_}class HU{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new yx(r.getIndex()),a=function nU(n){return n.loadsAllData()?new yx(n.getIndex()):n.hasLimit()?new tU(n):new tE(n)}(r);this.processor_=function kU(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,_=i.updateFullNode(Ot.EMPTY_NODE,l.getNode(),null),E=a.updateFullNode(Ot.EMPTY_NODE,h.getNode(),null),D=new Qh(_,l.isFullyInitialized(),i.filtersNodes()),S=new Qh(E,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=kD(S,D),this.eventGenerator_=new fU(this.query_)}get query(){return this.query_}}function WU(n,e){const t=cg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Wt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function XP(n){return 0===n.eventRegistrations_.length}function ek(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function tk(n,e,t,r){e.type===Sa.MERGE&&null!==e.source.queryId&&((0,k.hu)(cg(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(OD(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function FU(n,e,t,r,i){const a=new NU;let l,h;if(t.type===Sa.OVERWRITE){const E=t;E.source.fromUser?l=Px(n,e,E.path,E.snap,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered()&&!Wt(E.path),l=UD(n,e,E.path,E.snap,r,i,h,a))}else if(t.type===Sa.MERGE){const E=t;E.source.fromUser?l=function VU(n,e,t,r,i,a,l){let h=e;return r.foreach((_,E)=>{const D=tr(t,_);QP(e,Gt(D))&&(h=Px(n,h,D,E,i,a,l))}),r.foreach((_,E)=>{const D=tr(t,_);QP(e,Gt(D))||(h=Px(n,h,D,E,i,a,l))}),h}(n,e,E.path,E.children,r,i,a):((0,k.hu)(E.source.fromServer,"Unknown source."),h=E.source.tagged||e.serverCache.isFiltered(),l=kx(n,e,E.path,E.children,r,i,h,a))}else if(t.type===Sa.ACK_USER_WRITE){const E=t;l=E.revert?function jU(n,e,t,r,i,a){let l;if(null!=VD(r,t))return e;{const h=new Nx(r,e,i),_=e.eventCache.getNode();let E;if(Wt(t)||".priority"===Gt(t)){let D;if(e.serverCache.isFullyInitialized())D=LD(r,cg(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Ot,"serverChildren would be complete if leaf node"),D=Rx(r,S)}D=D,E=n.filter.updateFullNode(_,D,a)}else{const D=Gt(t);let S=Mx(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=_.getImmediateChild(D)),E=null!=S?n.filter.updateChild(_,D,S,Pn(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(_,D,Ot.EMPTY_NODE,Pn(t),h,a):_,E.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=LD(r,cg(e)),l.isLeafNode()&&(E=n.filter.updateFullNode(E,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=VD(r,hn()),iE(e,E,l,n.filter.filtersNodes())}}(n,e,E.path,r,i,a):function UU(n,e,t,r,i,a,l){if(null!=VD(i,t))return e;const h=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(Wt(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return UD(n,e,t,_.getNode().getChild(t),i,a,h,l);if(Wt(t)){let E=new Hn(null);return _.getNode().forEachChild(Ml,(D,S)=>{E=E.set(new mn(D),S)}),kx(n,e,t,E,i,a,h,l)}return e}{let E=new Hn(null);return r.foreach((D,S)=>{const P=tr(t,D);_.isCompleteForPath(P)&&(E=E.set(D,_.getNode().getChild(P)))}),kx(n,e,t,E,i,a,h,l)}}(n,e,E.path,E.affectedTree,r,i,a)}else{if(t.type!==Sa.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function BU(n,e,t,r,i){const a=e.serverCache;return YP(n,BP(e,a.getNode(),a.isFullyInitialized()||Wt(t),a.isFiltered()),t,r,ZP,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function LU(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=OD(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(FP(OD(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function OU(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,nk(n,a.changes,a.viewCache.eventCache.getNode(),null)}function nk(n,e,t,r){return function pU(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function eU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),rE(n,i,"child_removed",e,r,t),rE(n,i,"child_added",e,r,t),rE(n,i,"child_moved",a,r,t),rE(n,i,"child_changed",e,r,t),rE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let BD,HD;class rk{constructor(){this.views=new Map}}function Ox(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),tk(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(tk(l,e,t,r));return a}}function ik(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=LD(t,i?r:null),_=!1;h?_=!0:r instanceof Ot?(h=Rx(t,r),_=!1):(h=Ot.EMPTY_NODE,_=!1);const E=kD(new Qh(h,_,!1),new Qh(r,i,!1));return new HU(e,E)}return l}function sk(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Xh(n,e){let t=null;for(const r of n.views.values())t=t||WU(r,e);return t}function ok(n,e){return e._queryParams.loadsAllData()?jD(n):n.views.get(e._queryIdentifier)}function ak(n,e){return null!=ok(n,e)}function ef(n){return null!=jD(n)}function jD(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let tB=1;class uk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Hn(null),this.pendingWriteTree_=function RU(){return{visibleWrites:Su.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Fx(n,e,t,r,i){return function yU(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=sE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?K_(n,new lg({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function tf(n,e,t=!1){const r=function wU(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function EU(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&CU(h,r.path)?i=!1:Ta(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function IU(n){n.visibleWrites=GP(n.allWrites,bU,hn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=jP(n.visibleWrites,r.path):xi(r.children,_=>{n.visibleWrites=jP(n.visibleWrites,tr(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new Hn(null);return null!=r.snap?a=a.set(hn(),!0):xi(r.children,l=>{a=a.set(new mn(l),!0)}),K_(n,new PD(r.path,a,t))}return[]}function oE(n,e,t){return K_(n,new lg({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function Lx(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||ak(a,e))){const h=function JU(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=ef(n);if("default"===i)for(const[_,E]of n.views.entries())l=l.concat(ek(E,t,r)),XP(E)&&(n.views.delete(_),E.query._queryParams.loadsAllData()||a.push(E.query));else{const _=n.views.get(i);_&&(l=l.concat(ek(_,t,r)),XP(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return h&&!ef(n)&&a.push(new(function ZU(){return(0,k.hu)(BD,"Reference.ts has not been loaded"),BD}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function YU(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const _=h.removed;l=h.events;const E=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,P)=>ef(P));if(E&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function lB(n){return n.fold((e,t,r)=>{if(t&&ef(t))return[jD(t)];{let i=[];return t&&(i=sk(t)),xi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<P.length;++U){const z=P[U],ye=z.query,Ne=hk(n,z);n.listenProvider_.startListening(aE(ye),GD(n,ye),Ne.hashFn,Ne.onComplete)}}}!D&&_.length>0&&!r&&(E?n.listenProvider_.stopListening(aE(e),null):_.forEach(S=>{const P=n.queryToTagMap.get(WD(S));n.listenProvider_.stopListening(aE(S),P)})),function cB(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=WD(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,_)}return l}function lk(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const U=xs(S,r);i=i||Xh(P,U),a=a||ef(P)});let h,l=n.syncPointTree_.get(r);l?(a=a||ef(l),i=i||Xh(l,hn())):(l=new rk,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Ot.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,U)=>{const z=Xh(U,hn());z&&(i=i.updateImmediateChild(P,z))}));const _=ak(l,e);if(!_&&!e._queryParams.loadsAllData()){const S=WD(e);(0,k.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function dB(){return tB++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function QU(n,e,t,r,i,a){const l=ik(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function qU(n,e){n.eventRegistrations_.push(e)}(l,t),function zU(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(jn,(a,l)=>{r.push(G_(a,l))}),t.isFullyInitialized()&&r.push(FP(t.getNode())),nk(n,r,t.getNode(),e)}(l,t)}(l,e,t,FD(n.pendingWriteTree_,r),i,h);if(!_&&!a){const S=ok(l,e);D=D.concat(function hB(n,e,t){const r=e._path,i=GD(n,e),a=hk(n,t),l=n.listenProvider_.startListening(aE(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!ef(h.value),"If we're adding a query, it shouldn't be shadowed");else{const _=h.fold((E,D,S)=>{if(!Wt(E)&&D&&ef(D))return[jD(D).query];{let P=[];return D&&(P=P.concat(sk(D).map(U=>U.query))),xi(S,(U,z)=>{P=P.concat(z)}),P}});for(let E=0;E<_.length;++E){const D=_[E];n.listenProvider_.stopListening(aE(D),GD(n,D))}}return l}(n,e,S))}return D}function $D(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const E=Xh(h,xs(l,e));if(E)return E});return WP(i,e,a,t,!0)}function K_(n,e){return ck(e,n.syncPointTree_,null,FD(n.pendingWriteTree_,hn()))}function ck(n,e,t,r){if(Wt(n.path))return dk(n,e,t,r);{const i=e.get(hn());null==t&&null!=i&&(t=Xh(i,hn()));let a=[];const l=Gt(n.path),h=n.operationForChild(l),_=e.children.get(l);if(_&&h){const E=t?t.getImmediateChild(l):null,D=zP(r,l);a=a.concat(ck(h,_,E,D))}return i&&(a=a.concat(Ox(i,n,r,t))),a}}function dk(n,e,t,r){const i=e.get(hn());null==t&&null!=i&&(t=Xh(i,hn()));let a=[];return e.children.inorderTraversal((l,h)=>{const _=t?t.getImmediateChild(l):null,E=zP(r,l),D=n.operationForChild(l);D&&(a=a.concat(dk(D,h,_,E)))}),i&&(a=a.concat(Ox(i,n,r,t))),a}function hk(n,e){const t=e.query,r=GD(n,t);return{hashFn:()=>(function $U(n){return n.viewCache_.serverCache.getNode()}(e)||Ot.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function sB(n,e,t){const r=Vx(n,t);if(r){const i=Ux(r),a=i.path,l=i.queryId,h=xs(a,e);return Bx(n,a,new nE(Dx(l),h))}return[]}(n,t._path,r):function iB(n,e){return K_(n,new nE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function rV(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return Lx(n,t,null,a)}}}}function GD(n,e){const t=WD(e);return n.queryToTagMap.get(t)}function WD(n){return n._path.toString()+"$"+n._queryIdentifier}function Vx(n,e){return n.tagToQueryMap.get(e)}function Ux(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new mn(n.substr(0,e))}}function Bx(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),Ox(r,t,FD(n.pendingWriteTree_,e),null)}function aE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function eB(){return(0,k.hu)(HD,"Reference.ts has not been loaded"),HD}())(n._repo,n._path):n}class jx{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new jx(t)}node(){return this.node_}}class Hx{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=tr(this.path_,e);return new Hx(this.syncTree_,t)}node(){return $D(this.syncTree_,this.path_)}}const fk=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?pB(n[".sv"],e,t):"object"==typeof n[".sv"]?gB(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},pB=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},gB=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},pk=function(n,e,t,r){return Gx(e,new Hx(t,n),r)},$x=function(n,e,t){return Gx(n,new jx(e),t)};function Gx(n,e,t){const r=n.getPriority().val(),i=fk(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=fk(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new j_(h,cr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new j_(i))),l.forEachChild(jn,(h,_)=>{const E=Gx(_,e.getImmediateChild(h),t);E!==_&&(a=a.updateImmediateChild(h,E))}),a}}class Wx{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function qD(n,e){let t=e instanceof mn?e:new mn(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new Wx(i,r,a),t=Pn(t),i=Gt(t)}return r}function hg(n){return n.node.value}function qx(n,e){n.node.value=e,zx(n)}function gk(n){return n.node.childCount>0}function zD(n,e){xi(n.node.children,(t,r)=>{e(new Wx(t,n,r))})}function mk(n,e,t,r){t&&!r&&e(n),zD(n,i=>{mk(i,e,!0,r)}),t&&r&&e(n)}function uE(n){return new mn(null===n.parent?n.name:uE(n.parent)+"/"+n.name)}function zx(n){null!==n.parent&&function yB(n,e,t){const r=function mB(n){return void 0===hg(n)&&!gk(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,zx(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,zx(n))}(n.parent,n.name,n)}const vB=/[\[\].#$\/\u0000-\u001F\u007F]/,wB=/[\[\].#$\u0000-\u001F\u007F]/,Kx=10485760,KD=function(n){return"string"==typeof n&&0!==n.length&&!vB.test(n)},_k=function(n){return"string"==typeof n&&0!==n.length&&!wB.test(n)},lE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!wD(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},Nl=function(n,e,t,r){r&&void 0===e||cE((0,k.gK)(n,"value"),e,t)},cE=function(n,e,t){const r=t instanceof mn?new kV(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+ag(r));if("function"==typeof e)throw new Error(n+"contains a function "+ag(r)+" with contents = "+e.toString());if(wD(e))throw new Error(n+"contains "+e.toString()+" "+ag(r));if("string"==typeof e&&e.length>Kx/3&&(0,k.ug)(e)>Kx)throw new Error(n+"contains a string greater than "+Kx+" utf8 bytes "+ag(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(xi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!KD(l)))throw new Error(n+" contains an invalid key ("+l+") "+ag(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function OV(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),IP(n)})(r,l),cE(n,h,r),function FV(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+ag(r)+" in addition to actual children.")}},yk=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];xi(e,(l,h)=>{const _=new mn(l);if(cE(i,h,tr(t,_)),".priority"===lx(_)&&!lE(h))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=Z0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!KD(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(PV);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ta(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},Zx=function(n,e,t){if(!t||void 0!==e){if(wD(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!lE(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},dE=function(n,e,t,r){if(!(r&&void 0===t||KD(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hE=function(n,e,t,r){if(!(r&&void 0===t||_k(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Aa=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},vk=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!KD(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),_k(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class bB{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ZD(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!cx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function Yx(n,e,t){ZD(n,t),wk(n,r=>cx(r,e))}function xa(n,e,t){ZD(n,t),wk(n,r=>Ta(r,e)||Ta(e,r))}function wk(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(DB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function DB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();sg&&Ai("event: "+t.toString()),U_(r)}}}const Ek="repo_interrupt";class SB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bB,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=ND(),this.transactionQueueTree_=new Wx,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Ck(n){const t=n.infoData_.getNode(new mn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function fE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:Ck(n)})}function Ik(n,e,t,r,i){n.dataUpdateCount++;const a=new mn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,E=>cr(E));l=function aB(n,e,t,r){const i=Vx(n,r);if(i){const a=Ux(i),l=a.path,h=a.queryId,_=xs(l,e),E=Hn.fromObject(t);return Bx(n,l,new q_(Dx(h),_,E))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=cr(t);l=function oB(n,e,t,r){const i=Vx(n,r);if(null!=i){const a=Ux(i),l=a.path,h=a.queryId,_=xs(l,e);return Bx(n,l,new lg(Dx(h),_,t))}return[]}(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,E=>cr(E));l=function rB(n,e,t){const r=Hn.fromObject(t);return K_(n,new q_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=cr(t);l=oE(n.serverSyncTree_,a,_)}let h=a;l.length>0&&(h=Y_(n,a)),xa(n.eventQueue_,h,l)}function bk(n,e){Qx(n,"connected",e),!1===e&&function NB(n){Z_(n,"onDisconnectEvents");const e=fE(n),t=ND();Cx(n.onDisconnect_,hn(),(i,a)=>{const l=pk(i,a,n.serverSyncTree_,e);W_(t,i,l)});let r=[];Cx(t,hn(),(i,a)=>{r=r.concat(oE(n.serverSyncTree_,i,a));const l=tR(n,i);Y_(n,l)}),n.onDisconnect_=ND(),xa(n.eventQueue_,hn(),r)}(n)}function Qx(n,e,t){const r=new mn("/.info/"+e),i=cr(t);n.infoData_.updateSnapshot(r,i);const a=oE(n.infoSyncTree_,r,i);xa(n.eventQueue_,r,a)}function YD(n){return n.nextWriteId_++}function Jx(n,e,t,r,i){Z_(n,"set",{path:e.toString(),value:t,priority:r});const a=fE(n),l=cr(t,r),h=$D(n.serverSyncTree_,e),_=$x(l,h,a),E=YD(n),D=Fx(n.serverSyncTree_,e,_,E,!0);ZD(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const z="ok"===P;z||cs("set at "+e+" failed: "+P);const ye=tf(n.serverSyncTree_,E,!z);xa(n.eventQueue_,e,ye),nf(0,i,P,U)});const S=tR(n,e);Y_(n,S),xa(n.eventQueue_,S,[])}function PB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ex(n.onDisconnect_,e),nf(0,t,r,i)})}function Dk(n,e,t,r){const i=cr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&W_(n.onDisconnect_,e,i),nf(0,r,a,l)})}function Xx(n,e,t){let r;r=".info"===Gt(e._path)?Lx(n.infoSyncTree_,e,t):Lx(n.serverSyncTree_,e,t),Yx(n.eventQueue_,e._path,r)}function Tk(n){n.persistentConnection_&&n.persistentConnection_.interrupt(Ek)}function Z_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Ai(t,...e)}function nf(n,e,t,r){e&&U_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function eR(n,e,t){return $D(n.serverSyncTree_,e,t)||Ot.EMPTY_NODE}function QD(n,e=n.transactionQueueTree_){if(e||JD(n,e),hg(e)){const t=Ak(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function UB(n,e,t){const r=t.map(E=>E.currentWriteId),i=eR(n,e,r);let a=i;const l=i.hash();for(let E=0;E<t.length;E++){const D=t[E];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=xs(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),_=e;n.server_.put(_.toString(),h,E=>{Z_(n,"transaction put response",{path:_.toString(),status:E});let D=[];if("ok"===E){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(tf(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();JD(n,qD(n.transactionQueueTree_,e)),QD(n,n.transactionQueueTree_),xa(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)U_(S[P])}else{if("datastale"===E)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{cs("transaction at "+_.toString()+" failed: "+E);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=E}Y_(n,e)}},l)}(n,uE(e),t)}else gk(e)&&zD(e,t=>{QD(n,t)})}function Y_(n,e){const t=Sk(n,e),r=uE(t);return function BB(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const _=e[h],E=xs(t,_.path);let S,D=!1;if((0,k.hu)(null!==E,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)D=!0,S=_.abortReason,i=i.concat(tf(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)D=!0,S="maxretry",i=i.concat(tf(n.serverSyncTree_,_.currentWriteId,!0));else{const P=eR(n,_.path,l);_.currentInputSnapshot=P;const U=e[h].update(P.val());if(void 0!==U){cE("transaction failed: Data returned ",U,_.path);let z=cr(U);"object"==typeof U&&null!=U&&(0,k.r3)(U,".priority")||(z=z.updatePriority(P.getPriority()));const Ne=_.currentWriteId,_t=fE(n),ht=$x(z,P,_t);_.currentOutputSnapshotRaw=z,_.currentOutputSnapshotResolved=ht,_.currentWriteId=YD(n),l.splice(l.indexOf(Ne),1),i=i.concat(Fx(n.serverSyncTree_,_.path,ht,_.currentWriteId,_.applyLocally)),i=i.concat(tf(n.serverSyncTree_,Ne,!0))}else D=!0,S="nodata",i=i.concat(tf(n.serverSyncTree_,_.currentWriteId,!0))}xa(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}JD(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)U_(r[h]);QD(n,n.transactionQueueTree_)}(n,Ak(n,t),r),r}function Sk(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===hg(r);)r=qD(r,t),t=Gt(e=Pn(e));return r}function Ak(n,e){const t=[];return xk(n,e,t),t.sort((r,i)=>r.order-i.order),t}function xk(n,e,t){const r=hg(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);zD(e,i=>{xk(n,i,t)})}function JD(n,e){const t=hg(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,qx(e,t.length>0?t:void 0)}zD(e,r=>{JD(n,r)})}function tR(n,e){const t=uE(Sk(n,e)),r=qD(n.transactionQueueTree_,e);return function _B(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{nR(n,i)}),nR(n,r),mk(r,i=>{nR(n,i)}),t}function nR(n,e){const t=hg(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(tf(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?qx(e,void 0):t.length=a+1,xa(n.eventQueue_,uE(e),i);for(let l=0;l<r.length;l++)U_(r[l])}}const rR=function(n,e){const t=$B(n),r=t.namespace;return"firebase.com"===t.domain&&xl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&xl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&cs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new rx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new mn(t.pathString)}},$B=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",_=443;if("string"==typeof n){let E=n.indexOf("//");E>=0&&(h=n.substring(0,E-1),n=n.substring(E+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function jB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function HB(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):cs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));E=e.indexOf(":"),E>=0?(l="https"===h||"wss"===h,_=parseInt(e.substring(E+1),10)):E=e.length;const U=e.slice(0,E);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const z=e.indexOf(".");r=e.substring(0,z).toLowerCase(),t=e.substring(z+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class Rk{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Pz)(this.snapshot.exportVal())}}class Mk{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nk{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Pk{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return PB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Aa("OnDisconnect.remove",this._path);const e=new k.BH;return Dk(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Aa("OnDisconnect.set",this._path),Nl("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return Dk(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Aa("OnDisconnect.setWithPriority",this._path),Nl("OnDisconnect.setWithPriority",e,this._path,!1),Zx("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function kB(n,e,t,r,i){const a=cr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&W_(n.onDisconnect_,e,a),nf(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Aa("OnDisconnect.update",this._path),yk("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function OB(n,e,t,r){if((0,k.xb)(t))return Ai("onDisconnect().update() called with empty data.  Don't do anything."),void nf(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&xi(t,(l,h)=>{const _=cr(h);W_(n.onDisconnect_,tr(e,l),_)}),nf(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class io{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Wt(this._path)?null:lx(this._path)}get ref(){return new Ra(this._repo,this._path)}get _queryIdentifier(){const e=VP(this._queryParams),t=ex(e);return"{}"===t?"default":t}get _queryObject(){return VP(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof io))return!1;const t=this._repo===e._repo,r=cx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function NV(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function XD(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function rf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Ml){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==rd)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Rl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===jn){if(null!=e&&!lE(e)||null!=t&&!lE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof gx||n.getIndex()===mx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function eT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ra extends io{constructor(e,t){super(e,t,new xD,!1)}get parent(){const e=CP(this._path);return null===e?null:new Ra(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class fg{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new mn(e),r=pg(this.ref,e);return new fg(this._node.getChild(t),r,jn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new fg(i,pg(this.ref,r),jn)))}hasChild(e){const t=new mn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function kk(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?pg(n._root,e):n._root}function Ok(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=rR(e,n._repo.repoInfo_.nodeAdmin);vk("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&xl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),kk(n,t.path.toString())}function pg(n,e){return null===Gt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hE("child","path",t,!1)):hE("child","path",e,!1),new Ra(n._repo,tr(n._path,e));var t}function iR(n,e){n=(0,k.m9)(n),Aa("set",n._path),Nl("set",e,n._path,!1);const t=new k.BH;return Jx(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function KB(n,e){yk("update",e,n._path,!1);const t=new k.BH;return function MB(n,e,t,r){Z_(n,"update",{path:e.toString(),value:t});let i=!0;const a=fE(n),l={};if(xi(t,(h,_)=>{i=!1,l[h]=pk(tr(e,h),cr(_),n.serverSyncTree_,a)}),i)Ai("update() called with empty data.  Don't do anything."),nf(0,r,"ok",void 0);else{const h=YD(n),_=function nB(n,e,t,r){!function vU(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Sx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Hn.fromObject(t);return K_(n,new q_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);ZD(n.eventQueue_,_),n.server_.merge(e.toString(),t,(E,D)=>{const S="ok"===E;S||cs("update at "+e+" failed: "+E);const P=tf(n.serverSyncTree_,h,!S),U=P.length>0?Y_(n,e):e;xa(n.eventQueue_,U,P),nf(0,r,E,D)}),xi(t,E=>{const D=tR(n,tr(e,E));Y_(n,D)}),xa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function ZB(n){return function RB(n,e){const t=function uB(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(E,D)=>{const S=xs(E,t);r=r||Xh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||Xh(i,hn()):(i=new rk,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Qh(r,!0,!1):null;return function GU(n){return OD(n.viewCache_)}(ik(i,e,FD(n.pendingWriteTree_,e._path),a?l.getNode():Ot.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=cr(r).withIndex(e._queryParams.getIndex()),a=oE(n.serverSyncTree_,e._path,i);return Yx(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(Z_(n,"get for query "+(0,k.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,k.m9)(n))._repo,n).then(e=>new fg(e,new Ra(n._repo,n._path),n._queryParams.getIndex()))}class tT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Rk("value",this,new fg(e.snapshotNode,new Ra(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mk(this,e,t):null}matches(e){return e instanceof tT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class nT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Mk(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=pg(new Ra(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Rk(e.type,this,new fg(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof nT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function pE(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,E=(D,S)=>{Xx(n._repo,n,h),_(D,S)};E.userCallback=t.userCallback,E.context=t.context,t=E}const l=new Nk(t,a||void 0),h="value"===e?new tT(l):new nT(e,l);return function FB(n,e,t){let r;r=".info"===Gt(e._path)?lk(n.infoSyncTree_,e,t):lk(n.serverSyncTree_,e,t),Yx(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>Xx(n._repo,n,h)}function sR(n,e,t,r){return pE(n,"value",e,t,r)}function Fk(n,e,t,r){return pE(n,"child_added",e,t,r)}function Lk(n,e,t,r){return pE(n,"child_changed",e,t,r)}function Vk(n,e,t,r){return pE(n,"child_moved",e,t,r)}function Uk(n,e,t,r){return pE(n,"child_removed",e,t,r)}function Bk(n,e,t){let r=null;const i=t?new Nk(t):null;"value"===e?r=new tT(i):e&&(r=new nT(e,i)),Xx(n._repo,n,r)}class Au{}class jk extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nl("endAt",this._value,e._path,!0);const t=wx(e._queryParams,this._value,this._key);if(eT(t),rf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class QB extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nl("endBefore",this._value,e._path,!1);const t=function oU(n,e,t){let r,i;return n.index_===Ml?("string"==typeof e&&(e=OP(e)),i=wx(n,e,t)):(r=null==t?rd:OP(t),i=wx(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(eT(t),rf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class Hk extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nl("startAt",this._value,e._path,!0);const t=vx(e._queryParams,this._value,this._key);if(eT(t),rf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class e2 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nl("startAfter",this._value,e._path,!1);const t=function sU(n,e,t){let r;if(n.index_===Ml)"string"==typeof e&&(e=kP(e)),r=vx(n,e,t);else{let i;i=null==t?Rl:kP(t),r=vx(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(eT(t),rf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new io(e._repo,e._path,t,e._orderByCalled)}}class n2 extends Au{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(e._repo,e._path,function rU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class i2 extends Au{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new io(e._repo,e._path,function iU(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class o2 extends Au{constructor(e){super(),this._path=e}_apply(e){XD(e,"orderByChild");const t=new mn(this._path);if(Wt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new gx(t),i=RD(e._queryParams,r);return rf(i),new io(e._repo,e._path,i,!0)}}class u2 extends Au{_apply(e){XD(e,"orderByKey");const t=RD(e._queryParams,Ml);return rf(t),new io(e._repo,e._path,t,!0)}}class c2 extends Au{_apply(e){XD(e,"orderByPriority");const t=RD(e._queryParams,jn);return rf(t),new io(e._repo,e._path,t,!0)}}class h2 extends Au{_apply(e){XD(e,"orderByValue");const t=RD(e._queryParams,mx);return rf(t),new io(e._repo,e._path,t,!0)}}class p2 extends Au{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nl("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new jk(this._value,this._key)._apply(new Hk(this._value,this._key)._apply(e))}}function xu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function KU(n){(0,k.hu)(!BD,"__referenceConstructor has already been defined"),BD=n})(Ra),function XU(n){(0,k.hu)(!HD,"__referenceConstructor has already been defined"),HD=n}(Ra);const oR={};function Gk(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||xl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ai("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,E,l=rR(a,i),h=l.repoInfo;"undefined"!=typeof process&&process.env&&(E=process.env.FIREBASE_DATABASE_EMULATOR_HOST),E?(_=!0,a=`http://${E}?ns=${h.namespace}`,l=rR(a,i),h=l.repoInfo):_=!l.repoInfo.secure;const D=i&&_?new K0(K0.OWNER):new aV(n.name,n.options,e);vk("Invalid Firebase Database URL",l),Wt(l.path)||xl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function v2(n,e,t,r){let i=oR[e.name];i||(i={},oR[e.name]=i);let a=i[n.toURLString()];return a&&xl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new SB(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new oV(n.name,t));return new E2(S,n)}class E2{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function AB(n,e,t){if(n.stats_=ox(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new MD(n.repoInfo_,(r,i,a,l)=>{Ik(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bk(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new ug(n.repoInfo_,e,(r,i,a,l)=>{Ik(n,r,i,a,l)},r=>{bk(n,r)},r=>{!function xB(n,e){xi(e,(t,r)=>{Qx(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function cV(n,e){const t=n.toString();return sx[t]||(sx[t]=e()),sx[t]}(n.repoInfo_,()=>new hU(n.stats_,n.server_)),n.infoData_=new aU,n.infoSyncTree_=new uk({startListening:(r,i,a,l)=>{let h=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(h=oE(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),Qx(n,"connected",!1),n.serverSyncTree_=new uk({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,_)=>{const E=l(h,_);xa(n.eventQueue_,r._path,E)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ra(this._repo,hn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function y2(n,e){const t=oR[e];(!t||t[n.key]!==n)&&xl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),Tk(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&xl("Cannot call "+e+" on a deleted database.")}}function Wk(){cP.IS_TRANSPORT_INITIALIZED&&cs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function C2(){Wk(),Zh.forceDisallow()}function I2(){Wk(),B_.forceDisallow(),Zh.forceAllow()}function S2(n,e){GN(n,e)}const x2={".sv":"timestamp"};class N2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}ug.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},ug.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function A2(n){UN(ii.SDK_VERSION),(0,ii._registerComponent)(new Es.wA("database",(e,{instanceIdentifier:t})=>Gk(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ii.registerVersion)(LN,"0.13.0",n),(0,ii.registerVersion)(LN,"0.13.0","esm2017")}();const F2=new ki.Yd("@firebase/database-compat"),qk=function(n){F2.warn("FIREBASE WARNING: "+n)};class U2{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class B2{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class sf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hE("DataSnapshot.child","path",e,!1),new sf(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new sf(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Lo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=Gi.getCancelAndContextArgs_("Query.on",r,i),h=(E,D)=>{t.call(l.context,new sf(this.database,E),D)};h.userCallback=t,h.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return sR(this._delegate,h,_),t;case"child_added":return Fk(this._delegate,h,_),t;case"child_removed":return Uk(this._delegate,h,_),t;case"child_changed":return Lk(this._delegate,h,_),t;case"child_moved":return Vk(this._delegate,h,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Bk(this._delegate,e,i)}else Bk(this._delegate,e)}get(){return ZB(this._delegate).then(e=>new sf(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=Gi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(E,D)=>{const S=new sf(this.database,E);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const _=E=>{a.cancel&&a.cancel.call(a.context,E),l.reject(E)};switch(e){case"value":sR(this._delegate,h,_,{onlyOnce:!0});break;case"child_added":Fk(this._delegate,h,_,{onlyOnce:!0});break;case"child_removed":Uk(this._delegate,h,_,{onlyOnce:!0});break;case"child_changed":Lk(this._delegate,h,_,{onlyOnce:!0});break;case"child_moved":Vk(this._delegate,h,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new Gi(this.database,xu(this._delegate,function r2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new n2(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new Gi(this.database,xu(this._delegate,function s2(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new i2(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new Gi(this.database,xu(this._delegate,function a2(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hE("orderByChild","path",n,!1),new o2(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new Gi(this.database,xu(this._delegate,function l2(){return new u2}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new Gi(this.database,xu(this._delegate,function d2(){return new c2}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new Gi(this.database,xu(this._delegate,function f2(){return new h2}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new Gi(this.database,xu(this._delegate,function XB(n=null,e){return dE("startAt","key",e,!0),new Hk(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new Gi(this.database,xu(this._delegate,function t2(n,e){return dE("startAfter","key",e,!0),new e2(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new Gi(this.database,xu(this._delegate,function YB(n,e){return dE("endAt","key",e,!0),new jk(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new Gi(this.database,xu(this._delegate,function JB(n,e){return dE("endBefore","key",e,!0),new QB(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new Gi(this.database,xu(this._delegate,function g2(n,e){return dE("equalTo","key",e,!0),new p2(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Lo(this.database,new Ra(this._delegate._repo,this._delegate._path))}}class Lo extends Gi{constructor(e,t){super(e,new io(t._repo,t._path,new xD,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Lo(this.database,pg(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Lo(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Lo(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=iR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,qk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Aa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=KB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function zB(n,e,t){if(Aa("setWithPriority",n._path),Nl("setWithPriority",e,n._path,!1),Zx("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return Jx(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function WB(n){return Aa("remove",n._path),iR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function P2(n,e,t){var r;if(n=(0,k.m9)(n),Aa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new k.BH,h=sR(n,()=>{});return function VB(n,e,t,r,i,a){Z_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:jN(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=eR(n,e,void 0);l.currentInputSnapshot=h;const _=l.update(h.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{cE("transaction failed: Data returned ",_,l.path),l.status=0;const E=qD(n.transactionQueueTree_,e),D=hg(E)||[];let S;D.push(l),qx(E,D),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(lE(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=($D(n.serverSyncTree_,e)||Ot.EMPTY_NODE).getPriority().val();const P=fE(n),U=cr(_,S),z=$x(U,h,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=z,l.currentWriteId=YD(n);const ye=Fx(n.serverSyncTree_,e,z,l.currentWriteId,l.applyLocally);xa(n.eventQueue_,e,ye),QD(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,E,D)=>{let S=null;_?a.reject(_):(S=new fg(D,new Ra(n._repo,n._path),jn),a.resolve(new N2(E,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new B2(a.committed,new sf(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function qB(n,e){n=(0,k.m9)(n),Aa("setPriority",n._path),Zx("setPriority",e,!1);const t=new k.BH;return Jx(n._repo,tr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function GB(n,e){n=(0,k.m9)(n),Aa("push",n._path),Nl("push",e,n._path,!0);const t=Ck(n._repo),r=XV(t),i=pg(n,r),a=pg(n,r);let l;return l=null!=e?iR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Lo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Lo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Aa("Reference.onDisconnect",this._delegate._path),new U2(new Pk(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class gE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:C2,forceLongPolling:I2}}useEmulator(e,t,r={}){!function b2(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&xl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&xl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new K0(K0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new K0(l)}!function _2(n,e,t,r){n.repoInfo_=new rx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Lo){const t=Ok(this._delegate,e.toString());return new Lo(this,t)}{const t=kk(this._delegate,e);return new Lo(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=Ok(this._delegate,e);return new Lo(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function D2(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),Tk(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function T2(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function LB(n){n.persistentConnection_&&n.persistentConnection_.resume(Ek)}(n._repo)}(this._delegate)}}gE.ServerValue={TIMESTAMP:function R2(){return x2}(),increment:n=>function M2(n){return{".sv":{increment:n}}}(n)};var H2=Object.freeze({__proto__:null,initStandalone:function j2({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){UN(t);const l=new Es.zt("auth-internal",new Es.H0("database-standalone"));return l.setComponent(new Es.wA("auth-internal",()=>r,"PRIVATE")),{instance:new gE(Gk(n,l,void 0,e,a),n),namespace:i}}});const $2=gE.ServerValue;function zk(n){return null==n}function Kk(n){return"function"==typeof n.set}function Zk(n,e){return Kk(e)?e:n.ref(e)}function Yk(n,e){if(function W2(n){return"string"==typeof n}(n))return e.stringCase();if(Kk(n))return e.firebaseCase();if(function q2(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function mE(n,e,t="on",r=Bd.z){return new xn.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,pt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Yl.B)())}function Qk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Z2(n,e){const{payload:t,prevKey:r,key:i}=e,a=Qk(n,i),l=function K2(n,e){if(zk(e))return 0;{const t=Qk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(_=>{const E={payload:_,type:"value",prevKey:h,key:_.key};return h=_.key,n=[...n,E],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function Jk(n){return(zk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function Xk(n,e,t){return function z2(n,e,t){return mE(n,"value","once",t).pipe(Cn(r=>{const i=[ft(r)];return e.forEach(a=>i.push(mE(n,a,"on",t))),(0,Qa.T)(...i).pipe(hu(Z2,[]))}),cC())}(n,e=Jk(e),t)}function eO(n,e,t){const r=(e=Jk(e)).map(i=>mE(n,i,"on",t));return(0,Qa.T)(...r)}function tO(n,e){return function(r,i){return Yk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function X2(n){return function(t){return t?Yk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function nO(n,e){return function(){return mE(n,"value","on",e)}}!function G2(n){n.INTERNAL.registerComponent(new Es.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new gE(i,r)},"PUBLIC").setServiceProps({Reference:Lo,Query:Gi,Database:gE,DataSnapshot:sf,enableLogging:S2,INTERNAL:H2,ServerValue:$2}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.0")}(jd.Z);const nj=new m.OlP("angularfire2.realtimeDatabaseURL"),rj=new m.OlP("angularfire2.database.use-emulator");let ij=(()=>{class n{constructor(t,r,i,a,l,h,_,E,D,S,P,U,z,ye,Ne){this.schedulers=h;const _t=_,ht=(0,Zn.on)(t,l,r);E&&lc(ht,l,D,P,U,z,S,ye),this.database=(0,Zn.cc)(`${ht.name}.database.${i}`,"AngularFireDatabase",ht.name,()=>{const ot=l.runOutsideAngular(()=>ht.database(i||void 0));return _t&&ot.useEmulator(..._t),ot},[_t])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>Zk(this.database,t));let a=i;return r&&(a=r(i)),function ej(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:tO(r,"update"),set:tO(r,"set"),push:i=>r.push(i),remove:X2(r),snapshotChanges:i=>Xk(n,i,t).pipe(Ut.iC),stateChanges:i=>eO(n,i,t).pipe(Ut.iC),auditTrail:i=>function Y2(n,e,t){return function J2(n,e,t){return function Q2(n,e){return mE(n,"value","on",e).pipe((0,pt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function KL(...n){const e=(0,An.jO)(n);return(0,Yn.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let _=0;_<i;_++)(0,Ur.Xf)(n[_]).subscribe((0,xt.x)(r,E=>{a[_]=E,!h&&!l[_]&&(l[_]=!0,(h=l.every(os.y))&&(l=null))},zL.Z));t.subscribe((0,xt.x)(r,_=>{if(h){const E=[_,...a];r.next(e?e(...E):E)}}))})}(e),(0,pt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function ZL(n){return(0,Yn.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,xt.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,pt.U)(i=>i.actions))}(n,eO(n,e).pipe(hu((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(Ut.iC),valueChanges:(i,a)=>Xk(n,i,t).pipe((0,pt.U)(h=>h.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),Ut.iC)}}(a,this)}object(t){return function tj(n,e){return{query:n,snapshotChanges:()=>nO(n,e.schedulers.outsideAngular)().pipe(Ut.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>nO(n,e.schedulers.outsideAngular)().pipe(Ut.iC,(0,pt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>Zk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(Zn.Dh),m.LFG(Zn.xv,8),m.LFG(nj,8),m.LFG(m.Lbi),m.LFG(m.R0b),m.LFG(Ut.HU),m.LFG(rj,8),m.LFG(Ud,8),m.LFG(Ld,8),m.LFG(Wg,8),m.LFG(Vd,8),m.LFG(qg,8),m.LFG(uc,8),m.LFG(au,8),m.LFG(sl,8))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),sj=(()=>{class n{constructor(){ac.Z.registerVersion("angularfire",Ut.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({providers:[ij]}),n})();const rO_firebase={apiKey:"...",authDomain:"project.firebaseapp.com",databaseURL:"https://project.firebaseio.com",projectId:"project",storageBucket:"project.appspot.com",messagingSenderId:"..."},{isArray:oj}=Array,{getPrototypeOf:aj,prototype:uj,keys:lj}=Object;function iO(n){if(1===n.length){const e=n[0];if(oj(e))return{args:e,keys:null};if(function cj(n){return n&&"object"==typeof n&&aj(n)===uj}(e)){const t=lj(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:dj}=Array;function sO(n){return(0,pt.U)(e=>function hj(n,e){return dj(e)?n(...e):n(e)}(n,e))}function oO(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}let aO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n}),n})(),gg=(()=>{class n extends aO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=m.n5z(n)))(r||n)}}(),n.\u0275dir=m.lG2({type:n,features:[m.qOj]}),n})();const Pl=new m.OlP("NgValueAccessor"),gj={provide:Pl,useExisting:(0,m.Gpc)(()=>rT),multi:!0},_j=new m.OlP("CompositionEventMode");let rT=(()=>{class n extends aO{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function mj(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(m.Qsj),m.Y36(m.SBq),m.Y36(_j,8))},n.\u0275dir=m.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&m.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[m._Bn([gj]),m.qOj]}),n})();const ds=new m.OlP("NgValidators"),uf=new m.OlP("NgAsyncValidators");function yO(n){return null!=n}function vO(n){const e=(0,m.QGY)(n)?(0,Jt.D)(n):n;return(0,m.CqO)(e),e}function wO(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function EO(n,e){return e.map(t=>t(n))}function CO(n){return n.map(e=>function vj(n){return!n.validate}(e)?e:t=>e.validate(t))}function aR(n){return null!=n?function IO(n){if(!n)return null;const e=n.filter(yO);return 0==e.length?null:function(t){return wO(EO(t,e))}}(CO(n)):null}function uR(n){return null!=n?function bO(n){if(!n)return null;const e=n.filter(yO);return 0==e.length?null:function(t){return function fj(...n){const e=(0,An.jO)(n),{args:t,keys:r}=iO(n),i=new xn.y(a=>{const{length:l}=t;if(!l)return void a.complete();const h=new Array(l);let _=l,E=l;for(let D=0;D<l;D++){let S=!1;(0,Ur.Xf)(t[D]).subscribe((0,xt.x)(a,P=>{S||(S=!0,E--),h[D]=P},()=>_--,void 0,()=>{(!_||!S)&&(E||a.next(r?oO(r,h):h),a.complete())}))}});return e?i.pipe(sO(e)):i}(EO(t,e).map(vO)).pipe((0,pt.U)(wO))}}(CO(n)):null}function DO(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function lR(n){return n?Array.isArray(n)?n:[n]:[]}function sT(n,e){return Array.isArray(n)?n.includes(e):n===e}function AO(n,e){const t=lR(e);return lR(n).forEach(i=>{sT(t,i)||t.push(i)}),t}function xO(n,e){return lR(e).filter(t=>!sT(n,t))}class RO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aR(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=uR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class lf extends RO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rs extends RO{get formDirective(){return null}get path(){return null}}let NO=(()=>{class n extends class MO{constructor(e){this._cd=e}is(e){var t,r,i;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(i=null===(r=this._cd)||void 0===r?void 0:r.control)||void 0===i?void 0:i[e])}}{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(lf,2))},n.\u0275dir=m.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&m.ekj("ng-untouched",r.is("untouched"))("ng-touched",r.is("touched"))("ng-pristine",r.is("pristine"))("ng-dirty",r.is("dirty"))("ng-valid",r.is("valid"))("ng-invalid",r.is("invalid"))("ng-pending",r.is("pending"))},features:[m.qOj]}),n})();function _E(n,e){(function hR(n,e){const t=function TO(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(DO(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function SO(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(DO(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();lT(e._rawValidators,i),lT(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),function Aj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&kO(n,e)})}(n,e),function Rj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&kO(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Sj(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function lT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function kO(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function gR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const yE="VALID",dT="INVALID",Q_="PENDING",vE="DISABLED";function _R(n){return(hT(n)?n.validators:n)||null}function VO(n){return Array.isArray(n)?aR(n):n||null}function yR(n,e){return(hT(e)?e.asyncValidators:n)||null}function UO(n){return Array.isArray(n)?uR(n):n||null}function hT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const vR=n=>n instanceof ER;function jO(n){return(n=>n instanceof GO)(n)?n.value:n.getRawValue()}function HO(n,e){const t=vR(n),r=n.controls;if(!(t?Object.keys(r):r).length)throw new m.vHH(1e3,"");if(!r[e])throw new m.vHH(1001,"")}function $O(n,e){vR(n),n._forEachChild((r,i)=>{if(void 0===e[i])throw new m.vHH(1002,"")})}class wR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=VO(this._rawValidators),this._composedAsyncValidatorFn=UO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yE}get invalid(){return this.status===dT}get pending(){return this.status==Q_}get disabled(){return this.status===vE}get enabled(){return this.status!==vE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=VO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=UO(e)}addValidators(e){this.setValidators(AO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(AO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(xO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(xO(e,this._rawAsyncValidators))}hasValidator(e){return sT(this._rawValidators,e)}hasAsyncValidator(e){return sT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Q_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vE,this.errors=null,this._forEachChild(r=>{r.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yE,this._forEachChild(r=>{r.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yE||this.status===Q_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vE:yE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Q_,this._hasOwnPendingAsyncValidator=!0;const t=vO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function kj(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let r=n;return e.forEach(i=>{r=vR(r)?r.controls.hasOwnProperty(i)?r.controls[i]:null:(n=>n instanceof Fj)(r)&&r.at(i)||null}),r}(this,e,".")}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new m.vpe,this.statusChanges=new m.vpe}_calculateStatus(){return this._allControlsDisabled()?vE:this.errors?dT:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Q_)?Q_:this._anyControlsHaveStatus(dT)?dT:yE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){hT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class GO extends wR{constructor(e=null,t,r){super(_R(t),yR(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),hT(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){gR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){gR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class ER extends wR{constructor(e,t,r){super(_R(t),yR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){$O(this,e),Object.keys(e).forEach(r=>{HO(this,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{this.controls[r]&&this.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=jO(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const r=this.controls[t];if(this.contains(t)&&e(r))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,r)=>((t.enabled||this.disabled)&&(e[r]=t.value),e))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Fj extends wR{constructor(e,t,r){super(_R(t),yR(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){$O(this,e),e.forEach((r,i)=>{HO(this,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>jO(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Uj={provide:lf,useExisting:(0,m.Gpc)(()=>IR)},zO=(()=>Promise.resolve(null))();let IR=(()=>{class n extends lf{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new GO,this._registered=!1,this.update=new m.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function pR(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===rT?t=a:function Pj(n){return Object.getPrototypeOf(n.constructor)===gg}(a)?r=a:i=a}),i||r||t||null}(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function fR(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){_E(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){zO.then(()=>{var r;this.control.setValue(t,{emitViewToModelChange:!1}),null===(r=this._changeDetectorRef)||void 0===r||r.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=""===r||r&&"false"!==r;zO.then(()=>{var a;i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),null===(a=this._changeDetectorRef)||void 0===a||a.markForCheck()})}_getPath(t){return this._parent?function aT(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(Rs,9),m.Y36(ds,10),m.Y36(uf,10),m.Y36(Pl,10),m.Y36(m.sBO,8))},n.\u0275dir=m.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m._Bn([Uj]),m.qOj,m.TTD]}),n})(),ZO=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})(),dH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[ZO]]}),n})(),hH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[dH]}),n})();class Ru extends yo.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var fH=O(9672);function f1(n,e,t){n?(0,fH.f)(t,n,e):e()}function fT(n,e){const t=(0,vo.m)(n)?n:()=>n,r=i=>i.error(t());return new xn.y(e?i=>e.schedule(r,0,i):r)}function p1(n){return new xn.y(e=>{(0,Ur.Xf)(n()).subscribe(e)})}var J_=O(515),g1=O(727);function m1(){return(0,Yn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,xt.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class mH extends xn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Yn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new g1.w0;const t=this.getSubject();e.add(this.source.subscribe((0,xt.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=g1.w0.EMPTY)}return e}refCount(){return m1()(this)}}function cf(n){return(0,Yn.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,xt.x)(t,void 0,void 0,l=>{a=(0,Ur.Xf)(n(l,cf(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var hs=O(5577);function EE(n,e){return(0,vo.m)(e)?(0,hs.z)(n,e,1):(0,hs.z)(n,1)}function RR(n){return n<=0?()=>J_.E:(0,Yn.e)((e,t)=>{let r=[];e.subscribe((0,xt.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}var Vo=O(8505);class sd{constructor(e,t){this.id=e,this.url=t}}class MR extends sd{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class CE extends sd{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _1 extends sd{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class vH extends sd{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class wH extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class EH extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CH extends sd{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class IH extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bH extends sd{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class y1{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class v1{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class DH{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class TH{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class SH{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class AH{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class w1{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Kt="primary";class xH{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function X_(n){return new xH(n)}const E1="ngNavigationCancelingError";function NR(n){const e=Error("NavigationCancelingError: "+n);return e[E1]=!0,e}function MH(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function kl(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!C1(n[i],e[i]))return!1;return!0}function C1(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function I1(n){return Array.prototype.concat.apply([],n)}function b1(n){return n.length>0?n[n.length-1]:null}function Wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Ol(n){return(0,m.CqO)(n)?n:(0,m.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):ft(n)}const kH={exact:function S1(n,e,t){if(!yg(n.segments,e.segments)||!pT(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!S1(n.children[r],e.children[r],t))return!1;return!0},subset:A1},D1={exact:function OH(n,e){return kl(n,e)},subset:function FH(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>C1(n[t],e[t]))},ignored:()=>!0};function T1(n,e,t){return kH[t.paths](n.root,e.root,t.matrixParams)&&D1[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function A1(n,e,t){return x1(n,e,e.segments,t)}function x1(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!yg(i,t)||e.hasChildren()||!pT(i,t,r))}if(n.segments.length===t.length){if(!yg(n.segments,t)||!pT(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!A1(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(yg(n.segments,i)&&pT(n.segments,i,r)&&n.children[Kt])&&x1(n.children[Kt],e,a,r)}}function pT(n,e,t){return e.every((r,i)=>D1[t](n[i].parameters,r.parameters))}class _g{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=X_(this.queryParams)),this._queryParamMap}toString(){return UH.serialize(this)}}class en{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Wi(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gT(this)}}class IE{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=X_(this.parameters)),this._parameterMap}toString(){return k1(this)}}function yg(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class R1{}class M1{parse(e){const t=new KH(e);return new _g(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${bE(e.root,!0)}`,r=function HH(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${mT(t)}=${mT(i)}`).join("&"):`${mT(t)}=${mT(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams),i="string"==typeof e.fragment?`#${function BH(n){return encodeURI(n)}(e.fragment)}`:"";return`${t}${r}${i}`}}const UH=new M1;function gT(n){return n.segments.map(e=>k1(e)).join("/")}function bE(n,e){if(!n.hasChildren())return gT(n);if(e){const t=n.children[Kt]?bE(n.children[Kt],!1):"",r=[];return Wi(n.children,(i,a)=>{a!==Kt&&r.push(`${a}:${bE(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function VH(n,e){let t=[];return Wi(n.children,(r,i)=>{i===Kt&&(t=t.concat(e(r,i)))}),Wi(n.children,(r,i)=>{i!==Kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Kt?[bE(n.children[Kt],!1)]:[`${i}:${bE(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Kt]?`${gT(n)}/${t[0]}`:`${gT(n)}/(${t.join("//")})`}}function N1(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function mT(n){return N1(n).replace(/%3B/gi,";")}function PR(n){return N1(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function _T(n){return decodeURIComponent(n)}function P1(n){return _T(n.replace(/\+/g,"%20"))}function k1(n){return`${PR(n.path)}${function jH(n){return Object.keys(n).map(e=>`;${PR(e)}=${PR(n[e])}`).join("")}(n.parameters)}`}const $H=/^[^\/()?;=#]+/;function yT(n){const e=n.match($H);return e?e[0]:""}const GH=/^[^=?&#]+/,qH=/^[^&#]+/;class KH{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new en([],{}):new en([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Kt]=new en(e,t)),r}parseSegment(){const e=yT(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new IE(_T(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=yT(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=yT(this.remaining);i&&(r=i,this.capture(r))}e[_T(t)]=_T(r)}parseQueryParam(e){const t=function WH(n){const e=n.match(GH);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function zH(n){const e=n.match(qH);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=P1(t),a=P1(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=yT(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=Kt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[Kt]:new en([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class O1{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=kR(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=kR(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=OR(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return OR(e,this._root).map(t=>t.value)}}function kR(n,e){if(n===e.value)return e;for(const t of e.children){const r=kR(n,t);if(r)return r}return null}function OR(n,e){if(n===e.value)return[e];for(const t of e.children){const r=OR(n,t);if(r.length)return r.unshift(e),r}return[]}class od{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ey(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class F1 extends O1{constructor(e,t){super(e),this.snapshot=t,FR(this,e)}toString(){return this.snapshot.toString()}}function L1(n,e){const t=function ZH(n,e){const l=new vT([],{},{},"",{},Kt,e,null,n.root,-1,{});return new U1("",new od(l,[]))}(n,e),r=new Ru([new IE("",{})]),i=new Ru({}),a=new Ru({}),l=new Ru({}),h=new Ru(""),_=new ty(r,i,l,h,a,Kt,e,t.root);return _.snapshot=t.root,new F1(new od(_,[]),t)}class ty{constructor(e,t,r,i,a,l,h,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,pt.U)(e=>X_(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,pt.U)(e=>X_(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function V1(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function YH(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class vT{constructor(e,t,r,i,a,l,h,_,E,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=_,this._urlSegment=E,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=X_(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=X_(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class U1 extends O1{constructor(e,t){super(t),this.url=e,FR(this,t)}toString(){return B1(this._root)}}function FR(n,e){e.value._routerState=n,e.children.forEach(t=>FR(n,t))}function B1(n){const e=n.children.length>0?` { ${n.children.map(B1).join(", ")} } `:"";return`${n.value}${e}`}function LR(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,kl(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),kl(e.params,t.params)||n.params.next(t.params),function NH(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!kl(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),kl(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function VR(n,e){const t=kl(n.params,e.params)&&function LH(n,e){return yg(n,e)&&n.every((t,r)=>kl(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||VR(n.parent,e.parent))}function DE(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function JH(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return DE(n,r,i);return DE(n,r)})}(n,e,t);return new od(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>DE(n,h)),l}}const r=function XH(n){return new ty(new Ru(n.url),new Ru(n.params),new Ru(n.queryParams),new Ru(n.fragment),new Ru(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>DE(n,a));return new od(r,i)}}function wT(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function TE(n){return"object"==typeof n&&null!=n&&n.outlets}function UR(n,e,t,r,i){let a={};if(r&&Wi(r,(h,_)=>{a[_]=Array.isArray(h)?h.map(E=>`${E}`):`${h}`}),n===e)return new _g(t,a,i);const l=j1(n,e,t);return new _g(l,a,i)}function j1(n,e,t){const r={};return Wi(n.children,(i,a)=>{r[a]=i===e?t:j1(i,e,t)}),new en(n.segments,r)}class H1{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&wT(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(TE);if(i&&i!==b1(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class BR{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function $1(n,e,t){if(n||(n=new en([],{})),0===n.segments.length&&n.hasChildren())return ET(n,e,t);const r=function s$(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(TE(h))break;const _=`${h}`,E=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&E&&"object"==typeof E&&void 0===E.outlets){if(!W1(_,E,l))return a;r+=2}else{if(!W1(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new en(n.segments.slice(0,r.pathIndex),{});return a.children[Kt]=new en(n.segments.slice(r.pathIndex),n.children),ET(a,0,i)}return r.match&&0===i.length?new en(n.segments,{}):r.match&&!n.hasChildren()?jR(n,e,t):r.match?ET(n,0,i):jR(n,e,t)}function ET(n,e,t){if(0===t.length)return new en(n.segments,{});{const r=function i$(n){return TE(n[0])?n[0].outlets:{[Kt]:n}}(t),i={};return Wi(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=$1(n.children[l],e,a))}),Wi(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new en(n.segments,i)}}function jR(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(TE(a)){const _=o$(a.outlets);return new en(r,_)}if(0===i&&wT(t[0])){r.push(new IE(n.segments[e].path,G1(t[0]))),i++;continue}const l=TE(a)?a.outlets[Kt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&wT(h)?(r.push(new IE(l,G1(h))),i+=2):(r.push(new IE(l,{})),i++)}return new en(r,{})}function o$(n){const e={};return Wi(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=jR(new en([],{}),0,t))}),e}function G1(n){const e={};return Wi(n,(t,r)=>e[r]=`${t}`),e}function W1(n,e,t){return n==t.path&&kl(e,t.parameters)}class u${constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),LR(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=ey(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),Wi(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ey(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=ey(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=ey(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new AH(a.value.snapshot))}),e.children.length&&this.forwardEvent(new TH(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(LR(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),LR(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function l$(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),_=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=_,l.outlet&&l.outlet.activateWith(i,_),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class HR{constructor(e,t){this.routes=e,this.module=t}}function df(n){return"function"==typeof n}function vg(n){return n instanceof _g}const SE=Symbol("INITIAL_VALUE");function AE(){return Cn(n=>function pH(...n){const e=(0,An.yG)(n),t=(0,An.jO)(n),{args:r,keys:i}=iO(n);if(0===r.length)return(0,Jt.D)([],e);const a=new xn.y(function gH(n,e,t=os.y){return r=>{f1(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let _=0;_<i;_++)f1(e,()=>{const E=(0,Jt.D)(n[_],e);let D=!1;E.subscribe((0,xt.x)(r,S=>{a[_]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>oO(i,l):os.y));return t?a.pipe(sO(t)):a}(n.map(e=>e.pipe((0,Bs.q)(1),jf(SE)))).pipe(hu((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==SE?i:(a===SE&&(r=!0),r||!1!==a&&l!==t.length-1&&!vg(a)?i:a),e)},SE),Br(e=>e!==SE),(0,pt.U)(e=>vg(e)?e:!0===e),(0,Bs.q)(1)))}class g${constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xE,this.attachRef=null}}class xE{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new g$,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let $R=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new m.vpe,this.deactivateEvents=new m.vpe,this.attachEvents=new m.vpe,this.detachEvents=new m.vpe,this.name=a||Kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,_=new m$(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,_),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(xE),m.Y36(m.s_b),m.Y36(m._Vd),m.$8M("name"),m.Y36(m.sBO))},n.\u0275dir=m.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class m${constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===ty?this.route:e===xE?this.childContexts:this.parent.get(e,t)}}let q1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&m._UZ(0,"router-outlet")},directives:[$R],encapsulation:2}),n})();function z1(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];_$(r,y$(e,r))}}function _$(n,e){n.children&&z1(n.children,e)}function y$(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function GR(n){const e=n.children&&n.children.map(GR),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Kt&&(t.component=q1),t}function Ma(n){return n.outlet||Kt}function K1(n,e){const t=n.filter(r=>Ma(r)===e);return t.push(...n.filter(r=>Ma(r)!==e)),t}const Z1={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function CT(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Z1):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const a=(e.matcher||MH)(t,n,e);if(!a)return Object.assign({},Z1);const l={};Wi(a.posParams,(_,E)=>{l[E]=_.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,remainingSegments:t.slice(a.consumed.length),parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function IT(n,e,t,r,i="corrected"){if(t.length>0&&function E$(n,e,t){return t.some(r=>bT(n,e,r)&&Ma(r)!==Kt)}(n,t,r)){const l=new en(e,function w$(n,e,t,r){const i={};i[Kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Ma(a)!==Kt){const l=new en([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Ma(a)]=l}return i}(n,e,r,new en(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function C$(n,e,t){return t.some(r=>bT(n,e,r))}(n,t,r)){const l=new en(n.segments,function v$(n,e,t,r,i,a){const l={};for(const h of r)if(bT(n,t,h)&&!i[Ma(h)]){const _=new en([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Ma(h)]=_}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new en(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function bT(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Y1(n,e,t,r){return!!(Ma(n)===r||r!==Kt&&bT(e,t,n))&&("**"===n.path||CT(e,n,t).matched)}function Q1(n,e,t){return 0===e.length&&!n.children[t]}class DT{constructor(e){this.segmentGroup=e||null}}class J1{constructor(e){this.urlTree=e}}function RE(n){return fT(new DT(n))}function X1(n){return fT(new J1(n))}function I$(n){return fT(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`))}class T${constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(m.h0i)}apply(){const e=IT(this.urlTree.root,[],[],this.config).segmentGroup,t=new en(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,Kt).pipe((0,pt.U)(a=>this.createUrlTree(WR(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cf(a=>{if(a instanceof J1)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof DT?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,Kt).pipe((0,pt.U)(i=>this.createUrlTree(WR(i),e.queryParams,e.fragment))).pipe(cf(i=>{throw i instanceof DT?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new en([],{[Kt]:e}):e;return new _g(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,pt.U)(a=>new en([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Jt.D)(i).pipe(EE(a=>{const l=r.children[a],h=K1(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,pt.U)(_=>({segment:_,outlet:a})))}),hu((a,l)=>(a[l.outlet]=l.segment,a),{}),function _H(n,e){const t=arguments.length>=2;return r=>r.pipe(n?Br((i,a)=>n(i,a,r)):os.y,RR(1),t?vs(e):pr(()=>new ss))}())}expandSegment(e,t,r,i,a,l){return(0,Jt.D)(r).pipe(EE(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(cf(E=>{if(E instanceof DT)return ft(null);throw E}))),mi(h=>!!h),cf((h,_)=>{if(h instanceof ss||"EmptyError"===h.name)return Q1(t,i,a)?ft(new en([],{})):RE(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return Y1(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):RE(t):RE(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?X1(a):this.lineralizeSegments(r,a).pipe((0,hs.z)(l=>{const h=new en(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:_,remainingSegments:E,positionalParamSegments:D}=CT(t,i,a);if(!h)return RE(t);const S=this.applyRedirectCommands(_,i.redirectTo,D);return i.redirectTo.startsWith("/")?X1(S):this.lineralizeSegments(i,S).pipe((0,hs.z)(P=>this.expandSegment(e,t,r,P.concat(E),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?ft(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,pt.U)(S=>(r._loadedConfig=S,new en(i,{})))):ft(new en(i,{}));const{matched:l,consumedSegments:h,remainingSegments:_}=CT(t,r,i);return l?this.getChildConfig(e,r,i).pipe((0,hs.z)(D=>{const S=D.module,P=D.routes,{segmentGroup:U,slicedSegments:z}=IT(t,h,_,P),ye=new en(U.segments,U.children);if(0===z.length&&ye.hasChildren())return this.expandChildren(S,P,ye).pipe((0,pt.U)(ot=>new en(h,ot)));if(0===P.length&&0===z.length)return ft(new en(h,{}));const Ne=Ma(r)===a;return this.expandSegment(S,ye,P,z,Ne?Kt:a,!0).pipe((0,pt.U)(ht=>new en(h.concat(ht.segments),ht.children)))})):RE(t)}getChildConfig(e,t,r){return t.children?ft(new HR(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ft(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,hs.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,pt.U)(a=>(t._loadedConfig=a,a))):function b$(n){return fT(NR(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ft(new HR([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;if(!i||0===i.length)return ft(!0);const a=i.map(l=>{const h=e.get(l);let _;if(function d$(n){return n&&df(n.canLoad)}(h))_=h.canLoad(t,r);else{if(!df(h))throw new Error("Invalid CanLoad guard");_=h(t,r)}return Ol(_)});return ft(a).pipe(AE(),(0,Vo.b)(l=>{if(!vg(l))return;const h=NR(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,pt.U)(l=>!0===l))}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ft(r);if(i.numberOfChildren>1||!i.children[Kt])return I$(e.redirectTo);i=i.children[Kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new _g(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Wi(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return Wi(t.children,(h,_)=>{l[_]=this.createSegmentGroup(e,h,r,i)}),new en(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function WR(n){const e={};for(const r of Object.keys(n.children)){const a=WR(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function S$(n){if(1===n.numberOfChildren&&n.children[Kt]){const e=n.children[Kt];return new en(n.segments.concat(e.segments),e.children)}return n}(new en(n.segments,e))}class eF{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class TT{constructor(e,t){this.component=e,this.route=t}}function x$(n,e,t){const r=n._root;return ME(r,e?e._root:null,t,[r.value])}function ST(n,e,t){const r=function M$(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ME(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=ey(e);return n.children.forEach(l=>{(function N$(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function P$(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!yg(n.url,e.url);case"pathParamsOrQueryParamsChange":return!yg(n.url,e.url)||!kl(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!VR(n,e)||!kl(n.queryParams,e.queryParams);default:return!VR(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new eF(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ME(n,e,a.component?h?h.children:null:t,r,i),_&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new TT(h.outlet.component,l))}else l&&NE(e,h,i),i.canActivateChecks.push(new eF(r)),ME(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),Wi(a,(l,h)=>NE(l,t.getContext(h),i)),i}function NE(n,e,t){const r=ey(n),i=n.value;Wi(r,(a,l)=>{NE(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new TT(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class H${}function tF(n){return new xn.y(e=>e.error(n))}class G${constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=IT(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,Kt);if(null===t)return null;const r=new vT([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new od(r,t),a=new U1(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=V1(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=K1(e,a),_=this.processSegmentGroup(h,l,a);if(null===_)return null;r.push(..._)}const i=nF(r);return function W$(n){n.sort((e,t)=>e.value.outlet===Kt?-1:t.value.outlet===Kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return Q1(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Y1(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const U=r.length>0?b1(r).parameters:{};a=new vT(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sF(e),Ma(e),e.component,e,rF(t),iF(t)+r.length,oF(e))}else{const U=CT(t,e,r);if(!U.matched)return null;l=U.consumedSegments,h=U.remainingSegments,a=new vT(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,sF(e),Ma(e),e.component,e,rF(t),iF(t)+l.length,oF(e))}const _=function q$(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:E,slicedSegments:D}=IT(t,l,h,_.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===D.length&&E.hasChildren()){const U=this.processChildren(_,E);return null===U?null:[new od(a,U)]}if(0===_.length&&0===D.length)return[new od(a,[])];const S=Ma(e)===i,P=this.processSegment(_,E,D,S?Kt:i);return null===P?null:[new od(a,P)]}}function z$(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function nF(n){const e=[],t=new Set;for(const r of n){if(!z$(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=nF(r.children);e.push(new od(r.value,i))}return e.filter(r=>!t.has(r))}function rF(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function iF(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function sF(n){return n.data||{}}function oF(n){return n.resolve||{}}function aF(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function qR(n){return Cn(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,pt.U)(()=>e)):ft(e)})}class tG extends class eG{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const zR=new m.OlP("ROUTES");class uF{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,pt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new HR(I1(l.injector.get(zR,void 0,m.XFs.Self|m.XFs.Optional)).map(GR),l)}),cf(a=>{throw t._loader$=void 0,a}));return t._loader$=new mH(i,()=>new yo.x).pipe(m1()),t._loader$}loadModuleFactory(e){return Ol(e()).pipe((0,hs.z)(t=>t instanceof m.YKP?ft(t):(0,Jt.D)(this.compiler.compileModuleAsync(t))))}}class rG{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function iG(n){throw n}function sG(n,e,t){return e.parse("/")}function lF(n,e){return ft(null)}const oG={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},aG={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let so=(()=>{class n{constructor(t,r,i,a,l,h,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new yo.x,this.errorHandler=iG,this.malformedUriErrorHandler=sG,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:lF,afterPreactivation:lF},this.urlHandlingStrategy=new rG,this.routeReuseStrategy=new tG,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(m.h0i),this.console=l.get(m.c2e);const S=l.get(m.R0b);this.isNgZoneEnabled=S instanceof m.R0b&&m.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function PH(){return new _g(new en([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new uF(l,h,P=>this.triggerEvent(new y1(P)),P=>this.triggerEvent(new v1(P))),this.routerState=L1(this.currentUrlTree,this.rootComponentType),this.transitions=new Ru({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(Br(i=>0!==i.id),(0,pt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Cn(i=>{let a=!1,l=!1;return ft(i).pipe((0,Vo.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Cn(h=>{const _=this.browserUrlTree.toString(),E=!this.navigated||h.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||E)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return cF(h.source)&&(this.browserUrlTree=h.extractedUrl),ft(h).pipe(Cn(S=>{const P=this.transitions.getValue();return r.next(new MR(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?J_.E:Promise.resolve(S)}),function A$(n,e,t,r){return Cn(i=>function D$(n,e,t,r,i){return new T$(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,pt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Vo.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function K$(n,e,t,r,i){return(0,hs.z)(a=>function $$(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new G$(n,e,t,r,i,a).recognize();return null===l?tF(new H$):ft(l)}catch(l){return tF(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,pt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Vo.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new wH(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(E&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:z,restoredState:ye,extras:Ne}=h,_t=new MR(P,this.serializeUrl(U),z,ye);r.next(_t);const ht=L1(U,this.rootComponentType).snapshot;return ft(Object.assign(Object.assign({},h),{targetSnapshot:ht,urlAfterRedirects:U,extras:Object.assign(Object.assign({},Ne),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),J_.E}),qR(h=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.beforePreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,Vo.b)(h=>{const _=new EH(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(_)}),(0,pt.U)(h=>Object.assign(Object.assign({},h),{guards:x$(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function k$(n,e){return(0,hs.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ft(Object.assign(Object.assign({},t),{guardsResult:!0})):function O$(n,e,t,r){return(0,Jt.D)(n).pipe((0,hs.z)(i=>function j$(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ft(a.map(h=>{const _=ST(h,e,i);let E;if(function p$(n){return n&&df(n.canDeactivate)}(_))E=Ol(_.canDeactivate(n,e,t,r));else{if(!df(_))throw new Error("Invalid CanDeactivate guard");E=Ol(_(n,e,t,r))}return E.pipe(mi())})).pipe(AE()):ft(!0)}(i.component,i.route,t,e,r)),mi(i=>!0!==i,!0))}(l,r,i,n).pipe((0,hs.z)(h=>h&&function c$(n){return"boolean"==typeof n}(h)?function F$(n,e,t,r){return(0,Jt.D)(e).pipe(EE(i=>tv(function V$(n,e){return null!==n&&e&&e(new DH(n)),ft(!0)}(i.route.parent,r),function L$(n,e){return null!==n&&e&&e(new SH(n)),ft(!0)}(i.route,r),function B$(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function R$(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>p1(()=>ft(l.guards.map(_=>{const E=ST(_,l.node,t);let D;if(function f$(n){return n&&df(n.canActivateChild)}(E))D=Ol(E.canActivateChild(r,n));else{if(!df(E))throw new Error("Invalid CanActivateChild guard");D=Ol(E(r,n))}return D.pipe(mi())})).pipe(AE())));return ft(a).pipe(AE())}(n,i.path,t),function U$(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ft(!0);const i=r.map(a=>p1(()=>{const l=ST(a,e,t);let h;if(function h$(n){return n&&df(n.canActivate)}(l))h=Ol(l.canActivate(e,n));else{if(!df(l))throw new Error("Invalid CanActivate guard");h=Ol(l(e,n))}return h.pipe(mi())}));return ft(i).pipe(AE())}(n,i.route,t))),mi(i=>!0!==i,!0))}(r,a,n,e):ft(h)),(0,pt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Vo.b)(h=>{if(vg(h.guardsResult)){const E=NR(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw E.url=h.guardsResult,E}const _=new CH(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(_)}),Br(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),qR(h=>{if(h.guards.canActivateChecks.length)return ft(h).pipe((0,Vo.b)(_=>{const E=new IH(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}),Cn(_=>{let E=!1;return ft(_).pipe(function Z$(n,e){return(0,hs.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ft(t);let a=0;return(0,Jt.D)(i).pipe(EE(l=>function Y$(n,e,t,r){return function Q$(n,e,t,r){const i=aF(n);if(0===i.length)return ft({});const a={};return(0,Jt.D)(i).pipe((0,hs.z)(l=>function J$(n,e,t,r){const i=ST(n,e,r);return Ol(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Vo.b)(h=>{a[l]=h}))),RR(1),(0,hs.z)(()=>aF(a).length===i.length?ft(a):J_.E))}(n._resolve,n,e,r).pipe((0,pt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),V1(n,t).resolve),null)))}(l.route,r,n,e)),(0,Vo.b)(()=>a++),RR(1),(0,hs.z)(l=>a===i.length?ft(t):J_.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Vo.b)({next:()=>E=!0,complete:()=>{E||(this.restoreHistory(_),this.cancelNavigationTransition(_,"At least one route resolver didn't emit any value."))}}))}),(0,Vo.b)(_=>{const E=new bH(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(E)}))}),qR(h=>{const{targetSnapshot:_,id:E,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.afterPreactivation(_,{navigationId:E,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,pt.U)(h=>{const _=function QH(n,e,t){const r=DE(n,e._root,t?t._root:void 0);return new F1(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:_})}),(0,Vo.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,pt.U)(r=>(new u$(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Vo.b)({next(){a=!0},complete(){a=!0}}),function yH(n){return(0,Yn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),cf(h=>{if(l=!0,function RH(n){return n&&n[E1]}(h)){const _=vg(h.url);_||(this.navigated=!0,this.restoreHistory(i,!0));const E=new _1(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(E),_?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||cF(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new vH(i.id,this.serializeUrl(i.extractedUrl),h);r.next(_);try{i.resolve(this.errorHandler(h))}catch(E){i.reject(E)}}return J_.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const _=Object.assign({},l);delete _.navigationId,delete _.\u0275routerPageId,0!==Object.keys(_).length&&(a.state=_)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){z1(t),this.config=t.map(GR),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:_}=r,E=i||this.routerState.root,D=_?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function e$(n,e,t,r,i){if(0===t.length)return UR(e.root,e.root,e.root,r,i);const a=function t$(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new H1(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return Wi(a.outlets,(_,E)=>{h[E]="string"==typeof _?_.split("/"):_}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,_)=>{0==_&&"."===h||(0==_&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new H1(t,e,r)}(t);if(a.toRoot())return UR(e.root,e.root,new en([],{}),r,i);const l=function n$(n,e,t){if(n.isAbsolute)return new BR(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new BR(a,a===e.root,0)}const r=wT(n.commands[0])?0:1;return function r$(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new BR(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?ET(l.segmentGroup,l.index,a.commands):$1(l.segmentGroup,l.index,a.commands);return UR(e.root,l.segmentGroup,h,r,i)}(E,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=vg(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function uG(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},oG):!1===r?Object.assign({},aG):r,vg(t))return T1(this.currentUrlTree,t,i);const a=this.parseUrl(t);return T1(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new CE(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,_;if(this.disposed)return Promise.resolve(!1);let E,D,S;l?(E=l.resolve,D=l.reject,S=l.promise):S=new Promise((z,ye)=>{E=z,D=ye});const P=++this.navigationId;let U;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),U=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(h=this.browserPageId)&&void 0!==h?h:0:(null!==(_=this.browserPageId)&&void 0!==_?_:0)+1):U=0,this.setTransition({id:P,targetPageId:U,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:E,reject:D,promise:S,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),S.catch(z=>Promise.reject(z))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new _1(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function cF(n){return"imperative"!==n}let PE=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new yo.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:ny(this.skipLocationChange),replaceUrl:ny(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ny(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(so),m.Y36(ty),m.$8M("tabindex"),m.Y36(m.Qsj),m.Y36(m.SBq))},n.\u0275dir=m.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&m.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})(),AT=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new yo.x,this.subscription=t.events.subscribe(a=>{a instanceof CE&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:ny(this.skipLocationChange),replaceUrl:ny(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ny(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(so),m.Y36(ty),m.Y36(pe))},n.\u0275dir=m.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&m.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&m.uIk("target",r.target)("href",r.href,m.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[m.TTD]}),n})();function ny(n){return""===n||!!n}class dF{}class hF{preload(e,t){return ft(null)}}let fF=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new uF(i,r,_=>t.triggerEvent(new y1(_)),_=>t.triggerEvent(new v1(_)))}setUpPreloading(){this.subscription=this.router.events.pipe(Br(t=>t instanceof CE),EE(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(m.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,Jt.D)(i).pipe((0,xo.J)(),(0,pt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?ft(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,hs.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(so),m.LFG(m.Sil),m.LFG(m.zs3),m.LFG(dF))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})(),KR=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof MR?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof CE&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof w1&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new w1(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){m.$Z()},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();const wg=new m.OlP("ROUTER_CONFIGURATION"),pF=new m.OlP("ROUTER_FORROOT_GUARD"),hG=[Ce,{provide:R1,useClass:M1},{provide:so,useFactory:function _G(n,e,t,r,i,a,l={},h,_){const E=new so(null,n,e,t,r,i,I1(a));return h&&(E.urlHandlingStrategy=h),_&&(E.routeReuseStrategy=_),function yG(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,E),l.enableTracing&&E.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),E},deps:[R1,xE,Ce,m.zs3,m.Sil,zR,wg,[class nG{},new m.FiY],[class X${},new m.FiY]]},xE,{provide:ty,useFactory:function vG(n){return n.routerState.root},deps:[so]},fF,hF,class dG{preload(e,t){return t().pipe(cf(()=>ft(null)))}},{provide:wg,useValue:{enableTracing:!1}}];function fG(){return new m.PXZ("Router",so)}let ZR=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[hG,gF(t),{provide:pF,useFactory:mG,deps:[[so,new m.FiY,new m.tp0]]},{provide:wg,useValue:r||{}},{provide:pe,useFactory:gG,deps:[ae,[new m.tBr(qe),new m.FiY],wg]},{provide:KR,useFactory:pG,deps:[so,Ul,wg]},{provide:dF,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:hF},{provide:m.PXZ,multi:!0,useFactory:fG},[YR,{provide:m.ip1,multi:!0,useFactory:wG,deps:[YR]},{provide:mF,useFactory:EG,deps:[YR]},{provide:m.tb,multi:!0,useExisting:mF}]]}}static forChild(t){return{ngModule:n,providers:[gF(t)]}}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(pF,8),m.LFG(so,8))},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({}),n})();function pG(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new KR(n,e,t)}function gG(n,e,t={}){return t.useHash?new Te(n,e):new Ye(n,e)}function mG(n){return"guarded"}function gF(n){return[{provide:m.deG,multi:!0,useValue:n},{provide:zR,multi:!0,useValue:n}]}let YR=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new yo.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(so),l=this.injector.get(wg);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?ft(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(wg),i=this.injector.get(fF),a=this.injector.get(KR),l=this.injector.get(so),h=this.injector.get(m.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(m.zs3))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac}),n})();function wG(n){return n.appInitializer.bind(n)}function EG(n){return n.bootstrapListener.bind(n)}const mF=new m.OlP("Router Initializer"),IG=[];let bG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n}),n.\u0275inj=m.cJS({imports:[[ZR.forRoot(IG)],ZR]}),n})(),DG=(()=>{class n{constructor(){this.title="ScadenzarioAngular",this.date=new Date,this.day=this.date.getDate(),this.month=this.date.getMonth(),this.year=this.date.getFullYear(),this.today=`${this.day}/${this.month+1}/${this.year}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-root"]],decls:13,vars:1,consts:[[1,"header"],[1,"link"],["routerLink","home"],["routerLink","login"],["routerLink","signup"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"h1"),m._uU(2,"SCADENZARIO"),m.qZA(),m.TgZ(3,"div",1)(4,"a",2),m._uU(5,"HOME"),m.qZA(),m.TgZ(6,"a",3),m._uU(7,"LOG-IN"),m.qZA(),m.TgZ(8,"a",4),m._uU(9,"SIGN-UP"),m.qZA(),m.TgZ(10,"p"),m._uU(11),m.qZA()()(),m._UZ(12,"router-outlet")),2&t&&(m.xp6(11),m.Oqu(r.today))},directives:[AT,$R],styles:[".header[_ngcontent-%COMP%]{height:200px;padding:0 20px;margin-bottom:20px;background-color:orange;display:flex;flex-wrap:wrap;align-content:space-around;justify-content:space-between;align-items:center}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#ff0;font-size:50px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:50px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.header[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;flex-direction:row;align-items:center}.header[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin:10px;text-decoration:none}"]}),n})(),QR=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return n.\u0275fac=function(t){return new(t||n)(m.LFG(FN),m.LFG(Ud),m.LFG(so),m.LFG(m.R0b))},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),TG=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(QR))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-login"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Username","required","",1,"formControl"],["userName",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign In"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(7),h=m.MAs(10);return r.authService.SignIn(l.value,h.value)}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()(),m.TgZ(17,"div",11)(18,"span",12),m._uU(19,"Forgot Password?"),m.qZA()()(),m.TgZ(20,"div",13)(21,"span"),m._uU(22,"Don't have an account?"),m.TgZ(23,"span",14),m._uU(24," Sign Up"),m.qZA()()()()()}},directives:[PE],styles:[""]}),n})(),_F=(()=>{class n{constructor(){this.items=[],null===JSON.parse(localStorage.getItem("item"))?localStorage.setItem("item",JSON.stringify([])):this.items=JSON.parse(localStorage.getItem("item")),console.log(this.items)}addItem(t){this.items.push(t),localStorage.setItem("item",JSON.stringify(this.items)),console.log(this.items)}removeItem(t){this.items.splice(t,1),localStorage.setItem("item",JSON.stringify(this.items))}getItems(){return this.items}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=m.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),SG=(()=>{class n{constructor(t){this.scadenzarioService=t,this.today=new Date,this.item="",this.expired=new Date,this.expiredDay=0}addItem(){this.scadenzarioService.addItem({item:this.item,expired:this.expired})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(_F))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-input"]],decls:11,vars:2,consts:[[1,"wrapper"],[1,"item"],["for","item"],["name","item","id","item",3,"ngModel","ngModelChange"],[1,"expired"],["for","expired"],["type","date","name","expired","id","expired",3,"ngModel","ngModelChange"],[3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0)(1,"div",1)(2,"label",2),m._uU(3,"Descrizione"),m.qZA(),m.TgZ(4,"input",3),m.NdJ("ngModelChange",function(a){return r.item=a}),m.qZA()(),m.TgZ(5,"div",4)(6,"label",5),m._uU(7,"Scadenza"),m.qZA(),m.TgZ(8,"input",6),m.NdJ("ngModelChange",function(a){return r.expired=a}),m.qZA()(),m.TgZ(9,"button",7),m.NdJ("click",function(){return r.addItem()}),m._uU(10,"Inserisci"),m.qZA()()),2&t&&(m.xp6(4),m.Q6J("ngModel",r.item),m.xp6(4),m.Q6J("ngModel",r.expired))},directives:[rT,NO,IR],styles:[".wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:space-around;align-content:space-around}.wrapper[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], .wrapper[_ngcontent-%COMP%]   .expired[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;margin:10px}.wrapper[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:30px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}.wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:30px;border-radius:10px}.wrapper[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{height:40px;background-color:orange;font-size:30px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif}"]}),n})();function AG(n,e){if(1&n){const t=m.EpF();m.TgZ(0,"div",2),m._uU(1),m.TgZ(2,"button",3),m.NdJ("click",function(){const a=m.CHM(t).index;return m.oxw().deleteItem(a)}),m._uU(3,"X"),m.qZA(),m.TgZ(4,"p"),m._uU(5),m.qZA(),m.TgZ(6,"p"),m._uU(7),m.qZA(),m.TgZ(8,"p"),m._uU(9),m.qZA()()}if(2&n){const t=e.$implicit,r=e.index,i=m.oxw();m.Q6J("ngClass",i.getDiffDays(t.expired)<7?"nearExpired":"farExpired"),m.xp6(1),m.hij(" ",i.deleteExpired(t.expired,r)," "),m.xp6(4),m.hij("SCADE TRA ",i.getDiffDays(t.expired)," GIORNI"),m.xp6(2),m.Oqu(t.item),m.xp6(2),m.Oqu(t.expired)}}let xG=(()=>{class n{constructor(t){this.scadenzarioService=t,this.today=new Date,this.items=this.scadenzarioService.getItems(),this.itemsSorted=this.items.sort((r,i)=>+new Date(r.expired)-+new Date(i.expired)),console.log(this.itemsSorted)}deleteExpired(t,r){this.getDiffDays(t)<1&&this.deleteItem(r),console.log(this.getDiffDays)}getDiffDays(t){return Math.floor((new Date(t).getTime()-(new Date).getTime())/864e5+1)}deleteItem(t){this.scadenzarioService.removeItem(t)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(_F))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-card-item"]],decls:2,vars:1,consts:[[1,"wrapper"],["class","cardItem",3,"ngClass",4,"ngFor","ngForOf"],[1,"cardItem",3,"ngClass"],[1,"deleteButton",3,"click"]],template:function(t,r){1&t&&(m.TgZ(0,"div",0),m.YNc(1,AG,10,5,"div",1),m.qZA()),2&t&&(m.xp6(1),m.Q6J("ngForOf",r.itemsSorted))},directives:[rr,ps],styles:[".wrapper[_ngcontent-%COMP%]{margin:10px;display:flex;flex-direction:row;flex-wrap:wrap}.wrapper[_ngcontent-%COMP%]   .cardItem[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;align-items:center;justify-content:space-around;height:300px;width:300px;border:1px solid;margin:5px;padding:15px;font-family:Franklin Gothic Medium,Arial Narrow,Arial,sans-serif;font-size:30px}.wrapper[_ngcontent-%COMP%]   .nearExpired[_ngcontent-%COMP%]{background-color:red}.wrapper[_ngcontent-%COMP%]   .deleteButton[_ngcontent-%COMP%]{height:30px;width:30px;position:absolute;right:10px;top:10px}"]}),n})();const RG=[{path:"home",component:(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&m._UZ(0,"app-input")(1,"app-card-item")},directives:[SG,xG],styles:[""]}),n})()},{path:"signup",component:(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(m.Y36(QR))},n.\u0275cmp=m.Xpm({type:n,selectors:[["app-signin"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/login",1,"redirect"]],template:function(t,r){if(1&t){const i=m.EpF();m.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),m._uU(4,"Sign Up"),m.qZA(),m.TgZ(5,"div",3),m._UZ(6,"input",4,5),m.qZA(),m.TgZ(8,"div",3),m._UZ(9,"input",6,7),m.qZA(),m.TgZ(11,"div",3)(12,"input",8),m.NdJ("click",function(){m.CHM(i);const l=m.MAs(7),h=m.MAs(10);return r.authService.SignUp(l.value,h.value)}),m.qZA()(),m.TgZ(13,"div",3)(14,"span",9)(15,"span",10),m._uU(16,"Or"),m.qZA()()()(),m.TgZ(17,"div",11)(18,"span"),m._uU(19,"Already have an account? "),m.TgZ(20,"span",12),m._uU(21,"Log In"),m.qZA()()()()()}},directives:[PE],styles:[""]}),n})()},{path:"login",component:TG}];let MG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=m.oAB({type:n,bootstrap:[DG]}),n.\u0275inj=m.cJS({providers:[QR],imports:[[Zn.hO.initializeApp(rO_firebase),jE,qL,cM,sj,za,bG,hH,ZR.forRoot(RG)]]}),n})();(0,m.G48)(),Gu().bootstrapModule(MG).catch(n=>console.error(n))},5867:(Je,we,O)=>{O.d(we,{C6:()=>m.getApps,Mq:()=>m.getApp});var m=O(9681);(0,m.registerVersion)("firebase","9.8.2","app")},127:(Je,we,O)=>{O.d(we,{Z:()=>m.Z});var m=O(3942);m.Z.registerVersion("firebase","9.8.2","app-compat")},8775:(Je,we,O)=>{O.r(we);var m=O(5861),ee=O(3942),F=O(2090),le=O(9681),re=O(655),ge=O(1877),ce=O(4859);const ke=function We(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ue=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pe=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ge.Yd("@firebase/auth");function Ye(y,...f){qe.logLevel<=ge.in.ERROR&&qe.error(`Auth (${le.SDK_VERSION}): ${y}`,...f)}function Te(y,...f){throw je(y,...f)}function Ce(y,...f){return je(y,...f)}function Ie(y,f,g){const w=Object.assign(Object.assign({},Ue()),{[f]:g});return new F.LL("auth","Firebase",w).create(f,{appName:y.name})}function Be(y,f,g){if(!(f instanceof g))throw g.name!==f.constructor.name&&Te(y,"argument-error"),Ie(y,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(y,...f){if("string"!=typeof y){const g=f[0],w=[...f.slice(1)];return w[0]&&(w[0].appName=y.name),y._errorFactory.create(g,...w)}return pe.create(y,...f)}function $(y,f,...g){if(!y)throw je(f,...g)}function Ee(y){const f="INTERNAL ASSERTION FAILED: "+y;throw Ye(f),new Error(f)}function Y(y,f){y||Ee(f)}const ie=new Map;function te(y){Y(y instanceof Function,"Expected a class definition");let f=ie.get(y);return f?(Y(f instanceof y,"Instance stored in cache mismatched with class"),f):(f=new y,ie.set(y,f),f)}function Oe(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Ht()||"https:"===Ht()}function Ht(){var y;return"undefined"!=typeof self&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class rn{constructor(f,g){this.shortDelay=f,this.longDelay=g,Y(g>f,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function Ft(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function kn(y,f){Y(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return f?`${g}${f.startsWith("/")?f.slice(1):f}`:g}class sn{static initialize(f,g,w){this.fetchImpl=f,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Ee("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Ee("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Ee("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Qt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Pr=new rn(3e4,6e4);function qt(y,f){return y.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:y.tenantId}):f}function Lt(y,f,g,w){return qi.apply(this,arguments)}function qi(){return(qi=(0,m.Z)(function*(y,f,g,w,A={}){return ci(y,A,(0,m.Z)(function*(){let N={},Z={};w&&("GET"===f?Z=w:N={body:JSON.stringify(w)});const oe=(0,F.xO)(Object.assign({key:y.config.apiKey},Z)).slice(1),Le=yield y._getAdditionalHeaders();return Le["Content-Type"]="application/json",y.languageCode&&(Le["X-Firebase-Locale"]=y.languageCode),sn.fetch()(Ms(y,y.config.apiHost,g,oe),Object.assign({method:f,headers:Le,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ci(y,f,g){return vr.apply(this,arguments)}function vr(){return(vr=(0,m.Z)(function*(y,f,g){y._canInitEmulator=!1;const w=Object.assign(Object.assign({},Qt),f);try{const A=new Jr(y),N=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const Z=yield N.json();if("needConfirmation"in Z)throw Ri(y,"account-exists-with-different-credential",Z);if(N.ok&&!("errorMessage"in Z))return Z;{const oe=N.ok?Z.errorMessage:Z.error.message,[Le,Ke]=oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Le)throw Ri(y,"credential-already-in-use",Z);if("EMAIL_EXISTS"===Le)throw Ri(y,"email-already-in-use",Z);if("USER_DISABLED"===Le)throw Ri(y,"user-disabled",Z);const ut=w[Le]||Le.toLowerCase().replace(/[_\s]+/g,"-");if(Ke)throw Ie(y,ut,Ke);Te(y,ut)}}catch(A){if(A instanceof F.ZR)throw A;Te(y,"network-request-failed")}})).apply(this,arguments)}function kr(y,f,g,w){return zi.apply(this,arguments)}function zi(){return(zi=(0,m.Z)(function*(y,f,g,w,A={}){const N=yield Lt(y,f,g,w,A);return"mfaPendingCredential"in N&&Te(y,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function Ms(y,f,g,w){const A=`${f}${g}?${w}`;return y.config.emulator?kn(y.config,A):`${y.config.apiScheme}://${A}`}class Jr{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Ce(this.auth,"network-request-failed")),Pr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ri(y,f,g){const w={appName:y.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Ce(y,f,w);return A.customData._tokenResponse=g,A}function di(){return(di=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Tn(y,f){return On.apply(this,arguments)}function On(){return(On=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ns(y,f){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function nr(y){if(y)try{const f=new Date(Number(y));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function oo(){return(oo=(0,m.Z)(function*(y,f=!1){const g=(0,F.m9)(y),w=yield g.getIdToken(f),A=rt(w);$(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const N="object"==typeof A.firebase?A.firebase:void 0,Z=null==N?void 0:N.sign_in_provider;return{claims:A,token:w,authTime:nr($t(A.auth_time)),issuedAtTime:nr($t(A.iat)),expirationTime:nr($t(A.exp)),signInProvider:Z||null,signInSecondFactor:(null==N?void 0:N.sign_in_second_factor)||null}})).apply(this,arguments)}function $t(y){return 1e3*Number(y)}function rt(y){const[f,g,w]=y.split(".");if(void 0===f||void 0===g||void 0===w)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(g);return A?JSON.parse(A):(Ye("Failed to decode base64 JWT payload"),null)}catch(A){return Ye("Caught error parsing JWT payload as JSON",A),null}}function wr(y,f){return fi.apply(this,arguments)}function fi(){return(fi=(0,m.Z)(function*(y,f,g=!1){if(g)return f;try{return yield f}catch(w){throw w instanceof F.ZR&&Vt(w)&&y.auth.currentUser===y&&(yield y.auth.signOut()),w}})).apply(this,arguments)}function Vt({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ao{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var g;if(f){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(f=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(f);this.timerId=setTimeout((0,m.Z)(function*(){yield g.iteration()}),w)}iteration(){var f=this;return(0,m.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g.code&&f.schedule(!0))}f.schedule()})()}}class Er{constructor(f,g){this.createdAt=f,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=nr(this.lastLoginAt),this.creationTime=nr(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Cr(y){return B.apply(this,arguments)}function B(){return(B=(0,m.Z)(function*(y){var f;const g=y.auth,w=yield y.getIdToken(),A=yield wr(y,Ns(g,{idToken:w}));$(null==A?void 0:A.users.length,g,"internal-error");const N=A.users[0];y._notifyReloadListener(N);const Z=(null===(f=N.providerUserInfo)||void 0===f?void 0:f.length)?W(N.providerUserInfo):[],oe=De(y.providerData,Z),ut=!!y.isAnonymous&&!(y.email&&N.passwordHash||(null==oe?void 0:oe.length)),lt={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:oe,metadata:new Er(N.createdAt,N.lastLoginAt),isAnonymous:ut};Object.assign(y,lt)})).apply(this,arguments)}function K(){return(K=(0,m.Z)(function*(y){const f=(0,F.m9)(y);yield Cr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function De(y,f){return[...y.filter(w=>!f.some(A=>A.providerId===w.providerId)),...f]}function W(y){return y.map(f=>{var{providerId:g}=f,w=(0,re._T)(f,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}function Re(){return(Re=(0,m.Z)(function*(y,f){const g=yield ci(y,{},(0,m.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:A,apiKey:N}=y.config,Z=Ms(y,A,"/v1/token",`key=${N}`),oe=yield y._getAdditionalHeaders();return oe["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(Z,{method:"POST",headers:oe,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Xe{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){$(f.idToken,"internal-error"),$(void 0!==f.idToken,"internal-error"),$(void 0!==f.refreshToken,"internal-error");const g="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function yt(y){const f=rt(y);return $(f,"internal-error"),$(void 0!==f.exp,"internal-error"),$(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,g)}getToken(f,g=!1){var w=this;return(0,m.Z)(function*(){return $(!w.accessToken||w.refreshToken,f,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(f,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,g){var w=this;return(0,m.Z)(function*(){const{accessToken:A,refreshToken:N,expiresIn:Z}=yield function X(y,f){return Re.apply(this,arguments)}(f,g);w.updateTokensAndExpiration(A,N,Number(Z))})()}updateTokensAndExpiration(f,g,w){this.refreshToken=g||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(f,g){const{refreshToken:w,accessToken:A,expirationTime:N}=g,Z=new Xe;return w&&($("string"==typeof w,"internal-error",{appName:f}),Z.refreshToken=w),A&&($("string"==typeof A,"internal-error",{appName:f}),Z.accessToken=A),N&&($("number"==typeof N,"internal-error",{appName:f}),Z.expirationTime=N),Z}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Xe,this.toJSON())}_performRefresh(){return Ee("not implemented")}}function ct(y,f){$("string"==typeof y||void 0===y,"internal-error",{appName:f})}class Dt{constructor(f){var{uid:g,auth:w,stsTokenManager:A}=f,N=(0,re._T)(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ao(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Er(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(f){var g=this;return(0,m.Z)(function*(){const w=yield wr(g,g.stsTokenManager.getToken(g.auth,f));return $(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(f){return function hi(y){return oo.apply(this,arguments)}(this,f)}reload(){return function q(y){return K.apply(this,arguments)}(this)}_assign(f){this!==f&&($(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(g=>Object.assign({},g)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Dt(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){$(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,g=!1){var w=this;return(0,m.Z)(function*(){let A=!1;f.idToken&&f.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(f),A=!0),g&&(yield Cr(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var f=this;return(0,m.Z)(function*(){const g=yield f.getIdToken();return yield wr(f,function mt(y,f){return di.apply(this,arguments)}(f.auth,{idToken:g})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,g){var w,A,N,Z,oe,Le,Ke,ut;const lt=null!==(w=g.displayName)&&void 0!==w?w:void 0,Gn=null!==(A=g.email)&&void 0!==A?A:void 0,Ei=null!==(N=g.phoneNumber)&&void 0!==N?N:void 0,_c=null!==(Z=g.photoURL)&&void 0!==Z?Z:void 0,kf=null!==(oe=g.tenantId)&&void 0!==oe?oe:void 0,So=null!==(Le=g._redirectEventId)&&void 0!==Le?Le:void 0,yc=null!==(Ke=g.createdAt)&&void 0!==Ke?Ke:void 0,Of=null!==(ut=g.lastLoginAt)&&void 0!==ut?ut:void 0,{uid:Ff,emailVerified:Li,isAnonymous:bs,providerData:cl,stsTokenManager:nm}=g;$(Ff&&nm,f,"internal-error");const Ay=Xe.fromJSON(this.name,nm);$("string"==typeof Ff,f,"internal-error"),ct(lt,f.name),ct(Gn,f.name),$("boolean"==typeof Li,f,"internal-error"),$("boolean"==typeof bs,f,"internal-error"),ct(Ei,f.name),ct(_c,f.name),ct(kf,f.name),ct(So,f.name),ct(yc,f.name),ct(Of,f.name);const ca=new Dt({uid:Ff,auth:f,email:Gn,emailVerified:Li,displayName:lt,isAnonymous:bs,photoURL:_c,phoneNumber:Ei,tenantId:kf,stsTokenManager:Ay,createdAt:yc,lastLoginAt:Of});return cl&&Array.isArray(cl)&&(ca.providerData=cl.map(vc=>Object.assign({},vc))),So&&(ca._redirectEventId=So),ca}static _fromIdTokenResponse(f,g,w=!1){return(0,m.Z)(function*(){const A=new Xe;A.updateFromServerResponse(g);const N=new Dt({uid:g.localId,auth:f,stsTokenManager:A,isAnonymous:w});return yield Cr(N),N})()}}const It=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,m.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,m.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,m.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return y.type="NONE",y})();function qn(y,f,g){return`firebase:${y}:${f}:${g}`}class Or{constructor(f,g,w){this.persistence=f,this.auth=g,this.userKey=w;const{config:A,name:N}=this.auth;this.fullUserKey=qn(this.userKey,A.apiKey,N),this.fullPersistenceKey=qn("persistence",A.apiKey,N),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,m.Z)(function*(){const g=yield f.persistence._get(f.fullUserKey);return g?Dt._fromJSON(f.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var g=this;return(0,m.Z)(function*(){if(g.persistence===f)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=f,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,g,w="authUser"){return(0,m.Z)(function*(){if(!g.length)return new Or(te(It),f,w);const A=(yield Promise.all(g.map(function(){var Ke=(0,m.Z)(function*(ut){if(yield ut._isAvailable())return ut});return function(ut){return Ke.apply(this,arguments)}}()))).filter(Ke=>Ke);let N=A[0]||te(It);const Z=qn(w,f.config.apiKey,f.name);let oe=null;for(const Ke of g)try{const ut=yield Ke._get(Z);if(ut){const lt=Dt._fromJSON(f,ut);Ke!==N&&(oe=lt),N=Ke;break}}catch(ut){}const Le=A.filter(Ke=>Ke._shouldAllowMigration);return N._shouldAllowMigration&&Le.length?(N=Le[0],oe&&(yield N._set(Z,oe.toJSON())),yield Promise.all(g.map(function(){var Ke=(0,m.Z)(function*(ut){if(ut!==N)try{yield ut._remove(Z)}catch(lt){}});return function(ut){return Ke.apply(this,arguments)}}())),new Or(N,f,w)):new Or(N,f,w)})()}}function Nu(y){const f=y.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(zn(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Na(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(fs(f))return"Blackberry";if(Kn(f))return"Webos";if(Pu(f))return"Safari";if((f.includes("chrome/")||Pa(f))&&!f.includes("edge/"))return"Chrome";if(Fr(f))return"Android";{const w=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==w?void 0:w.length))return w[1]}return"Other"}function Na(y=(0,F.z$)()){return/firefox\//i.test(y)}function Pu(y=(0,F.z$)()){const f=y.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function Pa(y=(0,F.z$)()){return/crios\//i.test(y)}function zn(y=(0,F.z$)()){return/iemobile/i.test(y)}function Fr(y=(0,F.z$)()){return/android/i.test(y)}function fs(y=(0,F.z$)()){return/blackberry/i.test(y)}function Kn(y=(0,F.z$)()){return/webos/i.test(y)}function ei(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)}function Ps(y=(0,F.z$)()){return ei(y)||Fr(y)||Kn(y)||fs(y)||/windows phone/i.test(y)||zn(y)}function Uo(y,f=[]){let g;switch(y){case"Browser":g=Nu((0,F.z$)());break;case"Worker":g=`${Nu((0,F.z$)())}-${y}`;break;default:g=y}const w=f.length?f.join(","):"FirebaseCore-web";return`${g}/JsCore/${le.SDK_VERSION}/${w}`}class ti{constructor(f){this.auth=f,this.queue=[]}pushCallback(f,g){const w=N=>new Promise((Z,oe)=>{try{Z(f(N))}catch(Le){oe(Le)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(f){var g=this;return(0,m.Z)(function*(){if(g.auth.currentUser===f)return;const w=[];try{for(const A of g.queue)yield A(f),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const N of w)try{N()}catch(Z){}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A.message})}})()}}class ze{constructor(f,g,w){this.app=f,this.heartbeatServiceProvider=g,this.config=w,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new on(this),this.idTokenSubscription=new on(this),this.beforeStateQueue=new ti(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=w.sdkClientVersion}_initializeWithPersistence(f,g){var w=this;return g&&(this._popupRedirectResolver=te(g)),this._initializationPromise=this.queue((0,m.Z)(function*(){var A,N;if(!w._deleted&&(w.persistenceManager=yield Or.create(w,f),!w._deleted)){if(null===(A=w._popupRedirectResolver)||void 0===A?void 0:A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch(Z){}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(N=w.currentUser)||void 0===N?void 0:N.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,m.Z)(function*(){if(f._deleted)return;const g=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||g){if(f.currentUser&&g&&f.currentUser.uid===g.uid)return f._currentUser._assign(g),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(g,!0)}})()}initializeCurrentUser(f){var g=this;return(0,m.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let N=A,Z=!1;if(f&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const oe=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Le=null==N?void 0:N._redirectEventId,Ke=yield g.tryRedirectSignIn(f);(!oe||oe===Le)&&(null==Ke?void 0:Ke.user)&&(N=Ke.user,Z=!0)}if(!N)return g.directlySetCurrentUser(null);if(!N._redirectEventId){if(Z)try{yield g.beforeStateQueue.runMiddleware(N)}catch(oe){N=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(oe))}return N?g.reloadAndSetCurrentUserOrClear(N):g.directlySetCurrentUser(null)}return $(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===N._redirectEventId?g.directlySetCurrentUser(N):g.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(f){var g=this;return(0,m.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,f,!0)}catch(A){yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(f){var g=this;return(0,m.Z)(function*(){try{yield Cr(f)}catch(w){if("auth/network-request-failed"!==w.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function Qe(){if("undefined"==typeof navigator)return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var f=this;return(0,m.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var g=this;return(0,m.Z)(function*(){const w=f?(0,F.m9)(f):null;return w&&$(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(f,g=!1){var w=this;return(0,m.Z)(function*(){if(!w._deleted)return f&&$(w.tenantId===f.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(f)),w.queue((0,m.Z)(function*(){yield w.directlySetCurrentUser(f),w.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,m.Z)(function*(){return yield f.beforeStateQueue.runMiddleware(null),(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null,!0)})()}setPersistence(f){var g=this;return this.queue((0,m.Z)(function*(){yield g.assertedPersistence.setPersistence(te(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new F.LL("auth","Firebase",f())}onAuthStateChanged(f,g,w){return this.registerStateListener(this.authStateSubscription,f,g,w)}beforeAuthStateChanged(f,g){return this.beforeStateQueue.pushCallback(f,g)}onIdTokenChanged(f,g,w){return this.registerStateListener(this.idTokenSubscription,f,g,w)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,g){var w=this;return(0,m.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===f?A.removeCurrentUser():A.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var g=this;return(0,m.Z)(function*(){if(!g.redirectPersistenceManager){const w=f&&te(f)||g._popupRedirectResolver;$(w,g,"argument-error"),g.redirectPersistenceManager=yield Or.create(g,[te(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(f){var g=this;return(0,m.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,m.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===f?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===f?g.redirectUser:null})()}_persistUserIfCurrent(f){var g=this;return(0,m.Z)(function*(){if(f===g.currentUser)return g.queue((0,m.Z)(function*(){return g.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,g,w,A){if(this._deleted)return()=>{};const N="function"==typeof g?g:g.next.bind(g),Z=this._isInitialized?Promise.resolve():this._initializationPromise;return $(Z,this,"internal-error"),Z.then(()=>N(this.currentUser)),"function"==typeof g?f.addObserver(g,w,A):f.addObserver(g)}directlySetCurrentUser(f){var g=this;return(0,m.Z)(function*(){g.currentUser&&g.currentUser!==f&&(g._currentUser._stopProactiveRefresh(),f&&g.isProactiveRefreshEnabled&&f._startProactiveRefresh()),g.currentUser=f,f?yield g.assertedPersistence.setCurrentUser(f):yield g.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return $(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Uo(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,m.Z)(function*(){var g;const w={"X-Client-Version":f.clientVersion};f.app.options.appId&&(w["X-Firebase-gmpid"]=f.app.options.appId);const A=yield null===(g=f.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();return A&&(w["X-Firebase-Client"]=A),w})()}}function st(y){return(0,F.m9)(y)}class on{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return $(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ki(y){const f=y.indexOf(":");return f<0?"":y.substr(0,f+1)}function Zi(y){if(!y)return null;const f=Number(y);return isNaN(f)?null:f}class Mi{constructor(f,g){this.providerId=f,this.signInMethod=g}toJSON(){return Ee("not implemented")}_getIdTokenResponse(f){return Ee("not implemented")}_linkToIdToken(f,g){return Ee("not implemented")}_getReauthenticationResolver(f){return Ee("not implemented")}}function Ln(y,f){return St.apply(this,arguments)}function St(){return(St=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:resetPassword",qt(y,f))})).apply(this,arguments)}function Oa(y,f){return ps.apply(this,arguments)}function ps(){return(ps=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ku(y,f){return ks.apply(this,arguments)}function ks(){return(ks=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",qt(y,f))})).apply(this,arguments)}function lo(){return(lo=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPassword",qt(y,f))})).apply(this,arguments)}function Os(y,f){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendOobCode",qt(y,f))})).apply(this,arguments)}function an(y,f){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,m.Z)(function*(y,f){return Os(y,f)})).apply(this,arguments)}function Fa(y,f){return ri.apply(this,arguments)}function ri(){return(ri=(0,m.Z)(function*(y,f){return Os(y,f)})).apply(this,arguments)}function Yi(y,f){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,m.Z)(function*(y,f){return Os(y,f)})).apply(this,arguments)}function ud(y,f){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,m.Z)(function*(y,f){return Os(y,f)})).apply(this,arguments)}function Fl(){return(Fl=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}function ld(){return(ld=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithEmailLink",qt(y,f))})).apply(this,arguments)}class br extends Mi{constructor(f,g,w,A=null){super("password",w),this._email=f,this._password=g,this._tenantId=A}static _fromEmailAndPassword(f,g){return new br(f,g,"password")}static _fromEmailAndCode(f,g,w=null){return new br(f,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f;if((null==g?void 0:g.email)&&(null==g?void 0:g.password)){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(f){var g=this;return(0,m.Z)(function*(){switch(g.signInMethod){case"password":return function rr(y,f){return lo.apply(this,arguments)}(f,{returnSecureToken:!0,email:g._email,password:g._password});case"emailLink":return function Ji(y,f){return Fl.apply(this,arguments)}(f,{email:g._email,oobCode:g._password});default:Te(f,"internal-error")}})()}_linkToIdToken(f,g){var w=this;return(0,m.Z)(function*(){switch(w.signInMethod){case"password":return Oa(f,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Eg(y,f){return ld.apply(this,arguments)}(f,{idToken:g,email:w._email,oobCode:w._password});default:Te(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Fs(y,f){return cd.apply(this,arguments)}function cd(){return(cd=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithIdp",qt(y,f))})).apply(this,arguments)}class gs extends Mi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const g=new gs(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(g.idToken=f.idToken),f.accessToken&&(g.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(g.nonce=f.nonce),f.pendingToken&&(g.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(g.accessToken=f.oauthToken,g.secret=f.oauthTokenSecret):Te("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A}=g,N=(0,re._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const Z=new gs(w,A);return Z.idToken=N.idToken||void 0,Z.accessToken=N.accessToken||void 0,Z.secret=N.secret,Z.nonce=N.nonce,Z.pendingToken=N.pendingToken||null,Z}_getIdTokenResponse(f){return Fs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Fs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fs(f,g)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),f.postBody=(0,F.xO)(g)}return f}}function Ig(y,f){return dd.apply(this,arguments)}function dd(){return(dd=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:sendVerificationCode",qt(y,f))})).apply(this,arguments)}function Ls(){return(Ls=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f))})).apply(this,arguments)}function hd(){return(hd=(0,m.Z)(function*(y,f){const g=yield kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,f));if(g.temporaryProof)throw Ri(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Dg={USER_NOT_FOUND:"user-not-found"};function fd(){return(fd=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithPhoneNumber",qt(y,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Dg)})).apply(this,arguments)}class Bo extends Mi{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,g){return new Bo({verificationId:f,verificationCode:g})}static _fromTokenResponse(f,g){return new Bo({phoneNumber:f,temporaryProof:g})}_getIdTokenResponse(f){return function Ll(y,f){return Ls.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,g){return function bg(y,f){return hd.apply(this,arguments)}(f,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function Tg(y,f){return fd.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return f&&g?{temporaryProof:f,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:N}=f;return w||g||A||N?new Bo({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:N}):null}}class Lu{constructor(f){var g,w,A,N,Z,oe;const Le=(0,F.zd)((0,F.pd)(f)),Ke=null!==(g=Le.apiKey)&&void 0!==g?g:null,ut=null!==(w=Le.oobCode)&&void 0!==w?w:null,lt=function hf(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Le.mode)&&void 0!==A?A:null);$(Ke&&ut&&lt,"argument-error"),this.apiKey=Ke,this.operation=lt,this.code=ut,this.continueUrl=null!==(N=Le.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(Z=Le.languageCode)&&void 0!==Z?Z:null,this.tenantId=null!==(oe=Le.tenantId)&&void 0!==oe?oe:null}static parseLink(f){const g=function La(y){const f=(0,F.zd)((0,F.pd)(y)).link,g=f?(0,F.zd)((0,F.pd)(f)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||f||y}(f);try{return new Lu(g)}catch(w){return null}}}let gd=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,w){return br._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=Lu.parseLink(w);return $(A,"argument-error"),br._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Dr{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class co extends Dr{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class Xi extends co{static credentialFromJSON(f){const g="string"==typeof f?JSON.parse(f):f;return $("providerId"in g&&"signInMethod"in g,"argument-error"),gs._fromParams(g)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return $(f.idToken||f.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return Xi.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return Xi.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:N,nonce:Z,providerId:oe}=f;if(!w&&!A&&!g&&!N||!oe)return null;try{return new Xi(oe)._credential({idToken:g,accessToken:w,nonce:Z,pendingToken:N})}catch(Le){return null}}}let jo=(()=>{class y extends co{constructor(){super("facebook.com")}static credential(g){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),md=(()=>{class y extends co{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return y.credential(w,A)}catch(N){return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),ff=(()=>{class y extends co{constructor(){super("github.com")}static credential(g){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch(w){return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class ho extends Mi{constructor(f,g){super(f,f),this.pendingToken=g}_getIdTokenResponse(f){return Fs(f,this.buildRequest())}_linkToIdToken(f,g){const w=this.buildRequest();return w.idToken=g,Fs(f,w)}_getReauthenticationResolver(f){const g=this.buildRequest();return g.autoCreate=!1,Fs(f,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const g="string"==typeof f?JSON.parse(f):f,{providerId:w,signInMethod:A,pendingToken:N}=g;return w&&A&&N&&w===A?new ho(w,N):null}static _create(f,g){return new ho(f,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Lr extends Dr{constructor(f){$(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return Lr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return Lr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const g=ho.fromJSON(f);return $(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:g,providerId:w}=f;if(!g||!w)return null;try{return ho._create(w,g)}catch(A){return null}}}let yd=(()=>{class y extends co{constructor(){super("twitter.com")}static credential(g,w){return gs._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return y.credential(w,A)}catch(N){return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function Vr(y,f){return $o.apply(this,arguments)}function $o(){return($o=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signUp",qt(y,f))})).apply(this,arguments)}class pi{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,g,w,A=!1){return(0,m.Z)(function*(){const N=yield Dt._fromIdTokenResponse(f,w,A),Z=Vl(w);return new pi({user:N,providerId:Z,_tokenResponse:w,operationType:g})})()}static _forOperation(f,g,w){return(0,m.Z)(function*(){yield f._updateTokensIfNecessary(w,!0);const A=Vl(w);return new pi({user:f,providerId:A,_tokenResponse:w,operationType:g})})()}}function Vl(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function Ul(){return(Ul=(0,m.Z)(function*(y){var f;const g=st(y);if(yield g._initializationPromise,null===(f=g.currentUser)||void 0===f?void 0:f.isAnonymous)return new pi({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Vr(g,{returnSecureToken:!0}),A=yield pi._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Go extends F.ZR{constructor(f,g,w,A){var N;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,Go.prototype),this.customData={appName:f.name,tenantId:null!==(N=f.tenantId)&&void 0!==N?N:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(f,g,w,A){return new Go(f,g,w,A)}}function Bl(y,f,g,w){return("reauthenticate"===f?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Go._fromErrorAndOperation(y,N,f,w):N})}function es(y){return new Set(y.map(({providerId:f})=>f).filter(f=>!!f))}function un(){return(un=(0,m.Z)(function*(y,f){const g=(0,F.m9)(y);yield tn(!0,g,f);const{providerUserInfo:w}=yield Tn(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[f]}),A=es(w||[]);return g.providerData=g.providerData.filter(N=>A.has(N.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function Va(y,f){return fo.apply(this,arguments)}function fo(){return(fo=(0,m.Z)(function*(y,f,g=!1){const w=yield wr(y,f._linkToIdToken(y.auth,yield y.getIdToken()),g);return pi._forOperation(y,"link",w)})).apply(this,arguments)}function tn(y,f,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,m.Z)(function*(y,f,g){yield Cr(f);const A=!1===y?"provider-already-linked":"no-such-provider";$(es(f.providerData).has(g)===y,f.auth,A)})).apply(this,arguments)}function Vu(y,f){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,m.Z)(function*(y,f,g=!1){const{auth:w}=y,A="reauthenticate";try{const N=yield wr(y,Bl(w,A,f,y),g);$(N.idToken,w,"internal-error");const Z=rt(N.idToken);$(Z,w,"internal-error");const{sub:oe}=Z;return $(y.uid===oe,w,"user-mismatch"),pi._forOperation(y,A,N)}catch(N){throw"auth/user-not-found"===(null==N?void 0:N.code)&&Te(w,"user-mismatch"),N}})).apply(this,arguments)}function hr(y,f){return jl.apply(this,arguments)}function jl(){return(jl=(0,m.Z)(function*(y,f,g=!1){const w="signIn",A=yield Bl(y,w,f),N=yield pi._fromIdTokenResponse(y,w,A);return g||(yield y._updateCurrentUser(N.user)),N})).apply(this,arguments)}function En(y,f){return ts.apply(this,arguments)}function ts(){return(ts=(0,m.Z)(function*(y,f){return hr(st(y),f)})).apply(this,arguments)}function fr(y,f){return po.apply(this,arguments)}function po(){return(po=(0,m.Z)(function*(y,f){const g=(0,F.m9)(y);return yield tn(!1,g,f.providerId),Va(g,f)})).apply(this,arguments)}function ms(y,f){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,m.Z)(function*(y,f){return Vu((0,F.m9)(y),f)})).apply(this,arguments)}function Ni(y,f){return ns.apply(this,arguments)}function ns(){return(ns=(0,m.Z)(function*(y,f){return kr(y,"POST","/v1/accounts:signInWithCustomToken",qt(y,f))})).apply(this,arguments)}function dt(){return(dt=(0,m.Z)(function*(y,f){const g=st(y),w=yield Ni(g,{token:f,returnSecureToken:!0}),A=yield pi._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class qo{constructor(f,g){this.factorId=f,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(f,g){return"phoneInfo"in g?Uu._fromServerResponse(f,g):Te(f,"internal-error")}}class Uu extends qo{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,g){return new Uu(g)}}function ja(y,f,g){var w;$((null===(w=g.url)||void 0===w?void 0:w.length)>0,y,"invalid-continue-uri"),$(void 0===g.dynamicLinkDomain||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),f.continueUrl=g.url,f.dynamicLinkDomain=g.dynamicLinkDomain,f.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&($(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),f.iOSBundleId=g.iOS.bundleId),g.android&&($(g.android.packageName.length>0,y,"missing-android-pkg-name"),f.androidInstallApp=g.android.installApp,f.androidMinimumVersionCode=g.android.minimumVersion,f.androidPackageName=g.android.packageName)}function Ha(){return(Ha=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y),A={requestType:"PASSWORD_RESET",email:f};g&&ja(w,A,g),yield Fa(w,A)})).apply(this,arguments)}function Gl(){return(Gl=(0,m.Z)(function*(y,f,g){yield Ln((0,F.m9)(y),{oobCode:f,newPassword:g})})).apply(this,arguments)}function kt(){return(kt=(0,m.Z)(function*(y,f){yield ku((0,F.m9)(y),{oobCode:f})})).apply(this,arguments)}function Bu(y,f){return _n.apply(this,arguments)}function _n(){return(_n=(0,m.Z)(function*(y,f){const g=(0,F.m9)(y),w=yield Ln(g,{oobCode:f}),A=w.requestType;switch($(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":$(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":$(w.mfaInfo,g,"internal-error");default:$(w.email,g,"internal-error")}let N=null;return w.mfaInfo&&(N=qo._fromServerResponse(st(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:N},operation:A}})).apply(this,arguments)}function go(){return(go=(0,m.Z)(function*(y,f){const{data:g}=yield Bu((0,F.m9)(y),f);return g.email})).apply(this,arguments)}function $a(){return($a=(0,m.Z)(function*(y,f,g){const w=st(y),A=yield Vr(w,{returnSecureToken:!0,email:f,password:g}),N=yield pi._fromIdTokenResponse(w,"signIn",A);return yield w._updateCurrentUser(N.user),N})).apply(this,arguments)}function ju(){return(ju=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y),A={requestType:"EMAIL_SIGNIN",email:f};$(g.handleCodeInApp,w,"argument-error"),g&&ja(w,A,g),yield Yi(w,A)})).apply(this,arguments)}function Vn(){return(Vn=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y),A=gd.credentialWithLink(f,g||Oe());return $(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),En(w,A)})).apply(this,arguments)}function _s(y,f){return Wa.apply(this,arguments)}function Wa(){return(Wa=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:createAuthUri",qt(y,f))})).apply(this,arguments)}function Pi(){return(Pi=(0,m.Z)(function*(y,f){const w={identifier:f,continueUri:at()?Oe():"http://localhost"},{signinMethods:A}=yield _s((0,F.m9)(y),w);return A||[]})).apply(this,arguments)}function $u(){return($u=(0,m.Z)(function*(y,f){const g=(0,F.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};f&&ja(g.auth,A,f);const{email:N}=yield an(g.auth,A);N!==y.email&&(yield y.reload())})).apply(this,arguments)}function Gu(){return(Gu=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:f};g&&ja(w.auth,N,g);const{email:Z}=yield ud(w.auth,N);Z!==y.email&&(yield y.reload())})).apply(this,arguments)}function qa(y,f){return za.apply(this,arguments)}function za(){return(za=(0,m.Z)(function*(y,f){return Lt(y,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Ka(){return(Ka=(0,m.Z)(function*(y,{displayName:f,photoURL:g}){if(void 0===f&&void 0===g)return;const w=(0,F.m9)(y),N={idToken:yield w.getIdToken(),displayName:f,photoUrl:g,returnSecureToken:!0},Z=yield wr(w,qa(w.auth,N));w.displayName=Z.displayName||null,w.photoURL=Z.photoUrl||null;const oe=w.providerData.find(({providerId:Le})=>"password"===Le);oe&&(oe.displayName=w.displayName,oe.photoURL=w.photoURL),yield w._updateTokensIfNecessary(Z)})).apply(this,arguments)}function Ko(y,f,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,m.Z)(function*(y,f,g){const{auth:w}=y,N={idToken:yield y.getIdToken(),returnSecureToken:!0};f&&(N.email=f),g&&(N.password=g);const Z=yield wr(y,Oa(w,N));yield y._updateTokensIfNecessary(Z,!0)})).apply(this,arguments)}class Zo{constructor(f,g,w={}){this.isNewUser=f,this.providerId=g,this.profile=w}}class Ed extends Zo{constructor(f,g,w,A){super(f,g,w),this.username=A}}class Yo extends Zo{constructor(f,g){super(f,"facebook.com",g)}}class rs extends Ed{constructor(f,g){super(f,"github.com",g,"string"==typeof(null==g?void 0:g.login)?null==g?void 0:g.login:null)}}class gf extends Zo{constructor(f,g){super(f,"google.com",g)}}class ir extends Ed{constructor(f,g,w){super(f,"twitter.com",g,w)}}function is(y){const{user:f,_tokenResponse:g}=y;return f.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function wd(y){var f,g;if(!y)return null;const{providerId:w}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},N=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!w&&(null==y?void 0:y.idToken)){const Z=null===(g=null===(f=rt(y.idToken))||void 0===f?void 0:f.firebase)||void 0===g?void 0:g.sign_in_provider;if(Z)return new Zo(N,"anonymous"!==Z&&"custom"!==Z?Z:null)}if(!w)return null;switch(w){case"facebook.com":return new Yo(N,A);case"github.com":return new rs(N,A);case"google.com":return new gf(N,A);case"twitter.com":return new ir(N,A,y.screenName||null);case"custom":case"anonymous":return new Zo(N,null);default:return new Zo(N,w,A)}}(g)}class ys{constructor(f,g){this.type=f,this.credential=g}static _fromIdtoken(f){return new ys("enroll",f)}static _fromMfaPendingCredential(f){return new ys("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var g,w;if(null==f?void 0:f.multiFactorSession){if(null===(g=f.multiFactorSession)||void 0===g?void 0:g.pendingCredential)return ys._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(w=f.multiFactorSession)||void 0===w?void 0:w.idToken)return ys._fromIdtoken(f.multiFactorSession.idToken)}return null}}class Qo{constructor(f,g,w){this.session=f,this.hints=g,this.signInResolver=w}static _fromError(f,g){const w=st(f),A=g.customData._serverResponse,N=(A.mfaInfo||[]).map(oe=>qo._fromServerResponse(w,oe));$(A.mfaPendingCredential,w,"internal-error");const Z=ys._fromMfaPendingCredential(A.mfaPendingCredential);return new Qo(Z,N,function(){var oe=(0,m.Z)(function*(Le){const Ke=yield Le._process(w,Z);delete A.mfaInfo,delete A.mfaPendingCredential;const ut=Object.assign(Object.assign({},A),{idToken:Ke.idToken,refreshToken:Ke.refreshToken});switch(g.operationType){case"signIn":const lt=yield pi._fromIdTokenResponse(w,g.operationType,ut);return yield w._updateCurrentUser(lt.user),lt;case"reauthenticate":return $(g.user,w,"internal-error"),pi._forOperation(g.user,g.operationType,ut);default:Te(w,"internal-error")}});return function(Le){return oe.apply(this,arguments)}}())}resolveSignIn(f){var g=this;return(0,m.Z)(function*(){return g.signInResolver(f)})()}}function _f(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:start",qt(y,f))}class bd{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>qo._fromServerResponse(f.auth,w)))})}static _fromUser(f){return new bd(f)}getSession(){var f=this;return(0,m.Z)(function*(){return ys._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,g){var w=this;return(0,m.Z)(function*(){const A=f,N=yield w.getSession(),Z=yield wr(w.user,A._process(w.user.auth,N,g));return yield w.user._updateTokensIfNecessary(Z),w.user.reload()})()}unenroll(f){var g=this;return(0,m.Z)(function*(){const w="string"==typeof f?f:f.uid,A=yield g.user.getIdToken(),N=yield wr(g.user,function Wu(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:withdraw",qt(y,f))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:Z})=>Z!==w),yield g.user._updateTokensIfNecessary(N);try{yield g.user.reload()}catch(Z){if("auth/user-token-expired"!==Z.code)throw Z}})()}}const qu=new WeakMap,_o="__sak";class Dd{constructor(f,g){this.storageRetriever=f,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(_o,"1"),this.storage.removeItem(_o),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,g){return this.storage.setItem(f,JSON.stringify(g)),Promise.resolve()}_get(f){const g=this.storage.getItem(f);return Promise.resolve(g?JSON.parse(g):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jt=(()=>{class y extends Dd{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Rg(){const y=(0,F.z$)();return Pu(y)||ei(y)}()&&function dr(){try{return!(!window||window===window.top)}catch(y){return!1}}(),this.fallbackToPolling=Ps(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),N=this.localCache[w];A!==N&&g(w,N,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((oe,Le,Ke)=>{this.notifyListeners(oe,Ke)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const oe=this.storage.getItem(A);if(g.newValue!==oe)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const N=()=>{const oe=this.storage.getItem(A);!w&&this.localCache[A]===oe||this.notifyListeners(A,oe)},Z=this.storage.getItem(A);!function ka(){return(0,F.w1)()&&10===document.documentMode}()||Z===g.newValue||g.newValue===g.oldValue?N():setTimeout(N,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,N=this;return(0,m.Z)(function*(){yield A().call(N,g,w),N.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,m.Z)(function*(){const N=yield w().call(A,g);return A.localCache[g]=JSON.stringify(N),N})()}_remove(g){var w=()=>super._remove,A=this;return(0,m.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),xn=(()=>{class y extends Dd{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return y.type="SESSION",y})();let Ja=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(N=>N.isListeningto(g));if(w)return w;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,m.Z)(function*(){const A=g,{eventId:N,eventType:Z,data:oe}=A.data,Le=w.handlersMap[Z];if(!(null==Le?void 0:Le.size))return;A.ports[0].postMessage({status:"ack",eventId:N,eventType:Z});const Ke=Array.from(Le).map(function(){var lt=(0,m.Z)(function*(Gn){return Gn(A.origin,oe)});return function(Gn){return lt.apply(this,arguments)}}()),ut=yield function Qa(y){return Promise.all(y.map(function(){var f=(0,m.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return f.apply(this,arguments)}}()))}(Ke);A.ports[0].postMessage({status:"done",eventId:N,eventType:Z,response:ut})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function Ur(y="",f=10){let g="";for(let w=0;w<f;w++)g+=Math.floor(10*Math.random());return y+g}class Yn{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,g,w=50){var A=this;return(0,m.Z)(function*(){const N="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let Z,oe;return new Promise((Le,Ke)=>{const ut=Ur("",20);N.port1.start();const lt=setTimeout(()=>{Ke(new Error("unsupported_event"))},w);oe={messageChannel:N,onMessage(Gn){const Ei=Gn;if(Ei.data.eventId===ut)switch(Ei.data.status){case"ack":clearTimeout(lt),Z=setTimeout(()=>{Ke(new Error("timeout"))},3e3);break;case"done":clearTimeout(Z),Le(Ei.data.response);break;default:clearTimeout(lt),clearTimeout(Z),Ke(new Error("invalid_response"))}}},A.handlers.add(oe),N.port1.addEventListener("message",oe.onMessage),A.target.postMessage({eventType:f,eventId:ut,data:g},[N.port2])}).finally(()=>{oe&&A.removeMessageHandler(oe)})})()}}function xt(){return window}function pt(){return void 0!==xt().WorkerGlobalScope&&"function"==typeof xt().importScripts}function Ku(){return(Ku=(0,m.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(y){return null}})).apply(this,arguments)}const Ad="firebaseLocalStorageDb",Br="firebaseLocalStorage",Bs="fbase_key";class vs{constructor(f){this.request=f}toPromise(){return new Promise((f,g)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function pr(y,f){return y.transaction([Br],f?"readwrite":"readonly").objectStore(Br)}function os(){const y=indexedDB.open(Ad,1);return new Promise((f,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const w=y.result;try{w.createObjectStore(Br,{keyPath:Bs})}catch(A){g(A)}}),y.addEventListener("success",(0,m.Z)(function*(){const w=y.result;w.objectStoreNames.contains(Br)?f(w):(w.close(),yield function xd(){const y=indexedDB.deleteDatabase(Ad);return new vs(y).toPromise()}(),f(yield os()))}))})}function mi(y,f,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,m.Z)(function*(y,f,g){const w=pr(y,!0).put({[Bs]:f,value:g});return new vs(w).toPromise()})).apply(this,arguments)}function ws(){return(ws=(0,m.Z)(function*(y,f){const g=pr(y,!1).get(f),w=yield new vs(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Ut(y,f){const g=pr(y,!0).delete(f);return new vs(g).toPromise()}const Jo=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,m.Z)(function*(){return g.db||(g.db=yield os()),g.db})()}_withRetries(g){var w=this;return(0,m.Z)(function*(){let A=0;for(;;)try{const N=yield w._openDb();return yield g(N)}catch(N){if(A++>3)throw N;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,m.Z)(function*(){return pt()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,m.Z)(function*(){g.receiver=Ja._getInstance(function Sd(){return pt()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,m.Z)(function*(A,N){return{keyProcessed:(yield g._poll()).includes(N.key)}});return function(A,N){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,m.Z)(function*(A,N){return["keyChanged"]});return function(A,N){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,m.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function Td(){return Ku.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Yn(g.activeServiceWorker);const N=yield g.sender._send("ping",{},800);!N||(null===(w=N[0])||void 0===w?void 0:w.fulfilled)&&(null===(A=N[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,m.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Yl(){var y;return(null===(y=null==navigator?void 0:navigator.serviceWorker)||void 0===y?void 0:y.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch(A){}})()}_isAvailable(){return(0,m.Z)(function*(){try{if(!indexedDB)return!1;const g=yield os();return yield mi(g,_o,"1"),yield Ut(g,_o),!0}catch(g){}return!1})()}_withPendingWrite(g){var w=this;return(0,m.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,m.Z)(function*(){return A._withPendingWrite((0,m.Z)(function*(){return yield A._withRetries(N=>mi(N,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,m.Z)(function*(){const A=yield w._withRetries(N=>function Zu(y,f){return ws.apply(this,arguments)}(N,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,m.Z)(function*(){return w._withPendingWrite((0,m.Z)(function*(){return yield w._withRetries(A=>Ut(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,m.Z)(function*(){const w=yield g._withRetries(Z=>{const oe=pr(Z,!1).getAll();return new vs(oe).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],N=new Set;for(const{fbase_key:Z,value:oe}of w)N.add(Z),JSON.stringify(g.localCache[Z])!==JSON.stringify(oe)&&(g.notifyListeners(Z,oe),A.push(Z));for(const Z of Object.keys(g.localCache))g.localCache[Z]&&!N.has(Z)&&(g.notifyListeners(Z,null),A.push(Z));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const N of Array.from(A))N(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,m.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function Qu(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:start",qt(y,f))}function Ju(){return(Ju=(0,m.Z)(function*(y){return(yield Lt(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wo(y){return new Promise((f,g)=>{const w=document.createElement("script");w.setAttribute("src",y),w.onload=f,w.onerror=A=>{const N=Ce("internal-error");N.customData=A,g(N)},w.type="text/javascript",w.charset="UTF-8",function Xa(){var y,f;return null!==(f=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==f?f:document}().appendChild(w)})}function $s(y){return`__${y}${Math.floor(1e6*Math.random())}`}const Xu=1e12;class tu{constructor(f){this.auth=f,this.counter=Xu,this._widgets=new Map}render(f,g){const w=this.counter;return this._widgets.set(w,new iy(f,this.auth.name,g||{})),this.counter++,w}reset(f){var g;const w=f||Xu;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(f){var g;return(null===(g=this._widgets.get(f||Xu))||void 0===g?void 0:g.getResponse())||""}execute(f){var g=this;return(0,m.Z)(function*(){var w;return null===(w=g._widgets.get(f||Xu))||void 0===w||w.execute(),""})()}}class iy{constructor(f,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof f?document.getElementById(f):f;$(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Rd(y){const f=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<y;w++)f.push(g.charAt(Math.floor(Math.random()*g.length)));return f.join("")}(50);const{callback:f,"expired-callback":g}=this.params;if(f)try{f(this.responseToken)}catch(w){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch(w){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const In=$s("rcb"),_e=new rn(3e4,6e4);class Es{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!xt().grecaptcha}load(f,g=""){return $(function k(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),f,"argument-error"),this.shouldResolveImmediately(g)?Promise.resolve(xt().grecaptcha):new Promise((w,A)=>{const N=xt().setTimeout(()=>{A(Ce(f,"network-request-failed"))},_e.get());xt()[In]=()=>{xt().clearTimeout(N),delete xt()[In];const oe=xt().grecaptcha;if(!oe)return void A(Ce(f,"internal-error"));const Le=oe.render;oe.render=(Ke,ut)=>{const lt=Le(Ke,ut);return this.counter++,lt},this.hostLanguage=g,w(oe)},wo(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:In,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(N),A(Ce(f,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!xt().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ki{load(f){return(0,m.Z)(function*(){return new tu(f)})()}clearedOneInstance(){}}const Xl="recaptcha",Ng={theme:"light",type:"image"};class nu{constructor(f,g=Object.assign({},Ng),w){this.parameters=g,this.type=Xl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=st(w),this.isInvisible="invisible"===this.parameters.size,$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof f?document.getElementById(f):f;$(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ki:new Es,this.validateStartingState()}verify(){var f=this;return(0,m.Z)(function*(){f.assertNotDestroyed();const g=yield f.render(),w=f.getAssertedRecaptcha();return w.getResponse(g)||new Promise(N=>{const Z=oe=>{!oe||(f.tokenChangeListeners.delete(Z),N(oe))};f.tokenChangeListeners.add(Z),f.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){$(!this.parameters.sitekey,this.auth,"argument-error"),$(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),$("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof f)f(g);else if("string"==typeof f){const w=xt()[f];"function"==typeof w&&w(g)}}}assertNotDestroyed(){$(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,m.Z)(function*(){if(yield f.init(),!f.widgetId){let g=f.container;if(!f.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}f.widgetId=f.getAssertedRecaptcha().render(g,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,m.Z)(function*(){$(at()&&!pt(),f.auth,"internal-error"),yield function or(){let y=null;return new Promise(f=>{"complete"!==document.readyState?(y=()=>f(),window.addEventListener("load",y)):f()}).catch(f=>{throw y&&window.removeEventListener("load",y),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const g=yield function Ql(y){return Ju.apply(this,arguments)}(f.auth);$(g,f.auth,"internal-error"),f.parameters.sitekey=g})()}getAssertedRecaptcha(){return $(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Yt{constructor(f,g){this.verificationId=f,this.onConfirmation=g}confirm(f){const g=Bo._fromVerification(this.verificationId,f);return this.onConfirmation(g)}}function Cs(){return(Cs=(0,m.Z)(function*(y,f,g){const w=st(y),A=yield ru(w,f,(0,F.m9)(g));return new Yt(A,N=>En(w,N))})).apply(this,arguments)}function ec(){return(ec=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y);yield tn(!1,w,"phone");const A=yield ru(w.auth,f,(0,F.m9)(g));return new Yt(A,N=>fr(w,N))})).apply(this,arguments)}function jr(){return(jr=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y),A=yield ru(w.auth,f,(0,F.m9)(g));return new Yt(A,N=>ms(w,N))})).apply(this,arguments)}function ru(y,f,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,m.Z)(function*(y,f,g){var w;const A=yield g.verify();try{let N;if($("string"==typeof A,y,"argument-error"),$(g.type===Xl,y,"argument-error"),N="string"==typeof f?{phoneNumber:f}:f,"session"in N){const Z=N.session;if("phoneNumber"in N)return $("enroll"===Z.type,y,"internal-error"),(yield _f(y,{idToken:Z.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{$("signin"===Z.type,y,"internal-error");const oe=(null===(w=N.multiFactorHint)||void 0===w?void 0:w.uid)||N.multiFactorUid;return $(oe,y,"missing-multi-factor-info"),(yield Qu(y,{mfaPendingCredential:Z.credential,mfaEnrollmentId:oe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Z}=yield Ig(y,{phoneNumber:N.phoneNumber,recaptchaToken:A});return Z}}finally{g._reset()}})).apply(this,arguments)}function ta(){return(ta=(0,m.Z)(function*(y,f){yield Va((0,F.m9)(y),f)})).apply(this,arguments)}let Rn=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=st(g)}verifyPhoneNumber(g,w){return ru(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Bo._fromVerification(g,w)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?Bo._fromTokenResponse(w,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function yi(y,f){return f?te(f):($(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class iu extends Mi{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Fs(f,this._buildIdpRequest())}_linkToIdToken(f,g){return Fs(f,this._buildIdpRequest(g))}_getReauthenticationResolver(f){return Fs(f,this._buildIdpRequest())}_buildIdpRequest(f){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(g.idToken=f),g}}function Md(y){return hr(y.auth,new iu(y),y.bypassAuthState)}function na(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),Vu(g,new iu(y),y.bypassAuthState)}function Tr(y){return ra.apply(this,arguments)}function ra(){return(ra=(0,m.Z)(function*(y){const{auth:f,user:g}=y;return $(g,f,"internal-error"),Va(g,new iu(y),y.bypassAuthState)})).apply(this,arguments)}class Gs{constructor(f,g,w,A,N=!1){this.auth=f,this.resolver=w,this.user=A,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var f=this;return new Promise(function(){var g=(0,m.Z)(function*(w,A){f.pendingPromise={resolve:w,reject:A};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(N){f.reject(N)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(f){var g=this;return(0,m.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:N,tenantId:Z,error:oe,type:Le}=f;if(oe)return void g.reject(oe);const Ke={auth:g.auth,requestUri:w,sessionId:A,tenantId:Z||void 0,postBody:N||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Le)(Ke))}catch(ut){g.reject(ut)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Md;case"linkViaPopup":case"linkViaRedirect":return Tr;case"reauthViaPopup":case"reauthViaRedirect":return na;default:Te(this.auth,"internal-error")}}resolve(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){Y(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Pg=new rn(2e3,1e4);function Ws(){return(Ws=(0,m.Z)(function*(y,f,g){const w=st(y);Be(y,f,Dr);const A=yi(w,g);return new Co(w,"signInViaPopup",f,A).executeNotNull()})).apply(this,arguments)}function tc(){return(tc=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y);Be(w.auth,f,Dr);const A=yi(w.auth,g);return new Co(w.auth,"reauthViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}function as(){return(as=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y);Be(w.auth,f,Dr);const A=yi(w.auth,g);return new Co(w.auth,"linkViaPopup",f,A,w).executeNotNull()})).apply(this,arguments)}let Co=(()=>{class y extends Gs{constructor(g,w,A,N,Z){super(g,w,N,Z),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,m.Z)(function*(){const w=yield g.execute();return $(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,m.Z)(function*(){Y(1===g.filter.length,"Popup operations only handle one event");const w=Ur();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Ce(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ce(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=(null===(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)||void 0===A?void 0:A.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(Ce(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(g,Pg.get())};g()}}return y.currentPopupAction=null,y})();const qs=new Map;class oy extends Gs{constructor(f,g,w=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var f=()=>super.execute,g=this;return(0,m.Z)(function*(){let w=qs.get(g.auth._key());if(!w){try{const N=(yield function ia(y,f){return ou.apply(this,arguments)}(g.resolver,g.auth))?yield f().call(g):null;w=()=>Promise.resolve(N)}catch(A){w=()=>Promise.reject(A)}qs.set(g.auth._key(),w)}return g.bypassAuthState||qs.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(f){var g=()=>super.onAuthEvent,w=this;return(0,m.Z)(function*(){if("signInViaRedirect"===f.type)return g().call(w,f);if("unknown"!==f.type){if(f.eventId){const A=yield w.auth._redirectUserForId(f.eventId);if(A)return w.user=A,g().call(w,f);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,m.Z)(function*(){})()}cleanUp(){}}function ou(){return(ou=(0,m.Z)(function*(y,f){const g=V(f),w=M(y);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Io(y,f){return el.apply(this,arguments)}function el(){return(el=(0,m.Z)(function*(y,f){return M(y)._set(V(f),"true")})).apply(this,arguments)}function T(y,f){qs.set(y._key(),f)}function M(y){return te(y._redirectPersistence)}function V(y){return qn("pendingRedirect",y.config.apiKey,y.name)}function Pe(){return(Pe=(0,m.Z)(function*(y,f,g){const w=st(y);Be(y,f,Dr);const A=yi(w,g);return yield Io(A,w),A._openRedirect(w,f,"signInViaRedirect")})).apply(this,arguments)}function wt(){return(wt=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y);Be(w.auth,f,Dr);const A=yi(w.auth,g);yield Io(A,w.auth);const N=yield Oi(w);return A._openRedirect(w.auth,f,"reauthViaRedirect",N)})).apply(this,arguments)}function Hr(){return(Hr=(0,m.Z)(function*(y,f,g){const w=(0,F.m9)(y);Be(w.auth,f,Dr);const A=yi(w.auth,g);yield tn(!1,w,f.providerId),yield Io(A,w.auth);const N=yield Oi(w);return A._openRedirect(w.auth,f,"linkViaRedirect",N)})).apply(this,arguments)}function sa(){return(sa=(0,m.Z)(function*(y,f){return yield st(y)._initializationPromise,vi(y,f,!1)})).apply(this,arguments)}function vi(y,f){return si.apply(this,arguments)}function si(){return(si=(0,m.Z)(function*(y,f,g=!1){const w=st(y),A=yi(w,f),Z=yield new oy(w,A,g).execute();return Z&&!g&&(delete Z.user._redirectEventId,yield w._persistUserIfCurrent(Z.user),yield w._setRedirectUser(null,f)),Z})).apply(this,arguments)}function Oi(y){return $r.apply(this,arguments)}function $r(){return($r=(0,m.Z)(function*(y){const f=Ur(`${y.uid}:::`);return y._redirectEventId=f,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),f})).apply(this,arguments)}class yf{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(f,w)&&(g=!0,this.sendToConsumer(f,w),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function kg(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return oa(y);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=f,g=!0)),g}sendToConsumer(f,g){var w;if(f.error&&!oa(f)){const A=(null===(w=f.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Ce(this.auth,A))}else g.onAuthEvent(f)}isEventForConsumer(f,g){const w=null===g.eventId||!!f.eventId&&f.eventId===g.eventId;return g.filter.includes(f.type)&&w}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rc(f))}saveEventToCache(f){this.cachedEventUids.add(rc(f)),this.lastProcessedEventTime=Date.now()}}function rc(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(f=>f).join("-")}function oa({type:y,error:f}){return"unknown"===y&&"auth/no-auth-event"===(null==f?void 0:f.code)}function Og(y){return vf.apply(this,arguments)}function vf(){return(vf=(0,m.Z)(function*(y,f={}){return Lt(y,"GET","/v1/projects",f)})).apply(this,arguments)}const tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ic=/^https?/;function Fg(){return(Fg=(0,m.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:f}=yield Og(y);for(const g of f)try{if(Lg(g))return}catch(w){}Te(y,"unauthorized-domain")})).apply(this,arguments)}function Lg(y){const f=Oe(),{protocol:g,hostname:w}=new URL(f);if(y.startsWith("chrome-extension://")){const Z=new URL(y);return""===Z.hostname&&""===w?"chrome-extension:"===g&&y.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===g&&Z.hostname===w}if(!ic.test(g))return!1;if(tl.test(y))return w===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const uy=new rn(3e4,6e4);function ly(){const y=xt().___jsl;if(null==y?void 0:y.H)for(const f of Object.keys(y.H))if(y.H[f].r=y.H[f].r||[],y.H[f].L=y.H[f].L||[],y.H[f].r=[...y.H[f].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let sc=null;function Vg(y){return sc=sc||function kd(y){return new Promise((f,g)=>{var w,A,N;function Z(){ly(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{ly(),g(Ce(y,"network-request-failed"))},timeout:uy.get()})}if(null===(A=null===(w=xt().gapi)||void 0===w?void 0:w.iframes)||void 0===A?void 0:A.Iframe)f(gapi.iframes.getContext());else{if(!(null===(N=xt().gapi)||void 0===N?void 0:N.load)){const oe=$s("iframefcb");return xt()[oe]=()=>{gapi.load?Z():g(Ce(y,"network-request-failed"))},wo(`https://apis.google.com/js/api.js?onload=${oe}`).catch(Le=>g(Le))}Z()}}).catch(f=>{throw sc=null,f})}(y),sc}const nl=new rn(5e3,15e3),cy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ug=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dy(y){const f=y.config;$(f.authDomain,y,"auth-domain-config-required");const g=f.emulator?kn(f,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,w={apiKey:f.apiKey,appName:y.name,v:le.SDK_VERSION},A=Ug.get(y.config.apiHost);A&&(w.eid=A);const N=y._getFrameworks();return N.length&&(w.fw=N.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function il(){return il=(0,m.Z)(function*(y){const f=yield Vg(y),g=xt().gapi;return $(g,y,"internal-error"),f.open({where:document.body,url:dy(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cy,dontclear:!0},w=>new Promise(function(){var A=(0,m.Z)(function*(N,Z){yield w.restyle({setHideOnLeave:!1});const oe=Ce(y,"network-request-failed"),Le=xt().setTimeout(()=>{Z(oe)},nl.get());function Ke(){xt().clearTimeout(Le),N(w)}w.ping(Ke).then(Ke,()=>{Z(oe)})});return function(N,Z){return A.apply(this,arguments)}}()))}),il.apply(this,arguments)}const Ef={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Od{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function ua(y,f,g,w,A,N){$(y.config.authDomain,y,"auth-domain-config-required"),$(y.config.apiKey,y,"invalid-api-key");const Z={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:w,v:le.SDK_VERSION,eventId:A};if(f instanceof Dr){f.setDefaultLanguage(y.languageCode),Z.providerId=f.providerId||"",(0,F.xb)(f.getCustomParameters())||(Z.customParameters=JSON.stringify(f.getCustomParameters()));for(const[Le,Ke]of Object.entries(N||{}))Z[Le]=Ke}if(f instanceof co){const Le=f.getScopes().filter(Ke=>""!==Ke);Le.length>0&&(Z.scopes=Le.join(","))}y.tenantId&&(Z.tid=y.tenantId);const oe=Z;for(const Le of Object.keys(oe))void 0===oe[Le]&&delete oe[Le];return`${function Cf({config:y}){return y.emulator?kn(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}(y)}?${(0,F.xO)(oe).slice(1)}`}const sl="webStorageSupport";class Hg extends class RT{constructor(f){this.factorId=f}_process(f,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(f,g.credential,w);case"signin":return this._finalizeSignIn(f,g.credential);default:return Ee("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Hg(f)}_finalizeEnroll(f,g,w){return function mo(y,f){return Lt(y,"POST","/v2/accounts/mfaEnrollment:finalize",qt(y,f))}(f,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,g){return function Hs(y,f){return Lt(y,"POST","/v2/accounts/mfaSignIn:finalize",qt(y,f))}(f,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let gy=(()=>{class y{constructor(){}static assertion(g){return Hg._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var $g="@firebase/auth";class VE{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var g=this;return(0,m.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const g=this.auth.onIdTokenChanged(w=>{var A;f((null===(A=w)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,g),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const g=this.internalListeners.get(f);!g||(this.internalListeners.delete(f),g(),this.updateProactiveRefresh())}assertAuthConfigured(){$(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function bo(){return window}function ol(){return(ol=(0,m.Z)(function*(y,f,g){var w;const{BuildInfo:A}=bo();Y(f.sessionId,"AuthEvent did not contain a session ID");const N=yield uc(f.sessionId),Z={};return ei()?Z.ibi=A.packageName:Fr()?Z.apn=A.packageName:Te(y,"operation-not-supported-in-this-environment"),A.displayName&&(Z.appDisplayName=A.displayName),Z.sessionId=N,ua(y,g,f.type,void 0,null!==(w=f.eventId)&&void 0!==w?w:void 0,Z)})).apply(this,arguments)}function Fd(){return(Fd=(0,m.Z)(function*(y){const{BuildInfo:f}=bo(),g={};ei()?g.iosBundleId=f.packageName:Fr()?g.androidPackageName=f.packageName:Te(y,"operation-not-supported-in-this-environment"),yield Og(y,g)})).apply(this,arguments)}function Vd(){return(Vd=(0,m.Z)(function*(y,f,g){const{cordova:w}=bo();let A=()=>{};try{yield new Promise((N,Z)=>{let oe=null;function Le(){var lt;N();const Gn=null===(lt=w.plugins.browsertab)||void 0===lt?void 0:lt.close;"function"==typeof Gn&&Gn(),"function"==typeof(null==g?void 0:g.close)&&g.close()}function Ke(){oe||(oe=window.setTimeout(()=>{Z(Ce(y,"redirect-cancelled-by-user"))},2e3))}function ut(){"visible"===(null==document?void 0:document.visibilityState)&&Ke()}f.addPassiveListener(Le),document.addEventListener("resume",Ke,!1),Fr()&&document.addEventListener("visibilitychange",ut,!1),A=()=>{f.removePassiveListener(Le),document.removeEventListener("resume",Ke,!1),document.removeEventListener("visibilitychange",ut,!1),oe&&window.clearTimeout(oe)}})}finally{A()}})).apply(this,arguments)}function uc(y){return au.apply(this,arguments)}function au(){return(au=(0,m.Z)(function*(y){const f=lc(y),g=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lc(y){if(Y(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(y);const f=new ArrayBuffer(y.length),g=new Uint8Array(f);for(let w=0;w<y.length;w++)g[w]=y.charCodeAt(w);return g}!function BE(y){(0,le._registerComponent)(new ce.wA("auth",(f,{options:g})=>{const w=f.getProvider("app").getImmediate(),A=f.getProvider("heartbeat"),{apiKey:N,authDomain:Z}=w.options;return((oe,Le)=>{$(N&&!N.includes(":"),"invalid-api-key",{appName:oe.name}),$(!(null==Z?void 0:Z.includes(":")),"argument-error",{appName:oe.name});const Ke={apiKey:N,authDomain:Z,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Uo(y)},ut=new ze(oe,Le,Ke);return function ue(y,f){const g=(null==f?void 0:f.persistence)||[],w=(Array.isArray(g)?g:[g]).map(te);(null==f?void 0:f.errorMap)&&y._updateErrorMap(f.errorMap),y._initializeWithPersistence(w,null==f?void 0:f.popupRedirectResolver)}(ut,g),ut})(w,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,g,w)=>{f.getProvider("auth-internal").initialize()})),(0,le._registerComponent)(new ce.wA("auth-internal",f=>{const g=st(f.getProvider("auth").getImmediate());return new VE(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,le.registerVersion)($g,"0.20.2",function UE(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,le.registerVersion)($g,"0.20.2","esm2017")}("Browser");class jE extends yf{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(f)),super.onEvent(f)}initialized(){var f=this;return(0,m.Z)(function*(){yield f.initPromise})()}}function jd(y){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,m.Z)(function*(y){const f=yield al()._get(bn(y));return f&&(yield al()._remove(bn(y))),f})).apply(this,arguments)}function Kg(){const y=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const w=Math.floor(Math.random()*f.length);y.push(f.charAt(w))}return y.join("")}function al(){return te(Jt)}function bn(y){return qn("authEvent",y.config.apiKey,y.name)}function Mn(y){if(!(null==y?void 0:y.includes("?")))return{};const[f,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Tf(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ce("no-auth-event")}}function dc(){var y;return(null===(y=null==self?void 0:self.location)||void 0===y?void 0:y.protocol)||null}function by(y=(0,F.z$)()){return!("file:"!==dc()&&"ionic:"!==dc()&&"capacitor:"!==dc()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function uu(){try{const y=self.localStorage,f=Ur();if(y)return y.setItem(f,"1"),y.removeItem(f),!function Sf(y=(0,F.z$)()){return function Qn(){return(0,F.w1)()&&11===(null==document?void 0:document.documentMode)}()||function $d(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch(y){return Un()&&(0,F.hl)()}return!1}function Un(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Bn(){return(function Iy(){return"http:"===dc()||"https:"===dc()}()||(0,F.ru)()||by())&&!function hc(){return(0,F.b$)()||(0,F.UG)()}()&&uu()&&!Un()}function Gd(){return by()&&"undefined"!=typeof document}function Af(){return(Af=(0,m.Z)(function*(){return!!Gd()&&new Promise(y=>{const f=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),y(!0)})})})).apply(this,arguments)}const Fi={LOCAL:"local",NONE:"none",SESSION:"session"},ul=$,fc="persistence";function pc(y){return gc.apply(this,arguments)}function gc(){return(gc=(0,m.Z)(function*(y){yield y._initializationPromise;const f=Rf(),g=qn(fc,y.config.apiKey,y.name);f&&f.setItem(g,y._getPersistence())})).apply(this,arguments)}function Rf(){var y;try{return(null===(y=function Yg(){return"undefined"!=typeof window?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch(f){return null}}const la=$;class zs{constructor(){this.browserResolver=te(class xT{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=xn,this._completeRedirectFn=vi,this._overrideRedirectResult=T}_openPopup(f,g,w,A){var N=this;return(0,m.Z)(function*(){var Z;Y(null===(Z=N.eventManagers[f._key()])||void 0===Z?void 0:Z.manager,"_initialize() not called before _openPopup()");const oe=ua(f,g,w,Oe(),A);return function LE(y,f,g,w=500,A=600){const N=Math.max((window.screen.availHeight-A)/2,0).toString(),Z=Math.max((window.screen.availWidth-w)/2,0).toString();let oe="";const Le=Object.assign(Object.assign({},Ef),{width:w.toString(),height:A.toString(),top:N,left:Z}),Ke=(0,F.z$)().toLowerCase();g&&(oe=Pa(Ke)?"_blank":g),Na(Ke)&&(f=f||"http://localhost",Le.scrollbars="yes");const ut=Object.entries(Le).reduce((Gn,[Ei,_c])=>`${Gn}${Ei}=${_c},`,"");if(function uo(y=(0,F.z$)()){var f;return ei(y)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(Ke)&&"_self"!==oe)return function py(y,f){const g=document.createElement("a");g.href=y,g.target=f;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(f||"",oe),new Od(null);const lt=window.open(f||"",oe,ut);$(lt,y,"popup-blocked");try{lt.focus()}catch(Gn){}return new Od(lt)}(f,oe,Ur())})()}_openRedirect(f,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N._originValidation(f),function Cn(y){xt().location.href=y}(ua(f,g,w,Oe(),A)),new Promise(()=>{})})()}_initialize(f){const g=f._key();if(this.eventManagers[g]){const{manager:A,promise:N}=this.eventManagers[g];return A?Promise.resolve(A):(Y(N,"If manager is not set, promise should be"),N)}const w=this.initAndGetManager(f);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(f){var g=this;return(0,m.Z)(function*(){const w=yield function oc(y){return il.apply(this,arguments)}(f),A=new yf(f);return w.register("authEvent",N=>($(null==N?void 0:N.authEvent,f,"invalid-auth-event"),{status:A.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[f._key()]={manager:A},g.iframes[f._key()]=w,A})()}_isIframeWebStorageSupported(f,g){this.iframes[f._key()].send(sl,{type:sl},A=>{var N;const Z=null===(N=null==A?void 0:A[0])||void 0===N?void 0:N[sl];void 0!==Z&&g(!!Z),Te(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ay(y){return Fg.apply(this,arguments)}(f)),this.originValidationPromises[g]}get _shouldInitProactively(){return Ps()||Pu()||ei()}}),this.cordovaResolver=te(class vy{constructor(){this._redirectPersistence=xn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=vi,this._overrideRedirectResult=T}_initialize(f){var g=this;return(0,m.Z)(function*(){const w=f._key();let A=g.eventManagers.get(w);return A||(A=new jE(f),g.eventManagers.set(w,A),g.attachCallbackListeners(f,A)),A})()}_openPopup(f){Te(f,"operation-not-supported-in-this-environment")}_openRedirect(f,g,w,A){var N=this;return(0,m.Z)(function*(){!function qg(y){var f,g,w,A,N,Z,oe,Le,Ke,ut;const lt=bo();$("function"==typeof(null===(f=null==lt?void 0:lt.universalLinks)||void 0===f?void 0:f.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),$(void 0!==(null===(g=null==lt?void 0:lt.BuildInfo)||void 0===g?void 0:g.packageName),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),$("function"==typeof(null===(N=null===(A=null===(w=null==lt?void 0:lt.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===N?void 0:N.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(Le=null===(oe=null===(Z=null==lt?void 0:lt.cordova)||void 0===Z?void 0:Z.plugins)||void 0===oe?void 0:oe.browsertab)||void 0===Le?void 0:Le.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),$("function"==typeof(null===(ut=null===(Ke=null==lt?void 0:lt.cordova)||void 0===Ke?void 0:Ke.InAppBrowser)||void 0===ut?void 0:ut.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const Z=yield N._initialize(f);yield Z.initialized(),Z.resetRedirect(),function b(){qs.clear()}(),yield N._originValidation(f);const oe=function Bd(y,f,g=null){return{type:f,eventId:g,urlResponse:null,sessionId:Kg(),postBody:null,tenantId:y.tenantId,error:Ce(y,"no-auth-event")}}(f,w,A);yield function _y(y,f){return al()._set(bn(y),f)}(f,oe);const Le=yield function Do(y,f,g){return ol.apply(this,arguments)}(f,oe,g),Ke=yield function Ld(y){const{cordova:f}=bo();return new Promise(g=>{f.plugins.browsertab.isAvailable(w=>{let A=null;w?f.plugins.browsertab.openUrl(y):A=f.InAppBrowser.open(y,function ad(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(Le);return function Wg(y,f,g){return Vd.apply(this,arguments)}(f,Z,Ke)})()}_isIframeWebStorageSupported(f,g){throw new Error("Method not implemented.")}_originValidation(f){const g=f._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ac(y){return Fd.apply(this,arguments)}(f)),this.originValidationPromises[g]}attachCallbackListeners(f,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:N}=bo(),Z=setTimeout((0,m.Z)(function*(){yield jd(f),g.onEvent(Tf())}),500),oe=function(){var ut=(0,m.Z)(function*(lt){clearTimeout(Z);const Gn=yield jd(f);let Ei=null;Gn&&(null==lt?void 0:lt.url)&&(Ei=function zg(y,f){var g,w;const A=function bf(y){const f=Mn(y),g=f.link?decodeURIComponent(f.link):void 0,w=Mn(g).link,A=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return Mn(A).link||A||w||g||y}(f);if(A.includes("/__/auth/callback")){const N=Mn(A),Z=N.firebaseError?function cc(y){try{return JSON.parse(y)}catch(f){return null}}(decodeURIComponent(N.firebaseError)):null,oe=null===(w=null===(g=null==Z?void 0:Z.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Le=oe?Ce(oe):null;return Le?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Gn,lt.url)),g.onEvent(Ei||Tf())});return function(Gn){return ut.apply(this,arguments)}}();void 0!==w&&"function"==typeof w.subscribe&&w.subscribe(null,oe);const Le=A,Ke=`${N.packageName.toLowerCase()}://`;bo().handleOpenURL=function(){var ut=(0,m.Z)(function*(lt){if(lt.toLowerCase().startsWith(Ke)&&oe({url:lt}),"function"==typeof Le)try{Le(lt)}catch(Gn){console.error(Gn)}});return function(lt){return ut.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=xn,this._completeRedirectFn=vi,this._overrideRedirectResult=T}_initialize(f){var g=this;return(0,m.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(f,g,w,A)})()}_openRedirect(f,g,w,A){var N=this;return(0,m.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(f,g,w,A)})()}_isIframeWebStorageSupported(f,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,g)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return Gd()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return la(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,m.Z)(function*(){if(f.underlyingResolver)return;const g=yield function Dy(){return Af.apply(this,arguments)}();f.underlyingResolver=g?f.cordovaResolver:f.browserResolver})()}}function mc(y){return y.unwrap()}function Wd(y){return Qg(y)}function Qg(y){const{_tokenResponse:f}=y instanceof F.ZR?y.customData:y;if(!f)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Rn.credentialFromResult(y);const g=f.providerId;if(!g||"password"===g)return null;let w;switch(g){case"google.com":w=md;break;case"facebook.com":w=jo;break;case"github.com":w=ff;break;case"twitter.com":w=yd;break;default:const{oauthIdToken:A,oauthAccessToken:N,oauthTokenSecret:Z,pendingToken:oe,nonce:Le}=f;return N||Z||A||oe?oe?g.startsWith("saml.")?ho._create(g,oe):gs._fromParams({providerId:g,signInMethod:g,pendingToken:oe,idToken:A,accessToken:N}):new Xi(g).credential({idToken:A,accessToken:N,rawNonce:Le}):null}return y instanceof F.ZR?w.credentialFromError(y):w.credentialFromResult(y)}function wi(y,f){return f.catch(g=>{throw g instanceof F.ZR&&function Sy(y,f){var g;const w=null===(g=f.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new Jg(y,function sr(y,f){var g;const w=(0,F.m9)(y),A=f;return $(f.customData.operationType,w,"argument-error"),$(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Qo._fromError(w,A)}(y,f));else if(w){const A=Qg(f),N=f;A&&(N.credential=A,N.tenantId=w.tenantId||void 0,N.email=w.email||void 0,N.phoneNumber=w.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:Wd(g),additionalUserInfo:is(g),user:To.getOrCreate(A)}})}function Mf(y,f){return Nf.apply(this,arguments)}function Nf(){return(Nf=(0,m.Z)(function*(y,f){const g=yield f;return{verificationId:g.verificationId,confirm:w=>wi(y,g.confirm(w))}})).apply(this,arguments)}class Jg{constructor(f,g){this.resolver=g,this.auth=function Ty(y){return y.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return wi(mc(this.auth),this.resolver.resolveSignIn(f))}}class To{constructor(f){this._delegate=f,this.multiFactor=function zu(y){const f=(0,F.m9)(y);return qu.has(f)||qu.set(f,bd._fromUser(f)),qu.get(f)}(f)}static getOrCreate(f){return To.USER_MAP.has(f)||To.USER_MAP.set(f,new To(f)),To.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var g=this;return(0,m.Z)(function*(){return wi(g.auth,fr(g._delegate,f))})()}linkWithPhoneNumber(f,g){var w=this;return(0,m.Z)(function*(){return Mf(w.auth,function sy(y,f,g){return ec.apply(this,arguments)}(w._delegate,f,g))})()}linkWithPopup(f){var g=this;return(0,m.Z)(function*(){return wi(g.auth,function su(y,f,g){return as.apply(this,arguments)}(g._delegate,f,zs))})()}linkWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield pc(st(g.auth)),function Bt(y,f,g){return function Et(y,f,g){return Hr.apply(this,arguments)}(y,f,g)}(g._delegate,f,zs)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var g=this;return(0,m.Z)(function*(){return wi(g.auth,ms(g._delegate,f))})()}reauthenticateWithPhoneNumber(f,g){return Mf(this.auth,function _i(y,f,g){return jr.apply(this,arguments)}(this._delegate,f,g))}reauthenticateWithPopup(f){return wi(this.auth,function Pd(y,f,g){return tc.apply(this,arguments)}(this._delegate,f,zs))}reauthenticateWithRedirect(f){var g=this;return(0,m.Z)(function*(){return yield pc(st(g.auth)),function He(y,f,g){return function vt(y,f,g){return wt.apply(this,arguments)}(y,f,g)}(g._delegate,f,zs)})()}sendEmailVerification(f){return function ql(y,f){return $u.apply(this,arguments)}(this._delegate,f)}unlink(f){var g=this;return(0,m.Z)(function*(){return yield function pf(y,f){return un.apply(this,arguments)}(g._delegate,f),g})()}updateEmail(f){return function Ag(y,f){return Ko((0,F.m9)(y),f,null)}(this._delegate,f)}updatePassword(f){return function Zl(y,f){return Ko((0,F.m9)(y),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function Eo(y,f){return ta.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function Kl(y,f){return Ka.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,g){return function zl(y,f,g){return Gu.apply(this,arguments)}(this._delegate,f,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}To.USER_MAP=new WeakMap;const Sr=$;let qd=(()=>{class y{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Sr(A,"invalid-api-key",{appName:g.name}),Sr(A,"invalid-api-key",{appName:g.name});const N="undefined"!=typeof window?zs:void 0;this._delegate=w.initialize({options:{persistence:Xg(A,g.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(ke),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?To.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function ni(y,f,g){const w=st(y);$(w._canInitEmulator,w,"emulator-config-failed"),$(/^https?:\/\//.test(f),w,"invalid-emulator-scheme");const A=!!(null==g?void 0:g.disableWarnings),N=Ki(f),{host:Z,port:oe}=function $n(y){const f=Ki(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(f.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const N=A[1];return{host:N,port:Zi(w.substr(N.length+1))}}{const[N,Z]=w.split(":");return{host:N,port:Zi(Z)}}}(f);w.config.emulator={url:`${N}//${Z}${null===oe?"":`:${oe}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:Z,port:oe,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function gn(){function y(){const f=document.createElement("p"),g=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,w)}applyActionCode(g){return function Se(y,f){return kt.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Bu(this._delegate,g)}confirmPasswordReset(g,w){return function $l(y,f,g){return Gl.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,m.Z)(function*(){return wi(A._delegate,function gi(y,f,g){return $a.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Us(y,f){return Pi.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Ga(y,f){const g=Lu.parseLink(f);return"EMAIL_SIGNIN"===(null==g?void 0:g.operation)}(0,g)}getRedirectResult(){var g=this;return(0,m.Z)(function*(){Sr(Bn(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function ar(y,f){return sa.apply(this,arguments)}(g._delegate,zs);return w?wi(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function wy(y,f){st(y)._logFramework(f)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:N,error:Z,complete:oe}=zd(g,w,A);return this._delegate.onAuthStateChanged(N,Z,oe)}onIdTokenChanged(g,w,A){const{next:N,error:Z,complete:oe}=zd(g,w,A);return this._delegate.onIdTokenChanged(N,Z,oe)}sendSignInLinkToEmail(g,w){return function Sg(y,f,g){return ju.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Hl(y,f,g){return Ha.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,m.Z)(function*(){let A;switch(function xf(y,f){ul(Object.values(Fi).includes(f),y,"invalid-persistence-type"),(0,F.b$)()?ul(f!==Fi.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?ul(f===Fi.NONE,y,"unsupported-persistence-type"):Un()?ul(f===Fi.NONE||f===Fi.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):ul(f===Fi.NONE||uu(),y,"unsupported-persistence-type")}(w._delegate,g),g){case Fi.SESSION:A=xn;break;case Fi.LOCAL:A=(yield te(Jo)._isAvailable())?Jo:Jt;break;case Fi.NONE:A=It;break;default:return Te("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return wi(this._delegate,function vd(y){return Ul.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return wi(this._delegate,En(this._delegate,g))}signInWithCustomToken(g){return wi(this._delegate,function Wo(y,f){return dt.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return wi(this._delegate,function Wl(y,f,g){return En((0,F.m9)(y),gd.credential(f,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return wi(this._delegate,function Hu(y,f,g){return Vn.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Mf(this._delegate,function Xo(y,f,g){return Cs.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,m.Z)(function*(){return Sr(Bn(),w._delegate,"operation-not-supported-in-this-environment"),wi(w._delegate,function Nd(y,f,g){return Ws.apply(this,arguments)}(w._delegate,g,zs))})()}signInWithRedirect(g){var w=this;return(0,m.Z)(function*(){return Sr(Bn(),w._delegate,"operation-not-supported-in-this-environment"),yield pc(w._delegate),function Q(y,f,g){return function se(y,f,g){return Pe.apply(this,arguments)}(y,f,g)}(w._delegate,g,zs)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function zo(y,f){return go.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Fi,y})();function zd(y,f,g){let w=y;"function"!=typeof y&&({next:w,error:f,complete:g}=y);const A=w;return{next:Z=>A(Z&&To.getOrCreate(Z)),error:f,complete:g}}function Xg(y,f){const g=function Is(y,f){const g=Rf();if(!g)return[];const w=qn(fc,y,f);switch(g.getItem(w)){case Fi.NONE:return[It];case Fi.LOCAL:return[Jo,xn];case Fi.SESSION:return[xn];default:return[]}}(y,f);if("undefined"!=typeof self&&!g.includes(Jo)&&g.push(Jo),"undefined"!=typeof window)for(const w of[Jt,xn])g.includes(w)||g.push(w);return g.includes(It)||g.push(It),g}class Pf{constructor(){this.providerId="phone",this._delegate=new Rn(mc(ee.Z.auth()))}static credential(f,g){return Rn.credential(f,g)}verifyPhoneNumber(f,g){return this._delegate.verifyPhoneNumber(f,g)}unwrap(){return this._delegate}}Pf.PHONE_SIGN_IN_METHOD=Rn.PHONE_SIGN_IN_METHOD,Pf.PROVIDER_ID=Rn.PROVIDER_ID;const em=$;class tm{constructor(f,g,w=ee.Z.app()){var A;em(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new nu(f,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Ks(y){y.INTERNAL.registerComponent(new ce.wA("auth-compat",f=>{const g=f.getProvider("app-compat").getImmediate(),w=f.getProvider("auth");return new qd(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:gd,FacebookAuthProvider:jo,GithubAuthProvider:ff,GoogleAuthProvider:md,OAuthProvider:Xi,SAMLAuthProvider:Lr,PhoneAuthProvider:Pf,PhoneMultiFactorGenerator:gy,RecaptchaVerifier:tm,TwitterAuthProvider:yd,Auth:qd,AuthCredential:Mi,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.2.15")}(ee.Z)},8306:(Je,we,O)=>{O.d(we,{y:()=>G});var m=O(930),ee=O(727),F=O(8822),le=O(4671);var ce=O(2416),ae=O(576),he=O(2806);let G=(()=>{class xe{constructor(Ue){Ue&&(this._subscribe=Ue)}lift(Ue){const pe=new xe;return pe.source=this,pe.operator=Ue,pe}subscribe(Ue,pe,be){const qe=function We(xe){return xe&&xe instanceof m.Lv||function ne(xe){return xe&&(0,ae.m)(xe.next)&&(0,ae.m)(xe.error)&&(0,ae.m)(xe.complete)}(xe)&&(0,ee.Nn)(xe)}(Ue)?Ue:new m.Hp(Ue,pe,be);return(0,he.x)(()=>{const{operator:Ye,source:Te}=this;qe.add(Ye?Ye.call(qe,Te):Te?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(Ue){try{return this._subscribe(Ue)}catch(pe){Ue.error(pe)}}forEach(Ue,pe){return new(pe=H(pe))((be,qe)=>{const Ye=new m.Hp({next:Te=>{try{Ue(Te)}catch(Ce){qe(Ce),Ye.unsubscribe()}},error:qe,complete:be});this.subscribe(Ye)})}_subscribe(Ue){var pe;return null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(Ue)}[F.L](){return this}pipe(...Ue){return function ge(xe){return 0===xe.length?le.y:1===xe.length?xe[0]:function(Ue){return xe.reduce((pe,be)=>be(pe),Ue)}}(Ue)(this)}toPromise(Ue){return new(Ue=H(Ue))((pe,be)=>{let qe;this.subscribe(Ye=>qe=Ye,Ye=>be(Ye),()=>pe(qe))})}}return xe.create=ke=>new xe(ke),xe})();function H(xe){var ke;return null!==(ke=null!=xe?xe:ce.v.Promise)&&void 0!==ke?ke:Promise}},7579:(Je,we,O)=>{O.d(we,{x:()=>ce});var m=O(8306),ee=O(727);const le=(0,O(3888).d)(he=>function(){he(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=O(8737),ge=O(2806);let ce=(()=>{class he extends m.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ne=new ae(this,this);return ne.operator=H,ne}_throwIfClosed(){if(this.closed)throw new le}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ne of this.currentObservers)ne.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ne}=this;for(;ne.length;)ne.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ne,isStopped:We,observers:xe}=this;return ne||We?ee.Lc:(this.currentObservers=null,xe.push(H),new ee.w0(()=>{this.currentObservers=null,(0,re.P)(xe,H)}))}_checkFinalizedStatuses(H){const{hasError:ne,thrownError:We,isStopped:xe}=this;ne?H.error(We):xe&&H.complete()}asObservable(){const H=new m.y;return H.source=this,H}}return he.create=(G,H)=>new ae(G,H),he})();class ae extends ce{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ne||ne.call(H,G)}error(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ne||ne.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,ne;return null!==(ne=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==ne?ne:ee.Lc}}},930:(Je,we,O)=>{O.d(we,{Hp:()=>Ue,Lv:()=>ne});var m=O(576),ee=O(727),F=O(2416),le=O(7849),re=O(5032);const ge=he("C",void 0,void 0);function he(Te,Ce,Ie){return{kind:Te,value:Ce,error:Ie}}var G=O(3410),H=O(2806);class ne extends ee.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ee.Nn)(Ce)&&Ce.add(this)):this.destination=Ye}static create(Ce,Ie,Be){return new Ue(Ce,Ie,Be)}next(Ce){this.isStopped?qe(function ae(Te){return he("N",Te,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?qe(function ce(Te){return he("E",void 0,Te)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?qe(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const We=Function.prototype.bind;function xe(Te,Ce){return We.call(Te,Ce)}class ke{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(Ce)}catch(Be){pe(Be)}}error(Ce){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(Ce)}catch(Be){pe(Be)}else pe(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(Ie){pe(Ie)}}}class Ue extends ne{constructor(Ce,Ie,Be){let je;if(super(),(0,m.m)(Ce)||!Ce)je={next:null!=Ce?Ce:void 0,error:null!=Ie?Ie:void 0,complete:null!=Be?Be:void 0};else{let $;this&&F.v.useDeprecatedNextContext?($=Object.create(Ce),$.unsubscribe=()=>this.unsubscribe(),je={next:Ce.next&&xe(Ce.next,$),error:Ce.error&&xe(Ce.error,$),complete:Ce.complete&&xe(Ce.complete,$)}):je=Ce}this.destination=new ke(je)}}function pe(Te){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Te):(0,le.h)(Te)}function qe(Te,Ce){const{onStoppedNotification:Ie}=F.v;Ie&&G.z.setTimeout(()=>Ie(Te,Ce))}const Ye={closed:!0,next:re.Z,error:function be(Te){throw Te},complete:re.Z}},727:(Je,we,O)=>{O.d(we,{Lc:()=>ge,w0:()=>re,Nn:()=>ce});var m=O(576);const F=(0,O(3888).d)(he=>function(H){he(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,We)=>`${We+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var le=O(8737);class re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,m.m)(ne))try{ne()}catch(xe){G=xe instanceof F?xe.errors:[xe]}const{_finalizers:We}=this;if(We){this._finalizers=null;for(const xe of We)try{ae(xe)}catch(ke){G=null!=G?G:[],ke instanceof F?G=[...G,...ke.errors]:G.push(ke)}}if(G)throw new F(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ae(G);else{if(G instanceof re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,le.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,le.P)(H,G),G instanceof re&&G._removeParent(this)}}re.EMPTY=(()=>{const he=new re;return he.closed=!0,he})();const ge=re.EMPTY;function ce(he){return he instanceof re||he&&"closed"in he&&(0,m.m)(he.remove)&&(0,m.m)(he.add)&&(0,m.m)(he.unsubscribe)}function ae(he){(0,m.m)(he)?he():he.unsubscribe()}},2416:(Je,we,O)=>{O.d(we,{v:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Je,we,O)=>{O.d(we,{E:()=>ee});const ee=new(O(8306).y)(re=>re.complete())},8996:(Je,we,O)=>{O.d(we,{D:()=>Ce});var m=O(8421),ee=O(5363),F=O(9468),ge=O(8306),ae=O(2202),he=O(576),G=O(9672);function ne(Ie,Be){if(!Ie)throw new Error("Iterable cannot be null");return new ge.y(je=>{(0,G.f)(je,Be,()=>{const $=Ie[Symbol.asyncIterator]();(0,G.f)(je,Be,()=>{$.next().then(Ee=>{Ee.done?je.complete():je.next(Ee.value)})},0,!0)})})}var We=O(3670),xe=O(8239),ke=O(1144),Ue=O(6495),pe=O(2206),be=O(4532),qe=O(3260);function Ce(Ie,Be){return Be?function Te(Ie,Be){if(null!=Ie){if((0,We.c)(Ie))return function le(Ie,Be){return(0,m.Xf)(Ie).pipe((0,F.R)(Be),(0,ee.Q)(Be))}(Ie,Be);if((0,ke.z)(Ie))return function ce(Ie,Be){return new ge.y(je=>{let $=0;return Be.schedule(function(){$===Ie.length?je.complete():(je.next(Ie[$++]),je.closed||this.schedule())})})}(Ie,Be);if((0,xe.t)(Ie))return function re(Ie,Be){return(0,m.Xf)(Ie).pipe((0,F.R)(Be),(0,ee.Q)(Be))}(Ie,Be);if((0,pe.D)(Ie))return ne(Ie,Be);if((0,Ue.T)(Ie))return function H(Ie,Be){return new ge.y(je=>{let $;return(0,G.f)(je,Be,()=>{$=Ie[ae.h](),(0,G.f)(je,Be,()=>{let Ee,Y;try{({value:Ee,done:Y}=$.next())}catch(ie){return void je.error(ie)}Y?je.complete():je.next(Ee)},0,!0)}),()=>(0,he.m)(null==$?void 0:$.return)&&$.return()})}(Ie,Be);if((0,qe.L)(Ie))return function Ye(Ie,Be){return ne((0,qe.Q)(Ie),Be)}(Ie,Be)}throw(0,be.z)(Ie)}(Ie,Be):(0,m.Xf)(Ie)}},8421:(Je,we,O)=>{O.d(we,{Xf:()=>We});var m=O(655),ee=O(1144),F=O(8239),le=O(8306),re=O(3670),ge=O(2206),ce=O(4532),ae=O(6495),he=O(3260),G=O(576),H=O(7849),ne=O(8822);function We(Te){if(Te instanceof le.y)return Te;if(null!=Te){if((0,re.c)(Te))return function xe(Te){return new le.y(Ce=>{const Ie=Te[ne.L]();if((0,G.m)(Ie.subscribe))return Ie.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Te);if((0,ee.z)(Te))return function ke(Te){return new le.y(Ce=>{for(let Ie=0;Ie<Te.length&&!Ce.closed;Ie++)Ce.next(Te[Ie]);Ce.complete()})}(Te);if((0,F.t)(Te))return function Ue(Te){return new le.y(Ce=>{Te.then(Ie=>{Ce.closed||(Ce.next(Ie),Ce.complete())},Ie=>Ce.error(Ie)).then(null,H.h)})}(Te);if((0,ge.D)(Te))return be(Te);if((0,ae.T)(Te))return function pe(Te){return new le.y(Ce=>{for(const Ie of Te)if(Ce.next(Ie),Ce.closed)return;Ce.complete()})}(Te);if((0,he.L)(Te))return function qe(Te){return be((0,he.Q)(Te))}(Te)}throw(0,ce.z)(Te)}function be(Te){return new le.y(Ce=>{(function Ye(Te,Ce){var Ie,Be,je,$;return(0,m.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,m.KL)(Te);!(Be=yield Ie.next()).done;)if(Ce.next(Be.value),Ce.closed)return}catch(Ee){je={error:Ee}}finally{try{Be&&!Be.done&&($=Ie.return)&&(yield $.call(Ie))}finally{if(je)throw je.error}}Ce.complete()})})(Te,Ce).catch(Ie=>Ce.error(Ie))})}},6451:(Je,we,O)=>{O.d(we,{T:()=>ge});var m=O(8189),ee=O(8421),F=O(515),le=O(7669),re=O(8996);function ge(...ce){const ae=(0,le.yG)(ce),he=(0,le._6)(ce,1/0),G=ce;return G.length?1===G.length?(0,ee.Xf)(G[0]):(0,m.J)(he)((0,re.D)(G,ae)):F.E}},5403:(Je,we,O)=>{O.d(we,{x:()=>ee});var m=O(930);function ee(le,re,ge,ce,ae){return new F(le,re,ge,ce,ae)}class F extends m.Lv{constructor(re,ge,ce,ae,he,G){super(re),this.onFinalize=he,this.shouldUnsubscribe=G,this._next=ge?function(H){try{ge(H)}catch(ne){re.error(ne)}}:super._next,this._error=ae?function(H){try{ae(H)}catch(ne){re.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(Je,we,O)=>{O.d(we,{U:()=>F});var m=O(4482),ee=O(5403);function F(le,re){return(0,m.e)((ge,ce)=>{let ae=0;ge.subscribe((0,ee.x)(ce,he=>{ce.next(le.call(re,he,ae++))}))})}},8189:(Je,we,O)=>{O.d(we,{J:()=>F});var m=O(5577),ee=O(4671);function F(le=1/0){return(0,m.z)(ee.y,le)}},5577:(Je,we,O)=>{O.d(we,{z:()=>ae});var m=O(4004),ee=O(8421),F=O(4482),le=O(9672),re=O(5403),ce=O(576);function ae(he,G,H=1/0){return(0,ce.m)(G)?ae((ne,We)=>(0,m.U)((xe,ke)=>G(ne,xe,We,ke))((0,ee.Xf)(he(ne,We))),H):("number"==typeof G&&(H=G),(0,F.e)((ne,We)=>function ge(he,G,H,ne,We,xe,ke,Ue){const pe=[];let be=0,qe=0,Ye=!1;const Te=()=>{Ye&&!pe.length&&!be&&G.complete()},Ce=Be=>be<ne?Ie(Be):pe.push(Be),Ie=Be=>{xe&&G.next(Be),be++;let je=!1;(0,ee.Xf)(H(Be,qe++)).subscribe((0,re.x)(G,$=>{null==We||We($),xe?Ce($):G.next($)},()=>{je=!0},void 0,()=>{if(je)try{for(be--;pe.length&&be<ne;){const $=pe.shift();ke?(0,le.f)(G,ke,()=>Ie($)):Ie($)}Te()}catch($){G.error($)}}))};return he.subscribe((0,re.x)(G,Ce,()=>{Ye=!0,Te()})),()=>{null==Ue||Ue()}}(ne,We,he,H)))}},5363:(Je,we,O)=>{O.d(we,{Q:()=>le});var m=O(9672),ee=O(4482),F=O(5403);function le(re,ge=0){return(0,ee.e)((ce,ae)=>{ce.subscribe((0,F.x)(ae,he=>(0,m.f)(ae,re,()=>ae.next(he),ge),()=>(0,m.f)(ae,re,()=>ae.complete(),ge),he=>(0,m.f)(ae,re,()=>ae.error(he),ge)))})}},3099:(Je,we,O)=>{O.d(we,{B:()=>ge});var m=O(8996),ee=O(5698),F=O(7579),le=O(930),re=O(4482);function ge(ae={}){const{connector:he=(()=>new F.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:ne=!0}=ae;return We=>{let xe=null,ke=null,Ue=null,pe=0,be=!1,qe=!1;const Ye=()=>{null==ke||ke.unsubscribe(),ke=null},Te=()=>{Ye(),xe=Ue=null,be=qe=!1},Ce=()=>{const Ie=xe;Te(),null==Ie||Ie.unsubscribe()};return(0,re.e)((Ie,Be)=>{pe++,!qe&&!be&&Ye();const je=Ue=null!=Ue?Ue:he();Be.add(()=>{pe--,0===pe&&!qe&&!be&&(ke=ce(Ce,ne))}),je.subscribe(Be),xe||(xe=new le.Hp({next:$=>je.next($),error:$=>{qe=!0,Ye(),ke=ce(Te,G,$),je.error($)},complete:()=>{be=!0,Ye(),ke=ce(Te,H),je.complete()}}),(0,m.D)(Ie).subscribe(xe))})(We)}}function ce(ae,he,...G){return!0===he?(ae(),null):!1===he?null:he(...G).pipe((0,ee.q)(1)).subscribe(()=>ae())}},9468:(Je,we,O)=>{O.d(we,{R:()=>ee});var m=O(4482);function ee(F,le=0){return(0,m.e)((re,ge)=>{ge.add(F.schedule(()=>re.subscribe(ge),le))})}},5698:(Je,we,O)=>{O.d(we,{q:()=>le});var m=O(515),ee=O(4482),F=O(5403);function le(re){return re<=0?()=>m.E:(0,ee.e)((ge,ce)=>{let ae=0;ge.subscribe((0,F.x)(ce,he=>{++ae<=re&&(ce.next(he),re<=ae&&ce.complete())}))})}},8505:(Je,we,O)=>{O.d(we,{b:()=>re});var m=O(576),ee=O(4482),F=O(5403),le=O(4671);function re(ge,ce,ae){const he=(0,m.m)(ge)||ce||ae?{next:ge,error:ce,complete:ae}:ge;return he?(0,ee.e)((G,H)=>{var ne;null===(ne=he.subscribe)||void 0===ne||ne.call(he);let We=!0;G.subscribe((0,F.x)(H,xe=>{var ke;null===(ke=he.next)||void 0===ke||ke.call(he,xe),H.next(xe)},()=>{var xe;We=!1,null===(xe=he.complete)||void 0===xe||xe.call(he),H.complete()},xe=>{var ke;We=!1,null===(ke=he.error)||void 0===ke||ke.call(he,xe),H.error(xe)},()=>{var xe,ke;We&&(null===(xe=he.unsubscribe)||void 0===xe||xe.call(he)),null===(ke=he.finalize)||void 0===ke||ke.call(he)}))}):le.y}},4408:(Je,we,O)=>{O.d(we,{o:()=>re});var m=O(727);class ee extends m.w0{constructor(ce,ae){super()}schedule(ce,ae=0){return this}}const F={setInterval(ge,ce,...ae){const{delegate:he}=F;return(null==he?void 0:he.setInterval)?he.setInterval(ge,ce,...ae):setInterval(ge,ce,...ae)},clearInterval(ge){const{delegate:ce}=F;return((null==ce?void 0:ce.clearInterval)||clearInterval)(ge)},delegate:void 0};var le=O(8737);class re extends ee{constructor(ce,ae){super(ce,ae),this.scheduler=ce,this.work=ae,this.pending=!1}schedule(ce,ae=0){if(this.closed)return this;this.state=ce;const he=this.id,G=this.scheduler;return null!=he&&(this.id=this.recycleAsyncId(G,he,ae)),this.pending=!0,this.delay=ae,this.id=this.id||this.requestAsyncId(G,this.id,ae),this}requestAsyncId(ce,ae,he=0){return F.setInterval(ce.flush.bind(ce,this),he)}recycleAsyncId(ce,ae,he=0){if(null!=he&&this.delay===he&&!1===this.pending)return ae;F.clearInterval(ae)}execute(ce,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const he=this._execute(ce,ae);if(he)return he;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,ae){let G,he=!1;try{this.work(ce)}catch(H){he=!0,G=H||new Error("Scheduled action threw falsy error")}if(he)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:ce,scheduler:ae}=this,{actions:he}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,le.P)(he,this),null!=ce&&(this.id=this.recycleAsyncId(ae,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(Je,we,O)=>{O.d(we,{v:()=>F});var m=O(6063);class ee{constructor(re,ge=ee.now){this.schedulerActionCtor=re,this.now=ge}schedule(re,ge=0,ce){return new this.schedulerActionCtor(this,re).schedule(ce,ge)}}ee.now=m.l.now;class F extends ee{constructor(re,ge=ee.now){super(re,ge),this.actions=[],this._active=!1,this._scheduled=void 0}flush(re){const{actions:ge}=this;if(this._active)return void ge.push(re);let ce;this._active=!0;do{if(ce=re.execute(re.state,re.delay))break}while(re=ge.shift());if(this._active=!1,ce){for(;re=ge.shift();)re.unsubscribe();throw ce}}}},4986:(Je,we,O)=>{O.d(we,{z:()=>F});var m=O(4408);const F=new(O(7565).v)(m.o)},6063:(Je,we,O)=>{O.d(we,{l:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},3410:(Je,we,O)=>{O.d(we,{z:()=>m});const m={setTimeout(ee,F,...le){const{delegate:re}=m;return(null==re?void 0:re.setTimeout)?re.setTimeout(ee,F,...le):setTimeout(ee,F,...le)},clearTimeout(ee){const{delegate:F}=m;return((null==F?void 0:F.clearTimeout)||clearTimeout)(ee)},delegate:void 0}},2202:(Je,we,O)=>{O.d(we,{h:()=>ee});const ee=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Je,we,O)=>{O.d(we,{L:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Je,we,O)=>{O.d(we,{_6:()=>ge,jO:()=>le,yG:()=>re});var m=O(576);function F(ce){return ce[ce.length-1]}function le(ce){return(0,m.m)(F(ce))?ce.pop():void 0}function re(ce){return function ee(ce){return ce&&(0,m.m)(ce.schedule)}(F(ce))?ce.pop():void 0}function ge(ce,ae){return"number"==typeof F(ce)?ce.pop():ae}},8737:(Je,we,O)=>{function m(ee,F){if(ee){const le=ee.indexOf(F);0<=le&&ee.splice(le,1)}}O.d(we,{P:()=>m})},3888:(Je,we,O)=>{function m(ee){const le=ee(re=>{Error.call(re),re.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}O.d(we,{d:()=>m})},2806:(Je,we,O)=>{O.d(we,{O:()=>le,x:()=>F});var m=O(2416);let ee=null;function F(re){if(m.v.useDeprecatedSynchronousErrorHandling){const ge=!ee;if(ge&&(ee={errorThrown:!1,error:null}),re(),ge){const{errorThrown:ce,error:ae}=ee;if(ee=null,ce)throw ae}}else re()}function le(re){m.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=re)}},9672:(Je,we,O)=>{function m(ee,F,le,re=0,ge=!1){const ce=F.schedule(function(){le(),ge?ee.add(this.schedule(null,re)):this.unsubscribe()},re);if(ee.add(ce),!ge)return ce}O.d(we,{f:()=>m})},4671:(Je,we,O)=>{function m(ee){return ee}O.d(we,{y:()=>m})},1144:(Je,we,O)=>{O.d(we,{z:()=>m});const m=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Je,we,O)=>{O.d(we,{D:()=>ee});var m=O(576);function ee(F){return Symbol.asyncIterator&&(0,m.m)(null==F?void 0:F[Symbol.asyncIterator])}},576:(Je,we,O)=>{function m(ee){return"function"==typeof ee}O.d(we,{m:()=>m})},3670:(Je,we,O)=>{O.d(we,{c:()=>F});var m=O(8822),ee=O(576);function F(le){return(0,ee.m)(le[m.L])}},6495:(Je,we,O)=>{O.d(we,{T:()=>F});var m=O(2202),ee=O(576);function F(le){return(0,ee.m)(null==le?void 0:le[m.h])}},8239:(Je,we,O)=>{O.d(we,{t:()=>ee});var m=O(576);function ee(F){return(0,m.m)(null==F?void 0:F.then)}},3260:(Je,we,O)=>{O.d(we,{L:()=>le,Q:()=>F});var m=O(655),ee=O(576);function F(re){return(0,m.FC)(this,arguments,function*(){const ce=re.getReader();try{for(;;){const{value:ae,done:he}=yield(0,m.qq)(ce.read());if(he)return yield(0,m.qq)(void 0);yield yield(0,m.qq)(ae)}}finally{ce.releaseLock()}})}function le(re){return(0,ee.m)(null==re?void 0:re.getReader)}},4482:(Je,we,O)=>{O.d(we,{A:()=>ee,e:()=>F});var m=O(576);function ee(le){return(0,m.m)(null==le?void 0:le.lift)}function F(le){return re=>{if(ee(re))return re.lift(function(ge){try{return le(ge,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Je,we,O)=>{function m(){}O.d(we,{Z:()=>m})},7849:(Je,we,O)=>{O.d(we,{h:()=>F});var m=O(2416),ee=O(3410);function F(le){ee.z.setTimeout(()=>{const{onUnhandledError:re}=m.v;if(!re)throw le;re(le)})}},4532:(Je,we,O)=>{function m(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(we,{z:()=>m})},655:(Je,we,O)=>{function le(Y,ie){var te={};for(var me in Y)Object.prototype.hasOwnProperty.call(Y,me)&&ie.indexOf(me)<0&&(te[me]=Y[me]);if(null!=Y&&"function"==typeof Object.getOwnPropertySymbols){var ue=0;for(me=Object.getOwnPropertySymbols(Y);ue<me.length;ue++)ie.indexOf(me[ue])<0&&Object.prototype.propertyIsEnumerable.call(Y,me[ue])&&(te[me[ue]]=Y[me[ue]])}return te}function ae(Y,ie,te,me){return new(te||(te=Promise))(function(Oe,at){function Ht(rn){try{Qe(me.next(rn))}catch(kn){at(kn)}}function Ft(rn){try{Qe(me.throw(rn))}catch(kn){at(kn)}}function Qe(rn){rn.done?Oe(rn.value):function ue(Oe){return Oe instanceof te?Oe:new te(function(at){at(Oe)})}(rn.value).then(Ht,Ft)}Qe((me=me.apply(Y,ie||[])).next())})}function pe(Y){return this instanceof pe?(this.v=Y,this):new pe(Y)}function be(Y,ie,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ue,me=te.apply(Y,ie||[]),Oe=[];return ue={},at("next"),at("throw"),at("return"),ue[Symbol.asyncIterator]=function(){return this},ue;function at(sn){me[sn]&&(ue[sn]=function(Qt){return new Promise(function(Pr,qt){Oe.push([sn,Qt,Pr,qt])>1||Ht(sn,Qt)})})}function Ht(sn,Qt){try{!function Ft(sn){sn.value instanceof pe?Promise.resolve(sn.value.v).then(Qe,rn):kn(Oe[0][2],sn)}(me[sn](Qt))}catch(Pr){kn(Oe[0][3],Pr)}}function Qe(sn){Ht("next",sn)}function rn(sn){Ht("throw",sn)}function kn(sn,Qt){sn(Qt),Oe.shift(),Oe.length&&Ht(Oe[0][0],Oe[0][1])}}function Ye(Y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var te,ie=Y[Symbol.asyncIterator];return ie?ie.call(Y):(Y=function ne(Y){var ie="function"==typeof Symbol&&Symbol.iterator,te=ie&&Y[ie],me=0;if(te)return te.call(Y);if(Y&&"number"==typeof Y.length)return{next:function(){return Y&&me>=Y.length&&(Y=void 0),{value:Y&&Y[me++],done:!Y}}};throw new TypeError(ie?"Object is not iterable.":"Symbol.iterator is not defined.")}(Y),te={},me("next"),me("throw"),me("return"),te[Symbol.asyncIterator]=function(){return this},te);function me(Oe){te[Oe]=Y[Oe]&&function(at){return new Promise(function(Ht,Ft){!function ue(Oe,at,Ht,Ft){Promise.resolve(Ft).then(function(Qe){Oe({value:Qe,done:Ht})},at)}(Ht,Ft,(at=Y[Oe](at)).done,at.value)})}}}O.d(we,{FC:()=>be,KL:()=>Ye,_T:()=>le,mG:()=>ae,qq:()=>pe})},5e3:(Je,we,O)=>{O.d(we,{$8M:()=>Xa,$Z:()=>tw,AFp:()=>bb,AaK:()=>ae,CHM:()=>Bu,CRH:()=>ji,CZH:()=>o0,CqO:()=>YC,EJc:()=>l0,EpF:()=>rw,F4k:()=>ZC,FYo:()=>WI,FiY:()=>si,G48:()=>w0,GfV:()=>qI,Gpc:()=>H,JOm:()=>A,LFG:()=>He,LSH:()=>Df,Lbi:()=>Tb,MAs:()=>Sm,NdJ:()=>dp,OlP:()=>In,Oqu:()=>yh,PXZ:()=>wA,Q6J:()=>ch,QGY:()=>ml,Qsj:()=>zS,R0b:()=>Hi,RDi:()=>Bl,Rgc:()=>Nh,SBq:()=>Dh,Sil:()=>Rb,Suo:()=>zw,TTD:()=>Xi,TgZ:()=>va,VLi:()=>D_,X6Q:()=>CA,XFs:()=>mt,Xpm:()=>ct,Y36:()=>Nc,YKP:()=>YI,YNc:()=>$v,Yjl:()=>Pa,Yz7:()=>Qt,ZZ4:()=>x0,_Bn:()=>xw,_UZ:()=>Fm,_Vd:()=>r_,_c5:()=>M0,_uU:()=>_u,aQg:()=>qp,c2e:()=>w_,cJS:()=>qt,cg1:()=>wh,dDg:()=>b_,deG:()=>_e,dqk:()=>Vt,eFA:()=>kb,ekj:()=>Vm,g9A:()=>v_,h0i:()=>Ah,hGG:()=>TA,hij:()=>Ea,iGM:()=>Pp,ifc:()=>$t,ip1:()=>Ib,kL8:()=>hw,lG2:()=>Pu,n5z:()=>Ql,oAB:()=>Or,oxw:()=>XC,q4F:()=>zI,qLn:()=>Wd,qOj:()=>bc,qZA:()=>cp,sBO:()=>E0,sIi:()=>sp,s_b:()=>Np,soG:()=>Vh,tBr:()=>vi,tb:()=>u0,tp0:()=>$r,uIk:()=>Vv,vHH:()=>ke,vpe:()=>Ti,wAp:()=>Ct,xp6:()=>jy,z2F:()=>_0,zSh:()=>Cv,zs3:()=>ga});var m=O(7579),ee=O(727),F=O(8306),le=O(6451),re=O(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function ce(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function ae(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ae).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function he(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return ae(this())},s}function ne(s){return We(s)?s():s}function We(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}class ke extends Error{constructor(o,u){super(function Ue(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function pe(s){return"string"==typeof s?s:null==s?"":String(s)}function be(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():pe(s)}function Ce(s,o){const u=o?` in ${o}`:"";throw new ke(-201,`No provider for ${be(s)} found${u}`)}function Ft(s,o){null==s&&function Qe(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Qt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function qt(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return qi(s,zi)||qi(s,Jr)}function qi(s,o){return s.hasOwnProperty(o)?s[o]:null}function kr(s){return s&&(s.hasOwnProperty(Ms)||s.hasOwnProperty(Ri))?s[Ms]:null}const zi=ge({\u0275prov:ge}),Ms=ge({\u0275inj:ge}),Jr=ge({ngInjectableDef:ge}),Ri=ge({ngInjectorDef:ge});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let di;function On(s){const o=di;return di=s,o}function Ns(s,o,u){const c=Lt(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&mt.Optional?null:void 0!==o?o:void Ce(ae(s),"Injector")}function nr(s){return{toString:s}.toString()}var Fn=(()=>((Fn=Fn||{})[Fn.OnPush=0]="OnPush",Fn[Fn.Default=1]="Default",Fn))(),$t=(()=>{return(s=$t||($t={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",$t;var s})();const rt="undefined"!=typeof globalThis&&globalThis,yt="undefined"!=typeof window&&window,wr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Vt=rt||"undefined"!=typeof global&&global||yt||wr,Cr={},B=[],q=ge({\u0275cmp:ge}),K=ge({\u0275dir:ge}),De=ge({\u0275pipe:ge}),W=ge({\u0275mod:ge}),X=ge({\u0275fac:ge}),Re=ge({__NG_ELEMENT_ID__:ge});let Xe=0;function ct(s){return nr(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Fn.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||B,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||$t.Emulated,id:"c",styles:s.styles||B,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,p=s.features,v=s.pipes;return c.id+=Xe++,c.inputs=Na(s.inputs,u),c.outputs=Na(s.outputs),p&&p.forEach(C=>C(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(pn):null,c.pipeDefs=v?()=>("function"==typeof v?v():v).map(It):null,c})}function pn(s){return zn(s)||function Fr(s){return s[K]||null}(s)}function It(s){return function fs(s){return s[De]||null}(s)}const qn={};function Or(s){return nr(()=>{const o={type:s.type,bootstrap:s.bootstrap||B,declarations:s.declarations||B,imports:s.imports||B,exports:s.exports||B,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(qn[s.id]=s.type),o})}function Na(s,o){if(null==s)return Cr;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),u[d]=c,o&&(o[d]=p)}return u}const Pu=ct;function Pa(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function zn(s){return s[q]||null}function Kn(s,o){const u=s[W]||null;if(!u&&!0===o)throw new Error(`Type ${ae(s)} does not have '\u0275mod' property.`);return u}function ri(s){return Array.isArray(s)&&"object"==typeof s[1]}function Yi(s){return Array.isArray(s)&&!0===s[1]}function Fu(s){return 0!=(8&s.flags)}function ud(s){return 2==(2&s.flags)}function Qi(s){return 1==(1&s.flags)}function Ji(s){return null!==s.template}function Fl(s){return 0!=(512&s[2])}function Dr(s,o){return s.hasOwnProperty(X)?s[X]:null}class co{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Xi(){return jo}function jo(s){return s.type.prototype.ngOnChanges&&(s.setInput=ff),md}function md(){const s=ho(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===Cr)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function ff(s,o,u,c){const d=ho(s)||function Ho(s,o){return s[_d]=o}(s,{previous:Cr,current:null}),p=d.current||(d.current={}),v=d.previous,C=this.declaredInputs[u],I=v[C];p[C]=new co(I&&I.currentValue,o,v===Cr),s[c]=o}Xi.ngInherit=!0;const _d="__ngSimpleChanges__";function ho(s){return s[_d]||null}let Go;function Bl(s){Go=s}function un(s){return!!s.listen}const Va={createRenderer:(s,o)=>function es(){return void 0!==Go?Go:"undefined"!=typeof document?document:void 0}()};function tn(s){for(;Array.isArray(s);)s=s[0];return s}function Vs(s,o){return tn(o[s])}function hr(s,o){return tn(o[s.index])}function En(s,o){return s.data[o]}function fr(s,o){const u=o[s];return ri(u)?u:u[0]}function po(s){return 4==(4&s[2])}function ms(s){return 128==(128&s[2])}function Ni(s,o){return null==o?null:s[o]}function ns(s){s[18]=0}function Wo(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const dt={lFrame:wd(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ha(){return dt.bindingsEnabled}function Se(){return dt.lFrame.lView}function kt(){return dt.lFrame.tView}function Bu(s){return dt.lFrame.contextLView=s,s[8]}function _n(){let s=zo();for(;null!==s&&64===s.type;)s=s.parent;return s}function zo(){return dt.lFrame.currentTNode}function gi(s,o){const u=dt.lFrame;u.currentTNode=s,u.isParent=o}function $a(){return dt.lFrame.isParent}function Ga(){return dt.isInCheckNoChangesMode}function Hu(s){dt.isInCheckNoChangesMode=s}function Us(){return dt.lFrame.bindingIndex++}function zl(s,o){const u=dt.lFrame;u.bindingIndex=u.bindingRootIndex=s,qa(o)}function qa(s){dt.lFrame.currentDirectiveIndex=s}function Kl(){return dt.lFrame.currentQueryIndex}function Ka(s){dt.lFrame.currentQueryIndex=s}function Ag(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Zl(s,o,u){if(u&mt.SkipSelf){let d=o,p=s;for(;!(d=d.parent,null!==d||u&mt.Host||(d=Ag(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;o=d,s=p}const c=dt.lFrame=Za();return c.currentTNode=o,c.lView=s,!0}function Ko(s){const o=Za(),u=s[1];dt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Za(){const s=dt.lFrame,o=null===s?null:s.child;return null===o?wd(s):o}function wd(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Zo(){const s=dt.lFrame;return dt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Ed=Zo;function Yo(){const s=Zo();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ir(){return dt.lFrame.selectedIndex}function is(s){dt.lFrame.selectedIndex=s}function Sn(){const s=dt.lFrame;return En(s.tView,s.selectedIndex)}function Id(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const p=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:x,ngOnDestroy:R}=p;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),I&&(s.viewHooks||(s.viewHooks=[])).push(-u,I),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=R&&(s.destroyHooks||(s.destroyHooks=[])).push(u,R)}}function Ya(s,o,u){sr(s,o,3,u)}function ys(s,o,u,c){(3&s[2])===u&&sr(s,o,u,c)}function Qo(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function sr(s,o,u,c){const p=null!=c?c:-1,v=o.length-1;let C=0;for(let I=void 0!==c?65535&s[18]:0;I<v;I++)if("number"==typeof o[I+1]){if(C=o[I],null!=c&&C>=c)break}else o[I]<0&&(s[18]+=65536),(C<p||-1==p)&&(_f(s,u,o,I),s[18]=(4294901760&s[18])+I+2),I++}function _f(s,o,u,c){const d=u[c]<0,p=u[c+1],C=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{p.call(C)}finally{}}}else try{p.call(C)}finally{}}class Wu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function An(s,o,u){const c=un(s);let d=0;for(;d<u.length;){const p=u[d];if("number"==typeof p){if(0!==p)break;d++;const v=u[d++],C=u[d++],I=u[d++];c?s.setAttribute(o,C,I,v):o.setAttributeNS(v,C,I)}else{const v=p,C=u[++d];ft(v)?c&&s.setProperty(o,v,C):c?s.setAttribute(o,v,C):o.setAttribute(v,C),d++}}return d}function Jt(s){return 3===s||4===s||6===s}function ft(s){return 64===s.charCodeAt(0)}function xn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||Qa(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function Qa(s,o,u,c,d){let p=0,v=s.length;if(-1===o)v=-1;else for(;p<s.length;){const C=s[p++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=p-1;break}}}for(;p<s.length;){const C=s[p];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==d&&(s[p+1]=d));if(c===s[p+1])return void(s[p+2]=d)}p++,null!==c&&p++,null!==d&&p++}-1!==v&&(s.splice(v,0,o),p=v+1),s.splice(p++,0,u),null!==c&&s.splice(p++,0,c),null!==d&&s.splice(p++,0,d)}function Ja(s){return-1!==s}function Ur(s){return 32767&s}function xt(s,o){let u=function Yn(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Cn=!0;function pt(s){const o=Cn;return Cn=s,o}let Sd=0;function ss(s,o){const u=Bs(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Br(c.data,s),Br(o,null),Br(c.blueprint,null));const d=vs(s,o),p=s.injectorIndex;if(Ja(d)){const v=Ur(d),C=xt(d,o),I=C[1].data;for(let x=0;x<8;x++)o[p+x]=C[v+x]|I[v+x]}return o[p+8]=d,p}function Br(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Bs(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function vs(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const p=d[1],v=p.type;if(c=2===v?p.declTNode:1===v?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function pr(s,o,u){!function Ad(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Re)&&(c=u[Re]),null==c&&(c=u[Re]=Sd++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function os(s,o,u){if(u&mt.Optional)return s;Ce(o,"NodeInjector")}function mi(s,o,u,c){if(u&mt.Optional&&void 0===c&&(c=null),0==(u&(mt.Self|mt.Host))){const d=s[9],p=On(void 0);try{return d?d.get(o,c,u&mt.Optional):Ns(o,c,u&mt.Optional)}finally{On(p)}}return os(c,o,u)}function vo(s,o,u,c=mt.Default,d){if(null!==s){const p=function Mg(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Re)?s[Re]:void 0;return"number"==typeof o?o>=0?255&o:ws:o}(u);if("function"==typeof p){if(!Zl(o,s,c))return c&mt.Host?os(d,u,c):mi(o,u,c,d);try{const v=p(c);if(null!=v||c&mt.Optional)return v;Ce(u)}finally{Ed()}}else if("number"==typeof p){let v=null,C=Bs(s,o),I=-1,x=c&mt.Host?o[16][6]:null;for((-1===C||c&mt.SkipSelf)&&(I=-1===C?vs(s,o):o[C+8],-1!==I&&Qu(c,!1)?(v=o[1],C=Ur(I),o=xt(I,o)):C=-1);-1!==C;){const R=o[1];if(Jo(p,C,R.data)){const L=Ut(C,o,u,v,c,x);if(L!==Zu)return L}I=o[C+8],-1!==I&&Qu(c,o[1].data[C+8]===x)&&Jo(p,C,o)?(v=R,C=Ur(I),o=xt(I,o)):C=-1}}}return mi(o,u,c,d)}const Zu={};function ws(){return new Hs(_n(),Se())}function Ut(s,o,u,c,d,p){const v=o[1],C=v.data[s+8],R=Yu(C,v,u,null==c?ud(C)&&Cn:c!=v&&0!=(3&C.type),d&mt.Host&&p===C);return null!==R?js(o,v,R,C):Zu}function Yu(s,o,u,c,d){const p=s.providerIndexes,v=o.data,C=1048575&p,I=s.directiveStart,R=p>>20,j=d?C+R:s.directiveEnd;for(let J=c?C:C+R;J<j;J++){const ve=v[J];if(J<I&&u===ve||J>=I&&ve.type===u)return J}if(d){const J=v[I];if(J&&Ji(J)&&J.type===u)return I}return null}function js(s,o,u,c){let d=s[u];const p=o.data;if(function bd(s){return s instanceof Wu}(d)){const v=d;v.resolving&&function qe(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new ke(-200,`Circular dependency in DI detected for ${s}${u}`)}(be(p[u]));const C=pt(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?On(v.injectImpl):null;Zl(s,c,mt.Default);try{d=s[u]=v.factory(void 0,p,s,c),o.firstCreatePass&&u>=c.directiveStart&&function xg(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:p}=o.type.prototype;if(c){const v=jo(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),p&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,p),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,p))}(u,p[u],o)}finally{null!==I&&On(I),pt(C),v.resolving=!1,Ed()}}return d}function Jo(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Qu(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Hs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return vo(this._tNode,this._lView,o,c,u)}}function Ql(s){return nr(()=>{const o=s.prototype.constructor,u=o[X]||Ju(o),c=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==c;){const p=d[X]||Ju(d);if(p&&p!==u)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Ju(s){return We(s)?()=>{const o=Ju(ne(s));return o&&o()}:Dr(s)}function Xa(s){return function xd(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const p=u[d];if(Jt(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(p===o)return u[d+1];d+=2}}}return null}(_n(),s)}const $s="__parameters__";function tu(s,o,u){return nr(()=>{const c=function Xu(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...p){if(this instanceof d)return c.apply(this,p),this;const v=new d(...p);return C.annotation=v,C;function C(I,x,R){const L=I.hasOwnProperty($s)?I[$s]:Object.defineProperty(I,$s,{value:[]})[$s];for(;L.length<=R;)L.push(null);return(L[R]=L[R]||[]).push(v),I}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class In{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Qt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const _e=new In("AnalyzeForEntryComponents");function _i(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),_i(c,o)):o!==s&&o.push(c)}return o}function jr(s,o){s.forEach(u=>Array.isArray(u)?jr(u,o):o(u))}function ru(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function ea(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function Tr(s,o,u){let c=Gs(s,o);return c>=0?s[1|c]=u:(c=~c,function yi(s,o,u,c){let d=s.length;if(d==o)s.push(u,c);else if(1===d)s.push(c,s[0]),s[0]=u;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function ra(s,o){const u=Gs(s,o);if(u>=0)return s[1|u]}function Gs(s,o){return function Nd(s,o,u){let c=0,d=s.length>>u;for(;d!==c;){const p=c+(d-c>>1),v=s[p<<u];if(o===v)return p<<u;v>o?d=p:c=p+1}return~(d<<u)}(s,o,1)}const ia={},ou="__NG_DI_FLAG__",Io="ngTempTokenPath",b=/\n/gm,M="__source",V=ge({provide:String,useValue:ge});let Q;function se(s){const o=Q;return Q=s,o}function Pe(s,o=mt.Default){if(void 0===Q)throw new ke(203,"");return null===Q?Ns(s,void 0,o):Q.get(s,o&mt.Optional?null:void 0,o)}function He(s,o=mt.Default){return(function Tn(){return di}()||Pe)(ne(s),o)}const wt=He;function Bt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new ke(900,"");let d,p=mt.Default;for(let v=0;v<c.length;v++){const C=c[v],I=Hr(C);"number"==typeof I?-1===I?d=C.token:p|=I:d=C}o.push(He(d,p))}else o.push(He(c))}return o}function Et(s,o){return s[ou]=o,s.prototype[ou]=o,s}function Hr(s){return s[ou]}const vi=Et(tu("Inject",s=>({token:s})),-1),si=Et(tu("Optional"),8),$r=Et(tu("SkipSelf"),4);class fy{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function aa(s){return s instanceof fy?s.changingThisBreaksApplicationSecurity:s}const UE=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,MT=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Mn=(()=>((Mn=Mn||{})[Mn.NONE=0]="NONE",Mn[Mn.HTML=1]="HTML",Mn[Mn.STYLE=2]="STYLE",Mn[Mn.SCRIPT=3]="SCRIPT",Mn[Mn.URL=4]="URL",Mn[Mn.RESOURCE_URL=5]="RESOURCE_URL",Mn))();function Df(s){const o=function hc(){const s=Se();return s&&s[12]}();return o?o.sanitize(Mn.URL,s)||"":function ua(s,o){const u=function Cf(s){return s instanceof fy&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?aa(s):function bo(s){return(s=String(s)).match(UE)||s.match(MT)?s:"unsafe:"+s}(pe(s))}const uu="__ngContext__";function Un(s,o){s[uu]=o}function Gd(s){const o=function Bn(s){return s[uu]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function zs(s){return s.ngOriginalError}function Ty(s,...o){s.error(...o)}class Wd{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function mc(s){return s&&s.ngErrorLogger||Ty}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&zs(o);for(;u&&zs(u);)u=zs(u);return u||null}}const Xg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Vt))();function Ks(s){return s instanceof Function?s():s}var A=(()=>((A=A||{})[A.Important=1]="Important",A[A.DashCase=2]="DashCase",A))();function Z(s,o){return undefined(s,o)}function Ke(s){const o=s[3];return Yi(o)?o[3]:o}function Gn(s){return _c(s[13])}function Ei(s){return _c(s[4])}function _c(s){for(;null!==s&&!Yi(s);)s=s[4];return s}function So(s,o,u,c,d){if(null!=c){let p,v=!1;Yi(c)?p=c:ri(c)&&(v=!0,c=c[0]);const C=tn(c);0===s&&null!==u?null==d?Lf(o,u,C):dl(o,u,C,d||null,!0):1===s&&null!==u?dl(o,u,C,d||null,!0):2===s?function Zs(s,o,u){const c=im(s,o);c&&function kT(s,o,u,c){un(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=p&&function ZE(s,o,u,c,d){const p=u[7];p!==tn(u)&&So(o,s,c,p,d);for(let C=10;C<u.length;C++){const I=u[C];Bf(I[1],I,s,o,c,p)}}(o,s,p,u,d)}}function Li(s,o,u){if(un(s))return s.createElement(o,u);{const c=null!==u?function Ul(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function xy(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,Wo(d,-1)),u.splice(c,1)}function Ry(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&xy(d,c),o>0&&(s[u-1][4]=c[4]);const p=ea(s,10+o);!function bs(s,o){Bf(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=p[19];null!==v&&v.detachView(p[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function My(s,o){if(!(256&o[2])){const u=o[11];un(u)&&u.destroyNode&&Bf(s,o,u,3,null,null),function Ay(s){let o=s[13];if(!o)return Ny(s[1],s);for(;o;){let u=null;if(ri(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)ri(o)&&Ny(o[1],o),o=o[3];null===o&&(o=s),ri(o)&&Ny(o[1],o),u=o&&o[4]}o=u}}(o)}}function Ny(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function PT(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Wu)){const p=u[c+1];if(Array.isArray(p))for(let v=0;v<p.length;v+=2){const C=d[p[v]],I=p[v+1];try{I.call(C)}finally{}}else try{p.call(d)}finally{}}}}(s,o),function NT(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let p=0;p<u.length-1;p+=2)if("string"==typeof u[p]){const v=u[p+1],C="function"==typeof v?v(o):tn(o[v]),I=c[d=u[p+2]],x=u[p+3];"boolean"==typeof x?C.removeEventListener(u[p],I,x):x>=0?c[d=x]():c[d=-x].unsubscribe(),p+=2}else{const v=c[d=u[p+1]];u[p].call(v)}if(null!==c){for(let p=d+1;p<c.length;p++)c[p]();o[7]=null}}(s,o),1===o[1].type&&un(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&Yi(o[3])){u!==o[3]&&xy(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function HE(s,o,u){return function Py(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===$t.None||d===$t.Emulated)return null}return hr(c,u)}(s,o.parent,u)}function dl(s,o,u,c,d){un(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Lf(s,o,u){un(s)?s.appendChild(o,u):o.appendChild(u)}function rm(s,o,u,c,d){null!==c?dl(s,o,u,c,d):Lf(s,o,u)}function im(s,o){return un(s)?s.parentNode(o):o.parentNode}let Ci=function WE(s,o,u){return 40&s.type?hr(s,u):null};function lu(s,o,u,c){const d=HE(s,c,o),p=o[11],C=function GE(s,o,u){return Ci(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let I=0;I<u.length;I++)rm(p,d,u[I],C,!1);else rm(p,d,u,C,!1)}function Uf(s,o){if(null!==o){const u=o.type;if(3&u)return hr(o,s);if(4&u)return ky(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Uf(s,c);{const d=s[o.index];return Yi(d)?ky(-1,d):tn(d)}}if(32&u)return Z(o,s)()||tn(s[o.index]);{const c=zE(s,o);return null!==c?Array.isArray(c)?c[0]:Uf(Ke(s[16]),c):Uf(s,o.next)}}return null}function zE(s,o){return null!==o?s[16][6].projection[o.projection]:null}function ky(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Uf(c,d)}return o[7]}function Oy(s,o,u,c,d,p,v){for(;null!=u;){const C=c[u.index],I=u.type;if(v&&0===o&&(C&&Un(tn(C),c),u.flags|=4),64!=(64&u.flags))if(8&I)Oy(s,o,u.child,c,d,p,!1),So(o,s,d,C,p);else if(32&I){const x=Z(u,c);let R;for(;R=x();)So(o,s,d,R,p);So(o,s,d,C,p)}else 16&I?KE(s,o,c,u,d,p):So(o,s,d,C,p);u=v?u.projectionNext:u.next}}function Bf(s,o,u,c,d,p){Oy(u,c,s.firstChild,o,d,p,!1)}function KE(s,o,u,c,d,p){const v=u[16],I=v[6].projection[c.projection];if(Array.isArray(I))for(let x=0;x<I.length;x++)So(o,s,d,I[x],p);else Oy(s,o,I,v[3],d,p,!0)}function YE(s,o,u){un(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Fy(s,o,u){un(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function Ly(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const p=o.length;if(d+p===c||s.charCodeAt(d+p)<=32)return d}u=d+1}}const QE="ng-template";function FT(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==Ly(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function Vy(s){return 4===s.type&&s.value!==QE}function Uy(s,o,u){return o===(4!==s.type||u?s.value:QE)}function JE(s,o,u){let c=4;const d=s.attrs||[],p=function eC(s){for(let o=0;o<s.length;o++)if(Jt(s[o]))return o;return s.length}(d);let v=!1;for(let C=0;C<o.length;C++){const I=o[C];if("number"!=typeof I){if(!v)if(4&c){if(c=2|1&c,""!==I&&!Uy(s,I,u)||""===I&&1===o.length){if(Ao(c))return!1;v=!0}}else{const x=8&c?I:o[++C];if(8&c&&null!==s.attrs){if(!FT(s.attrs,x,u)){if(Ao(c))return!1;v=!0}continue}const L=LT(8&c?"class":I,d,Vy(s),u);if(-1===L){if(Ao(c))return!1;v=!0;continue}if(""!==x){let j;j=L>p?"":d[L+1].toLowerCase();const J=8&c?j:null;if(J&&-1!==Ly(J,x,0)||2&c&&x!==j){if(Ao(c))return!1;v=!0}}}}else{if(!v&&!Ao(c)&&!Ao(I))return!1;if(v&&Ao(I))continue;v=!1,c=I|1&c}}return Ao(c)||v}function Ao(s){return 0==(1&s)}function LT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let p=!1;for(;d<o.length;){const v=o[d];if(v===s)return d;if(3===v||6===v)p=!0;else{if(1===v||2===v){let C=o[++d];for(;"string"==typeof C;)C=o[++d];continue}if(4===v)break;if(0===v){d+=4;continue}}d+=p?1:2}return-1}return function UT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function XE(s,o,u=!1){for(let c=0;c<o.length;c++)if(JE(s,o[c],u))return!0;return!1}function By(s,o){return s?":not("+o.trim()+")":o}function jT(s){let o=s[0],u=1,c=2,d="",p=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];d+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?d+="."+v:4&c&&(d+=" "+v);else""!==d&&!Ao(v)&&(o+=By(p,d),d=""),c=v,p=p||!Ao(c);u++}return""!==d&&(o+=By(p,d)),o}const At={};function jy(s){Hy(kt(),Se(),ir()+s,Ga())}function Hy(s,o,u,c){if(!c)if(3==(3&o[2])){const p=s.preOrderCheckHooks;null!==p&&Ya(o,p,u)}else{const p=s.preOrderHooks;null!==p&&ys(o,p,0,u)}is(u)}function Gy(s,o){return s<<17|o<<2}function da(s){return s>>17&32767}function Wy(s){return 2|s}function cu(s){return(131068&s)>>2}function qy(s,o){return-131069&s|o<<2}function zy(s){return 1|s}function am(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],p=u[c+1];if(-1!==p){const v=s.data[p];Ka(d),v.contentQueries(2,o[p],p)}}}function Ec(s,o,u,c,d,p,v,C,I,x){const R=o.blueprint.slice();return R[0]=d,R[2]=140|c,ns(R),R[3]=R[15]=s,R[8]=u,R[10]=v||s&&s[10],R[11]=C||s&&s[11],R[12]=I||s&&s[12]||null,R[9]=x||s&&s[9]||null,R[6]=p,R[16]=2==o.type?s[16]:R,R}function ha(s,o,u,c,d){let p=s.data[o];if(null===p)p=function nv(s,o,u,c,d){const p=zo(),v=$a(),I=s.data[o]=function dm(s,o,u,c,d,p){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?p:p&&p.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=I),null!==p&&(v?null==p.child&&null!==I.parent&&(p.child=I):null===p.next&&(p.next=I)),I}(s,o,u,c,d),function ql(){return dt.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=u,p.value=c,p.attrs=d;const v=function go(){const s=dt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();p.injectorIndex=null===v?-1:v.injectorIndex}return gi(p,!0),p}function fl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let p=0;p<u;p++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function $f(s,o,u){Ko(o);try{const c=s.viewQuery;null!==c&&mm(1,c,u);const d=s.template;null!==d&&Gr(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&am(s,o),s.staticViewQueries&&mm(2,s.viewQuery,u);const p=s.components;null!==p&&function um(s,o){for(let u=0;u<o.length;u++)iS(s,o[u])}(o,p)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Yo()}}function Kd(s,o,u,c){const d=o[2];if(256==(256&d))return;Ko(o);const p=Ga();try{ns(o),function Wa(s){return dt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&Gr(s,o,u,2,c);const v=3==(3&d);if(!p)if(v){const x=s.preOrderCheckHooks;null!==x&&Ya(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ys(o,x,0,null),Qo(o,0)}if(function rS(s){for(let o=Gn(s);null!==o;o=Ei(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],p=d[3];0==(1024&d[2])&&Wo(p,1),d[2]|=1024}}}(o),function qf(s){for(let o=Gn(s);null!==o;o=Ei(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];ms(c)&&Kd(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&am(s,o),!p)if(v){const x=s.contentCheckHooks;null!==x&&Ya(o,x)}else{const x=s.contentHooks;null!==x&&ys(o,x,1),Qo(o,1)}!function tt(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)is(~d);else{const p=d,v=u[++c],C=u[++c];zl(v,p),C(2,o[p])}}}finally{is(-1)}}(s,o);const C=s.components;null!==C&&function Rt(s,o){for(let u=0;u<o.length;u++)zf(s,o[u])}(o,C);const I=s.viewQuery;if(null!==I&&mm(2,I,c),!p)if(v){const x=s.viewCheckHooks;null!==x&&Ya(o,x)}else{const x=s.viewHooks;null!==x&&ys(o,x,2),Qo(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),p||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,Wo(o[3],-1))}finally{Yo()}}function QT(s,o,u,c){const d=o[10],p=!Ga(),v=po(o);try{p&&!v&&d.begin&&d.begin(),v&&$f(s,o,c),Kd(s,o,u,c)}finally{p&&!v&&d.end&&d.end()}}function Gr(s,o,u,c,d){const p=ir(),v=2&c;try{is(-1),v&&o.length>20&&Hy(s,o,20,Ga()),u(c,d)}finally{is(p)}}function Ar(s,o,u){!Ha()||(function _C(s,o,u,c){const d=u.directiveStart,p=u.directiveEnd;s.firstCreatePass||ss(u,o),Un(c,o);const v=u.initialInputs;for(let C=d;C<p;C++){const I=s.data[C],x=Ji(I);x&&tS(o,u,I);const R=js(o,s,C,u);Un(R,o),null!==v&&yC(0,C-d,R,I,0,v),x&&(fr(u.index,o)[8]=R)}}(s,o,u,hr(u,o)),128==(128&u.flags)&&function cv(s,o,u){const c=u.directiveStart,d=u.directiveEnd,v=u.index,C=function Gu(){return dt.lFrame.currentDirectiveIndex}();try{is(v);for(let I=c;I<d;I++){const x=s.data[I],R=o[I];qa(I),(null!==x.hostBindings||0!==x.hostVars||null!==x.hostAttrs)&&dv(x,R)}}finally{is(-1),qa(C)}}(s,o,u))}function fa(s,o,u=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let p=0;p<c.length;p+=2){const v=c[p+1],C=-1===v?u(o,s):s[v];s[d++]=C}}}function dC(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=lm(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function lm(s,o,u,c,d,p,v,C,I,x){const R=20+c,L=R+d,j=function hC(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:At);return u}(R,L),J="function"==typeof x?x():x;return j[1]={type:s,blueprint:j,template:u,queries:null,viewQuery:C,declTNode:o,data:j.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:J,incompleteFirstPass:!1}}function cm(s,o,u,c){const d=yv(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&wC(s).push(c,d.length-1))}function sv(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function lv(s,o,u,c){let d=!1;if(Ha()){const p=function eS(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let p=0;p<c.length;p++){const v=c[p];XE(u,v.selectors,!1)&&(d||(d=[]),pr(ss(u,o),s,v.type),Ji(v)?(hv(s,u),d.unshift(v)):d.push(v))}return d}(s,o,u),v=null===c?null:{"":-1};if(null!==p){d=!0,fm(u,s.data.length,p.length);for(let R=0;R<p.length;R++){const L=p[R];L.providersResolver&&L.providersResolver(L)}let C=!1,I=!1,x=fl(s,o,p.length,null);for(let R=0;R<p.length;R++){const L=p[R];u.mergedAttrs=xn(u.mergedAttrs,L.hostAttrs),pm(s,u,o,x,L),fv(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const j=L.type.prototype;!C&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!I&&(j.ngOnChanges||j.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),I=!0),x++}!function Vi(s,o){const c=o.directiveEnd,d=s.data,p=o.attrs,v=[];let C=null,I=null;for(let x=o.directiveStart;x<c;x++){const R=d[x],L=R.inputs,j=null===p||Vy(o)?null:nS(L,p);v.push(j),C=sv(L,x,C),I=sv(R.outputs,x,I)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=I}(s,u)}v&&function hm(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const p=u[o[d+1]];if(null==p)throw new ke(-301,!1);c.push(o[d],p)}}}(u,c,v)}return u.mergedAttrs=xn(u.mergedAttrs,u.attrs),d}function mC(s,o,u,c,d,p){const v=p.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const I=~o.index;(function Zd(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(c,d,v)}}function dv(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function hv(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function fv(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Ji(o)&&(u[""]=s)}}function fm(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function pm(s,o,u,c,d){s.data[c]=d;const p=d.factory||(d.factory=Dr(d.type)),v=new Wu(p,Ji(d),null);s.blueprint[c]=v,u[c]=v,mC(s,o,0,c,fl(s,u,d.hostVars,At),d)}function tS(s,o,u){const c=hr(o,s),d=dC(u),p=s[10],v=Cc(s,Ec(s,d,null,u.onPush?64:16,c,o,p,p.createRenderer(c,u),null,null));s[o.index]=v}function pa(s,o,u,c,d,p){const v=hr(s,o);!function Wf(s,o,u,c,d,p,v){if(null==p)un(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const C=null==v?pe(p):v(p,c||"",d);un(s)?s.setAttribute(o,d,C,u):u?o.setAttributeNS(u,d,C):o.setAttribute(d,C)}}(o[11],v,p,s.value,u,c,d)}function yC(s,o,u,c,d,p){const v=p[o];if(null!==v){const C=c.setInput;for(let I=0;I<v.length;){const x=v[I++],R=v[I++],L=v[I++];null!==C?c.setInput(u,L,x,R):u[R]=L}}}function nS(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function oi(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function zf(s,o){const u=fr(o,s);if(ms(u)){const c=u[1];80&u[2]?Kd(c,u,c.template,u[8]):u[5]>0&&pv(u)}}function pv(s){for(let c=Gn(s);null!==c;c=Ei(c))for(let d=10;d<c.length;d++){const p=c[d];if(1024&p[2]){const v=p[1];Kd(v,p,v.template,p[8])}else p[5]>0&&pv(p)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=fr(u[c],s);ms(d)&&d[5]>0&&pv(d)}}function iS(s,o){const u=fr(o,s),c=u[1];(function gm(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),$f(c,u,u[8])}function Cc(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function Kf(s){for(;s;){s[2]|=64;const o=Ke(s);if(Fl(s)&&!o)return s;s=o}return null}function Yf(s,o,u){const c=o[10];c.begin&&c.begin();try{Kd(s,o,s.template,u)}catch(d){throw ym(o,d),d}finally{c.end&&c.end()}}function mv(s){!function Zf(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=Gd(u),d=c[1];QT(d,c,d.template,u)}}(s[8])}function mm(s,o,u){Ka(0),o(s,u)}const _v=(()=>Promise.resolve(null))();function yv(s){return s[7]||(s[7]=[])}function wC(s){return s.cleanup||(s.cleanup=[])}function ym(s,o){const u=s[9],c=u?u.get(Wd,null):null;c&&c.handleError(o)}function vm(s,o,u,c,d){for(let p=0;p<u.length;){const v=u[p++],C=u[p++],I=o[v],x=s.data[v];null!==x.setInput?x.setInput(I,d,c,C):I[C]=d}}function Dn(s,o,u){const c=Vs(o,s);!function Of(s,o,u){un(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function gr(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,p=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?p=C:1==p?d=he(d,C):2==p&&(c=he(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const wv=new In("INJECTOR",-1);class Ev{get(o,u=ia){if(u===ia){const c=new Error(`NullInjectorError: No provider for ${ae(o)}!`);throw c.name="NullInjectorError",c}return u}}const Cv=new In("Set Injector scope."),Qf={},Iv={};let Jf;function EC(){return void 0===Jf&&(Jf=new Ev),Jf}function Em(s,o=null,u=null,c){const d=bv(s,o,u,c);return d._resolveInjectorDefTypes(),d}function bv(s,o=null,u=null,c){return new aS(s,u,o||EC(),c)}class aS{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];u&&jr(u,C=>this.processProvider(C,o,u)),jr([o],C=>this.processInjectorType(C,[],p)),this.records.set(wv,Qd(void 0,this));const v=this.records.get(Cv);this.scope=null!=v?v.value:null,this.source=d||("object"==typeof o?null:ae(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=ia,c=mt.Default){this.assertNotDestroyed();const d=se(this),p=On(void 0);try{if(!(c&mt.SkipSelf)){let C=this.records.get(o);if(void 0===C){const I=function Xd(s){return"function"==typeof s||"object"==typeof s&&s instanceof In}(o)&&Lt(o);C=I&&this.injectableDefInScope(I)?Qd(Yd(o),Qf):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&mt.Self?EC():this.parent).get(o,u=c&mt.Optional&&u===ia?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Io]=v[Io]||[]).unshift(ae(o)),d)throw v;return function ar(s,o,u,c){const d=s[Io];throw o[M]&&d.unshift(o[M]),s.message=function sa(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ae(o);if(Array.isArray(o))d=o.map(ae).join(" -> ");else if("object"==typeof o){let p=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];p.push(v+":"+("string"==typeof C?JSON.stringify(C):ae(C)))}d=`{${p.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(b,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Io]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{On(p),se(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ae(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ke(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=kr(o);const p=null==d&&o.ngModule||void 0,v=void 0===p?o:p,C=-1!==c.indexOf(v);if(void 0!==p&&(d=kr(p)),null==d)return!1;if(null!=d.imports&&!C){let R;c.push(v);try{jr(d.imports,L=>{this.processInjectorType(L,u,c)&&(void 0===R&&(R=[]),R.push(L))})}finally{}if(void 0!==R)for(let L=0;L<R.length;L++){const{ngModule:j,providers:J}=R[L];jr(J,ve=>this.processProvider(ve,j,J||B))}}this.injectorDefTypes.add(v);const I=Dr(v)||(()=>new v);this.records.set(v,Qd(I,Qf));const x=d.providers;if(null!=x&&!C){const R=o;jr(x,L=>this.processProvider(L,R,x))}return void 0!==p&&void 0!==o.providers}processProvider(o,u,c){let d=Ic(o=ne(o))?o:ne(o&&o.provide);const p=function Tv(s,o,u){return Jd(s)?Qd(void 0,s.useValue):Qd(Sv(s),Qf)}(o);if(Ic(o)||!0!==o.multi)this.records.get(d);else{let v=this.records.get(d);v||(v=Qd(void 0,Qf,!0),v.factory=()=>Bt(v.multi),this.records.set(d,v)),d=o,v.multi.push(o)}this.records.set(d,p)}hydrate(o,u){return u.value===Qf&&(u.value=Iv,u.value=u.factory()),"object"==typeof u.value&&u.value&&function lS(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Yd(s){const o=Lt(s),u=null!==o?o.factory:Dr(s);if(null!==u)return u;if(s instanceof In)throw new ke(204,!1);if(s instanceof Function)return function Dv(s){const o=s.length;if(o>0)throw function Eo(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new ke(204,!1);const u=function ci(s){const o=s&&(s[zi]||s[Jr]);if(o){const u=function vr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new ke(204,!1)}function Sv(s,o,u){let c;if(Ic(s)){const d=ne(s);return Dr(d)||Yd(d)}if(Jd(s))c=()=>ne(s.useValue);else if(function IC(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Bt(s.deps||[]));else if(function CC(s){return!(!s||!s.useExisting)}(s))c=()=>He(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function uS(s){return!!s.deps}(s))return Dr(d)||Yd(d);c=()=>new d(...Bt(s.deps))}return c}function Qd(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function Jd(s){return null!==s&&"object"==typeof s&&V in s}function Ic(s){return"function"==typeof s}let ga=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return Em({name:""},c,u,"");{const p=null!==(d=u.name)&&void 0!==d?d:"";return Em({name:p},u.parent,u.providers,p)}}}return s.THROW_IF_NOT_FOUND=ia,s.NULL=new Ev,s.\u0275prov=Qt({token:s,providedIn:"any",factory:()=>He(wv)}),s.__NG_ELEMENT_ID__=-1,s})();function AC(s,o){Id(Gd(s)[1],_n())}function bc(s){let o=function xC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let d;if(Ji(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new ke(903,"");d=o.\u0275dir}if(d){if(u){c.push(d);const v=s;v.inputs=th(s.inputs),v.declaredInputs=th(s.declaredInputs),v.outputs=th(s.outputs);const C=d.hostBindings;C&&Fv(s,C);const I=d.viewQuery,x=d.contentQueries;if(I&&ip(s,I),x&&Dc(s,x),ce(s.inputs,d.inputs),ce(s.declaredInputs,d.declaredInputs),ce(s.outputs,d.outputs),Ji(d)&&d.data.animation){const R=s.data;R.animation=(R.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let v=0;v<p.length;v++){const C=p[v];C&&C.ngInherit&&C(s),C===bc&&(u=!1)}}o=Object.getPrototypeOf(o)}!function RC(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const d=s[c];d.hostVars=o+=d.hostVars,d.hostAttrs=xn(d.hostAttrs,u=xn(u,d.hostAttrs))}}(c)}function th(s){return s===Cr?{}:s===B?[]:s}function ip(s,o){const u=s.viewQuery;s.viewQuery=u?(c,d)=>{o(c,d),u(c,d)}:o}function Dc(s,o){const u=s.contentQueries;s.contentQueries=u?(c,d,p)=>{o(c,d,p),u(c,d,p)}:o}function Fv(s,o){const u=s.hostBindings;s.hostBindings=u?(c,d)=>{o(c,d),u(c,d)}:o}let rh=null;function Qs(){if(!rh){const s=Vt.Symbol;if(s&&s.iterator)rh=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(rh=c)}}}return rh}function sp(s){return!!ih(s)&&(Array.isArray(s)||!(s instanceof Map)&&Qs()in s)}function ih(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function ai(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function Vv(s,o,u,c){const d=Se();return ai(d,Us(),o)&&(kt(),pa(Sn(),d,s,o,u,c)),Vv}function $v(s,o,u,c,d,p,v,C){const I=Se(),x=kt(),R=s+20,L=x.firstCreatePass?function OC(s,o,u,c,d,p,v,C,I){const x=o.consts,R=ha(o,s,4,v||null,Ni(x,C));lv(o,u,R,Ni(x,I)),Id(o,R);const L=R.tViews=lm(2,R,c,d,p,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,R),L.queries=o.queries.embeddedTView(R)),R}(R,x,I,o,u,c,d,p,v):x.data[R];gi(L,!1);const j=I[11].createComment("");lu(x,I,j,L),Un(j,I),Cc(I,I[R]=oi(j,I,j,L)),Qi(L)&&Ar(x,I,L),null!=v&&fa(I,L,C)}function Sm(s){return function ts(s,o){return s[o]}(function ju(){return dt.lFrame.contextLView}(),20+s)}function Nc(s,o=mt.Default){const u=Se();return null===u?He(s,o):vo(_n(),u,ne(s),o)}function tw(){throw new Error("invalid")}function ch(s,o,u){const c=Se();return ai(c,Us(),o)&&function yn(s,o,u,c,d,p,v,C){const I=hr(o,u);let R,x=o.inputs;!C&&null!=x&&(R=x[c])?(vm(s,u,R,c,d),ud(o)&&function fC(s,o){const u=fr(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function ov(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=v?v(d,o.value||"",c):d,un(p)?p.setProperty(I,c,d):ft(c)||(I.setProperty?I.setProperty(c,d):I[c]=d))}(kt(),Sn(),c,s,o,c[11],u,!1),ch}function Om(s,o,u,c,d){const v=d?"class":"style";vm(s,u,o.inputs[v],v,c)}function va(s,o,u,c){const d=Se(),p=kt(),v=20+s,C=d[11],I=d[v]=Li(C,o,function Cd(){return dt.lFrame.currentNamespace}()),x=p.firstCreatePass?function zC(s,o,u,c,d,p,v){const C=o.consts,x=ha(o,s,2,d,Ni(C,p));return lv(o,u,x,Ni(C,v)),null!==x.attrs&&gr(x,x.attrs,!1),null!==x.mergedAttrs&&gr(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,p,d,0,o,u,c):p.data[v];gi(x,!0);const R=x.mergedAttrs;null!==R&&An(C,I,R);const L=x.classes;null!==L&&Fy(C,I,L);const j=x.styles;return null!==j&&YE(C,I,j),64!=(64&x.flags)&&lu(p,d,I,x),0===function Uu(){return dt.lFrame.elementDepthCount}()&&Un(I,d),function ja(){dt.lFrame.elementDepthCount++}(),Qi(x)&&(Ar(p,d,x),function Gf(s,o,u){if(Fu(o)){const d=o.directiveEnd;for(let p=o.directiveStart;p<d;p++){const v=s.data[p];v.contentQueries&&v.contentQueries(1,u[p],p)}}}(p,x,d)),null!==c&&fa(d,x),va}function cp(){let s=_n();$a()?function Wl(){dt.lFrame.isParent=!1}():(s=s.parent,gi(s,!1));const o=s;!function Hl(){dt.lFrame.elementDepthCount--}();const u=kt();return u.firstCreatePass&&(Id(u,s),Fu(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Dd(s){return 0!=(16&s.flags)}(o)&&Om(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Rg(s){return 0!=(32&s.flags)}(o)&&Om(u,o,Se(),o.stylesWithoutHost,!1),cp}function Fm(s,o,u,c){return va(s,o,u,c),cp(),Fm}function rw(){return Se()}function ml(s){return!!s&&"function"==typeof s.then}function ZC(s){return!!s&&"function"==typeof s.subscribe}const YC=ZC;function dp(s,o,u,c){const d=Se(),p=kt(),v=_n();return function iw(s,o,u,c,d,p,v,C){const I=Qi(c),R=s.firstCreatePass&&wC(s),L=o[8],j=yv(o);let J=!0;if(3&c.type||C){const $e=hr(c,o),et=C?C($e):$e,Ae=j.length,gt=C?jt=>C(tn(jt[c.index])):c.index;if(un(u)){let jt=null;if(!C&&I&&(jt=function yS(s,o,u,c){const d=s.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const v=d[p];if(v===u&&d[p+1]===c){const C=o[7],I=d[p+2];return C.length>I?C[I]:null}"string"==typeof v&&(p+=2)}return null}(s,o,d,c.index)),null!==jt)(jt.__ngLastListenerFn__||jt).__ngNextListenerFn__=p,jt.__ngLastListenerFn__=p,J=!1;else{p=hh(c,o,L,p,!1);const dn=u.listen(et,d,p);j.push(p,dn),R&&R.push(d,gt,Ae,Ae+1)}}else p=hh(c,o,L,p,!0),et.addEventListener(d,p,v),j.push(p),R&&R.push(d,gt,Ae,v)}else p=hh(c,o,L,p,!1);const ve=c.outputs;let Ve;if(J&&null!==ve&&(Ve=ve[d])){const $e=Ve.length;if($e)for(let et=0;et<$e;et+=2){const $i=o[Ve[et]][Ve[et+1]].subscribe(p),Du=j.length;j.push(p,$i),R&&R.push(d,c.index,Du,-(Du+1))}}}(p,d,d[11],v,s,o,!!u,c),dp}function JC(s,o,u,c){try{return!1!==u(c)}catch(d){return ym(s,d),!1}}function hh(s,o,u,c,d){return function p(v){if(v===Function)return c;const C=2&s.flags?fr(s.index,o):o;0==(32&o[2])&&Kf(C);let I=JC(o,0,c,v),x=p.__ngNextListenerFn__;for(;x;)I=JC(o,0,x,v)&&I,x=x.__ngNextListenerFn__;return d&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function XC(s=1){return function rs(s){return(dt.lFrame.contextLView=function gf(s,o){for(;s>0;)o=o[15],s--;return o}(s,dt.lFrame.contextLView))[8]}(s)}function Rr(s,o,u,c,d){const p=s[u+1],v=null===o;let C=c?da(p):cu(p),I=!1;for(;0!==C&&(!1===I||v);){const R=s[C+1];rI(s[C],o)&&(I=!0,s[C+1]=c?zy(R):Wy(R)),C=c?da(R):cu(R)}I&&(s[u+1]=c?Wy(p):zy(p))}function rI(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&Gs(s,o)>=0}function Vm(s,o){return function Mo(s,o,u,c){const d=Se(),p=kt(),v=function Pi(s){const o=dt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);p.firstUpdatePass&&function cI(s,o,u,c){const d=s.data;if(null===d[u+1]){const p=d[ir()],v=function Pc(s,o){return o>=s.expandoStartIndex}(s,u);(function Ge(s,o){return 0!=(s.flags&(o?16:32))})(p,c)&&null===o&&!v&&(o=!1),o=function Nr(s,o,u,c){const d=function za(s){const o=dt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let p=c?o.residualClasses:o.residualStyles;if(null===d)0===(c?o.classBindings:o.styleBindings)&&(u=kc(u=mu(null,s,o,u,c),o.attrs,c),p=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==d)if(u=mu(d,s,o,u,c),null===p){let I=function IS(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==cu(c))return s[da(c)]}(s,o,c);void 0!==I&&Array.isArray(I)&&(I=mu(null,s,o,I[1],c),I=kc(I,o.attrs,c),function _l(s,o,u,c){s[da(u?o.classBindings:o.styleBindings)]=c}(s,o,c,I))}else p=function Jn(s,o,u){let c;const d=o.directiveEnd;for(let p=1+o.directiveStylingLast;p<d;p++)c=kc(c,s[p].hostAttrs,u);return kc(c,o.attrs,u)}(s,o,c)}return void 0!==p&&(c?o.residualClasses=p:o.residualStyles=p),u}(d,p,o,c),function de(s,o,u,c,d,p){let v=p?o.classBindings:o.styleBindings,C=da(v),I=cu(v);s[c]=u;let R,x=!1;if(Array.isArray(u)){const L=u;R=L[1],(null===R||Gs(L,R)>0)&&(x=!0)}else R=u;if(d)if(0!==I){const j=da(s[C+1]);s[c+1]=Gy(j,C),0!==j&&(s[j+1]=qy(s[j+1],c)),s[C+1]=function GT(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=Gy(C,0),0!==C&&(s[C+1]=qy(s[C+1],c)),C=c;else s[c+1]=Gy(I,0),0===C?C=c:s[I+1]=qy(s[I+1],c),I=c;x&&(s[c+1]=Wy(s[c+1])),Rr(s,R,c,!0),Rr(s,R,c,!1),function Me(s,o,u,c,d){const p=d?s.residualClasses:s.residualStyles;null!=p&&"string"==typeof o&&Gs(p,o)>=0&&(u[c+1]=zy(u[c+1]))}(o,R,s,c,p),v=Gy(C,I),p?o.classBindings=v:o.styleBindings=v}(d,p,o,u,v,c)}}(p,s,v,c),o!==At&&ai(d,v,o)&&function wa(s,o,u,c,d,p,v,C){if(!(3&o.type))return;const I=s.data,x=I[C+1];yl(function nC(s){return 1==(1&s)}(x)?_h(I,o,u,d,cu(x),v):void 0)||(yl(p)||function $T(s){return 2==(2&s)}(x)&&(p=_h(I,null,u,d,C,v)),function wc(s,o,u,c,d){const p=un(s);if(o)d?p?s.addClass(u,c):u.classList.add(c):p?s.removeClass(u,c):u.classList.remove(c);else{let v=-1===c.indexOf("-")?void 0:A.DashCase;if(null==d)p?s.removeStyle(u,c,v):u.style.removeProperty(c);else{const C="string"==typeof d&&d.endsWith("!important");C&&(d=d.slice(0,-10),v|=A.Important),p?s.setStyle(u,c,d,v):u.style.setProperty(c,d,C?"important":"")}}}(c,v,Vs(ir(),u),d,p))}(p,p.data[ir()],d,d[11],s,d[v+1]=function hI(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=ae(aa(s)))),s}(o,u),c,v)}(s,o,null,!0),Vm}function mu(s,o,u,c,d){let p=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(p=o[C],c=kc(c,p.hostAttrs,d),p!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function kc(s,o,u){const c=u?1:2;let d=-1;if(null!==o)for(let p=0;p<o.length;p++){const v=o[p];"number"==typeof v?d=v:d===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),Tr(s,v,!!u||o[++p]))}return void 0===s?null:s}function _h(s,o,u,c,d,p){const v=null===o;let C;for(;d>0;){const I=s[d],x=Array.isArray(I),R=x?I[1]:I,L=null===R;let j=u[d+1];j===At&&(j=L?B:void 0);let J=L?ra(j,c):R===c?j:void 0;if(x&&!yl(J)&&(J=ra(I,c)),yl(J)&&(C=J,v))return C;const ve=s[d+1];d=v?da(ve):cu(ve)}if(null!==o){let I=p?o.residualClasses:o.residualStyles;null!=I&&(C=ra(I,c))}return C}function yl(s){return void 0!==s}function _u(s,o=""){const u=Se(),c=kt(),d=s+20,p=c.firstCreatePass?ha(c,d,1,o,null):c.data[d],v=u[d]=function yc(s,o){return un(s)?s.createText(o):s.createTextNode(o)}(u[11],o);lu(c,u,v,p),gi(p,!1)}function yh(s){return Ea("",s,""),yh}function Ea(s,o,u){const c=Se(),d=function _a(s,o,u,c){return ai(s,Us(),u)?o+pe(u)+c:At}(c,s,o,u);return d!==At&&Dn(c,ir(),d),Ea}const wl=void 0;var SS=["en",[["a","p"],["AM","PM"],wl],[["AM","PM"],wl,wl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],wl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],wl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",wl,"{1} 'at' {0}",wl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function Vc(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Ca={};function wh(s){const o=function xS(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=zr(o);if(u)return u;const c=o.split("-")[0];if(u=zr(c),u)return u;if("en"===c)return SS;throw new Error(`Missing locale data for the locale "${s}".`)}function hw(s){return wh(s)[Ct.PluralCase]}function zr(s){return s in Ca||(Ca[s]=Vt.ng&&Vt.ng.common&&Vt.ng.common.locales&&Vt.ng.common.locales[s]),Ca[s]}var Ct=(()=>((Ct=Ct||{})[Ct.LocaleId=0]="LocaleId",Ct[Ct.DayPeriodsFormat=1]="DayPeriodsFormat",Ct[Ct.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ct[Ct.DaysFormat=3]="DaysFormat",Ct[Ct.DaysStandalone=4]="DaysStandalone",Ct[Ct.MonthsFormat=5]="MonthsFormat",Ct[Ct.MonthsStandalone=6]="MonthsStandalone",Ct[Ct.Eras=7]="Eras",Ct[Ct.FirstDayOfWeek=8]="FirstDayOfWeek",Ct[Ct.WeekendRange=9]="WeekendRange",Ct[Ct.DateFormat=10]="DateFormat",Ct[Ct.TimeFormat=11]="TimeFormat",Ct[Ct.DateTimeFormat=12]="DateTimeFormat",Ct[Ct.NumberSymbols=13]="NumberSymbols",Ct[Ct.NumberFormats=14]="NumberFormats",Ct[Ct.CurrencyCode=15]="CurrencyCode",Ct[Ct.CurrencySymbol=16]="CurrencySymbol",Ct[Ct.CurrencyName=17]="CurrencyName",Ct[Ct.Currencies=18]="Currencies",Ct[Ct.Directionality=19]="Directionality",Ct[Ct.PluralCase=20]="PluralCase",Ct[Ct.ExtraData=21]="ExtraData",Ct))();const Gm="en-US";let fw=Gm;function yr(s,o,u,c,d){if(s=ne(s),Array.isArray(s))for(let p=0;p<s.length;p++)yr(s[p],o,u,c,d);else{const p=kt(),v=Se();let C=Ic(s)?s:ne(s.provide),I=Sv(s);const x=_n(),R=1048575&x.providerIndexes,L=x.directiveStart,j=x.providerIndexes>>20;if(Ic(s)||!s.multi){const J=new Wu(I,d,Nc),ve=Gc(C,o,d?R:R+j,L);-1===ve?(pr(ss(x,v),p,C),Ap(p,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(J),v.push(J)):(u[ve]=J,v[ve]=J)}else{const J=Gc(C,o,R+j,L),ve=Gc(C,o,R,R+j),Ve=J>=0&&u[J],$e=ve>=0&&u[ve];if(d&&!$e||!d&&!Ve){pr(ss(x,v),p,C);const et=function xp(s,o,u,c,d){const p=new Wu(s,u,Nc);return p.multi=[],p.index=o,p.componentProviders=0,Sw(p,d,c&&!u),p}(d?Aw:ba,u.length,d,c,I);!d&&$e&&(u[ve].providerFactory=et),Ap(p,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,d&&(x.providerIndexes+=1048576),u.push(et),v.push(et)}else Ap(p,s,J>-1?J:ve,Sw(u[d?ve:J],I,!d&&c));!d&&c&&$e&&u[ve].componentProviders++}}}function Ap(s,o,u,c){const d=Ic(o),p=function Cm(s){return!!s.useClass}(o);if(d||p){const I=(p?ne(o.useClass):o).prototype.ngOnDestroy;if(I){const x=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const R=x.indexOf(u);-1===R?x.push(u,[c,I]):x[R+1].push(c,I)}else x.push(u,I)}}}function Sw(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function Gc(s,o,u,c){for(let d=u;d<c;d++)if(o[d]===s)return d;return-1}function ba(s,o,u,c){return t_(this.multi,[])}function Aw(s,o,u,c){const d=this.multi;let p;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=js(u,u[1],this.providerFactory.index,c);p=C.slice(0,v),t_(d,p);for(let I=v;I<C.length;I++)p.push(C[I])}else p=[],t_(d,p);return p}function t_(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function xw(s,o=[]){return u=>{u.providersResolver=(c,d)=>function $S(s,o,u){const c=kt();if(c.firstCreatePass){const d=Ji(s);yr(u,c.data,c.blueprint,d,!0),yr(o,c.data,c.blueprint,d,!1)}}(c,d?d(s):s,o)}}class Rw{}class Mw{resolveComponentFactory(o){throw function GS(s){const o=Error(`No component factory found for ${ae(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let r_=(()=>{class s{}return s.NULL=new Mw,s})();function GI(){return Wc(_n(),Se())}function Wc(s,o){return new Dh(hr(s,o))}let Dh=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=GI,s})();function WS(s){return s instanceof Dh?s.nativeElement:s}class WI{}let zS=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function Sh(){const s=Se(),u=fr(_n().index,s);return function Th(s){return s[11]}(ri(u)?u:s)}(),s})(),KS=(()=>{class s{}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:()=>null}),s})();class qI{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zI=new qI("13.3.6"),i_={};function Kr(s,o,u,c,d=!1){for(;null!==u;){const p=o[u.index];if(null!==p&&c.push(tn(p)),Yi(p))for(let C=10;C<p.length;C++){const I=p[C],x=I[1].firstChild;null!==x&&Kr(I[1],I,x,c)}const v=u.type;if(8&v)Kr(s,o,u.child,c);else if(32&v){const C=Z(u,o);let I;for(;I=C();)c.push(I)}else if(16&v){const C=zE(o,u);if(Array.isArray(C))c.push(...C);else{const I=Ke(o[16]);Kr(I[1],I,C,c,!0)}}u=d?u.projectionNext:u.next}return c}class Rp{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Kr(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(Yi(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Ry(o,c),ea(u,c))}this._attachedToViewContainer=!1}My(this._lView[1],this._lView)}onDestroy(o){cm(this._lView[1],this._lView,null,o)}markForCheck(){Kf(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Yf(this._lView[1],this._lView,this.context)}checkNoChanges(){!function vC(s,o,u){Hu(!0);try{Yf(s,o,u)}finally{Hu(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new ke(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function nm(s,o){Bf(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new ke(902,"");this._appRef=o}}class KI extends Rp{constructor(o){super(o),this._view=o}detectChanges(){mv(this._view)}checkNoChanges(){!function sS(s){Hu(!0);try{mv(s)}finally{Hu(!1)}}(this._view)}get context(){return null}}class ko extends r_{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=zn(o);return new Pw(u,this.ngModule)}}function Nw(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class Pw extends Rw{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function tC(s){return s.map(jT).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Nw(this.componentDef.inputs)}get outputs(){return Nw(this.componentDef.outputs)}create(o,u,c,d){const p=(d=d||this.ngModule)?function ZI(s,o){return{get:(u,c,d)=>{const p=s.get(u,i_,d);return p!==i_||c===i_?p:o.get(u,c,d)}}}(o,d.injector):o,v=p.get(WI,Va),C=p.get(KS,null),I=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=c?function iv(s,o,u){if(un(s))return s.selectRootElement(o,u===$t.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(I,c,this.componentDef.encapsulation):Li(v.createRenderer(null,this.componentDef),x,function s_(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(x)),L=this.componentDef.onPush?576:528,j=function Ov(s,o){return{components:[],scheduler:s||Xg,clean:_v,playerHandler:o||null,flags:0}}(),J=lm(0,null,null,1,0,null,null,null,null,null),ve=Ec(null,J,j,L,null,null,v,I,C,p);let Ve,$e;Ko(ve);try{const et=function rp(s,o,u,c,d,p){const v=u[1];u[20]=s;const I=ha(v,20,2,"#host",null),x=I.mergedAttrs=o.hostAttrs;null!==x&&(gr(I,x,!0),null!==s&&(An(d,s,x),null!==I.classes&&Fy(d,s,I.classes),null!==I.styles&&YE(d,s,I.styles)));const R=c.createRenderer(s,o),L=Ec(u,dC(o),null,o.onPush?64:16,u[20],I,c,R,p||null,null);return v.firstCreatePass&&(pr(ss(I,u),v,o.type),hv(v,I),fm(I,u.length,1)),Cc(u,L),u[20]=L}(R,this.componentDef,ve,v,I);if(R)if(c)An(I,R,["ng-version",zI.full]);else{const{attrs:Ae,classes:gt}=function HT(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let p=s[c];if("string"==typeof p)2===d?""!==p&&o.push(p,s[++c]):8===d&&u.push(p);else{if(!Ao(d))break;d=p}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&An(I,R,Ae),gt&&gt.length>0&&Fy(I,R,gt.join(" "))}if($e=En(J,20),void 0!==u){const Ae=$e.projection=[];for(let gt=0;gt<this.ngContentSelectors.length;gt++){const jt=u[gt];Ae.push(null!=jt?Array.from(jt):null)}}Ve=function Tm(s,o,u,c,d){const p=u[1],v=function uv(s,o,u){const c=_n();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),pm(s,c,o,fl(s,o,1,null),u));const d=js(o,s,c.directiveStart,c);Un(d,o);const p=hr(c,o);return p&&Un(p,o),d}(p,u,o);if(c.components.push(v),s[8]=v,d&&d.forEach(I=>I(v,o)),o.contentQueries){const I=_n();o.contentQueries(1,v,I.directiveStart)}const C=_n();return!p.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(is(C.index),mC(u[1],C,0,C.directiveStart,C.directiveEnd,o),dv(o,v)),v}(et,this.componentDef,ve,j,[AC]),$f(J,ve,null)}finally{Yo()}return new YS(this.componentType,Ve,Wc($e,ve),ve,$e)}}class YS extends class HI{}{constructor(o,u,c,d,p){super(),this.location=c,this._rootLView=d,this._tNode=p,this.instance=u,this.hostView=this.changeDetectorRef=new KI(d),this.componentType=o}get injector(){return new Hs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Ah{}class YI{}const xh=new Map;class XI extends Ah{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new ko(this);const c=Kn(o);this._bootstrapComponents=Ks(c.bootstrap),this._r3Injector=bv(o,u,[{provide:Ah,useValue:this},{provide:r_,useValue:this.componentFactoryResolver}],ae(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=ga.THROW_IF_NOT_FOUND,c=mt.Default){return o===ga||o===Ah||o===wv?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class o_ extends YI{constructor(o){super(),this.moduleType=o,null!==Kn(o)&&function JS(s){const o=new Set;!function u(c){const d=Kn(c,!0),p=d.id;null!==p&&(function QI(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ae(o)} vs ${ae(o.name)}`)}(p,xh.get(p),c),xh.set(p,c));const v=Ks(d.imports);for(const C of v)o.has(C)||(o.add(C),u(C))}(s)}(o)}create(o){return new XI(this.moduleType,o)}}function wu(s){return o=>{setTimeout(s,void 0,o)}}const Ti=class l_ extends m.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,p,v;let C=o,I=u||(()=>null),x=c;if(o&&"object"==typeof o){const L=o;C=null===(d=L.next)||void 0===d?void 0:d.bind(L),I=null===(p=L.error)||void 0===p?void 0:p.bind(L),x=null===(v=L.complete)||void 0===v?void 0:v.bind(L)}this.__isAsync&&(I=wu(I),C&&(C=wu(C)),x&&(x=wu(x)));const R=super.subscribe({next:C,error:I,complete:x});return o instanceof ee.w0&&o.add(R),R}};function Mh(){return this._results[Qs()]()}class qc{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Qs(),c=qc.prototype;c[u]||(c[u]=Mh)}get changes(){return this._changes||(this._changes=new Ti)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=_i(o);(this._changesDetected=!function ec(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],p=o[c];if(u&&(d=u(d),p=u(p)),p!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Nh=(()=>{class s{}return s.__NG_ELEMENT_ID__=sb,s})();const Uw=Nh,Bw=class extends Uw{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Ec(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(c[19]=p.createEmbeddedView(u)),$f(u,c,o),new Rp(c)}};function sb(){return c_(_n(),Se())}function c_(s,o){return 4&s.type?new Bw(o,s,Wc(s,o)):null}let Np=(()=>{class s{}return s.__NG_ELEMENT_ID__=ob,s})();function ob(){return $w(_n(),Se())}const jw=Np,Ph=class extends jw{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return Wc(this._hostTNode,this._hostLView)}get injector(){return new Hs(this._hostTNode,this._hostLView)}get parentInjector(){const o=vs(this._hostTNode,this._hostLView);if(Ja(o)){const u=xt(o,this._hostLView),c=Ur(o);return new Hs(u[1].data[c+8],u)}return new Hs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=bl(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,p){const v=o&&!function Cs(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const L=u||{};C=L.index,c=L.injector,d=L.projectableNodes,p=L.ngModuleRef}const I=v?o:new Pw(zn(o)),x=c||this.parentInjector;if(!p&&null==I.ngModule){const j=(v?x:this.parentInjector).get(Ah,null);j&&(p=j)}const R=I.create(x,d,void 0,p);return this.insert(R.hostView,C),R}insert(o,u){const c=o._lView,d=c[1];if(function Ba(s){return Yi(s[3])}(c)){const R=this.indexOf(o);if(-1!==R)this.detach(R);else{const L=c[3],j=new Ph(L,L[6],L[3]);j.detach(j.indexOf(o))}}const p=this._adjustIndex(u),v=this._lContainer;!function ca(s,o,u,c){const d=10+c,p=u.length;c>0&&(u[d-1][4]=o),c<p-10?(o[4]=u[d],ru(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function vc(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=128}(d,c,v,p);const C=ky(p,v),I=c[11],x=im(I,v[7]);return null!==x&&function cl(s,o,u,c,d,p){c[0]=d,c[6]=o,Bf(s,c,u,1,d,p)}(d,v[6],I,c,x,C),o.attachToViewContainerRef(),ru(Hw(v),p,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=bl(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Ry(this._lContainer,u);c&&(ea(Hw(this._lContainer),u),My(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Ry(this._lContainer,u);return c&&null!=ea(Hw(this._lContainer),u)?new Rp(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function bl(s){return s[8]}function Hw(s){return s[8]||(s[8]=[])}function $w(s,o){let u;const c=o[s.index];if(Yi(c))u=c;else{let d;if(8&s.type)d=tn(c);else{const p=o[11];d=p.createComment("");const v=hr(s,o);dl(p,im(p,v),d,function $E(s,o){return un(s)?s.nextSibling(o):o.nextSibling}(p,v),!1)}o[s.index]=u=oi(c,o,d,s),Cc(o,u)}return new Ph(u,s,o)}class zc{constructor(o){this.queryList=o,this.matches=null}clone(){return new zc(this.queryList)}setDirty(){this.queryList.setDirty()}}class Eu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let p=0;p<c;p++){const v=u.getByIndex(p);d.push(this.queries[v.indexInDeclarationView].clone())}return new Eu(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Cu(o,u).matches&&this.queries[u].setDirty()}}class Dl{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class d_{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,p=this.getByIndex(c).embeddedTView(o,d);p&&(p.indexInDeclarationView=c,null!==u?u.push(p):u=[p])}return null!==u?new d_(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Gw{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Gw(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const p=c[d];this.matchTNodeWithReadOption(o,u,sA(u,p)),this.matchTNodeWithReadOption(o,u,Yu(u,o,p,!1,!1))}else c===Nh?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Yu(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===Dh||d===Np||d===Nh&&4&u.type)this.addMatch(u.index,-2);else{const p=Yu(u,o,d,!1,!1);null!==p&&this.addMatch(u.index,p)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function sA(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function h_(s,o,u,c){return-1===u?function Ww(s,o){return 11&s.type?Wc(s,o):4&s.type?c_(s,o):null}(o,s):-2===u?function oA(s,o,u){return u===Dh?Wc(o,s):u===Nh?c_(o,s):u===Np?$w(o,s):void 0}(s,o,c):js(s,s[1],u,o)}function qw(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const p=s.data,v=u.matches,C=[];for(let I=0;I<v.length;I+=2){const x=v[I];C.push(x<0?null:h_(o,p[x],v[I+1],u.metadata.read))}d.matches=C}return d.matches}function Kc(s,o,u,c){const d=s.queries.getByIndex(u),p=d.matches;if(null!==p){const v=qw(s,o,d,u);for(let C=0;C<p.length;C+=2){const I=p[C];if(I>0)c.push(v[C/2]);else{const x=p[C+1],R=o[-I];for(let L=10;L<R.length;L++){const j=R[L];j[17]===j[3]&&Kc(j[1],j,x,c)}if(null!==R[9]){const L=R[9];for(let j=0;j<L.length;j++){const J=L[j];Kc(J[1],J,x,c)}}}}}return c}function Pp(s){const o=Se(),u=kt(),c=Kl();Ka(c+1);const d=Cu(u,c);if(s.dirty&&po(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const p=d.crossesNgTemplate?Kc(u,o,c,[]):qw(u,o,d,c);s.reset(p,WS),s.notifyOnChanges()}return!0}return!1}function zw(s,o,u,c){const d=kt();if(d.firstCreatePass){const p=_n();(function p_(s,o,u){null===s.queries&&(s.queries=new d_),s.queries.track(new Gw(o,u))})(d,new Dl(o,u,c),p.index),function ub(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function kp(s,o,u){const c=new qc(4==(4&u));cm(s,o,c,c.destroy),null===o[19]&&(o[19]=new Eu),o[19].queries.push(new zc(c))}(d,Se(),u)}function ji(){return function ab(s,o){return s[19].queries[o].queryList}(Se(),Kl())}function Cu(s,o){return s.queries.getByIndex(o)}function Lh(...s){}const Ib=new In("Application Initializer");let o0=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Lh,this.reject=Lh,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(ml(p))u.push(p);else if(YC(p)){const v=new Promise((C,I)=>{p.subscribe({complete:C,error:I})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(He(Ib,8))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const bb=new In("AppId",{providedIn:"root",factory:function Db(){return`${a0()}${a0()}${a0()}`}});function a0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const v_=new In("Platform Initializer"),Tb=new In("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),u0=new In("appBootstrapListener");let w_=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const Vh=new In("LocaleId",{providedIn:"root",factory:()=>wt(Vh,mt.Optional|mt.SkipSelf)||function jp(){return"undefined"!=typeof $localize&&$localize.locale||Gm}()}),l0=new In("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class gA{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let Rb=(()=>{class s{compileModuleSync(u){return new o_(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),p=Ks(Kn(u).declarations).reduce((v,C)=>{const I=zn(C);return I&&v.push(new Pw(I)),v},[]);return new gA(c,p)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const _A=(()=>Promise.resolve(0))();function E_(s){"undefined"==typeof Zone?_A.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class Hi{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ti(!1),this.onMicrotaskEmpty=new Ti(!1),this.onStable=new Ti(!1),this.onError=new Ti(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function C_(){let s=Vt.requestAnimationFrame,o=Vt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function vA(s){const o=()=>{!function yA(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(Vt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,d0(s),s.isCheckStableRunning=!0,I_(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),d0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,p,v,C)=>{try{return Mb(s),u.invokeTask(d,p,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||s.shouldCoalesceRunChangeDetection)&&o(),Nb(s)}},onInvoke:(u,c,d,p,v,C,I)=>{try{return Mb(s),u.invoke(d,p,v,C,I)}finally{s.shouldCoalesceRunChangeDetection&&o(),Nb(s)}},onHasTask:(u,c,d,p)=>{u.hasTask(d,p),c===d&&("microTask"==p.change?(s._hasPendingMicrotasks=p.microTask,d0(s),I_(s)):"macroTask"==p.change&&(s.hasPendingMacrotasks=p.macroTask))},onHandleError:(u,c,d,p)=>(u.handleError(d,p),s.runOutsideAngular(()=>s.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hi.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hi.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const p=this._inner,v=p.scheduleEventTask("NgZoneEvent: "+d,o,c0,Lh,Lh);try{return p.runTask(v,u,c)}finally{p.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const c0={};function I_(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function d0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Mb(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function Nb(s){s._nesting--,I_(s)}class Hp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ti,this.onMicrotaskEmpty=new Ti,this.onStable=new Ti,this.onError=new Ti}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let b_=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hi.assertNotInAngularZone(),E_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())E_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let p=-1;c&&c>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==p),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:p,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)(He(Hi))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac}),s})(),Uh=(()=>{class s{constructor(){this._applications=new Map,Qc.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return Qc.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();class h0{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function D_(s){Qc=s}let Qc=new h0,Iu=null;const f0=new In("AllowMultipleToken"),T_=new In("PlatformOnDestroy");class wA{constructor(o,u){this.name=o,this.token=u}}function kb(s,o,u=[]){const c=`Platform: ${o}`,d=new In(c);return(p=[])=>{let v=Bh();if(!v||v.injector.get(f0,!1)){const C=[...u,...p,{provide:d,useValue:!0}];s?s(C):function g0(s){if(Iu&&!Iu.get(f0,!1))throw new ke(400,"");Iu=s;const o=s.get(S_),u=s.get(v_,null);u&&u.forEach(c=>c())}(function EA(s=[],o){return ga.create({name:o,providers:[{provide:Cv,useValue:"platform"},{provide:T_,useValue:()=>Iu=null},...s]})}(C,c))}return function m0(s){const o=Bh();if(!o)throw new ke(401,"");return o}()}}function Bh(){var s;return null!==(s=null==Iu?void 0:Iu.get(S_))&&void 0!==s?s:null}let S_=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const C=function Fb(s,o){let u;return u="noop"===s?new Hp:("zone.js"===s?void 0:s)||new Hi({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),I=[{provide:Hi,useValue:C}];return C.run(()=>{const x=ga.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(x),L=R.injector.get(Wd,null);if(!L)throw new ke(402,"");return C.runOutsideAngular(()=>{const j=C.onError.subscribe({next:J=>{L.handleError(J)}});R.onDestroy(()=>{y0(this._modules,R),j.unsubscribe()})}),function jh(s,o,u){try{const c=u();return ml(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(L,C,()=>{const j=R.injector.get(o0);return j.runInitializers(),j.donePromise.then(()=>(function CI(s){Ft(s,"Expected localeId to be defined"),"string"==typeof s&&(fw=s.toLowerCase().replace(/_/g,"-"))}(R.injector.get(Vh,Gm)||Gm),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,c=[]){const d=A_({},c);return function p0(s,o,u){const c=new o_(u);return Promise.resolve(c)}(0,0,u).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(u){const c=u.injector.get(_0);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new ke(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ke(404,"");this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(T_,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(He(ga))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function A_(s,o){return Array.isArray(o)?o.reduce(A_,s):Object.assign(Object.assign({},s),o)}let _0=(()=>{class s{constructor(u,c,d,p){this._zone=u,this._injector=c,this._exceptionHandler=d,this._initStatus=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new F.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new F.y(I=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{Hi.assertNotInAngularZone(),E_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{Hi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{x.unsubscribe(),R.unsubscribe()}});this.isStable=(0,le.T)(v,C.pipe((0,re.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new ke(405,"");let d;d=u instanceof Rw?u:this._injector.get(r_).resolveComponentFactory(u),this.componentTypes.push(d.componentType);const p=function Pb(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Ah),C=d.create(ga.NULL,[],c||d.selector,p),I=C.location.nativeElement,x=C.injector.get(b_,null),R=x&&C.injector.get(Uh);return x&&R&&R.registerApplication(I,x),C.onDestroy(()=>{this.detachView(C.hostView),y0(this.components,C),R&&R.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new ke(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;y0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(u0,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)(He(Hi),He(ga),He(Wd),He(o0))},s.\u0275prov=Qt({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function y0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Vb=!0,x_=!1;function CA(){return x_=!0,Vb}function w0(){if(x_)throw new Error("Cannot enable prod mode after platform setup.");Vb=!1}let E0=(()=>{class s{}return s.__NG_ELEMENT_ID__=jb,s})();function jb(s){return function C0(s,o,u){if(ud(s)&&!u){const c=fr(s.index,o);return new Rp(c,c)}return 47&s.type?new Rp(o[16],o):null}(_n(),Se(),16==(16&s))}class T0{constructor(){}supports(o){return sp(o)}create(o){return new Zb(o)}}const Kb=(s,o)=>o;class Zb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Kb}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,p=null;for(;u||c;){const v=!c||u&&u.currentIndex<Jb(c,d,p)?u:c,C=Jb(v,d,p),I=v.currentIndex;if(v===c)d--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)d++;else{p||(p=[]);const x=C-d,R=I-d;if(x!=R){for(let j=0;j<x;j++){const J=j<p.length?p[j]:p[j]=0,ve=J+j;R<=ve&&ve<x&&(p[j]=J+1)}p[v.previousIndex]=R-x}}C!==I&&o(v,C,I)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!sp(o))throw new ke(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,p,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)p=o[C],v=this._trackByFn(C,p),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,p,v,C)),Object.is(u.item,p)||this._addIdentityChange(u,p)):(u=this._mismatch(u,p,v,C),c=!0),u=u._next}else d=0,function fu(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Qs()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(d,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,d)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let p;return null===o?p=this._itTail:(p=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,p,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,p,d)):o=this._addAfter(new Yb(u,c),p,d),o}_verifyReinsertion(o,u,c,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==p?o=this._reinsertAfter(p,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,p=o._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new Qb),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qb),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Yb{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class bA{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class Qb{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new bA,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class Xb{constructor(){}supports(o){return o instanceof Map||ih(o)}create(){return new S0}}class S0{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||ih(o)))throw new ke(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const p=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,p)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const p=d._prev,v=d._next;return p&&(p._next=v),v&&(v._prev=p),d._next=null,d._prev=null,d}const c=new A0(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class A0{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function M_(){return new x0([new T0])}let x0=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||M_()),deps:[[s,new $r,new si]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new ke(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:M_}),s})();function tD(){return new qp([new Xb])}let qp=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||tD()),deps:[[s,new $r,new si]]}}find(u){const c=this.factories.find(p=>p.supports(u));if(c)return c;throw new ke(901,"")}}return s.\u0275prov=Qt({token:s,providedIn:"root",factory:tD}),s})();const M0=kb(null,"core",[]);let TA=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(He(_0))},s.\u0275mod=Or({type:s}),s.\u0275inj=qt({}),s})()},3942:(Je,we,O)=>{O.d(we,{Z:()=>ke});var m=O(2090),ee=O(4859),F=O(9681),le=O(1877);class re{constructor(pe,be){this._delegate=pe,this.firebase=be,(0,F._addComponent)(pe,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=pe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pe){this._delegate.automaticDataCollectionEnabled=pe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pe=>{this._delegate.checkDestroyed(),pe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(pe,be=F._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Ye=this._delegate.container.getProvider(pe);return!Ye.isInitialized()&&"EXPLICIT"===(null===(qe=Ye.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Ye.initialize(),Ye.getImmediate({identifier:be})}_removeServiceInstance(pe,be=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pe).clearInstance(be)}_addComponent(pe){(0,F._addComponent)(this._delegate,pe)}_addOrOverwriteComponent(pe){(0,F._addOrOverwriteComponent)(this._delegate,pe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new m.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function he(){const Ue=function ae(Ue){const pe={},be={__esModule:!0,initializeApp:function Te(je,$={}){const Ee=F.initializeApp(je,$);if((0,m.r3)(pe,Ee.name))return pe[Ee.name];const Y=new Ue(Ee,be);return pe[Ee.name]=Y,Y},app:Ye,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(je){const $=je.name,Ee=$.replace("-compat","");if(F._registerComponent(je)&&"PUBLIC"===je.type){const Y=(ie=Ye())=>{if("function"!=typeof ie[Ee])throw ce.create("invalid-app-argument",{appName:$});return ie[Ee]()};void 0!==je.serviceProps&&(0,m.ZB)(Y,je.serviceProps),be[Ee]=Y,Ue.prototype[Ee]=function(...ie){return this._getService.bind(this,$).apply(this,je.multipleInstances?ie:[])}}return"PUBLIC"===je.type?be[Ee]:null},removeApp:function qe(je){delete pe[je]},useAsService:function Be(je,$){return"serverAuth"===$?null:$},modularAPIs:F}};function Ye(je){if(!(0,m.r3)(pe,je=je||F._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:je});return pe[je]}return be.default=be,Object.defineProperty(be,"apps",{get:function Ce(){return Object.keys(pe).map(je=>pe[je])}}),Ye.App=Ue,be}(re);return Ue.INTERNAL=Object.assign(Object.assign({},Ue.INTERNAL),{createFirebaseNamespace:he,extendNamespace:function pe(be){(0,m.ZB)(Ue,be)},createSubscribe:m.ne,ErrorFactory:m.LL,deepExtend:m.ZB}),Ue}(),H=new le.Yd("@firebase/app-compat");if((0,m.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ue=self.firebase.SDK_VERSION;Ue&&Ue.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ke=G;!function xe(Ue){(0,F.registerVersion)("@firebase/app-compat","0.1.26",Ue)}()},9681:(Je,we,O)=>{O.r(we),O.d(we,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>zi,_DEFAULT_ENTRY_NAME:()=>Ft,_addComponent:()=>sn,_addOrOverwriteComponent:()=>Qt,_apps:()=>rn,_clearComponents:()=>qi,_components:()=>kn,_getProvider:()=>qt,_registerComponent:()=>Pr,_removeServiceInstance:()=>Lt,deleteApp:()=>mt,getApp:()=>Jr,getApps:()=>Ri,initializeApp:()=>Ms,onLog:()=>On,registerVersion:()=>Tn,setLogLevel:()=>Ns});var m=O(5861),ee=O(4859),F=O(1877),le=O(2090),re=O(8766);class ge{constructor(X){this.container=X}getPlatformInfoString(){return this.container.getProviders().map(Re=>{if(function ce(W){const X=W.getComponent();return"VERSION"===(null==X?void 0:X.type)}(Re)){const Xe=Re.getImmediate();return`${Xe.library}/${Xe.version}`}return null}).filter(Re=>Re).join(" ")}}const ae="@firebase/app",G=new F.Yd("@firebase/app"),Ft="[DEFAULT]",Qe={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},rn=new Map,kn=new Map;function sn(W,X){try{W.container.addComponent(X)}catch(Re){G.debug(`Component ${X.name} failed to register with FirebaseApp ${W.name}`,Re)}}function Qt(W,X){W.container.addOrOverwriteComponent(X)}function Pr(W){const X=W.name;if(kn.has(X))return G.debug(`There were multiple attempts to register component ${X}.`),!1;kn.set(X,W);for(const Re of rn.values())sn(Re,W);return!0}function qt(W,X){const Re=W.container.getProvider("heartbeat").getImmediate({optional:!0});return Re&&Re.triggerHeartbeat(),W.container.getProvider(X)}function Lt(W,X,Re=Ft){qt(W,X).clearInstance(Re)}function qi(){kn.clear()}const vr=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class kr{constructor(X,Re,Xe){this._isDeleted=!1,this._options=Object.assign({},X),this._config=Object.assign({},Re),this._name=Re.name,this._automaticDataCollectionEnabled=Re.automaticDataCollectionEnabled,this._container=Xe,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(X){this.checkDestroyed(),this._automaticDataCollectionEnabled=X}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(X){this._isDeleted=X}checkDestroyed(){if(this.isDeleted)throw vr.create("app-deleted",{appName:this._name})}}const zi="9.8.2";function Ms(W,X={}){"object"!=typeof X&&(X={name:X});const Re=Object.assign({name:Ft,automaticDataCollectionEnabled:!1},X),Xe=Re.name;if("string"!=typeof Xe||!Xe)throw vr.create("bad-app-name",{appName:String(Xe)});const ct=rn.get(Xe);if(ct){if((0,le.vZ)(W,ct.options)&&(0,le.vZ)(Re,ct.config))return ct;throw vr.create("duplicate-app",{appName:Xe})}const Dt=new ee.H0(Xe);for(const It of kn.values())Dt.addComponent(It);const pn=new kr(W,Re,Dt);return rn.set(Xe,pn),pn}function Jr(W=Ft){const X=rn.get(W);if(!X)throw vr.create("no-app",{appName:W});return X}function Ri(){return Array.from(rn.values())}function mt(W){return di.apply(this,arguments)}function di(){return(di=(0,m.Z)(function*(W){const X=W.name;rn.has(X)&&(rn.delete(X),yield Promise.all(W.container.getProviders().map(Re=>Re.delete())),W.isDeleted=!0)})).apply(this,arguments)}function Tn(W,X,Re){var Xe;let ct=null!==(Xe=Qe[W])&&void 0!==Xe?Xe:W;Re&&(ct+=`-${Re}`);const Dt=ct.match(/\s|\//),pn=X.match(/\s|\//);if(Dt||pn){const It=[`Unable to register library "${ct}" with version "${X}":`];return Dt&&It.push(`library name "${ct}" contains illegal characters (whitespace or "/")`),Dt&&pn&&It.push("and"),pn&&It.push(`version name "${X}" contains illegal characters (whitespace or "/")`),void G.warn(It.join(" "))}Pr(new ee.wA(`${ct}-version`,()=>({library:ct,version:X}),"VERSION"))}function On(W,X){if(null!==W&&"function"!=typeof W)throw vr.create("invalid-log-argument");(0,F.Am)(W,X)}function Ns(W){(0,F.Ub)(W)}const Fn="firebase-heartbeat-store";let hi=null;function oo(){return hi||(hi=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(W,X)=>{0===X&&W.createObjectStore(Fn)}}).catch(W=>{throw vr.create("storage-open",{originalErrorMessage:W.message})})),hi}function rt(){return(rt=(0,m.Z)(function*(W){try{return(yield oo()).transaction(Fn).objectStore(Fn).get(fi(W))}catch(X){throw vr.create("storage-get",{originalErrorMessage:X.message})}})).apply(this,arguments)}function yt(W,X){return wr.apply(this,arguments)}function wr(){return(wr=(0,m.Z)(function*(W,X){try{const Xe=(yield oo()).transaction(Fn,"readwrite");return yield Xe.objectStore(Fn).put(X,fi(W)),Xe.done}catch(Re){throw vr.create("storage-set",{originalErrorMessage:Re.message})}})).apply(this,arguments)}function fi(W){return`${W.name}!${W.options.appId}`}class Er{constructor(X){this.container=X,this._heartbeatsCache=null;const Re=this.container.getProvider("app").getImmediate();this._storage=new q(Re),this._heartbeatsCachePromise=this._storage.read().then(Xe=>(this._heartbeatsCache=Xe,Xe))}triggerHeartbeat(){var X=this;return(0,m.Z)(function*(){const Xe=X.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),ct=Cr();if(null===X._heartbeatsCache&&(X._heartbeatsCache=yield X._heartbeatsCachePromise),X._heartbeatsCache.lastSentHeartbeatDate!==ct&&!X._heartbeatsCache.heartbeats.some(Dt=>Dt.date===ct))return X._heartbeatsCache.heartbeats.push({date:ct,agent:Xe}),X._heartbeatsCache.heartbeats=X._heartbeatsCache.heartbeats.filter(Dt=>{const pn=new Date(Dt.date).valueOf();return Date.now()-pn<=2592e6}),X._storage.overwrite(X._heartbeatsCache)})()}getHeartbeatsHeader(){var X=this;return(0,m.Z)(function*(){if(null===X._heartbeatsCache&&(yield X._heartbeatsCachePromise),null===X._heartbeatsCache||0===X._heartbeatsCache.heartbeats.length)return"";const Re=Cr(),{heartbeatsToSend:Xe,unsentEntries:ct}=function B(W,X=1024){const Re=[];let Xe=W.slice();for(const ct of W){const Dt=Re.find(pn=>pn.agent===ct.agent);if(Dt){if(Dt.dates.push(ct.date),K(Re)>X){Dt.dates.pop();break}}else if(Re.push({agent:ct.agent,dates:[ct.date]}),K(Re)>X){Re.pop();break}Xe=Xe.slice(1)}return{heartbeatsToSend:Re,unsentEntries:Xe}}(X._heartbeatsCache.heartbeats),Dt=(0,le.L)(JSON.stringify({version:2,heartbeats:Xe}));return X._heartbeatsCache.lastSentHeartbeatDate=Re,ct.length>0?(X._heartbeatsCache.heartbeats=ct,yield X._storage.overwrite(X._heartbeatsCache)):(X._heartbeatsCache.heartbeats=[],X._storage.overwrite(X._heartbeatsCache)),Dt})()}}function Cr(){return(new Date).toISOString().substring(0,10)}class q{constructor(X){this.app=X,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,m.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var X=this;return(0,m.Z)(function*(){return(yield X._canUseIndexedDBPromise)&&(yield function $t(W){return rt.apply(this,arguments)}(X.app))||{heartbeats:[]}})()}overwrite(X){var Re=this;return(0,m.Z)(function*(){var Xe;if(yield Re._canUseIndexedDBPromise){const Dt=yield Re.read();return yt(Re.app,{lastSentHeartbeatDate:null!==(Xe=X.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Dt.lastSentHeartbeatDate,heartbeats:X.heartbeats})}})()}add(X){var Re=this;return(0,m.Z)(function*(){var Xe;if(yield Re._canUseIndexedDBPromise){const Dt=yield Re.read();return yt(Re.app,{lastSentHeartbeatDate:null!==(Xe=X.lastSentHeartbeatDate)&&void 0!==Xe?Xe:Dt.lastSentHeartbeatDate,heartbeats:[...Dt.heartbeats,...X.heartbeats]})}})()}}function K(W){return(0,le.L)(JSON.stringify({version:2,heartbeats:W})).length}!function De(W){Pr(new ee.wA("platform-logger",X=>new ge(X),"PRIVATE")),Pr(new ee.wA("heartbeat",X=>new Er(X),"PRIVATE")),Tn(ae,"0.7.25",W),Tn(ae,"0.7.25","esm2017"),Tn("fire-js","")}("")},4859:(Je,we,O)=>{O.d(we,{H0:()=>ae,wA:()=>F,zt:()=>re});var m=O(5861),ee=O(2090);class F{constructor(G,H,ne){this.name=G,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const le="[DEFAULT]";class re{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const ne=new ee.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{const We=this.getOrInitializeService({instanceIdentifier:H});We&&ne.resolve(We)}catch(We){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),We=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(We)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if(We)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function ce(he){return"EAGER"===he.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:le})}catch(H){}for(const[H,ne]of this.instancesDeferred.entries()){const We=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:We});ne.resolve(xe)}catch(xe){}}}}clearInstance(G=le){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,m.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...H.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=le){return this.instances.has(G)}getOptions(G=le){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const We=this.getOrInitializeService({instanceIdentifier:ne,options:H});for(const[xe,ke]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&ke.resolve(We);return We}onInit(G,H){var ne;const We=this.normalizeInstanceIdentifier(H),xe=null!==(ne=this.onInitCallbacks.get(We))&&void 0!==ne?ne:new Set;xe.add(G),this.onInitCallbacks.set(We,xe);const ke=this.instances.get(We);return ke&&G(ke,We),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const ne=this.onInitCallbacks.get(H);if(ne)for(const We of ne)try{We(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(he=G,he===le?void 0:he),options:H}),this.instances.set(G,ne),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(We){}var he;return ne||null}normalizeInstanceIdentifier(G=le){return this.component?this.component.multipleInstances?G:le:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new re(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Je,we,O)=>{O.d(we,{Am:()=>he,Ub:()=>ae,Yd:()=>ce,in:()=>ee});const m=[];var ee=(()=>{return(G=ee||(ee={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",ee;var G})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},le=ee.INFO,re={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ge=(G,H,...ne)=>{if(H<G.logLevel)return;const We=(new Date).toISOString(),xe=re[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${We}]  ${G.name}:`,...ne)};class ce{constructor(H){this.name=H,this._logLevel=le,this._logHandler=ge,this._userLogHandler=null,m.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function ae(G){m.forEach(H=>{H.setLogLevel(G)})}function he(G,H){for(const ne of m){let We=null;H&&H.level&&(We=F[H.level]),ne.userLogHandler=null===G?null:(xe,ke,...Ue)=>{const pe=Ue.map(be=>{if(null==be)return null;if("string"==typeof be)return be;if("number"==typeof be||"boolean"==typeof be)return be.toString();if(be instanceof Error)return be.message;try{return JSON.stringify(be)}catch(qe){return null}}).filter(be=>be).join(" ");ke>=(null!=We?We:xe.logLevel)&&G({level:ee[ke].toLowerCase(),message:pe,args:Ue,type:xe.name})}}}},8766:(Je,we,O)=>{O.d(we,{Lj:()=>Te,X3:()=>Ye});var m=O(5861);let F,le;const ce=new WeakMap,ae=new WeakMap,he=new WeakMap,G=new WeakMap,H=new WeakMap;let xe={get($,Ee,Y){if($ instanceof IDBTransaction){if("done"===Ee)return ae.get($);if("objectStoreNames"===Ee)return $.objectStoreNames||he.get($);if("store"===Ee)return Y.objectStoreNames[1]?void 0:Y.objectStore(Y.objectStoreNames[0])}return be($[Ee])},set:($,Ee,Y)=>($[Ee]=Y,!0),has:($,Ee)=>$ instanceof IDBTransaction&&("done"===Ee||"store"===Ee)||Ee in $};function pe($){return"function"==typeof $?function Ue($){return $!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ge(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes($)?function(...Ee){return $.apply(qe(this),Ee),be(ce.get(this))}:function(...Ee){return be($.apply(qe(this),Ee))}:function(Ee,...Y){const ie=$.call(qe(this),Ee,...Y);return he.set(ie,Ee.sort?Ee.sort():[Ee]),be(ie)}}($):($ instanceof IDBTransaction&&function We($){if(ae.has($))return;const Ee=new Promise((Y,ie)=>{const te=()=>{$.removeEventListener("complete",me),$.removeEventListener("error",ue),$.removeEventListener("abort",ue)},me=()=>{Y(),te()},ue=()=>{ie($.error||new DOMException("AbortError","AbortError")),te()};$.addEventListener("complete",me),$.addEventListener("error",ue),$.addEventListener("abort",ue)});ae.set($,Ee)}($),(($,Ee)=>Ee.some(Y=>$ instanceof Y))($,function re(){return F||(F=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy($,xe):$)}function be($){if($ instanceof IDBRequest)return function ne($){const Ee=new Promise((Y,ie)=>{const te=()=>{$.removeEventListener("success",me),$.removeEventListener("error",ue)},me=()=>{Y(be($.result)),te()},ue=()=>{ie($.error),te()};$.addEventListener("success",me),$.addEventListener("error",ue)});return Ee.then(Y=>{Y instanceof IDBCursor&&ce.set(Y,$)}).catch(()=>{}),H.set(Ee,$),Ee}($);if(G.has($))return G.get($);const Ee=pe($);return Ee!==$&&(G.set($,Ee),H.set(Ee,$)),Ee}const qe=$=>H.get($);function Ye($,Ee,{blocked:Y,upgrade:ie,blocking:te,terminated:me}={}){const ue=indexedDB.open($,Ee),Oe=be(ue);return ie&&ue.addEventListener("upgradeneeded",at=>{ie(be(ue.result),at.oldVersion,at.newVersion,be(ue.transaction))}),Y&&ue.addEventListener("blocked",()=>Y()),Oe.then(at=>{me&&at.addEventListener("close",()=>me()),te&&at.addEventListener("versionchange",()=>te())}).catch(()=>{}),Oe}function Te($,{blocked:Ee}={}){const Y=indexedDB.deleteDatabase($);return Ee&&Y.addEventListener("blocked",()=>Ee()),be(Y).then(()=>{})}const Ce=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Be=new Map;function je($,Ee){if(!($ instanceof IDBDatabase)||Ee in $||"string"!=typeof Ee)return;if(Be.get(Ee))return Be.get(Ee);const Y=Ee.replace(/FromIndex$/,""),ie=Ee!==Y,te=Ie.includes(Y);if(!(Y in(ie?IDBIndex:IDBObjectStore).prototype)||!te&&!Ce.includes(Y))return;const me=function(){var ue=(0,m.Z)(function*(Oe,...at){const Ht=this.transaction(Oe,te?"readwrite":"readonly");let Ft=Ht.store;return ie&&(Ft=Ft.index(at.shift())),(yield Promise.all([Ft[Y](...at),te&&Ht.done]))[0]});return function(at){return ue.apply(this,arguments)}}();return Be.set(Ee,me),me}!function ke($){xe=$(xe)}($=>EF(wF({},$),{get:(Ee,Y,ie)=>je(Ee,Y)||$.get(Ee,Y,ie),has:(Ee,Y)=>!!je(Ee,Y)||$.has(Ee,Y)}))},5861:(Je,we,O)=>{function m(F,le,re,ge,ce,ae,he){try{var G=F[ae](he),H=G.value}catch(ne){return void re(ne)}G.done?le(H):Promise.resolve(H).then(ge,ce)}function ee(F){return function(){var le=this,re=arguments;return new Promise(function(ge,ce){var ae=F.apply(le,re);function he(H){m(ae,ge,ce,he,G,"next",H)}function G(H){m(ae,ge,ce,he,G,"throw",H)}he(void 0)})}}O.d(we,{Z:()=>ee})}},Je=>{Je(Je.s=5368)}]);